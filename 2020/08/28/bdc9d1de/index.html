<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        LeetCode å•è°ƒæ ˆ - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#496-%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E5%85%83%E7%B4%A0-I"><span class="toc-text">496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#503-%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E5%85%83%E7%B4%A0-II"><span class="toc-text">503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#739-%E6%AF%8F%E6%97%A5%E6%B8%A9%E5%BA%A6"><span class="toc-text">739. æ¯æ—¥æ¸©åº¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#901-%E8%82%A1%E7%A5%A8%E4%BB%B7%E6%A0%BC%E8%B7%A8%E5%BA%A6"><span class="toc-text">901. è‚¡ç¥¨ä»·æ ¼è·¨åº¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#84-%E6%9F%B1%E7%8A%B6%E5%9B%BE%E4%B8%AD%E6%9C%80%E5%A4%A7%E7%9A%84%E7%9F%A9%E5%BD%A2"><span class="toc-text">84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#85-%E6%9C%80%E5%A4%A7%E7%9F%A9%E5%BD%A2"><span class="toc-text">85. æœ€å¤§çŸ©å½¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#581-%E6%9C%80%E7%9F%AD%E6%97%A0%E5%BA%8F%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84"><span class="toc-text">581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E6%8E%A5%E9%9B%A8%E6%B0%B4"><span class="toc-text">42. æ¥é›¨æ°´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-33-%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97"><span class="toc-text">é¢è¯•é¢˜ 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-59-II-%E9%98%9F%E5%88%97%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-text">é¢è¯•é¢˜ 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5402-%E7%BB%9D%E5%AF%B9%E5%B7%AE%E4%B8%8D%E8%B6%85%E8%BF%87%E9%99%90%E5%88%B6%E7%9A%84%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84"><span class="toc-text">5402. ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#962-%E6%9C%80%E5%A4%A7%E5%AE%BD%E5%BA%A6%E5%9D%A1"><span class="toc-text">962. æœ€å¤§å®½åº¦å¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1124-%E8%A1%A8%E7%8E%B0%E8%89%AF%E5%A5%BD%E7%9A%84%E6%9C%80%E9%95%BF%E6%97%B6%E9%97%B4%E6%AE%B5"><span class="toc-text">1124. è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#907-%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%B0%8F%E5%80%BC%E4%B9%8B%E5%92%8C"><span class="toc-text">907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5454-%E7%BB%9F%E8%AE%A1%E5%85%A8-1-%E5%AD%90%E7%9F%A9%E5%BD%A2"><span class="toc-text">5454. ç»Ÿè®¡å…¨ 1 å­çŸ©å½¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-03-05-%E6%A0%88%E6%8E%92%E5%BA%8F"><span class="toc-text">é¢è¯•é¢˜ 03.05. æ ˆæ’åº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NC580-%E6%8A%A2%E6%89%93%E5%87%BA%E5%A4%B4%E9%B8%9F"><span class="toc-text">NC580. æŠ¢æ‰“å‡ºå¤´é¸Ÿ</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        LeetCode å•è°ƒæ ˆ
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2020-08-28 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#LeetCode" title="LeetCode">LeetCode</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <blockquote>
<p>ä» <a href="http://imlgw.top/2019/10/01/leetcode-zhan-dui-lie/">æ ˆ&amp;é˜Ÿåˆ—ä¸“é¢˜</a> ä¸­æŠ½å–å‡ºæ¥</p>
</blockquote>
<h2 id="496-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -I"><a href="#496-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -I" class="headerlink" title="496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/next-greater-element-i/">496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I</a></h2><p>ç»™å®šä¸¤ä¸ª<strong>æ²¡æœ‰é‡å¤å…ƒç´ </strong>çš„æ•°ç»„ nums1 å’Œ nums2 ï¼Œå…¶ä¸­ nums1 æ˜¯ nums2 çš„å­é›†ã€‚æ‰¾åˆ° nums1 ä¸­æ¯ä¸ªå…ƒç´ åœ¨ nums2 ä¸­çš„ä¸‹ä¸€ä¸ªæ¯”å…¶å¤§çš„å€¼ã€‚</p>
<p>nums1 ä¸­æ•°å­— x çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯æŒ‡ x åœ¨ nums2 ä¸­å¯¹åº”ä½ç½®çš„å³è¾¹çš„ç¬¬ä¸€ä¸ªæ¯” x å¤§çš„å…ƒç´ ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå¯¹åº”ä½ç½®è¾“å‡º-1ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>], nums2 = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>].</span><br><span class="line">è¾“å‡ºï¼š[-<span class="number">1</span>,<span class="number">3</span>,-<span class="number">1</span>]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">    å¯¹äº num1 ä¸­çš„æ•°å­— <span class="number">4</span>ï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -<span class="number">1</span>ã€‚</span><br><span class="line">    å¯¹äº num1 ä¸­çš„æ•°å­— <span class="number">1</span>ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ•°å­— <span class="number">1</span> å³è¾¹çš„ä¸‹ä¸€ä¸ªè¾ƒå¤§æ•°å­—æ˜¯ <span class="number">3</span>ã€‚</span><br><span class="line">    å¯¹äº num1 ä¸­çš„æ•°å­— <span class="number">2</span>ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -<span class="number">1</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [<span class="number">2</span>,<span class="number">4</span>], nums2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].</span><br><span class="line">è¾“å‡ºï¼š[<span class="number">3</span>,-<span class="number">1</span>]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">    å¯¹äº num1 ä¸­çš„æ•°å­— <span class="number">2</span>ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªè¾ƒå¤§æ•°å­—æ˜¯ <span class="number">3</span>ã€‚</span><br><span class="line">    å¯¹äº num1 ä¸­çš„æ•°å­— <span class="number">4</span>ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -<span class="number">1</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li><code>nums1</code>å’Œ<code>nums2</code>ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚</li>
<li><code>nums1</code>å’Œ<code>nums2</code> çš„æ•°ç»„å¤§å°éƒ½ä¸è¶…è¿‡ 1000ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å•è°ƒæ ˆï¼Œå¾ˆå°±ä¹‹å‰åœ¨é“¾è¡¨ä¸“é¢˜ä¸­åšè¿‡ä¸€æ¬¡ <a href="http://imlgw.top/2019/02/27/leetcode-lian-biao/#1019-%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E8%8A%82%E7%82%B9">é“¾è¡¨çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹</a> ä½†æ˜¯æ²¡æƒ³èµ·æ¥ï¼Œå¯èƒ½å½“æ—¶ä¹Ÿæ²¡ç•™ä¸‹å½±å“</p>
<p>è¿™é¢˜å…¶å®è¿˜æ¯”åŸå§‹çš„é¢˜åŠ äº†ä¸€ç‚¹éš¾åº¦ï¼ŒåŸå§‹çš„é¢˜å°±æ˜¯ num1==nums2 çš„æƒ…å†µï¼Œé‚£æ ·å°±ä¸éœ€è¦ HashMap è®°å½•äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] nextGreaterElement(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">    HashMap&lt;Integer,Integer&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums2.length;i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; nums2[stack.peek()]&lt;nums2[i])&#123;</span><br><span class="line">            map.put(nums2[stack.pop()],nums2[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] res=<span class="keyword">new</span> <span class="title class_">int</span>[nums1.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums1.length;i++) &#123;</span><br><span class="line">        res[i]=map.getOrDefault(nums1[i],-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="503-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -II"><a href="#503-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ -II" class="headerlink" title="503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/next-greater-element-ii/">503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  II</a></h2><p>ç»™å®šä¸€ä¸ªå¾ªç¯æ•°ç»„ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¾“å‡ºæ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ã€‚æ•°å­— x çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ æ˜¯æŒ‰æ•°ç»„éå†é¡ºåºï¼Œè¿™ä¸ªæ•°å­—ä¹‹åçš„ç¬¬ä¸€ä¸ªæ¯”å®ƒæ›´å¤§çš„æ•°ï¼Œè¿™æ„å‘³ç€ä½ åº”è¯¥å¾ªç¯åœ°æœç´¢å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º -1ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š[<span class="number">2</span>,-<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">è§£é‡Šï¼šç¬¬ä¸€ä¸ª <span class="number">1</span> çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°æ˜¯ <span class="number">2</span>ï¼›</span><br><span class="line">æ•°å­— <span class="number">2</span> æ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ï¼› </span><br><span class="line">ç¬¬äºŒä¸ª <span class="number">1</span> çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°éœ€è¦å¾ªç¯æœç´¢ï¼Œç»“æœä¹Ÿæ˜¯ <span class="number">2</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong> è¾“å…¥æ•°ç»„çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ 10000ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] nextGreaterElements(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span>[] res=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    Arrays.fill(res,-<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> index=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length*<span class="number">2</span>;i++) &#123;</span><br><span class="line">        index=i&gt;=nums.length?i%nums.length:i;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty()&amp;&amp;nums[stack.peek()]&lt;nums[index]) &#123;</span><br><span class="line">            res[stack.pop()]=nums[index];</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œä¸Šé¢ä¸€æ ·ï¼Œåªä¸è¿‡éœ€è¦å¾ªç¯éå†ä¸€éï¼Œæˆ‘æœ€å¼€å§‹çš„åšæ³•ç›¸å½“æ†¨æ†¨ï¼Œcopy äº†ä¸€ä¸ªä¸¤å€çš„æ•°ç»„ã€‚è¿˜éœ€è¦æ³¨æ„çš„å°±æ˜¯ <code>-1</code>çš„å¤„ç†</p>
<h2 id="739-æ¯æ—¥æ¸©åº¦"><a href="#739-æ¯æ—¥æ¸©åº¦" class="headerlink" title="739. æ¯æ—¥æ¸©åº¦"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/daily-temperatures/">739. æ¯æ—¥æ¸©åº¦</a></h2><p>æ ¹æ®æ¯æ—¥ æ°”æ¸© åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å…¥æ˜¯ä½ éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨ temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯ [1, 1, 4, 2, 1, 1, 0, 0]ã€‚</p>
<p>æç¤ºï¼šæ°”æ¸© åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯ [1, 30000]ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨ [30, 100] èŒƒå›´å†…çš„æ•´æ•°ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] dailyTemperatures(<span class="type">int</span>[] T) &#123;</span><br><span class="line">    <span class="type">int</span>[] res=<span class="keyword">new</span> <span class="title class_">int</span>[T.length];</span><br><span class="line">    <span class="keyword">if</span>(T==<span class="literal">null</span> || T.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;T.length;i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty()&amp;&amp;T[stack.peek()]&lt;T[i])&#123;</span><br><span class="line">            <span class="type">int</span> temp=stack.pop();</span><br><span class="line">            res[temp]=i-temp;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œä¸Šé¢ä¸¤é¢˜ä¸€æ ·ï¼Œå•è°ƒæ ˆçš„è§£æ³•ï¼Œä¸è¿‡è¿™é¢˜å¥½åƒå¯ä»¥ä¸ç”¨å•è°ƒæ ˆï¼Œå¯ä»¥ä»åå‘å‰é€’æ¨</p>
<h2 id="901-è‚¡ç¥¨ä»·æ ¼è·¨åº¦"><a href="#901-è‚¡ç¥¨ä»·æ ¼è·¨åº¦" class="headerlink" title="901. è‚¡ç¥¨ä»·æ ¼è·¨åº¦"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/online-stock-span/">901. è‚¡ç¥¨ä»·æ ¼è·¨åº¦</a></h2><p>ç¼–å†™ä¸€ä¸ª StockSpanner ç±»ï¼Œå®ƒæ”¶é›†æŸäº›è‚¡ç¥¨çš„æ¯æ—¥æŠ¥ä»·ï¼Œå¹¶è¿”å›è¯¥è‚¡ç¥¨å½“æ—¥ä»·æ ¼çš„è·¨åº¦ã€‚</p>
<p>ä»Šå¤©è‚¡ç¥¨ä»·æ ¼çš„è·¨åº¦è¢«å®šä¹‰ä¸ºè‚¡ç¥¨ä»·æ ¼å°äºæˆ–ç­‰äºä»Šå¤©ä»·æ ¼çš„æœ€å¤§è¿ç»­æ—¥æ•°ï¼ˆä»ä»Šå¤©å¼€å§‹å¾€å›æ•°ï¼ŒåŒ…æ‹¬ä»Šå¤©ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœæœªæ¥ 7 å¤©è‚¡ç¥¨çš„ä»·æ ¼æ˜¯ [100, 80, 60, 70, 60, 75, 85]ï¼Œé‚£ä¹ˆè‚¡ç¥¨è·¨åº¦å°†æ˜¯ [1, 1, 1, 2, 1, 4, 6]ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="string">&quot;StockSpanner&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>,<span class="string">&quot;next&quot;</span>], [[],[<span class="number">100</span>],[<span class="number">80</span>],[<span class="number">60</span>],[<span class="number">70</span>],[<span class="number">60</span>],[<span class="number">75</span>],[<span class="number">85</span>]]</span><br><span class="line">è¾“å‡ºï¼š[<span class="literal">null</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">é¦–å…ˆï¼Œåˆå§‹åŒ– S = StockSpanner()ï¼Œç„¶åï¼š</span><br><span class="line">S.next(<span class="number">100</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">1</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">80</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">1</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">60</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">1</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">70</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">2</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">60</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">1</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">75</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">4</span>ï¼Œ</span><br><span class="line">S.next(<span class="number">85</span>) è¢«è°ƒç”¨å¹¶è¿”å› <span class="number">6</span>ã€‚</span><br><span class="line"></span><br><span class="line">æ³¨æ„ ï¼ˆä¾‹å¦‚ï¼‰ S.next(<span class="number">75</span>) è¿”å› <span class="number">4</span>ï¼Œå› ä¸ºæˆªè‡³ä»Šå¤©çš„æœ€å <span class="number">4</span> ä¸ªä»·æ ¼</span><br><span class="line">ï¼ˆåŒ…æ‹¬ä»Šå¤©çš„ä»·æ ¼ <span class="number">75</span>) å°äºæˆ–ç­‰äºä»Šå¤©çš„ä»·æ ¼ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>è°ƒç”¨ StockSpanner.next(int price) æ—¶ï¼Œå°†æœ‰ 1 &lt;= price &lt;= 10^5</li>
<li>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æœ€å¤šå¯ä»¥è°ƒç”¨  10000 æ¬¡ StockSpanner.next</li>
<li>åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œæœ€å¤šè°ƒç”¨ 150000 æ¬¡ StockSpanner.next</li>
<li>æ­¤é—®é¢˜çš„æ€»æ—¶é—´é™åˆ¶å‡å°‘äº† 50%</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æˆ‘èµ·äº†ï¼Œä¸€æªç§’äº†ï¼Œæœ‰ä»€ä¹ˆå¥½è¯´çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StockSpanner</span> &#123;</span><br><span class="line"></span><br><span class="line">    Deque&lt;<span class="type">int</span>[]&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StockSpanner</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> price)</span> &#123;</span><br><span class="line">        <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; price&gt;=stack.peek()[<span class="number">0</span>])&#123;</span><br><span class="line">            res+=stack.pop()[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;price,res&#125;);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"><a href="#84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢" class="headerlink" title="84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢</a></h2><p>ç»™å®š <em>n</em> ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚</p>
<p>æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p>
<p><img src="https://i.loli.net/2019/12/12/a7pVfNcYuIKFgwA.png" alt="leetCode"></p>
<p>ä»¥ä¸Šæ˜¯æŸ±çŠ¶å›¾çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º 1ï¼Œç»™å®šçš„é«˜åº¦ä¸º <code>[2,1,5,6,2,3]</code>ã€‚</p>
<p><img src="https://i.loli.net/2019/12/12/FAvMk3zWf4RheDi.png" alt="leetCode"></p>
<p>å›¾ä¸­é˜´å½±éƒ¨åˆ†ä¸ºæ‰€èƒ½å‹¾å‹’å‡ºçš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œå…¶é¢ç§¯ä¸º <code>10</code> ä¸ªå•ä½ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å’Œä¸Šé¢å‡ é“é¢˜ä¸€æ ·ï¼Œå•è°ƒæ ˆçš„è§£æ³•ï¼Œè¿™é‡Œæ˜¯å•è°ƒé€’å¢æ ˆï¼Œ20msï¼Œ87%</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">largestRectangleArea</span><span class="params">(<span class="type">int</span>[] heights)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (heights==<span class="literal">null</span> || heights.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> maxArea= Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;heights.length;i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; heights[i]&lt;=heights[stack.peek()])&#123;</span><br><span class="line">            <span class="comment">//å½“å‰çš„æŸ±å­å°äºæ ˆé¡¶ï¼Œè¯´æ˜å½“å‰æ ˆé¡¶æœ€å¤šå‘å³æ‰©å±•åˆ° i-1</span></span><br><span class="line">            <span class="type">int</span> cur=stack.pop();</span><br><span class="line">            <span class="comment">//ä¸ºç©ºè¯´æ˜å‘å·¦æ— æ³•æ‰©å±•ï¼Œæ ‡ä¸º-1 ä¸å½±å“ç»“æœï¼ˆå¯ä»¥æå‰å°†-1 å‹æ ˆï¼‰</span></span><br><span class="line">            <span class="type">int</span> left=stack.isEmpty()?-<span class="number">1</span>:stack.peek();</span><br><span class="line">            <span class="comment">//è¿™é‡Œå…¶å®æ˜¯ (i-1)-(left+1)+1</span></span><br><span class="line">            maxArea=Math.max(maxArea,(i-left-<span class="number">1</span>)*heights[cur]);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤„ç†æ ˆä¸­å‰©ä¸‹çš„å…ƒç´ ï¼Œå³è¾¹æ˜¯è¾¹ç•Œï¼Œå‰©ä½™æ ˆä¸­æ‰€æœ‰çš„å…ƒç´ å®é™…ä¸Šéƒ½å¯ä»¥æ‰©å±•åˆ° heights.length-1</span></span><br><span class="line">    <span class="comment">//æ‰€ä»¥ä¸ºäº†è®©æ‰€æœ‰çš„å…ƒç´ éƒ½èƒ½å‡ºæ ˆï¼Œæˆ‘ä»¬å¯ä»¥å†æ•°ç»„çš„åé¢æƒ³è±¡æ·»åŠ ä¸€ä¸ª 0ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åœ¨åŸæ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ª 0)</span></span><br><span class="line">    <span class="keyword">while</span>(!stack.isEmpty())&#123; </span><br><span class="line">        <span class="type">int</span> cur=stack.pop();</span><br><span class="line">        <span class="type">int</span> left=stack.isEmpty()?-<span class="number">1</span>:stack.peek();</span><br><span class="line">        <span class="comment">//è¿™ä¸€æ­¥å¾ˆç§€ï¼Œåœ¨æ•°ç»„åé¢å†æƒ³è±¡ä¸€ä¸ª 0 å‡ºæ¥</span></span><br><span class="line">        <span class="comment">//è®©æ ˆä¸­å…ƒç´ å‘å³æ‰©å¼  (heights.length-1)-(left+1)+1</span></span><br><span class="line">        maxArea=Math.max(maxArea,(heights.length-left-<span class="number">1</span>)*heights[cur]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxArea;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯åˆ©ç”¨å•è°ƒæ ˆéå†æ¯ä¸€ä¸ªæŸ±å­ï¼Œ<strong>æ‰¾åˆ°æ¯ä¸€ä¸ªæŸ±å­å·¦è¾¹å’Œå³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ ï¼Œæ¯”å¦‚å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å½“å‰æŸ±å­å°çš„æ˜¯ iï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ i+1 è‚¯å®šæ˜¯å¤§äºç­‰äºå½“å‰æŸ±å­çš„ï¼Œå¹¶ä¸” i+1 æ˜¯å·¦è¾¹è¿ç»­å¤§äºå½“å‰æŸ±å­çš„æœ€åä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯å½“å‰æŸ±å­èƒ½æƒ³å·¦æ‰©å±•çš„è¾¹ç•Œä½ç½®ï¼Œå³è¾¹åŒç†ï¼Œæ—¢ç„¶æ˜¯è¦æ±‚å·¦å³æ¯”å½“å‰æŸ±å­å°çš„ç¬¬ä¸€ä¸ªï¼Œé‚£ä¹ˆå¾ˆæ˜æ˜¾å°±è¦ç”¨å•è°ƒé€’å¢æ ˆ</strong>ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥æ ¹æ®è¿™ä¸¤ä¸ªæ•°æ®è®¡ç®—å®Œå…¨åŒ…å«å½“å‰æŸ±å­çš„æœ€å¤§çš„çŸ©å½¢çš„é¢ç§¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š<code>3 4 5 4 3 6</code> </p>
<p>é¦–å…ˆ<code>3 4 5</code>éƒ½é¡ºåˆ©çš„å­˜å…¥æ ˆä¸­ï¼Œæ­¤æ—¶æ ˆä¸­å…ƒç´ ä¸º<code>ã€0ï¼Œ1ï¼Œ2ã€‘</code> ï¼Œå½“æƒ³å­˜å…¥ä¸‹ä¸€ä¸ªå…ƒç´ <code>i=3,h[i]=4</code>çš„æ—¶å€™ï¼Œå‘ç° 4 æ¯”å½“å‰æ ˆé¡¶å°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è®¡ç®—<strong>å®Œå…¨åŒ…å«æ ˆä¸­æ¯ä¸ªæŸ±å­</strong>çš„æœ€å¤§çŸ©å½¢çš„é¢ç§¯</p>
<ol>
<li><p>ç”±äºå½“å‰<code>i</code> ä½ç½®çš„å…ƒç´ æ˜¯æ¯”æ ˆé¡¶å°ï¼Œé‚£ä¹ˆå°±è¯´æ˜ <code>i-1</code> ä½ç½®çš„å…ƒç´ ä¸€å®šæ¯”å½“å‰æ ˆé¡¶å…ƒç´ å¤§ï¼ä¹Ÿå°±æ˜¯å‘å³è¾¹æœ€å¤šæ‰©å±•åˆ°<code>i-1</code>ä½ç½®</p>
</li>
<li><p>ç”±äºå•è°ƒæ ˆçš„ç»“æ„ï¼Œå½“å‰æ ˆé¡¶çš„ä¸‹ä¸€ä¸ªæ ˆä¸­å…ƒç´ <code>left</code>ï¼Œå…¶å®å°±æ˜¯å½“å‰æ ˆé¡¶çš„å·¦è¾¹æœ€è¿‘çš„æ¯”å®ƒå°çš„å…ƒç´ ï¼Œæ‰€ä»¥<code>left+1</code>ä½ç½®çš„å…ƒç´ ä¸€å®šæ˜¯æ¯”å½“å‰æ ˆé¡¶å…ƒç´ å¤§ï¼ˆä¹Ÿæœ‰å¯èƒ½ç›¸ç­‰ï¼‰ï¼ï¼Œæ‰€ä»¥å‘å·¦è¾¹æœ€å¤šæ‰©å±•åˆ° <code>left+1</code> ä½ç½®</p>
</li>
<li><p>ä¸Šé¢å…¶å®è¿˜åˆ†ææ¼äº†ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯æ ˆé¡¶å’Œ<code>i</code> ä½ç½®å…ƒç´ ç›¸ç­‰çš„æƒ…å†µï¼Œç¬¬ä¸€ç‚¹ä¸­æåˆ°çš„å…¶å®æ˜¯ <code>i</code> ä½ç½®å…ƒç´ å°äºæ ˆé¡¶çš„æƒ…å†µï¼Œå¦‚æœç›¸ç­‰ï¼Œé‚£ä¹ˆå‘å³èƒ½æ‰©å±•åˆ°çš„ä½ç½®è¿˜ä¼šæ˜¯<code>i-1</code>ä¹ˆï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œè‡³å°‘åº”è¯¥æ˜¯<code>i</code>ç”šè‡³æ›´å¤§ï¼Œé‚£æˆ‘ä»¬è¿™é‡Œè®¡ç®—çš„å³è¾¹ç•Œä¸å°±æ˜¯é”™è¯¯çš„ï¼Ÿé‚£æˆ‘ä»¬å°† <code>=</code> å»æ‰å¯ä»¥ä¹ˆï¼Ÿå»æ‰ä¹‹åå•è°ƒæ ˆå°±ä¸å†æ˜¯ä¸¥æ ¼å•è°ƒäº†ï¼Œè¿™æ ·çš„åˆ°çš„å³è¾¹ç•Œç¡®å®å‡†ç¡®äº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å·¦è¾¹ç•Œç”±äºæ ˆä¸­å­˜åœ¨ç›¸ç­‰çš„å…ƒç´ ï¼Œå°±å˜çš„ä¸å†å‡†ç¡®äº†ï¼</p>
</li>
<li><p>é‚£æˆ‘ä»¬å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µå‘¢ï¼Ÿå…¶å®æ ¹æœ¬å°±ä¸ç”¨å¤„ç†ï¼Œæ—¢ç„¶æ ˆé¡¶èƒ½<strong>å‘å³</strong>æ‰©å±•åˆ° <code>i-1</code> é‚£ä¹ˆåè¿‡æ¥ï¼Œ<code>i-1</code> ä¸€æ ·å¯ä»¥<strong>å‘å·¦</strong>æ‰©å±•åˆ°<strong>æ ˆé¡¶</strong> ä½ç½®ï¼Œè¿›è€Œè¿˜å¯ä»¥æ‰©å±•åˆ°<code>left+1</code>ä½ç½®ï¼Œè€Œå‘å·¦æ‰©å±•çš„<code>left+1</code>æ˜¯å‡†ç¡®çš„ï¼Œä¸ä¼šæœ‰è¯¯å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç­‰å¾…<code>i-1</code>ä½ç½®çš„å…ƒç´ å¼¹å‡ºï¼Œç„¶åå°±å¯ä»¥é‡æ–°è®¡ç®—å¾—åˆ°æœ€å¤§å€¼ï¼Œè¿™ä¸ªæœ€å¤§å€¼è‚¯å®šæ˜¯åŒ…å«ä¹‹å‰çš„å“ªä¸ªæœ€å¤§å½“ç„¶è¿™é‡Œå…¶å®é‚£ä¸ª <code>heights[i]&lt;=heights[stack.peek()]</code> ä¸­çš„ç­‰å·ä¹Ÿå¯ä»¥å»æ‰ï¼Œè¿™æ ·æ ˆå°±ä¸æ˜¯ä¸¥æ ¼å•è°ƒçš„äº†ï¼Œ<code>left+1</code>ä¹Ÿä¸å†å‡†ç¡®ï¼Œä½†æ˜¯æ­¤æ—¶ <code>i-1</code> å°±å‡†ç¡®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç­‰å¾…<code>left+1</code> å¼¹æ ˆä¹‹åå†é‡æ–°è®¡ç®—ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ç›¸ç­‰çš„æƒ…å†µæ˜¯ä¸ç”¨åšé¢å¤–çš„å¤„ç†</p>
<p><img src="http://static.imlgw.top/blog/20200129/gJPOkfEPDxwg.png?imageslim" alt="mark"></p>
<p>å¯ä»¥çœ‹åˆ°æŒ‰ç…§ä»£ç ä¸­çš„é€»è¾‘åœ¨è®¡ç®—å®Œå…¨åŒ…å«å½“å‰ç»¿è‰²çš„æ ˆé¡¶å…ƒç´ çš„æœ€å¤§çŸ©å½¢çš„æ—¶å€™å…¶å®åªè®¡ç®—åˆ°ä¸€éƒ¨åˆ†ï¼Œå½“è®¡ç®—åˆ°åé¢çš„ç›¸ç­‰çš„æŸ±å­çš„æ—¶å€™ä¼šå®Œå…¨åŒ…å«ä¹‹å‰çš„æŸ±å­çš„å€¼ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰é—®é¢˜</p>
</li>
</ol>
<p>â€‹       </p>
<p>ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œä»£ç å°±å¥½å†™å¤šäº†ï¼Œä¸è¿‡è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹å€¼å¾—æ³¨æ„ï¼Œå°±æ˜¯å¤„ç†æ ˆä¸­å‰©ä½™çš„å…ƒç´ ï¼Œå…¶å®æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯åœ¨æ•°ç»„çš„æœ«å°¾åŠ ä¸€ä¸ª 0ï¼Œè¿™æ ·ç¡®ä¿æ ˆä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥å‡ºæ ˆï¼Œä¸ç”¨é¢å¤–çš„å¤„ç†ï¼Œjava ä¸­æ²¡æ³•ç›´æ¥å‘æ•°ç»„ä¸­ push å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æƒ³è±¡æœ«å°¾æœ‰ä¸€ä¸ª 0ï¼Œé‚£ä¹ˆæ‰€æœ‰å…ƒç´ å‘å·¦èƒ½æ‰©å±•åˆ°çš„æœ€è¿œä½ç½®å°±æ˜¯ <code>heights.length-1</code></p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>åˆ†æ²»ï¼Œ480msï¼Œ27%</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†æ²» 480ms</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">largestRectangleArea</span><span class="params">(<span class="type">int</span>[] heights)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (heights==<span class="literal">null</span> || heights.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    largestRectangleArea(heights,<span class="number">0</span>,heights.length-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> maxArea;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> maxArea=Integer.MIN_VALUE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">largestRectangleArea</span><span class="params">(<span class="type">int</span>[] heights,<span class="type">int</span> left,<span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left&gt;right) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> minIndex=left;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=left;i&lt;=right;i++) &#123;</span><br><span class="line">        minIndex=heights[i]&lt;heights[minIndex]?i:minIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    maxArea=Math.max(heights[minIndex]*(right-left+<span class="number">1</span>),maxArea);</span><br><span class="line">    largestRectangleArea(heights,left,minIndex-<span class="number">1</span>);</span><br><span class="line">    largestRectangleArea(heights,minIndex+<span class="number">1</span>,right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†æ•°ç»„åŒºé—´ä»¥<code>minIndex</code>ä¸ºåˆ†ç•Œçº¿ï¼Œåˆ†åˆ«æ±‚å·¦è¾¹å’Œå³è¾¹çš„æœ€å¤§é¢ç§¯ï¼Œæ—¶é—´å¤æ‚åº¦<code>O(NlogN)</code></p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>ä¼˜åŒ–çš„åˆ†æ²» 1msï¼Œ100%ï¼Œæ²¡æƒ³åˆ°æ¯”å•è°ƒæ ˆè¿˜å¿«ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">largestRectangleArea</span><span class="params">(<span class="type">int</span>[] heights)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (heights==<span class="literal">null</span> || heights.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> largestRectangleArea(heights,<span class="number">0</span>,heights.length-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">largestRectangleArea</span><span class="params">(<span class="type">int</span>[] heights,<span class="type">int</span> left,<span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left&gt;right) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> minIndex=left;</span><br><span class="line">    <span class="type">boolean</span> up=<span class="literal">true</span>;</span><br><span class="line">    <span class="type">boolean</span> down=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=left+<span class="number">1</span>;i&lt;=right;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (heights[i]&lt;heights[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            up=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (heights[i]&gt;heights[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            down=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        minIndex=heights[i]&lt;heights[minIndex]?i:minIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (up) &#123;</span><br><span class="line">        <span class="type">int</span> maxArea=-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=left;i&lt;=right;i++) &#123;</span><br><span class="line">            maxArea=Math.max(maxArea,(right-i+<span class="number">1</span>)*heights[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxArea;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (down) &#123;</span><br><span class="line">        <span class="type">int</span> maxArea=-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=right;i&gt;=left;i--) &#123;</span><br><span class="line">            maxArea=Math.max(maxArea,(i-left+<span class="number">1</span>)*heights[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxArea;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(heights[minIndex]*(right-left+<span class="number">1</span>),Math.max(largestRectangleArea(heights,minIndex+<span class="number">1</span>,right),largestRectangleArea(heights,left,minIndex-<span class="number">1</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®ç›¸æ¯”äºä¸Šé¢çš„åˆ†æ²»ï¼Œå°±æ˜¯å¤šäº†ä¸€æ­¥åˆ¤æ–­å½“å‰åŒºé—´æ˜¯å¦æœ‰åºï¼Œå› ä¸ºæœ‰åºçš„è¯å°±å¯ä»¥ç›´æ¥éå†å¾—åˆ°åŒºé—´çš„æœ€å¤§çŸ©å½¢ï¼Œä¸ç”¨å†é€’å½’åšåˆ†æ²»ï¼Œæˆ‘è¿™é‡Œåšäº†ä¸¤ä¸ªæœ‰åºçš„åˆ¤æ–­ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰çš„å¤šä½™ï¼Œæˆ‘çœ‹çš„è¯„è®ºéƒ½åªæœ‰ä¸€ä¸ª</p>
<h2 id="85-æœ€å¤§çŸ©å½¢"><a href="#85-æœ€å¤§çŸ©å½¢" class="headerlink" title="85. æœ€å¤§çŸ©å½¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximal-rectangle/">85. æœ€å¤§çŸ©å½¢</a></h2><p>ç»™å®šä¸€ä¸ªä»…åŒ…å« 0 å’Œ 1 çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« 1 çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;0&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;1&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;0&quot;</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ç‰¹æ„åœ¨åšäº†ä¸Šé¢ä¸€é¢˜åæ²¡æœ‰é©¬ä¸Šåšè¿™ä¸€é¢˜ï¼Œä¸‹é¢çš„æ˜¯ç¬¬äºŒå¤©ä¸‹åˆåšçš„ï¼Œè¿˜è¡Œï¼Œæ²¡å¿˜è®°ğŸ˜‚ï¼Œå°±æ˜¯å†™çš„æœ‰ç‚¹éš¾çœ‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//update: 2020.4.12</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximalRectangle</span><span class="params">(<span class="type">char</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(matrix==<span class="literal">null</span> || matrix.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> M=matrix.length,N=matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span>[][] height=<span class="keyword">new</span> <span class="title class_">int</span>[M][N+<span class="number">1</span>]; <span class="comment">//æ¯ä¸€å±‚å¤šåŠ ä¸€ä¸ª 0, æ–¹ä¾¿åé¢å‡ºæ ˆ</span></span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;M;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(matrix[i][j]==<span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                height[i][j]=i-<span class="number">1</span>&gt;=<span class="number">0</span>?height[i-<span class="number">1</span>][j]+<span class="number">1</span>:<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(maxRectangle(height[i]),res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxRectangle</span><span class="params">(<span class="type">int</span>[] height)</span>&#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;height.length;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; height[i]&lt;height[stack.peek()])&#123;</span><br><span class="line">            <span class="type">int</span> cur=stack.pop();</span><br><span class="line">            <span class="comment">//æ ˆä¸ºç©ºçš„æ—¶å€™è¯´æ˜å·¦è¾¹çš„å…¨éƒ¨æ˜¯æ¯”å½“å‰æ ˆé¡¶å¤§çš„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ‰©å±•åˆ° 0, æ‰€ä»¥è¿™é‡Œåº”è¯¥æ˜¯-1</span></span><br><span class="line">            <span class="type">int</span> left=stack.isEmpty()?-<span class="number">1</span>:stack.peek();</span><br><span class="line">            <span class="comment">//left+1 ~ i-1 = i-1-left</span></span><br><span class="line">            max=Math.max((i-<span class="number">1</span>-left)*height[cur],max);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®è®¡ç®— height æœ‰ä¸€ç‚¹åŠ¨æ€è§„åˆ’çš„æ„æ€ï¼Œæˆ‘ä¸Šé¢ç›¸å½“äºå†™äº†ä¸ªäºŒç»´çš„åŠ¨æ€è§„åˆ’</p>
<blockquote>
<p>2020.4.12 é‡å†™äº†ä¸€éï¼Œç„¶åæ›´æ–°äº†ä»£ç ï¼Œä¹‹å‰çš„ä»£ç ä¸å¤Ÿç®€æ´</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximalRectangle</span><span class="params">(<span class="type">char</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (matrix==<span class="literal">null</span> || matrix.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ– height æ•°ç»„ï¼Œåœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤ 0) è®©æ‰€æœ‰å…ƒç´ å¯ä»¥å‡ºæ ˆ</span></span><br><span class="line">    <span class="type">int</span>[] height=<span class="keyword">new</span> <span class="title class_">int</span>[matrix[<span class="number">0</span>].length+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//è®°å½•æ¯ä¸€å±‚çš„ height</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;matrix.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;matrix[<span class="number">0</span>].length;j++) &#123;</span><br><span class="line">            height[j]=matrix[i][j]==<span class="string">&#x27;1&#x27;</span>?height[j]+<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        max=Math.max(max,maxArea(height));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>maxArea</code>å¯ä»¥ç›´æ¥é‡‡ç”¨ä¸Šé¢ 84 é¢˜çš„åˆ†æ²»</p>
<h2 id="581-æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„"><a href="#581-æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„" class="headerlink" title="581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/shortest-unsorted-continuous-subarray/">581. æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½ éœ€è¦å¯»æ‰¾ä¸€ä¸ª<strong>è¿ç»­çš„å­æ•°ç»„</strong>ï¼Œå¦‚æœå¯¹è¿™ä¸ªå­æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚</p>
<p>ä½ æ‰¾åˆ°çš„å­æ•°ç»„åº”æ˜¯<strong>æœ€çŸ­</strong>çš„ï¼Œè¯·è¾“å‡ºå®ƒçš„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">15</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šä½ åªéœ€è¦å¯¹ [<span class="number">6</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">9</span>] è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ :</strong></p>
<ol>
<li>è¾“å…¥çš„æ•°ç»„é•¿åº¦èŒƒå›´åœ¨ [1, 10,000]ã€‚</li>
<li>è¾“å…¥çš„æ•°ç»„å¯èƒ½åŒ…å«<strong>é‡å¤</strong>å…ƒç´  ï¼Œæ‰€ä»¥<strong>å‡åº</strong>çš„æ„æ€æ˜¯**&lt;=ã€‚**</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p><del>å•è°ƒæ ˆçš„è§£æ³•æ˜å¤©å†å†™</del></p>
<p>é¸½äº†æŒºé•¿æ—¶é—´ï¼Œå•è°ƒæ ˆçš„è§£æ³•è¿˜æ˜¯æŒºå¥½çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findUnsortedSubarray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> left=Integer.MAX_VALUE,right=Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; nums[stack.peek()]&gt;nums[i])&#123;</span><br><span class="line">            left=Math.min(stack.pop(),left); <span class="comment">//å·¦è¾¹ç•Œæ­£ç¡®ä½ç½®ï¼ˆæœ€å°å€¼ï¼‰</span></span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    stack.clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=nums.length-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; nums[stack.peek()]&lt;nums[i])&#123;</span><br><span class="line">            right=Math.max(stack.pop(),right); <span class="comment">//å³è¾¹ç•Œæ­£ç¡®ä½ç½®ï¼ˆæœ€å¤§å€¼ï¼‰</span></span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left&gt;right?<span class="number">0</span>:right-left+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ªå•è°ƒæ ˆä¸­å­˜çš„æ˜¯ä»å·¦åˆ°å³é€’å¢çš„åºåˆ—ï¼Œå½“é‡åˆ°<code>nums[i]</code>å°äºæ ˆé¡¶æ—¶ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®æ˜¯é”™ä½çš„ï¼Œæ­£ç¡®çš„ä½ç½®åº”è¯¥æ˜¯<strong>æ ˆé¡¶çš„å…ƒç´ </strong>çš„ä½ç½®ï¼Œæˆ‘ä»¬è¿™é‡Œæ±‚çš„å°±æ˜¯ä¸€ä¸ª<strong>æœ€å°çš„é”™ä½çš„ç´¢å¼•</strong></p>
<p>ç¬¬äºŒä¸ªå•è°ƒæ ˆä¸­å­˜çš„æ˜¯ä»å³å‘å·¦é€’å‡çš„åºåˆ—ï¼Œå½“é‡åˆ°<code>nums[i]</code>å¤§äºæ ˆé¡¶æ—¶ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®æ˜¯é”™ä½çš„ï¼Œæ­£ç¡®çš„ä½ç½®åº”è¯¥æ˜¯<strong>æ ˆé¡¶çš„å…ƒç´ </strong>ï¼Œè¿™é‡Œæ±‚çš„å°±æ˜¯ä¸€ä¸ª<strong>æœ€å¤§çš„é”™ä½çš„ç´¢å¼•</strong> ï¼Œä¸¤è€…ä¹‹é—´çš„è·ç¦»å…¶å®å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦æ±‚çš„æœ€çŸ­æ— åºå­æ•°ç»„é•¿åº¦</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>å…¶å®å’Œä¸Šé¢çš„å•è°ƒæ ˆçš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ‰¾ç¬¬ä¸€ä¸ªï¼ˆæœ€å°ï¼‰å’Œæœ€åä¸€ä¸ªï¼ˆæœ€å¤§ï¼‰é”™ä½çš„å…ƒç´ ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬æ±‚å‡ºé”™ä½çš„å…ƒç´ åè¿˜éœ€è¦å†éå†æ‰¾åˆ°åŸæœ¬æ­£ç¡®çš„ä½ç½®ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//O(1) ç©ºé—´çš„è§£æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findUnsortedSubarray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[<span class="number">0</span>]&gt;nums[nums.length-<span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">return</span> nums.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> max=Integer.MIN_VALUE,min=Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i]&lt;nums[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            min=Math.min(min,nums[i]); <span class="comment">//æ— åºåºåˆ—ä¸­çš„æœ€å°å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=nums.length-<span class="number">1</span>;i&gt;<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i]&lt;nums[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            max=Math.max(max,nums[i-<span class="number">1</span>]); <span class="comment">//æ— åºåºåˆ—ä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>,right=nums.length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left&lt;nums.length)&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[left]&gt;min) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        left++; <span class="comment">//å·¦è¾¹ç•Œæ­£ç¡®ä½ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(right&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[right]&lt;max) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        right--; <span class="comment">//å³è¾¹ç•Œæ­£ç¡®ä½ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> right&lt;left?<span class="number">0</span>:right-left+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="42-æ¥é›¨æ°´"><a href="#42-æ¥é›¨æ°´" class="headerlink" title="42. æ¥é›¨æ°´"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/trapping-rain-water/">42. æ¥é›¨æ°´</a></h2><p>ç»™å®š <em>n</em> ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p>
<p><img src="https://i.loli.net/2019/05/14/5cda71129045d93180.png" alt="rainwatertrap.png"></p>
<p>ä¸Šé¢æ˜¯ç”±æ•°ç»„ <code>[0,1,0,2,1,0,1,3,2,1,2,1]</code> è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸‰</strong></p>
<p>å•è°ƒæ ˆè§£æ³•ï¼ŒåŒæŒ‡é’ˆçš„è§£æ³•æ”¾åœ¨ <a href="http://imlgw.top/2019/05/04/leetcode-shu-zu/#42-%E6%8E%A5%E9%9B%A8%E6%B0%B4">æ•°ç»„ä¸“é¢˜</a> ä¸­ï¼Œå…¶å®æˆ‘æ„Ÿè§‰ç†Ÿæ‚‰å•è°ƒæ ˆçš„è¯ï¼Œå•è°ƒæ ˆçš„è§£æ³•ä¼šæ¯”å…¶ä»–æ–¹æ³•æ›´å¥½ç†è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">trap6</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (height == <span class="literal">null</span> || height.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;(); <span class="comment">//æ ˆé‡Œé¢ç»´æŠ¤ä¸€ä¸ªé€’å‡åºåˆ—</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; height.length; i++)&#123;</span><br><span class="line">        <span class="keyword">while</span> ( ! stack.isEmpty() &amp;&amp; height[stack.peek()] &lt; height[i]) &#123; <span class="comment">//å½“éå†çš„å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> stack.pop(); <span class="comment">//æ ˆé¡¶å¼¹å‡ºæ¥</span></span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) <span class="keyword">break</span>;</span><br><span class="line">            res += (Math.min(height[i],height[stack.peek()]) - height[tmp]) * (i - stack.peek() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç»´æŠ¤é€’å‡åºåˆ—</span></span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å•è°ƒé€’å‡æ ˆï¼Œæ ˆä¸­å­˜æŸ±å­çš„ç´¢å¼•ï¼Œå½“é‡åˆ°å¤§äºæ ˆé¡¶çš„å…ƒç´ çš„æ—¶å€™å°±å¼€å§‹å¼¹æ ˆï¼Œè®¡ç®—<strong>æ ˆé¡¶å…ƒç´ å’Œå·¦å³é¦–ä¸ªå¤§äºæ ˆé¡¶å…ƒç´ çš„æ‰€èƒ½æ„æˆçš„é‚£ä¸€å±‚çš„æ¥æ°´é‡</strong>ï¼Œå¯¹åº”ä¸‹é¢çš„å›¾ç†è§£å°±æ˜¯</p>
<p><strong><code>(Math.min(height[i],height[stack.peek()])-curTop) * (i-stack.peek()-1)</code></strong></p>
<p><img src="http://static.imlgw.top/blog/20200129/f0b4lo2Xk5Q3.png?imageslim" alt="mark"></p>
<p>ä¾æ¬¡è®¡ç®—â‘ â‘¡â‘¢ä½ç½®çš„é¢ç§¯ï¼Œè¿™æ ·çš„æ€è·¯æ„Ÿè§‰ä¼šæ›´åŠ çš„è‡ªç„¶</p>
<h2 id="é¢è¯•é¢˜-33-äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—"><a href="#é¢è¯•é¢˜-33-äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—" class="headerlink" title="é¢è¯•é¢˜ 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-hou-xu-bian-li-xu-lie-lcof/">é¢è¯•é¢˜ 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—</a></h2><p>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚</p>
<p>å‚è€ƒä»¥ä¸‹è¿™é¢—äºŒå‰æœç´¢æ ‘ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="number">5</span></span><br><span class="line">   / \</span><br><span class="line">  <span class="number">2</span>   <span class="number">6</span></span><br><span class="line"> / \</span><br><span class="line"><span class="number">1</span>   <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>æ•°ç»„é•¿åº¦ &lt;= 1000</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å•è°ƒæ ˆçš„è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">verifyPostorder</span><span class="params">(<span class="type">int</span>[] postorder)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(postorder==<span class="literal">null</span> || postorder.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//1 2 | 4 5 | 3</span></span><br><span class="line">    <span class="type">int</span> curRoot=Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=postorder.length-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(postorder[i]&gt;curRoot)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; postorder[i]&lt;postorder[stack.peek()])&#123;</span><br><span class="line">            curRoot=postorder[stack.pop()];</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€†åºéå†è¿™ä¸ªåºåˆ—ï¼Œå°±æ˜¯ <code>root -- root.right -- root.left</code> ï¼Œç”¨ä¸€ä¸ªå•è°ƒé€’å¢æ ˆï¼Œå½“é‡åˆ°å‡å°çš„å€¼å°±è¯´æ˜è¿›å…¥äº†å·¦å­æ ‘ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™é¢—æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸åœå‡ºæ ˆï¼Œç›´åˆ°æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œç„¶åç»§ç»­å‘ååˆ¤æ–­å·¦å­æ ‘æ˜¯ä¸æ˜¯éƒ½å°äºè¿™ä¸ªæ ¹èŠ‚ç‚¹çš„</p>
<h2 id="é¢è¯•é¢˜-59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼"><a href="#é¢è¯•é¢˜-59-II-é˜Ÿåˆ—çš„æœ€å¤§å€¼" class="headerlink" title="é¢è¯•é¢˜ 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/dui-lie-de-zui-da-zhi-lcof/">é¢è¯•é¢˜ 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼</a></h2><p>è¯·å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å¹¶å®ç°å‡½æ•° max_value å¾—åˆ°é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œè¦æ±‚å‡½æ•° max_valueã€push_back å’Œ pop_front çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</p>
<p>è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œ<code>pop_front</code> å’Œ <code>max_value</code> éœ€è¦è¿”å› -1</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[<span class="string">&quot;MaxQueue&quot;</span>,<span class="string">&quot;push_back&quot;</span>,<span class="string">&quot;push_back&quot;</span>,<span class="string">&quot;max_value&quot;</span>,<span class="string">&quot;pop_front&quot;</span>,<span class="string">&quot;max_value&quot;</span>]</span><br><span class="line">[[],[<span class="number">1</span>],[<span class="number">2</span>],[],[],[]]</span><br><span class="line">è¾“å‡ºï¼š[<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[<span class="string">&quot;MaxQueue&quot;</span>,<span class="string">&quot;pop_front&quot;</span>,<span class="string">&quot;max_value&quot;</span>]</span><br><span class="line">[[],[],[]]</span><br><span class="line">è¾“å‡ºï¼š[<span class="literal">null</span>,-<span class="number">1</span>,-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><strong>é™åˆ¶ï¼š</strong></p>
<ul>
<li><code>1 &lt;= push_back,pop_front,max_value çš„æ€»æ“ä½œæ•° &lt;= 10000</code></li>
<li><code>1 &lt;= value &lt;= 10^5</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">MaxQueue</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Deque&lt;Integer&gt; queue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">Deque&lt;Integer&gt; maxQueue=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">max_value</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> maxQueue.isEmpty()?-<span class="number">1</span>:maxQueue.getFirst();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push_back</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">    queue.addLast(value);</span><br><span class="line">    <span class="keyword">while</span>(!maxQueue.isEmpty() &amp;&amp; value&gt;maxQueue.getLast())&#123;</span><br><span class="line">        maxQueue.removeLast();</span><br><span class="line">    &#125;</span><br><span class="line">    maxQueue.addLast(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop_front</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(queue.isEmpty()) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> temp=queue.removeFirst();</span><br><span class="line">    <span class="keyword">if</span>(temp==maxQueue.getFirst())&#123;</span><br><span class="line">        maxQueue.removeFirst();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ç›´ä»¥ä¸ºæ˜¯å’Œæœ€å°æ ˆä¸€æ ·ï¼Œç»“æœ WA äº†ä¸¤å‘æ‰æ„è¯†åˆ°æé”™äº†ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿›å‡ºæ–¹å‘æ˜¯ä¸ä¸€æ ·çš„</p>
<p>å…¶å®è¿™é¢˜å’Œä¹‹å‰çš„ä¸€é“ <a href="http://imlgw.top/2019/07/20/leetcode-hua-dong-chuang-kou/#239-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC">æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a> ä¸€æ ·ï¼Œç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„å•è°ƒæ ˆç„¶åç»´æŠ¤è¿™ä¸ªå•è°ƒæ ˆå°±è¡Œäº†</p>
<h2 id="5402-ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„"><a href="#5402-ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„" class="headerlink" title="5402. ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/">5402. ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„</a></h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œå’Œä¸€ä¸ªè¡¨ç¤ºé™åˆ¶çš„æ•´æ•° <code>limit</code>ï¼Œè¯·ä½ è¿”å›æœ€é•¿è¿ç»­å­æ•°ç»„çš„é•¿åº¦ï¼Œè¯¥å­æ•°ç»„ä¸­çš„ä»»æ„ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„ç»å¯¹å·®å¿…é¡»å°äºæˆ–è€…ç­‰äº <code>limit</code> <em>ã€‚</em></p>
<p>å¦‚æœä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ï¼Œåˆ™è¿”å› <code>0</code> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>], limit = <span class="number">4</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span> </span><br><span class="line">è§£é‡Šï¼šæ‰€æœ‰å­æ•°ç»„å¦‚ä¸‹ï¼š</span><br><span class="line">[<span class="number">8</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">8</span>-<span class="number">8</span>| = <span class="number">0</span> &lt;= <span class="number">4.</span></span><br><span class="line">[<span class="number">8</span>,<span class="number">2</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">8</span>-<span class="number">2</span>| = <span class="number">6</span> &gt; <span class="number">4.</span> </span><br><span class="line">[<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">8</span>-<span class="number">2</span>| = <span class="number">6</span> &gt; <span class="number">4.</span></span><br><span class="line">[<span class="number">8</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">8</span>-<span class="number">2</span>| = <span class="number">6</span> &gt; <span class="number">4.</span></span><br><span class="line">[<span class="number">2</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">2</span>-<span class="number">2</span>| = <span class="number">0</span> &lt;= <span class="number">4.</span></span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">2</span>-<span class="number">4</span>| = <span class="number">2</span> &lt;= <span class="number">4.</span></span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">2</span>-<span class="number">7</span>| = <span class="number">5</span> &gt; <span class="number">4.</span></span><br><span class="line">[<span class="number">4</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">4</span>-<span class="number">4</span>| = <span class="number">0</span> &lt;= <span class="number">4.</span></span><br><span class="line">[<span class="number">4</span>,<span class="number">7</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">4</span>-<span class="number">7</span>| = <span class="number">3</span> &lt;= <span class="number">4.</span></span><br><span class="line">[<span class="number">7</span>] æœ€å¤§ç»å¯¹å·® |<span class="number">7</span>-<span class="number">7</span>| = <span class="number">0</span> &lt;= <span class="number">4.</span> </span><br><span class="line">å› æ­¤ï¼Œæ»¡è¶³é¢˜æ„çš„æœ€é•¿å­æ•°ç»„çš„é•¿åº¦ä¸º <span class="number">2</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">10</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>], limit = <span class="number">5</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span> </span><br><span class="line">è§£é‡Šï¼šæ»¡è¶³é¢˜æ„çš„æœ€é•¿å­æ•°ç»„æ˜¯ [<span class="number">2</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>]ï¼Œå…¶æœ€å¤§ç»å¯¹å·® |<span class="number">2</span>-<span class="number">7</span>| = <span class="number">5</span> &lt;= <span class="number">5</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>], limit = <span class="number">0</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>1 &lt;= nums[i] &lt;= 10^9</code></li>
<li><code>0 &lt;= limit &lt;= 10^9</code></li>
</ul>
<p>187th å‘¨èµ› t3ï¼Œæ—¶éš”è¿™ä¹ˆä¹…åˆå›å¤´æ‰“ä¸€æ¬¡å‘¨èµ›ï¼Œå¯æƒœï¼Œåˆåªåšäº†ä¸¤é¢˜ï¼Œå‰ä¸¤é¢˜ 10 åˆ†é’Ÿä¸åˆ°å°±å†™å®Œäº†ï¼Œå¿ƒæƒ³è¿™å›æ€ä¹ˆè¯´ä¹Ÿå¾—åšä¸ª 3 é¢˜ï¼Œç»“æœã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestSubarray2</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> limit)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>,right=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> min=<span class="number">0</span>,max=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; minpq=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">    minpq.add(nums[<span class="number">0</span>]);</span><br><span class="line">    PriorityQueue&lt;Integer&gt; maxpq=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;b-a);</span><br><span class="line">    maxpq.add(nums[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">//7 2</span></span><br><span class="line">    <span class="keyword">while</span>(left&lt;=right &amp;&amp; right&lt;nums.length)&#123;</span><br><span class="line">        <span class="keyword">while</span> (right&lt; nums.length &amp;&amp; maxpq.peek()-minpq.peek()&lt;=limit) &#123;</span><br><span class="line">            res=Math.max(right-left+<span class="number">1</span>,res);</span><br><span class="line">            right++;</span><br><span class="line">            <span class="keyword">if</span> (right&lt;nums.length) &#123;</span><br><span class="line">                maxpq.add(nums[right]);</span><br><span class="line">                minpq.add(nums[right]);   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        maxpq.remove(nums[left]);</span><br><span class="line">        minpq.remove(nums[left]);</span><br><span class="line">        left++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ˜¯å½“æ—¶æ¯”èµ›è°ƒäº†åŠå¤©æ²¡è°ƒå‡ºæ¥ï¼Œç»“æŸä¹‹åè°ƒå‡ºæ¥çš„ä»£ç ï¼Œç”¨ä¸¤ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤åŒºé—´æœ€å€¼ï¼Œç„¶åæ»‘çª—å°±è¡Œäº†ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯è°ƒæ»‘çª—çš„æ—¶å€™è°ƒäº†åŠå¤©ï¼Œä¹‹å‰å†™æ»‘çª—å°±æ˜¯ä¹±å†™çš„ï¼Œæ²¡ä»€ä¹ˆç« æ³•ï¼Œè¾¹ WA è¾¹æ”¹ï¼Œçœ‹æ¥æœ€è¿‘å¾—å¥½å¥½æ€»ç»“ä¸‹æ»‘çª—çš„é¢˜äº†ï¼Œå¾—æä¸ªæ¿å­å‡ºæ¥</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æœ€ä¼˜è§£ï¼ŒO(N) å•è°ƒé˜Ÿåˆ—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//UPDATE: 2020/6/29 æ”¹æˆæœ€è¿‘æ€»ç»“çš„ for-while æ»‘çª—æ¨¡æ¿</span></span><br><span class="line"><span class="comment">//ä¸Šé¢çš„è§£æ³•ä¸€çš„æ»‘çª—ä¹Ÿå†™çš„ä¸å¥½ï¼Œæœ‰æ—¶é—´æ”¹æ”¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestSubarray</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> limit)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> min=<span class="number">0</span>,max=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å•è°ƒé˜Ÿåˆ—è®°å½•åŒºé—´æœ€å€¼ç´¢å¼•</span></span><br><span class="line">    LinkedList&lt;Integer&gt; maxQue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    LinkedList&lt;Integer&gt; minQue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> right=<span class="number">0</span>;right&lt;nums.length;right++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!maxQue.isEmpty() &amp;&amp; nums[maxQue.getLast()]&lt;nums[right])&#123;</span><br><span class="line">            maxQue.removeLast();</span><br><span class="line">        &#125;</span><br><span class="line">        maxQue.addLast(right);</span><br><span class="line">        <span class="keyword">while</span>(!minQue.isEmpty() &amp;&amp; nums[minQue.getLast()]&gt;nums[right])&#123;</span><br><span class="line">            minQue.removeLast();</span><br><span class="line">        &#125;</span><br><span class="line">        minQue.addLast(right);</span><br><span class="line">        <span class="keyword">while</span>(nums[maxQue.getFirst()]-nums[minQue.getFirst()]&gt;limit) &#123;</span><br><span class="line">            <span class="comment">//ä¸ç¬¦åˆè¦æ±‚ï¼Œå·¦è¾¹ç•Œå·¦ç§»ï¼Œå½“å·¦è¾¹ç•Œæ˜¯æœ€å€¼çš„æ—¶å€™ que å¼¹å‡º</span></span><br><span class="line">            <span class="keyword">if</span> (left==maxQue.getFirst()) maxQue.removeFirst();</span><br><span class="line">            <span class="keyword">if</span> (left==minQue.getFirst()) minQue.removeFirst();</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(res,right-left+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å½“æ—¶æˆ‘ç¡®å®ä¹Ÿå°è¯•å»ç”¨ä¸¤ä¸ªå•è°ƒé˜Ÿåˆ—ç»´æŠ¤æœ€å€¼ï¼Œä½†æ˜¯ï¼ï¼ï¼è¿˜æ˜¯è¢«æ»‘çª—çš„è¾¹ç•Œç»™æå¾—ä¸çŸ¥é“è¿™ä¹ˆå†™äº†ï¼Œç„¶åå°±æ²¡åˆç„¶åäº†ï¼Œä¸Šé¢çš„ä»£ç ä¹Ÿæ˜¯æ¯”èµ›å®Œä¹‹åè‡ªå·±å†™å‡ºæ¥çš„ï¼Œè¯´åˆ°åº•è¿˜æ˜¯èœå•Šï¼ğŸ˜­</p>
<h2 id="962-æœ€å¤§å®½åº¦å¡"><a href="#962-æœ€å¤§å®½åº¦å¡" class="headerlink" title="962. æœ€å¤§å®½åº¦å¡"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-width-ramp/">962. æœ€å¤§å®½åº¦å¡</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>A</code>ï¼Œ<em>å¡</em>æ˜¯å…ƒç»„ <code>(i, j)</code>ï¼Œå…¶ä¸­  <code>i &lt; j</code> ä¸” <code>A[i] &lt;= A[j]</code>ã€‚è¿™æ ·çš„å¡çš„å®½åº¦ä¸º <code>j - i</code>ã€‚</p>
<p>æ‰¾å‡º <code>A</code> ä¸­çš„å¡çš„æœ€å¤§å®½åº¦ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å› 0 ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">6</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æœ€å¤§å®½åº¦çš„å¡ä¸º (i, j) = (<span class="number">1</span>, <span class="number">5</span>): A[<span class="number">1</span>] = <span class="number">0</span> ä¸” A[<span class="number">5</span>] = <span class="number">5.</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">9</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æœ€å¤§å®½åº¦çš„å¡ä¸º (i, j) = (<span class="number">2</span>, <span class="number">9</span>): A[<span class="number">2</span>] = <span class="number">1</span> ä¸” A[<span class="number">9</span>] = <span class="number">1.</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>2 &lt;= A.length &lt;= 50000</code></li>
<li><code>0 &lt;= A[i] &lt;= 50000</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æƒ³ä¸åˆ°ï¼Œç€å®æƒ³ä¸åˆ°ï¼Œè¿™ä¸ªå•è°ƒæ ˆçš„ç”¨æ³•ç¡®å®æ²¡è§è¿‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxWidthRamp</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;A.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack.isEmpty() || A[stack.peek()]&gt;A[i])&#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=A.length-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; A[stack.peek()]&lt;=A[i])&#123;</span><br><span class="line">            <span class="type">int</span> cur=stack.pop();</span><br><span class="line">            res=Math.max(res,i-cur);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆæŠŠ A æ•°ç»„ä¸­çš„ä»¥<code>A[0]</code>å¼€å¤´çš„é€’å‡åºåˆ—æŠ½å–å‡ºæ¥ï¼Œæˆ‘ä»¬æœ€åè¦æ±‚çš„æœ€å¤§çš„å®½åº¦å¡ä¸€å®šæ˜¯ä»¥è¿™ä¸ªåºåˆ—ä¸­çš„æŸä¸€ä¸ª<code>i</code>ä¸º<strong>å¡åº•</strong>çš„ï¼Œæˆ‘ä»¬åè¯ä¸€ä¸‹</p>
<p>å‡è®¾å­˜åœ¨æŸä¸ªå…ƒç´ ä½ç½®<code>k</code>ä¸å­˜åœ¨äºä¸Šé¢çš„é€’å‡åºåˆ—ä¸­ï¼Œä¸”æœ‰æœ€å¤§å®½åº¦<code>j-k</code>ï¼Œè¿™ä¹Ÿå°±è¯´æ˜<code>k</code>ä½ç½®çš„å…ƒç´ <strong>ä¸€å®šæ˜¯å°äºç­‰äº k å‰é¢æ‰€æœ‰çš„å…ƒç´ çš„</strong>ï¼Œå¦åˆ™å°±ä¼šæœ‰æ›´é•¿çš„å®½åº¦ï¼Œä½†æ˜¯æ—¢ç„¶<code>k</code>å°äºç­‰äºå‰é¢æ‰€æœ‰çš„å…ƒç´ ï¼Œé‚£ä¹ˆ k å°±ä¸€å®šä¼šè¢«åŠ å…¥åˆ°åºåˆ—ä¸­ï¼Œä¸å‡è®¾çŸ›ç›¾ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ kï¼Œè§£ä¸€å®šå­˜åœ¨é€’å‡åºåˆ—ä¸­</p>
<p>è¿™æ ·çš„è¯æˆ‘ä»¬å¯ä»¥é€†å‘éå†æ•°ç»„ï¼Œæ¯æ¬¡é‡åˆ°å…ƒç´ å¤§äºæ ˆé¡¶çš„å°±å¯ä»¥è®¡ç®—å®½åº¦ï¼Œç„¶åå°†æ ˆé¡¶å¼¹å‡ºï¼Œå› ä¸ºæ˜¯é€†åºéå†çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå®½åº¦ä¸€å®šæ˜¯æ ˆé¡¶è¿™ä¸ª**å¡åº• i **èƒ½å½¢æˆçš„æœ€å¤§å®½åº¦äº†ï¼Œ é€†åºéå†å†å¾€å‰çš„è¯å³ä½¿å¤§äºè¿™ä¸ªæ ˆé¡¶ï¼Œå½¢æˆçš„å®½åº¦ä¹Ÿåªä¼šå‡å°ï¼Œæ‰€ä»¥è¿™ä¸ªæ ˆé¡¶æ˜¯å¯ä»¥ç›´æ¥<code>pop</code>å‡ºå»çš„ï¼Œæˆ‘ä»¬éå†æ‰€æœ‰çš„å¡åº•æ±‚æœ€å¤§å€¼å°±è¡Œäº†ï¼Œæ—¶é—´å¤æ‚åº¦<code>O(N)</code></p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>äºŒåˆ†çš„æ€è·¯ï¼Œå’Œä¸Šé¢ä¸€æ ·ï¼Œå…ˆæ„å»ºä¸€ä¸ªä»¥<code>A[0]</code>å¼€å¤´çš„é€’å‡åºåˆ—ï¼Œè¿™é‡Œé¢å°±æ˜¯æˆ‘ä»¬æ‰€æœ‰çš„å¡åº•ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥éå†æ‰€æœ‰çš„å…ƒç´ ï¼Œç„¶ååœ¨è¿™ä¸ªå•è°ƒåºåˆ—ä¸­å¯»æ‰¾ç¬¬ä¸€ä¸ªå°äºç­‰äºå½“å‰å…ƒç´ çš„<code>index</code>ï¼Œè¿™ä¸¤ä¸ªæ„æˆçš„å®½åº¦å°±æ˜¯<strong>å½“å‰å…ƒç´ </strong>æ‰€èƒ½å½¢æˆçš„æœ€å¤§å®½åº¦ï¼Œæˆ‘ä»¬æ±‚å‡ºæ‰€æœ‰çš„æœ€å¤§å®½åº¦å–ä¸€ä¸ªæœ€å€¼å°±å¯ä»¥äº†ï¼Œæ—¶é—´å¤æ‚åº¦<code>O(NlogN)</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxWidthRamp</span><span class="params">(A []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> order [][]<span class="type">int</span></span><br><span class="line">    order = <span class="built_in">append</span>(order, []<span class="type">int</span>&#123;<span class="number">0</span>, A[<span class="number">0</span>]&#125;)</span><br><span class="line">    <span class="comment">//æ„å»ºé€’å‡åºåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(A); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> A[i] &lt; order[<span class="built_in">len</span>(order)<span class="number">-1</span>][<span class="number">1</span>] &#123;</span><br><span class="line">            order = <span class="built_in">append</span>(order, []<span class="type">int</span>&#123;i, A[i]&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j, target := <span class="keyword">range</span> A &#123;</span><br><span class="line">        i := binarySearch(order, target)</span><br><span class="line">        res = Max(res, j-i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾ç¬¬ä¸€ä¸ªå°äºç­‰äº target çš„å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span><span class="params">(num [][]<span class="type">int</span>, target <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    left := <span class="number">0</span></span><br><span class="line">    right := <span class="built_in">len</span>(num) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">        mid := left + (right-left)/<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> num[mid][<span class="number">1</span>] &gt; target &#123;</span><br><span class="line">            left = mid + <span class="number">1</span> <span class="comment">//æ³¨æ„æ˜¯é€’å‡åºåˆ—</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right = mid</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num[left][<span class="number">0</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Max</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨ lc å†™çš„ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-width-ramp/solution/java-dan-diao-zhan-er-fen-jie-fa-chang-shi-jie-shi/">é¢˜è§£</a> æ¬¢è¿å‰æ¥çº é”™</p>
</blockquote>
<h2 id="1124-è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ"><a href="#1124-è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ" class="headerlink" title="1124. è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-well-performing-interval/">1124. è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ</a></h2><p>ç»™ä½ ä¸€ä»½å·¥ä½œæ—¶é—´è¡¨ <code>hours</code>ï¼Œä¸Šé¢è®°å½•ç€æŸä¸€ä½å‘˜å·¥æ¯å¤©çš„å·¥ä½œå°æ—¶æ•°ã€‚</p>
<p>æˆ‘ä»¬è®¤ä¸ºå½“å‘˜å·¥ä¸€å¤©ä¸­çš„å·¥ä½œå°æ—¶æ•°å¤§äº <code>8</code> å°æ—¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸€å¤©å°±æ˜¯ã€Œ<strong>åŠ³ç´¯çš„ä¸€å¤©</strong>ã€ã€‚</p>
<p>æ‰€è°“ã€Œè¡¨ç°è‰¯å¥½çš„æ—¶é—´æ®µã€ï¼Œæ„å‘³åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œã€ŒåŠ³ç´¯çš„å¤©æ•°ã€æ˜¯ä¸¥æ ¼ <strong>å¤§äº</strong>ã€Œä¸åŠ³ç´¯çš„å¤©æ•°ã€ã€‚</p>
<p>è¯·ä½ è¿”å›ã€Œè¡¨ç°è‰¯å¥½æ—¶é—´æ®µã€çš„æœ€å¤§é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šhours = [<span class="number">9</span>,<span class="number">9</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿çš„è¡¨ç°è‰¯å¥½æ—¶é—´æ®µæ˜¯ [<span class="number">9</span>,<span class="number">9</span>,<span class="number">6</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= hours.length &lt;= 10000</code></li>
<li><code>0 &lt;= hours[i] &lt;= 16</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æƒ­æ„§ï¼Œè¿™é¢˜è¿˜æ˜¯çœ‹çš„é¢˜è§£ï¼Œè¿™é¢˜è¿˜æ˜¯æŒºå·§å¦™çš„ï¼Œæˆ‘ä»¬æŠŠå¤§äº 8 å°æ—¶çš„æ—¶é—´æ®µçœ‹ä½œ<code>+1</code>ï¼Œå°äº 8 å°æ—¶çš„çœ‹ä½œ<code>-1</code>ï¼Œè¿™æ ·é—®é¢˜å°±è½¬æ¢æˆäº†æ±‚<strong>åŒºé—´å’Œå¤§äº 0 çš„æœ€é•¿é•¿åº¦</strong>ï¼Œè€ŒåŒºé—´å’Œæˆ‘ä»¬åˆå¯ä»¥è”æƒ³åˆ°ç”¨å‰ç¼€å’Œï¼Œè¿™æ ·æˆ‘ä»¬å°†é¢˜ç›®çš„ä¾‹å­è½¬æ¢ä¸€ä¸‹å°±å˜æˆäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hours:    <span class="number">9</span> <span class="number">9</span>  <span class="number">6</span>  <span class="number">0</span>  <span class="number">6</span>  <span class="number">6</span>  <span class="number">9</span></span><br><span class="line">hours:  <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> -<span class="number">1</span> -<span class="number">1</span> -<span class="number">1</span> -<span class="number">1</span>  <span class="number">1</span></span><br><span class="line">  pre:  <span class="number">0</span> <span class="number">1</span> <span class="number">2</span>  <span class="number">1</span>  <span class="number">0</span> -<span class="number">1</span> -<span class="number">2</span> -<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>åªè¦<code>pre</code>ä¸­ä¸¤ç‚¹çš„å‰ç¼€<code>pre[j]-pre[i]&gt;0</code>å°±è¯´æ˜åŒºé—´<code>[i+1ï¼Œj]</code>æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œæˆ‘ä»¬è¦æ±‚çš„å°±æ˜¯æ»¡è¶³æ¡ä»¶çš„æœ€é•¿å®½åº¦ï¼Œè¿™æ ·ä¸€æ¥é—®é¢˜å…¶å®å°±è½¬æ¢æˆäº†å’Œä¸Šé¢ <a href="#962-%E6%9C%80%E5%A4%A7%E5%AE%BD%E5%BA%A6%E5%9D%A1">962. æœ€å¤§å®½åº¦å¡</a>ä¸€æ ·äº†ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ±‚è§£å°± ok äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestWPI</span><span class="params">(<span class="type">int</span>[] hours)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] pre=<span class="keyword">new</span> <span class="title class_">int</span>[hours.length+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=hours.length;i++)&#123;</span><br><span class="line">        pre[i]=pre[i-<span class="number">1</span>]+(hours[i-<span class="number">1</span>]&gt;<span class="number">8</span>?<span class="number">1</span>:-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;pre.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack.isEmpty() || pre[i]&lt;pre[stack.peek()])&#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=pre.length-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; pre[i]-pre[stack.peek()]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            res=Math.max(res,i-stack.pop()); <span class="comment">//ä¸ç”¨+1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="907-å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ"><a href="#907-å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ" class="headerlink" title="907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sum-of-subarray-minimums/">907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>A</code>ï¼Œæ‰¾åˆ° <code>min(B)</code> çš„æ€»å’Œï¼Œå…¶ä¸­ <code>B</code> çš„èŒƒå›´ä¸º <code>A</code> çš„æ¯ä¸ªï¼ˆè¿ç»­ï¼‰å­æ•°ç»„ã€‚</p>
<p>ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œå› æ­¤<strong>è¿”å›ç­”æ¡ˆæ¨¡ 10^9 + 7</strong>ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">17</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">å­æ•°ç»„ä¸º [<span class="number">3</span>]ï¼Œ[<span class="number">1</span>]ï¼Œ[<span class="number">2</span>]ï¼Œ[<span class="number">4</span>]ï¼Œ[<span class="number">3</span>,<span class="number">1</span>]ï¼Œ[<span class="number">1</span>,<span class="number">2</span>]ï¼Œ[<span class="number">2</span>,<span class="number">4</span>]ï¼Œ[<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>]ï¼Œ[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]ï¼Œ[<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]ã€‚ </span><br><span class="line">æœ€å°å€¼ä¸º <span class="number">3</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">4</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">1</span>ï¼Œå’Œä¸º <span class="number">17</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>1 &lt;= A &lt;= 30000</code></li>
<li><code>1 &lt;= A[i] &lt;= 30000</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è™½ç„¶èŠ±äº†æŒºé•¿æ—¶é—´å¥½æ­¹è¿˜æ˜¯è‡ªå·±åšå‡ºæ¥äº†ï¼Œå¼€å¿ƒğŸ˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumSubarrayMins</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> N=A.length;</span><br><span class="line">    <span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] temp=<span class="keyword">new</span> <span class="title class_">int</span>[N+<span class="number">1</span>];</span><br><span class="line">    System.arraycopy(A,<span class="number">0</span>,temp,<span class="number">0</span>,N);</span><br><span class="line">    <span class="comment">//æœ«å°¾åŠ  0 ä½¿æ‰€æœ‰å…ƒç´ éƒ½å¯ä»¥å‡ºæ ˆ</span></span><br><span class="line">    temp[N]=<span class="number">0</span>;A=temp; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N+<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; A[stack.peek()]&gt;A[i])&#123;</span><br><span class="line">            <span class="type">int</span> cur=stack.pop();</span><br><span class="line">            <span class="type">int</span> left=stack.isEmpty()?-<span class="number">1</span>:stack.peek();</span><br><span class="line">            <span class="comment">//å³è¾¹å¤§äº cur çš„ä¸ªæ•° (i ä¹‹å‰ï¼‰ï¼š i-cur-1      </span></span><br><span class="line">            <span class="comment">//å·¦è¾¹å¤§äº cur çš„ä¸ªæ•° (left ä¹‹åï¼‰ï¼š cur-(left+1) </span></span><br><span class="line">            <span class="comment">//res=(res+A[cur]*((i-cur-1)*(cur-left-1)+i-1-left))%mod;</span></span><br><span class="line">            <span class="comment">//(a+1)*(b+1)=ab+a+b+1</span></span><br><span class="line">            res=(res+A[cur]*(i-cur)*(cur-left))%mod;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç»´æŠ¤å•è°ƒé€’å¢æ ˆï¼Œåœ¨æ¯ä¸ªå…ƒç´ å‡ºæ ˆçš„æ—¶å€™è€ƒè™‘å¦‚ä½•è®¡ç®—<strong>ä»¥è¯¥å…ƒç´ ä¸ºåŒºé—´æœ€å°å€¼</strong>çš„åŒºé—´ä¸ªæ•°</p>
<p> æ¯”å¦‚<code>[9,8,7,6,1,5,3,4,2]</code>è¿™ä¸ªåŒºé—´ï¼Œæˆ‘ä»¬è¦æ±‚ä»¥<code>1</code>ä¸ºåŒºé—´æœ€å°å€¼çš„åŒºé—´ä¸ªæ•°ã€‚</p>
<p>æˆ‘ä»¬åˆ†å¼€æ¥æ±‚ï¼Œå…ˆæ±‚å·¦å³ä¸¤è¾¹çš„ï¼Œå¾ˆæ˜æ˜¾ä»…åŒ…å«<code>1</code>å·¦è¾¹æˆ–å³è¾¹å…ƒç´ çš„å­åŒºé—´ä¸ªæ•°æ˜¯ 4+4=8 ä¸ªï¼Œä¹Ÿå°±æ˜¯ [6,1] , [7,6,1] â€¦ å’Œ [1,5], [1,5,3]â€¦. è¿™äº›åŒºé—´</p>
<p>ç„¶åå†çœ‹åŒæ—¶åŒ…å«<code>1</code>å·¦å³ä¸¤è¾¹çš„å…ƒç´ çš„å­åŒºé—´ï¼Œä¸€è¾¹é€‰ä¸€ä¸ªåŒºé—´å’Œå¦ä¸€è¾¹éƒ½ä¼šæœ‰ 4 ç§ç»„åˆï¼Œæ‰€ä»¥å°±æ˜¯ 4*4=16 ç§</p>
<p>æœ€åå†åŠ ä¸Š<code>1</code>æœ¬èº«å°±è¡Œäº†ï¼Œæ‰€ä»¥ä»¥<code>1</code>ä¸ºåŒºé—´æœ€å°å€¼çš„åŒºé—´ä¸ªæ•°å°±æ˜¯ 8+16+1=25</p>
<blockquote>
<p>åœ¨çœ‹äº†å¤§ä½¬çš„åšæ³•åå‘ç°ä¸Šé¢çš„æ˜¯å¯ä»¥åŒ–ç®€çš„ï¼š<code>a*b+a+b+1=(a+1)*(b+1)</code></p>
</blockquote>
<h2 id="5454-ç»Ÿè®¡å…¨-1-å­çŸ©å½¢"><a href="#5454-ç»Ÿè®¡å…¨-1-å­çŸ©å½¢" class="headerlink" title="5454. ç»Ÿè®¡å…¨ 1 å­çŸ©å½¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/count-submatrices-with-all-ones/">5454. ç»Ÿè®¡å…¨ 1 å­çŸ©å½¢</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™ä½ ä¸€ä¸ªåªåŒ…å« 0 å’Œ 1 çš„Â <code>rows * columns</code>Â çŸ©é˜µÂ <code>mat</code>Â ï¼Œè¯·ä½ è¿”å›æœ‰å¤šå°‘ä¸ªÂ <strong>å­çŸ©å½¢</strong>Â çš„å…ƒç´ å…¨éƒ¨éƒ½æ˜¯ 1 ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat = [[1,0,1],</span><br><span class="line">Â            [1,1,0],</span><br><span class="line">Â            [1,1,0]]</span><br><span class="line">è¾“å‡ºï¼š13</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æœ‰ 6Â ä¸ª 1x1 çš„çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 2 ä¸ª 1x2 çš„çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 3 ä¸ª 2x1 çš„çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 1 ä¸ª 2x2 çš„çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 1 ä¸ª 3x1 çš„çŸ©å½¢ã€‚</span><br><span class="line">çŸ©å½¢æ•°ç›®æ€»å…± = 6 + 2 + 3 + 1 + 1 = 13Â ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat = [[0,1,1,0],</span><br><span class="line">Â            [0,1,1,1],</span><br><span class="line">Â            [1,1,1,0]]</span><br><span class="line">è¾“å‡ºï¼š24</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æœ‰ 8 ä¸ª 1x1 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 5 ä¸ª 1x2 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 2 ä¸ª 1x3 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 4 ä¸ª 2x1 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 2 ä¸ª 2x2 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 2 ä¸ª 3x1 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">æœ‰ 1 ä¸ª 3x2 çš„å­çŸ©å½¢ã€‚</span><br><span class="line">çŸ©å½¢æ•°ç›®æ€»å…± = 8 + 5 + 2 + 4 + 2 + 2 + 1 = 24 ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat = [[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">21</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat = [[<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= rowsÂ &lt;= 150</code></li>
<li>  <code>1 &lt;= columnsÂ &lt;= 150</code></li>
<li>  <code>0 &lt;= mat[i][j] &lt;= 1</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>196 å‘¨èµ› T3ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºéš¾çš„ï¼Œä¸è¿‡æ•°æ®é‡æ¯”è¾ƒå°ï¼Œåªæœ‰ 150ï¼Œæ‰€ä»¥æš´åŠ›å…¶å®å°±å¯ä»¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è§£æ³•ä¸€ï¼šN3</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numSubmat</span><span class="params">(<span class="type">int</span>[][] mat)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> mat.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> mat[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//é¢„å¤„ç† mat[i][j] ä¸Šè¾¹æœ‰å¤šå°‘ä¸ªè¿ç»­çš„ 1</span></span><br><span class="line">    <span class="type">int</span>[][] upCnt= <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(mat[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                upCnt[i][j] = i==<span class="number">0</span> ? mat[i][j]&amp;<span class="number">1</span> : upCnt[i-<span class="number">1</span>][j]+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(mat[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> j;</span><br><span class="line">                <span class="type">int</span> <span class="variable">rowCnt</span> <span class="operator">=</span> upCnt[i][j];</span><br><span class="line">                <span class="keyword">while</span>(k&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                    rowCnt = Math.min(rowCnt, upCnt[i][k]);</span><br><span class="line">                    res += rowCnt;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å•è°ƒæ ˆï¼Œå‚è€ƒäº†ç½‘ä¸Šçš„é¢˜è§£ï¼Œè™½ç„¶è‡ªå·±ææ‡‚äº†ï¼Œä½†æ˜¯æƒ³å†™é¢˜è§£çš„æ—¶å€™æ„Ÿè§‰æœ‰ç‚¹ä¸å¥½æè¿°å•Šï¼Œè¦å†™å¥½å¤šä¸œè¥¿ï¼Œæœ‰ç‚¹æŠ½è±¡ï¼Œä½†æ˜¯æ€è·¯è¿˜æ˜¯éå¸¸å¥½çš„ï¼Œä¹Ÿæ˜¯ä¸ªå¾ˆç»å…¸çš„é¢˜äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numSubmat</span><span class="params">(<span class="type">int</span>[][] mat)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> mat.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> mat[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//é¢„å¤„ç† mat[i][j] ä¸Šè¾¹æœ‰å¤šå°‘ä¸ªè¿ç»­çš„ 1</span></span><br><span class="line">    <span class="type">int</span>[][] upCnt= <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(mat[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                upCnt[i][j] = i==<span class="number">0</span> ? mat[i][j]&amp;<span class="number">1</span> : upCnt[i-<span class="number">1</span>][j]+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å•è°ƒé€’å¢æ ˆç»´æŠ¤åˆ—çš„é•¿åº¦</span></span><br><span class="line">    Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        stack.clear();</span><br><span class="line">        <span class="type">int</span> <span class="variable">ijCnt</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//ä»¥ i,j ä¸ºå³ä¸‹è§’çš„çŸ©å½¢çš„ cnt</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            ijCnt += upCnt[i][j];</span><br><span class="line">            <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; upCnt[i][stack.peek()] &gt; upCnt[i][j])&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="comment">//æ ˆä¸­çš„ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¦‚æœæ ˆä¸ºç©ºï¼Œleft åº”è¯¥ä¸º-1</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> stack.isEmpty() ? -<span class="number">1</span> : stack.peek();</span><br><span class="line">                <span class="comment">//å‡å»å¤šçš„éƒ¨åˆ†</span></span><br><span class="line">                ijCnt -= (cur-left) * (upCnt[i][cur] - upCnt[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            stack.push(j);</span><br><span class="line">            res += ijCnt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†æ–¹ä¾¿å›é¡¾ï¼Œç®€å•çš„ç”»äº†ä¸ªå›¾<br><img src="http://static.imlgw.top/blog/20200705/BDIQmVW7vEuT.png?imageslim" alt="mark"></p>
<blockquote>
<p>è¿™é¢˜å¥½åƒæ˜¯ä¸ªå¾ˆç»å…¸çš„é¢˜ï¼Œæˆ‘åœ¨ç½‘ä¸Šæœç´¢çš„çš„æ—¶å€™å‘ç°å’Œ <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40774175/article/details/82354072">ICPC çš„ä¸€é“é¢˜</a> ä¸€æ ·</p>
</blockquote>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>åœ¨åˆ·äº†å‡ éè¯„è®ºåŒºï¼Œçœ‹è§äº†å¤§ä½¬ä»¬å†™çš„æ¯”è¾ƒå¥½è§£æ³•ï¼Œå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“ç†è§£çš„å•è°ƒæ ˆçš„æ€è·¯</p>
<p>ï¼ˆ1ï¼‰ç¬¬ä¸€æ­¥é¢„å¤„ç†å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼Œç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‘ä¸Šå»¶ç”³çš„æœ€å¤§å€¼<br>ï¼ˆ2ï¼‰ç„¶åæˆ‘ä»¬åŒæ ·ä½¿ç”¨å•è°ƒé€’å¢æ ˆç»´æŠ¤è¿™ä¸ªé«˜åº¦ï¼Œä½†æ˜¯åŒæ—¶æˆ‘ä»¬é¢å¤–çš„ç»´æŠ¤å¦ä¸€ä¸ªå€¼ï¼š<strong>ä»¥å½“å‰<code>mat[i][j]</code>ä¸ºå³ä¸‹è§’æ‰€å½¢æˆçš„çŸ©å½¢ä¸ªæ•°ä¹Ÿå­˜å…¥å•è°ƒæ ˆ</strong> ï¼Œç„¶åæˆ‘ä»¬åœ¨æ¯ä¸ªå…ƒç´ è¿›æ ˆçš„æ—¶å€™ç»Ÿè®¡ä¸ªæ•°ï¼Œç»Ÿè®¡ä¸€å…±åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>
<p><img src="http://static.imlgw.top/blog/20200828/x8M127uqudmS.png?imageslim" alt="mark"><br>ï¼ˆ2020.8.28 æ›´æ–°äº†ä¸€ä¸‹ï¼Œä¹‹å‰çš„å›¾æœ‰ç‚¹æŠ½è±¡ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numSubmat</span><span class="params">(<span class="type">int</span>[][] mat)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> mat.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> mat[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//é¢„å¤„ç† mat[i][j] ä¸Šè¾¹æœ‰å¤šå°‘ä¸ªè¿ç»­çš„ 1</span></span><br><span class="line">    <span class="type">int</span>[][] upCnt= <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(mat[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                upCnt[i][j] = i==<span class="number">0</span> ? mat[i][j]&amp;<span class="number">1</span> : upCnt[i-<span class="number">1</span>][j]+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å•è°ƒé€’å¢æ ˆç»´æŠ¤åˆ—çš„é•¿åº¦</span></span><br><span class="line">    Deque&lt;<span class="type">int</span>[]&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; m; i++)&#123;</span><br><span class="line">        stack.clear();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; upCnt[i][stack.peek()[<span class="number">0</span>]] &gt; upCnt[i][j])&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span>[] pair = stack.isEmpty() ? <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>,<span class="number">0</span>&#125; : stack.peek();</span><br><span class="line">            <span class="comment">//ä»¥å½“å‰æ ˆé¡¶å…ƒç´  mat[i][pair[0]] ä¸ºå³ä¸‹è§’èƒ½å½¢æˆçŸ©å½¢ä¸ªæ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> (j-pair[<span class="number">0</span>]) * upCnt[i][j] + pair[<span class="number">1</span>];</span><br><span class="line">            res += cur;</span><br><span class="line">            <span class="comment">//å°† mat[i][j] çš„ç´¢å¼• j å’Œä»¥å…¶ä¸ºå³ä¸‹è§’å½¢æˆçš„çŸ©é˜µä¸ªæ•° cur ä¹Ÿå­˜å…¥å•è°ƒæ ˆ</span></span><br><span class="line">            stack.push(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;j, cur&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ€è·¯æ¯”ä¸Šé¢è¦å®¹æ˜“ç†è§£å¤šäº†</p>
<h2 id="é¢è¯•é¢˜-03-05-æ ˆæ’åº"><a href="#é¢è¯•é¢˜-03-05-æ ˆæ’åº" class="headerlink" title="é¢è¯•é¢˜ 03.05. æ ˆæ’åº"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/sort-of-stacks-lcci/">é¢è¯•é¢˜ 03.05. æ ˆæ’åº</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>æ ˆæ’åºã€‚ ç¼–å†™ç¨‹åºï¼Œå¯¹æ ˆè¿›è¡Œæ’åºä½¿æœ€å°å…ƒç´ ä½äºæ ˆé¡¶ã€‚æœ€å¤šåªèƒ½ä½¿ç”¨ä¸€ä¸ªå…¶ä»–çš„ä¸´æ—¶æ ˆå­˜æ”¾æ•°æ®ï¼Œä½†ä¸å¾—å°†å…ƒç´ å¤åˆ¶åˆ°åˆ«çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰ä¸­ã€‚è¯¥æ ˆæ”¯æŒå¦‚ä¸‹æ“ä½œï¼š<code>push</code>ã€<code>pop</code>ã€<code>peek</code> å’Œ <code>isEmpty</code>ã€‚å½“æ ˆä¸ºç©ºæ—¶ï¼Œ<code>peek</code>Â è¿”å› -1ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"> è¾“å…¥ï¼š</span><br><span class="line">[<span class="string">&quot;SortedStack&quot;</span>, <span class="string">&quot;push&quot;</span>, <span class="string">&quot;push&quot;</span>, <span class="string">&quot;peek&quot;</span>, <span class="string">&quot;pop&quot;</span>, <span class="string">&quot;peek&quot;</span>]</span><br><span class="line">[[], [<span class="number">1</span>], [<span class="number">2</span>], [], [], []]</span><br><span class="line"> è¾“å‡ºï¼š</span><br><span class="line">[null,null,null,<span class="number">1</span>,null,<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"> è¾“å…¥ï¼š </span><br><span class="line">[<span class="string">&quot;SortedStack&quot;</span>, <span class="string">&quot;pop&quot;</span>, <span class="string">&quot;pop&quot;</span>, <span class="string">&quot;push&quot;</span>, <span class="string">&quot;pop&quot;</span>, <span class="string">&quot;isEmpty&quot;</span>]</span><br><span class="line">[[], [], [], [<span class="number">1</span>], [], []]</span><br><span class="line"> è¾“å‡ºï¼š</span><br><span class="line">[null,null,null,null,null,<span class="literal">true</span>]</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ol>
<li> æ ˆä¸­çš„å…ƒç´ æ•°ç›®åœ¨ [0, 5000] èŒƒå›´å†…ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¹‹å‰åœ¨ä¹¦ä¸Šçœ‹åˆ°è¿‡è¿™ä¸€é¢˜ï¼Œä½†æ˜¯æ—¶é—´ä¹…äº†å¿˜äº†å’‹åšäº†ï¼Œåªè®°å¾—æ˜¯å•è°ƒæ ˆï¼Œæ€è€ƒäº†ä¸‹è¿˜æ˜¯å†™å‡ºæ¥äº†</p>
<p>å•è°ƒæ ˆï¼Œä¸»æ ˆå•è°ƒé€’å‡ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ï¼Œå½“é‡åˆ°å¤§äºæ ˆé¡¶çš„å…ƒç´ å°±å¼¹æ ˆï¼Œå¹¶å°†å¼¹å‡ºçš„å…ƒç´ ç”¨è¾…åŠ©æ ˆæ¥æ”¶ï¼Œå®Œäº‹äº†å†å°†å…ƒç´  push è¿›å»ï¼Œæœ€åå°†è¾…åŠ©æ ˆä¸­çš„å…ƒç´ å†å€’å›å»å°± ok äº†ï¼Œæ—¶é—´å¤æ‚åº¦ N^2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SortedStack</span> &#123;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â Deque&lt;Integer&gt; stack = <span class="literal">null</span>;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â Deque&lt;Integer&gt; help = <span class="literal">null</span>;</span><br><span class="line"> Â  Â <span class="comment">//å•è°ƒæ ˆæ’åº</span></span><br><span class="line"> Â  Â <span class="comment">//4 3 2 1 3 4 2</span></span><br><span class="line"> Â  Â <span class="keyword">public</span> <span class="title function_">SortedStack</span><span class="params">()</span> &#123;</span><br><span class="line"> Â  Â  Â  Â stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"> Â  Â  Â  Â help = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="comment">//ä¸€å¼€å§‹å†™æˆ pop äº†æ‰¾åŠå¤©çš„é”™</span></span><br><span class="line"> Â  Â  Â  Â <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; stack.peek() &lt; val) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â help.push(stack.pop());</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â stack.push(val);</span><br><span class="line"> Â  Â  Â  Â <span class="comment">//å†è£…å›å»</span></span><br><span class="line"> Â  Â  Â  Â <span class="keyword">while</span>(!help.isEmpty()) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â stack.push(help.pop());</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> (!stack.isEmpty()) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â stack.pop();</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> stack.peek();</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â </span><br><span class="line"> Â  Â <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line"> Â   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="NC580-æŠ¢æ‰“å‡ºå¤´é¸Ÿ"><a href="#NC580-æŠ¢æ‰“å‡ºå¤´é¸Ÿ" class="headerlink" title="NC580. æŠ¢æ‰“å‡ºå¤´é¸Ÿ"></a><a target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/1504075c856248748ca444c8c093d638">NC580. æŠ¢æ‰“å‡ºå¤´é¸Ÿ</a></h2><p>ç°åœ¨æœ‰ n ä¸ªäººç«™æˆä¸€åˆ—ï¼Œç¬¬ i ä¸ªäººçš„èº«é«˜ä¸º<code>a[i]</code>ä»–ä»¬äººæ‰‹ä¸€æŠŠç©å…·æªï¼Œå¹¶ä¸”ä»–ä»¬å–œæ¬¢æŠŠæªä¸¾åœ¨å¤´é¡¶ä¸Šã€‚<br>æ¯ä¸€æ¬¡ç»ƒä¹ å°„å‡»ï¼Œä»–ä»¬éƒ½ä¼šæœæ­£å‰æ–¹å‘å°„ä¸€å‘æ°´å¼¹ã€‚<br>è¿™ä¸ªæ—¶å€™ï¼Œç¬¬ i ä¸ªäººå°„å‡»çš„æ°´å¼¹ï¼Œå°±ä¼šå‡»ä¸­åœ¨ä»–å‰é¢ç¬¬ä¸€ä¸ªæ¯”ä»–é«˜çš„äººã€‚<br>ç‰›ç‰›è®¤ä¸ºè¿™æ ·çš„ç»ƒä¹ ååˆ†çš„è’å”ï¼Œå®Œå…¨å°±æ˜¯å¯¹é•¿å¾—é«˜çš„äººçš„ä¼¤å®³ã€‚<br>äºæ˜¯å®ƒå®šä¹‰äº†ä¸€ä¸ªè’å”åº¦ï¼Œåˆå§‹ä¸º 0ã€‚<br>å¯¹äºç¬¬ i ä¸ªäººï¼Œå¦‚ä¸­ä»–å‡»ä¸­äº†ç¬¬ j ä¸ªäººï¼Œåˆ™è’å”åº¦åŠ  jï¼Œå¦‚æœæ²¡æœ‰å‡»ä¸­ä»»ä½•äººï¼Œåˆ™è’å”åº¦åŠ  0.<br>ç‰›ç‰›æƒ³é—®ä½ ï¼Œä½ èƒ½è®¡ç®—å‡ºè’å”åº¦æ˜¯å¤šå°‘å—ï¼Ÿ</p>
<p><strong>è¾“å…¥</strong></p>
<p>ä¸€ä¸ªæ•´æ•° nï¼ˆ1 â‰¤ n â‰¤ 10^7ï¼‰ï¼Œä¸€ä¸ªæ•°ç»„ a (1 â‰¤ a[i] â‰¤ 10^7)<br>a ä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œ<code>a[i]</code> ä»£è¡¨ç¬¬ i ä¸ªäººèº«é«˜</p>
<p><strong>ç¤ºä¾‹ 1</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">5</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è¯´æ˜ï¼šæ²¡æœ‰ä¸€ä¸ªäººå‡»ä¸­ä»»ä½•ä¸€ä¸ªäºº</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">5</span>,[<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">10</span></span><br><span class="line">è¯´æ˜ï¼šç¬¬äºŒä¸ªäººå‡»ä¸­ç¬¬ä¸€ä¸ªäººï¼Œç¬¬ä¸‰ä¸ªäººå‡»ä¸­ç¬¬äºŒä¸ªäººï¼Œç¬¬å››ä¸ªäººå‡»ä¸­ç¬¬ä¸‰ä¸ªäººï¼Œç¬¬äº”ä¸ªäººå‡»ä¸­ç¬¬å››ä¸ªäººï¼› <span class="number">1</span>+<span class="number">2</span>+<span class="number">3</span>+<span class="number">4</span>=<span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å¾ˆç›´ç™½çš„å•è°ƒæ ˆï¼Œä½†æ˜¯ä¸€å¼€å§‹è¢«é¢˜ç›®çš„ case è¯¯å¯¼äº†ä¸‹ï¼Œæäº†ä¸€ä¸ªå•è°ƒé€’å¢æ ˆï¼Œè¿™é‡Œå¾ˆå¾ˆæ˜æ˜¾åº”è¯¥æ˜¯é€’å‡æ ˆï¼Œé€’å¢æ ˆä¼šæŠŠåŸæœ¬å¤§çš„å€¼ç»™ pop å‡ºå»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//5 4 3 4 1</span></span><br><span class="line"><span class="comment">//ä¸€å¼€å§‹è¢«ä¾‹å­ç»™è¯¯å¯¼äº†ï¼Œæäº†ä¸€æ‰‹å•è°ƒé€’å¢æ ˆã€‚...</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">solve</span> <span class="params">(<span class="type">int</span> n, <span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">long</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0l</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; a[stack.peek()] &lt;= a[i]) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            res += stack.peek()+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
