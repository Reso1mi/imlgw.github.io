<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        å¹¶æŸ¥é›† - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E6%9F%A5%E9%9B%86"><span class="toc-text">å¹¶æŸ¥é›†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UF-%E6%8E%A5%E5%8F%A3"><span class="toc-text">UF æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFind1-QuickFind"><span class="toc-text">UnionFind1-QuickFind</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFind2-QuickUnion"><span class="toc-text">UnionFind2-QuickUnion</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFind3-size-%E4%BC%98%E5%8C%96"><span class="toc-text">UnionFind3-size ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFind4-hight-%E4%BC%98%E5%8C%96"><span class="toc-text">UnionFind4-hight ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UnionFind5-%E8%B7%AF%E5%BE%84%E5%8E%8B%E7%BC%A9"><span class="toc-text">UnionFind5-è·¯å¾„å‹ç¼©</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-text">æ—¶é—´å¤æ‚åº¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E6%89%8B%E4%BE%8B%E9%A2%98"><span class="toc-text">ç»ƒæ‰‹ä¾‹é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#547-%E6%9C%8B%E5%8F%8B%E5%9C%88"><span class="toc-text">547. æœ‹å‹åœˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#128-%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97"><span class="toc-text">128. æœ€é•¿è¿ç»­åºåˆ—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1319-%E8%BF%9E%E9%80%9A%E7%BD%91%E7%BB%9C%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AC%A1%E6%95%B0"><span class="toc-text">1319. è¿é€šç½‘ç»œçš„æ“ä½œæ¬¡æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#399-%E9%99%A4%E6%B3%95%E6%B1%82%E5%80%BC"><span class="toc-text">399. é™¤æ³•æ±‚å€¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#695-%E5%B2%9B%E5%B1%BF%E7%9A%84%E6%9C%80%E5%A4%A7%E9%9D%A2%E7%A7%AF"><span class="toc-text">695. å²›å±¿çš„æœ€å¤§é¢ç§¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#200-%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F"><span class="toc-text">200. å²›å±¿æ•°é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1020-%E9%A3%9E%E5%9C%B0%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-text">1020. é£åœ°çš„æ•°é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#990-%E7%AD%89%E5%BC%8F%E6%96%B9%E7%A8%8B%E7%9A%84%E5%8F%AF%E6%BB%A1%E8%B6%B3%E6%80%A7"><span class="toc-text">990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#684-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5"><span class="toc-text">684. å†—ä½™è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#685-%E5%86%97%E4%BD%99%E8%BF%9E%E6%8E%A5-II"><span class="toc-text">685. å†—ä½™è¿æ¥ II</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD"><span class="toc-text">æœªå®Œå¾…ç»­</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        å¹¶æŸ¥é›†
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2020-02-02 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#ç®—æ³•" title="ç®—æ³•">ç®—æ³•</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#æ•°æ®ç»“æ„" title="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h2 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†ä¸€äº›ä¸äº¤é›†ï¼ˆDisjoint Setsï¼‰çš„åˆå¹¶åŠæŸ¥è¯¢é—®é¢˜ã€‚æœ‰ä¸€ä¸ªè”åˆ-æŸ¥æ‰¾ç®—æ³•ï¼ˆUnion-find Algorithmï¼‰å®šä¹‰äº†ä¸¤ä¸ªç”¨äºæ­¤æ•°æ®ç»“æ„çš„æ“ä½œï¼š</p>
<h3 id="UF-æ¥å£"><a href="#UF-æ¥å£" class="headerlink" title="UF æ¥å£"></a>UF æ¥å£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UF</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>; <span class="comment">//è·å–å¹¶æŸ¥é›†çš„å¤§å°</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>; <span class="comment">//æ˜¯å¦è¿æ¥</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>; <span class="comment">//åˆå¹¶ä¸¤ä¸ªé›†åˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UnionFind1-QuickFind"><a href="#UnionFind1-QuickFind" class="headerlink" title="UnionFind1-QuickFind"></a>UnionFind1-QuickFind</h3><p>æŒ‰ç…§æœ´ç´ çš„æ€è·¯å†™å‡ºçš„å¹¶æŸ¥é›†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind1</span> <span class="keyword">implements</span> <span class="title class_">UF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] id; <span class="comment">//é›†åˆ ids</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind1</span><span class="params">(<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        id=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">            id[i]=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> p)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p&lt;<span class="number">0</span> &amp;&amp; p&gt;=id.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;p is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> id[p];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pID=find(p);</span><br><span class="line">        <span class="type">int</span> qID=find(q);</span><br><span class="line">        <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;id.length;i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (id[i]==qID) &#123;</span><br><span class="line">                id[i]=pID;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–çš„æ—¶å€™æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸åŒçš„é›†åˆ ID</p>
<p><code>find</code>æ“ä½œä¼šè¿”å›ä»–ä»¬æ‰€å±é›†åˆ IDï¼Œæ—¶é—´å¤æ‚åº¦<code>O(1)</code></p>
<p><code>isConnected</code>ä¼šåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„é›†åˆ ID æ˜¯ä¸æ˜¯ç›¸åŒçš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯<code>O(1)</code></p>
<p>è€Œ<code>unionElement</code> åˆå¹¶æ“ä½œå°±æ˜¯éå†æ•´ä¸ªé›†åˆï¼Œå°†é›†åˆ ID ç­‰äºå…¶ä¸­ä¸€ä¸ªçš„æ”¹æˆå¦ä¸€ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦<code>O(N)</code></p>
<blockquote>
<p>è¿™ç§æ–¹å¼å±äºå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†æ˜¯åˆå¹¶çš„æ•ˆç‡å¤ªä½äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ä¸‹</p>
</blockquote>
<h3 id="UnionFind2-QuickUnion"><a href="#UnionFind2-QuickUnion" class="headerlink" title="UnionFind2-QuickUnion"></a>UnionFind2-QuickUnion</h3><p>è¿™ä¸€æ¬¡æˆ‘ä»¬ä¸è®°å½•æ¯ä¸ªå…ƒç´ æ‰€å±çš„é›†åˆ IDï¼Œæˆ‘ä»¬è®°å½•æ¯ä¸ªå…ƒç´ çš„çˆ¶å…ƒç´ çš„ IDï¼Œæ ¹èŠ‚ç‚¹ä¸€æ ·çš„å…ƒç´ å°±æ˜¯ä¸€ä¸ªé›†åˆï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€é¢—å¥‡æ€ªçš„æ ‘ï¼Œç”±å­èŠ‚ç‚¹æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æ ‘ï¼ˆæ£®æ—ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind2</span> <span class="keyword">implements</span> <span class="title class_">UF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind2</span><span class="params">(<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        parent=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">            parent[i]=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">            index=parent[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pID=find(p);</span><br><span class="line">        <span class="type">int</span> qID=find(q);</span><br><span class="line">        <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        parent[pID]=qID;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–çš„æ—¶å€™æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹éƒ½æŒ‡å‘è‡ªå·±</p>
<p><code>find</code>æ“ä½œçš„æ—¶å€™å°±ä¸åœçš„å‘ä¸Šçˆ¬ï¼Œæ‰¾åˆ°æ¯ä¸ªå…ƒç´ çš„æ ¹èŠ‚ç‚¹ï¼Œå°±æ˜¯å®ƒçš„é›†åˆ IDï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯<code>O(h)</code> h æ˜¯æ ‘çš„é«˜åº¦ï¼Œæ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯<code>logN</code>ï¼Œå› ä¸ºè¿™è¯¾æ ‘å¹¶ä¸€å®šæ˜¯ä¸€æ£µäºŒå‰æ ‘</p>
<p><code>isConnected</code> å’Œä¸Šé¢ä¸€æ ·ï¼Œåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„æ ¹èŠ‚ç‚¹æ—¶å€™ä¸€æ ·å°± ok</p>
<p><code>unionElement</code> åˆå¹¶ä¸¤ä¸ªå…ƒç´ çš„é›†åˆï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶ä¸­ä¸€ä¸ª<code>parentID</code>å˜ä¸ºå¦ä¸€ä¸ªçš„<code>parentID</code>å°± Ok äº†ï¼Œæ—¶é—´å¤æ‚åº¦<code>O(hq)+O(hp)</code> (hpï¼Œhq ä»£è¡¨ p å’Œ q å½¢æˆçš„æ ‘çš„é«˜åº¦ï¼‰</p>
<blockquote>
<p>ç›¸æ¯”ä¸Šé¢çš„<code>UnionFInd1</code>æˆ‘ä»¬ç‰ºç‰²äº†ä¸€ç‚¹æŸ¥æ‰¾çš„æ•ˆç‡è·å¾—äº†æ›´é«˜çš„åˆå¹¶æ•ˆç‡ï¼Œä½†æ˜¯ä»ç„¶è¿˜æœ‰å¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼Œæˆ‘ä»¬è¿™é‡Œåœ¨åˆå¹¶ä¸¤ä¸ªé›†åˆçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ä¸¤é¢—æ ‘çš„å½¢çŠ¶ï¼Œç›´æ¥å°†ä¸€é¢—æ ‘åŠ åœ¨äº†å¦ä¸€é¢—çš„åé¢ï¼Œè€Œè¿™æ ·å¾ˆæœ‰å¯èƒ½ä¼šå¢åŠ åˆå¹¶åçš„æ ‘çš„é«˜åº¦ï¼Œç”šè‡³å¯èƒ½ä¼šå½¢æˆä¸€ä¸ªé“¾è¡¨çš„ç»“æ„ï¼Œè¿™å°†æå¤§çš„å½±å“æˆ‘ä»¬çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ›´å¥½çš„åˆå¹¶æ–¹å¼</p>
<p><img src="http://static.imlgw.top/blog/20200101/ifSkJmMWNB2U.png?imageslim" alt="mark"></p>
</blockquote>
<h3 id="UnionFind3-size-ä¼˜åŒ–"><a href="#UnionFind3-size-ä¼˜åŒ–" class="headerlink" title="UnionFind3-size ä¼˜åŒ–"></a>UnionFind3-size ä¼˜åŒ–</h3><p>è¿™é‡Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ª sz æ•°ç»„ç”¨æ¥è®°å½•æ¯ä¸ªé›†åˆçš„å…ƒç´ ä¸ªæ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind3</span> <span class="keyword">implements</span> <span class="title class_">UF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] sz; <span class="comment">//è®°å½•æ¯é¢—æ ‘çš„èŠ‚ç‚¹æ•°é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind3</span><span class="params">(<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        parent=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        sz=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">            parent[i]=i;</span><br><span class="line">            sz[i]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">            index=parent[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pID=find(p);</span><br><span class="line">        <span class="type">int</span> qID=find(q);</span><br><span class="line">        <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sz[pID]&gt;sz[qID]) &#123;</span><br><span class="line">            parent[qID]=pID;</span><br><span class="line">            sz[pID]+=sz[qID];    </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            parent[pID]=qID;</span><br><span class="line">            sz[qID]+=sz[pID];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–çš„æ—¶å€™é¢å¤–çš„å°†æ¯ä¸ªå…ƒç´ çš„ sz ç½®ä¸º 1</p>
<p><code>find</code>æ“ä½œå’Œ<code>isConnected</code>æ²¡æœ‰å˜åŒ–</p>
<p><code>unionElement</code> çš„æ—¶å€™æˆ‘ä»¬ä¸åœ¨æ˜¯ç›²ç›®çš„éšæ„åˆå¹¶ï¼Œè€Œæ˜¯å°† size å°çš„é›†åˆåŠ åœ¨ size å¤§çš„é›†åˆä¸‹</p>
<p><img src="http://static.imlgw.top/blog/20200101/ifSkJmMWNB2U.png?imageslim" alt="mark"></p>
<p>ç±»ä¼¼è¿™æ ·çš„æƒ…å†µä¸‹å°±ä¸ä¼šå°† 1 æ¥åœ¨ 5 ä¸‹é¢ï¼Œè€Œæ˜¯å°† 5 æ¥åœ¨ 1 ä¸‹é¢ï¼Œè¿™æ ·åˆå¹¶åçš„é›†åˆçš„é«˜åº¦å°±ä¸ä¼šå¢å¤§</p>
<blockquote>
<p>ä½†æ˜¯æ ¹æ® size åˆ¤æ–­ä¸€å®šèƒ½å‡†ç¡®åˆ¤æ–­ä¹ˆï¼Ÿå¾ˆæ˜¾ç„¶æ˜¯ä¸è¡Œçš„</p>
</blockquote>
<p><img src="http://static.imlgw.top/blog/20200101/SdfeawuEf9Qz.png?imageslim" alt="mark"></p>
<p>ç±»ä¼¼è¿™æ ·çš„ï¼Œå¦‚æœæŒ‰ç…§ä¹‹å‰çš„æŒ‰ç…§ size åˆå¹¶çš„æ–¹æ¡ˆå¯èƒ½åè€Œä¼šå¯¼è‡´æ ‘çš„é«˜åº¦å¢åŠ ï¼Œæ‰€ä»¥æ›´åŠ åˆç†çš„æ–¹æ¡ˆåº”è¯¥æ˜¯æ ¹æ®æ ‘çš„é«˜åº¦æ¥åˆå¹¶</p>
<h3 id="UnionFind4-hight-ä¼˜åŒ–"><a href="#UnionFind4-hight-ä¼˜åŒ–" class="headerlink" title="UnionFind4-hight ä¼˜åŒ–"></a>UnionFind4-hight ä¼˜åŒ–</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind4</span> <span class="keyword">implements</span> <span class="title class_">UF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] hight; <span class="comment">//æ¯ä¸ªé›†åˆå½¢æˆçš„æ ‘çš„é«˜åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind4</span><span class="params">(<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        parent=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        hight=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">            parent[i]=i;</span><br><span class="line">            hight[i]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">            index=parent[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pID=find(p);</span><br><span class="line">        <span class="type">int</span> qID=find(q);</span><br><span class="line">        <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (hight[pID]&gt;hight[qID]) &#123;</span><br><span class="line">            parent[qID]=pID;    </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(hight[pID]&lt;hight[qID])&#123;</span><br><span class="line">            parent[pID]=qID;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">//é«˜åº¦ç›¸ç­‰æƒ…å†µï¼Œæ‰ä¼šå¢å¤§æ ‘çš„é«˜åº¦</span></span><br><span class="line">            parent[pID]=qID; </span><br><span class="line">            hight[qID]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå§‹åŒ–çš„æ—¶å€™ä»ç„¶å°†æ¯ä¸ªå…ƒç´ çš„é«˜åº¦è®¾ç½®ä¸º 1</p>
<p>åˆå¹¶çš„æ—¶å€™æˆ‘ä»¬æ ¹æ®æ ‘çš„é«˜åº¦æ¥åˆå¹¶ï¼Œå°†é«˜åº¦å°çš„é›†åˆæ·»åŠ åˆ°é«˜åº¦å¤§çš„é›†åˆä¸Šï¼Œè¿™æ ·æ•´ä½“çš„é«˜åº¦å¹¶ä¸ä¼šå˜åŒ–ï¼Œä»ç„¶æ˜¯é«˜åº¦è¾ƒå¤§çš„é›†åˆçš„é«˜åº¦ï¼Œåªæœ‰åœ¨ä¸¤é¢—æ ‘çš„é«˜åº¦ç›¸åŒçš„æ—¶å€™æ‰ä¼šä½¿é›†åˆé«˜åº¦å¢åŠ ï¼Œè¿™ä¸ªæ—¶å€™å°±æ— æ‰€è°“è°æ·»åŠ åˆ°è°ä¸Šäº†</p>
<blockquote>
<p>å›å¤´æƒ³ä¸€æƒ³ï¼Œå…¶å®æˆ‘ä»¬æŸ¥æ‰¾æˆ–è€…åˆå¹¶çš„æ—¶å€™å¹¶ä¸ä¼šå»å…³ç³»æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹åˆæˆ–è€…çˆ·èŠ‚ç‚¹æ˜¯å•¥ï¼Œæˆ‘ä»¬åªå…³å¿ƒçš„æ˜¯è¿™ä¸ªå…ƒç´ çš„ç¥–å®—èŠ‚ç‚¹æ˜¯å•¥ï¼Œä¹Ÿå°±æ˜¯æ ¹èŠ‚ç‚¹æ˜¯å•¥ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›æ¯ä¸ªé›†åˆçš„é«˜åº¦è¶Šå°è¶Šå¥½</p>
</blockquote>
<p><img src="http://static.imlgw.top/blog/20200101/D84lWwYGlVag.png?imageslim" alt="mark"></p>
<h3 id="UnionFind5-è·¯å¾„å‹ç¼©"><a href="#UnionFind5-è·¯å¾„å‹ç¼©" class="headerlink" title="UnionFind5-è·¯å¾„å‹ç¼©"></a>UnionFind5-è·¯å¾„å‹ç¼©</h3><p>åœ¨ find è¿‡ç¨‹ä¸­å¢åŠ äº†è·¯å¾„å‹ç¼©çš„åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionFind5</span> <span class="keyword">implements</span> <span class="title class_">UF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] rank;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UnionFind5</span><span class="params">(<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        parent=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        rank=<span class="keyword">new</span> <span class="title class_">int</span>[size];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++) &#123;</span><br><span class="line">            parent[i]=i;</span><br><span class="line">            rank[i]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">            parent[index]=parent[parent[index]]; <span class="comment">//è·¯å¾„å‹ç¼©</span></span><br><span class="line">            index=parent[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//é€’å½’çš„æ–¹å¼è¿›è¡Œè·¯å¾„å‹ç¼©ï¼Œå¯ä»¥å‹å¾—æ›´ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find2</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(parent[index]!=index)&#123;</span><br><span class="line">            parent[index]=find2(parent[index]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> parent[index];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> pID=find(p);</span><br><span class="line">        <span class="type">int</span> qID=find(q);</span><br><span class="line">        <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rank[pID]&gt;rank[qID]) &#123;</span><br><span class="line">            parent[qID]=pID;    </span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rank[pID]&lt;rank[qID])&#123;</span><br><span class="line">            parent[pID]=qID;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">//é«˜åº¦ç›¸ç­‰æƒ…å†µï¼Œæ‰ä¼šå¢å¤§æ ‘çš„ Rank</span></span><br><span class="line">            parent[pID]=qID; </span><br><span class="line">            rank[qID]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>find æ“ä½œæœ¬èº«å°±æ˜¯ä¸€ä¸ªå‘ä¸Šéå†çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å† find å¾—è¿‡ç¨‹ä¸­å»è¿›è¡Œè·¯å¾„çš„å‹ç¼©</p>
<p>æ ¸å¿ƒçš„è¯­å¥å°±æ˜¯ <code>parent[index]=parent[parent[index]];</code></p>
<p>å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ˜¯è¦æ‰¾çš„æ ¹èŠ‚ç‚¹å°±å°†çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</p>
<p>å½“ç„¶è¿™é‡Œè¿˜æœ‰ä¸€ç§å‹ç¼©çš„æ–¹å¼ï¼Œå¯ä»¥å°†æ ‘å‹ç¼©çš„æ›´çŸ­ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„<code>find2</code>ï¼Œæ ¸å¿ƒè¯­å¥å°±æ˜¯</p>
<p> <code>parent[index]=find2(parent[index])</code> </p>
<p><img src="http://static.imlgw.top/blog/20200101/D84lWwYGlVag.png?imageslim" alt="mark"></p>
<p>å¦‚æœæ˜¯è¿™æ ·çš„æ ‘æ‰§è¡Œ <code>find2(5)</code> å¯ä»¥ç›´æ¥å°†æ ‘å‹ç¼©æˆå·¦è¾¹çš„æ ·å­ï¼Œè€Œ<code>find1(5)</code> å¹¶ä¸èƒ½ä¸€æ¬¡å°±å‹ç¼©æˆè¿™æ ·ï¼Œä¸¤è€…å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œè¿™é‡Œä¸è¿‡å¤šé˜è¿°</p>
<blockquote>
<p>ç»†å¿ƒçš„æœ‹å‹è‚¯å®šå‘ç°äº†ï¼Œæˆ‘è¿™é‡Œå°†<code>hight</code>æ”¹æˆäº†<code>rank</code>ï¼Œä¸ºä»€ä¹ˆè¦æ”¹æˆ rank?</p>
<p>å…¶å®åŸå› å¾ˆç®€å•ï¼Œåœ¨åŠ å…¥äº†è·¯å¾„å‹ç¼©åï¼Œè¿™é‡Œçš„ hight ä¸å†èƒ½è¡¨ç¤ºé«˜åº¦çš„å«ä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹æˆäº† Rank</p>
<p>é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç»§ç»­ç»´æŠ¤è¿™ä¸ªé«˜åº¦äº†ï¼Ÿè¿™æ ·ä¸æ˜¯å°±æ— æ³•å‡†ç¡®çš„åˆ¤æ–­å¦‚ä½•åˆå¹¶äº†å˜›ï¼Ÿ</p>
<p>å…¶å®è¿™é‡Œå¦‚æœæƒ³è¦ç»§ç»­ç»´æŠ¤è¿™ä¸ªæ ‘çš„é«˜åº¦æ˜¯ä¸€ç§ä¸å¤ªæ˜æ™ºçš„é€‰æ‹©ï¼Œæˆæœ¬å¤ªå¤§äº†ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œå¹¶ä¸æ˜¯ç®€å•çš„<code>--</code> å°±å¯ä»¥å®Œæˆçš„ï¼Œä¼šæœ‰å¾ˆå¤šçš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬ç´¢æ€§ç›´æ¥å°†å…¶æ”¹æˆ Rank ä½œä¸ºä¸€ä¸ªå‚è€ƒé‡ï¼Œè¡¨ç¤ºè¿™ä¸ªé›†åˆçš„æ’åï¼Œå…¶å®ä»”ç»†æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬è¿›è¡Œè·¯å¾„å‹ç¼©å¸¦æ¥çš„ä¼˜åŒ–æ˜æ˜¾ä¼šå¤§äºç»´æŠ¤ hight å¸¦æ¥çš„ä¼˜åŒ–</p>
</blockquote>
<h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><p>è¿™é‡Œç»è¿‡ç§‘å­¦å®¶ä»¬çš„è®¡ç®—è¯æ˜å¾—åˆ°æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(log*N)</code>æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å¬è¯´è¿™ä¸ªå¤æ‚åº¦ï¼Œ</p>
<p><img src="http://static.imlgw.top/blog/20200101/iXPijTwciz0b.png?imageslim" alt="mark"></p>
<p><strong>è¿­ä»£å¯¹æ•°</strong></p>
<table>
<thead>
<tr>
<th>n</th>
<th>lg* n</th>
</tr>
</thead>
<tbody><tr>
<td>(âˆ’âˆ, 1]</td>
<td>0</td>
</tr>
<tr>
<td>(1, 2]</td>
<td>1</td>
</tr>
<tr>
<td>(2, 4]</td>
<td>2</td>
</tr>
<tr>
<td>(4, 16]</td>
<td>3</td>
</tr>
<tr>
<td>(16, 65536]</td>
<td>4</td>
</tr>
<tr>
<td>(65536, 2^65536]</td>
<td>5</td>
</tr>
</tbody></table>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ç›¸å½“ä½ï¼Œå¯ä»¥è¿‘ä¼¼çš„è®¤ä¸ºå°±æ˜¯ä¸€ä¸ª<code>O(1)</code> å¸¸æ•°çš„å¤æ‚åº¦</p>
<h2 id="ç»ƒæ‰‹ä¾‹é¢˜"><a href="#ç»ƒæ‰‹ä¾‹é¢˜" class="headerlink" title="ç»ƒæ‰‹ä¾‹é¢˜"></a>ç»ƒæ‰‹ä¾‹é¢˜</h2><h3 id="547-æœ‹å‹åœˆ"><a href="#547-æœ‹å‹åœˆ" class="headerlink" title="547. æœ‹å‹åœˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/friend-circles/">547. æœ‹å‹åœˆ</a></h3><p>ç­ä¸Šæœ‰ N åå­¦ç”Ÿã€‚å…¶ä¸­æœ‰äº›äººæ˜¯æœ‹å‹ï¼Œæœ‰äº›åˆ™ä¸æ˜¯ã€‚ä»–ä»¬çš„å‹è°Šå…·æœ‰æ˜¯ä¼ é€’æ€§ã€‚å¦‚æœå·²çŸ¥ A æ˜¯ B çš„æœ‹å‹ï¼ŒB æ˜¯ C çš„æœ‹å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸º A ä¹Ÿæ˜¯ C çš„æœ‹å‹ã€‚æ‰€è°“çš„æœ‹å‹åœˆï¼Œæ˜¯æŒ‡æ‰€æœ‰æœ‹å‹çš„é›†åˆã€‚</p>
<p>ç»™å®šä¸€ä¸ª N * N çš„çŸ©é˜µ Mï¼Œè¡¨ç¤ºç­çº§ä¸­å­¦ç”Ÿä¹‹é—´çš„æœ‹å‹å…³ç³»ã€‚å¦‚æœ<code>M[i][j] = 1</code>ï¼Œè¡¨ç¤ºå·²çŸ¥ç¬¬ i ä¸ªå’Œ j ä¸ªå­¦ç”Ÿäº’ä¸ºæœ‹å‹å…³ç³»ï¼Œå¦åˆ™ä¸ºä¸çŸ¥é“ã€‚ä½ å¿…é¡»è¾“å‡ºæ‰€æœ‰å­¦ç”Ÿä¸­çš„å·²çŸ¥çš„æœ‹å‹åœˆæ€»æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[[<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span> </span><br><span class="line">è¯´æ˜ï¼šå·²çŸ¥å­¦ç”Ÿ <span class="number">0</span> å’Œå­¦ç”Ÿ <span class="number">1</span> äº’ä¸ºæœ‹å‹ï¼Œä»–ä»¬åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚</span><br><span class="line">ç¬¬ <span class="number">2</span> ä¸ªå­¦ç”Ÿè‡ªå·±åœ¨ä¸€ä¸ªæœ‹å‹åœˆã€‚æ‰€ä»¥è¿”å› <span class="number">2</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[[<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è¯´æ˜ï¼šå·²çŸ¥å­¦ç”Ÿ <span class="number">0</span> å’Œå­¦ç”Ÿ <span class="number">1</span> äº’ä¸ºæœ‹å‹ï¼Œå­¦ç”Ÿ <span class="number">1</span> å’Œå­¦ç”Ÿ <span class="number">2</span> äº’ä¸ºæœ‹å‹ï¼Œæ‰€ä»¥å­¦ç”Ÿ <span class="number">0</span> å’Œå­¦ç”Ÿ <span class="number">2</span> ä¹Ÿæ˜¯æœ‹å‹ï¼Œæ‰€ä»¥ä»–ä»¬ä¸‰ä¸ªåœ¨ä¸€ä¸ªæœ‹å‹åœˆï¼Œè¿”å› <span class="number">1</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>N åœ¨<code>[1,200]</code>çš„èŒƒå›´å†…ã€‚</li>
<li>å¯¹äºæ‰€æœ‰å­¦ç”Ÿï¼Œæœ‰<code>M[i][i] = 1</code>ã€‚</li>
<li>å¦‚æœæœ‰<code>M[i][j] = 1</code>ï¼Œåˆ™æœ‰<code>M[j][i] = 1</code>ã€‚</li>
</ol>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è¿™é¢˜å¾ˆä¹…ä¹‹å‰åšè¿‡ <a href="http://imlgw.top/2019/10/10/leetcode-hui-su/#547-%E6%9C%8B%E5%8F%8B%E5%9C%88">LeetCode å›æº¯&amp;é€’å½’</a> å½“æ—¶ DFS åšçš„ï¼Œå…¶å®è¿™é¢˜åº”è¯¥å±äºæœ€ç»å…¸çš„å¹¶æŸ¥é›†çš„é¢˜ç›®äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] rank;</span><br><span class="line"></span><br><span class="line"><span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">        parent[index]=parent[parent[index]];</span><br><span class="line">        index=parent[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">unionElement</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">    <span class="type">int</span> pID=find(p);</span><br><span class="line">    <span class="type">int</span> qID=find(q);</span><br><span class="line">    <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rank[pID]&gt;rank[qID]) &#123;</span><br><span class="line">        parent[qID]=pID;    </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rank[pID]&lt;rank[qID])&#123;</span><br><span class="line">        parent[pID]=qID;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123; <span class="comment">//é«˜åº¦ç›¸ç­‰æƒ…å†µï¼Œæ‰ä¼šå¢å¤§æ ‘çš„é«˜åº¦</span></span><br><span class="line">        parent[pID]=qID; </span><br><span class="line">        rank[qID]++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findCircleNum</span><span class="params">(<span class="type">int</span>[][] M)</span> &#123;</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[M.length];</span><br><span class="line">    rank=<span class="keyword">new</span> <span class="title class_">int</span>[M.length];</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;M.length;i++) &#123;</span><br><span class="line">        parent[i]=i;</span><br><span class="line">        rank[i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//union</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;M.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;M.length;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (M[i][j]==<span class="number">1</span>) &#123;</span><br><span class="line">                unionElement(i,j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;parent.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (parent[i]==i) &#123;</span><br><span class="line">            res++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œåˆå¹¶ä¹‹åç»Ÿè®¡ä¸€ä¸‹æ•°é‡å°± ok äº†</p>
<h3 id="128-æœ€é•¿è¿ç»­åºåˆ—"><a href="#128-æœ€é•¿è¿ç»­åºåˆ—" class="headerlink" title="128. æœ€é•¿è¿ç»­åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-consecutive-sequence/">128. æœ€é•¿è¿ç»­åºåˆ—</a></h3><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºæœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦ã€‚</p>
<p>è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">100</span>, <span class="number">4</span>, <span class="number">200</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿è¿ç»­åºåˆ—æ˜¯ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]ã€‚å®ƒçš„é•¿åº¦ä¸º <span class="number">4</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>å¹¶æŸ¥é›†è§£æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¹¶æŸ¥é›†</span></span><br><span class="line">HashMap&lt;Integer,Integer&gt; parent;</span><br><span class="line"></span><br><span class="line">HashMap&lt;Integer,Integer&gt; size;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> max=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(parent.get(index)!=index)&#123;</span><br><span class="line">        <span class="comment">//parent[index]=parent[parent[index]];</span></span><br><span class="line">        parent.put(index,parent.get(index));</span><br><span class="line">        index=parent.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">    <span class="type">int</span> pID=find(p);</span><br><span class="line">    <span class="type">int</span> qID=find(q);</span><br><span class="line">    <span class="keyword">if</span> (pID==qID) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> pSize=size.get(pID);</span><br><span class="line">    <span class="type">int</span> qSize=size.get(qID);</span><br><span class="line">    <span class="keyword">if</span> (pSize &gt; qSize) &#123;</span><br><span class="line">        <span class="comment">//parent[qID]=pID;</span></span><br><span class="line">        parent.put(qID,pID);</span><br><span class="line">        <span class="comment">//size[pID]+=size[qID];</span></span><br><span class="line">        size.put(pID,pSize+qSize);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//parent[pID]=qID;</span></span><br><span class="line">        parent.put(pID,qID);</span><br><span class="line">        <span class="comment">//size[qID]+=size[pID];</span></span><br><span class="line">        size.put(qID,pSize+qSize);</span><br><span class="line">    &#125;</span><br><span class="line">    max=Math.max(max,pSize+qSize); <span class="comment">//ç»Ÿè®¡æœ€å¤§å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initUnionFind</span><span class="params">(<span class="type">int</span>[]nums)</span>&#123;</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    size=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        parent.put(nums[i],nums[i]);</span><br><span class="line">        size.put(nums[i],<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestConsecutive</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums ==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    HashSet&lt;Integer&gt; set=<span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        set.add(nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    initUnionFind(nums);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (set.contains(nums[i]-<span class="number">1</span>)) &#123; <span class="comment">//åˆ¤æ–­-1 æˆ–è€…+1 éƒ½å¯ä»¥</span></span><br><span class="line">            union(nums[i],nums[i]-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç”¨å¹¶æŸ¥é›†å…¶å®å¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œç›´æ¥å¾ªç¯ç”¨ HashSet æ„Ÿè§‰ä¼šæ›´å¥½æ›´ç®€æ´  <a href="http://imlgw.top/2019/09/15/leetcode-cha-zhao/">è¯¦è§ LeetCode æŸ¥æ‰¾</a> ä¸è¿‡ç†Ÿæ‚‰ä¸€ä¸‹å¹¶æŸ¥é›†è¿˜æ˜¯ä¸é”™çš„ï¼Œè¿™é‡Œå› ä¸ºæ˜¯æ ¹æ® num çš„æ•°å€¼åˆ¤æ–­çš„ï¼Œcode æ‰€ä»¥ç”¨æ•°ç»„ç´¢å¼•åˆå¹¶æ˜¯è¡Œä¸é€šçš„ï¼Œéœ€è¦æ”¹æˆ Hash è¡¨</p>
<h3 id="1319-è¿é€šç½‘ç»œçš„æ“ä½œæ¬¡æ•°"><a href="#1319-è¿é€šç½‘ç»œçš„æ“ä½œæ¬¡æ•°" class="headerlink" title="1319. è¿é€šç½‘ç»œçš„æ“ä½œæ¬¡æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-operations-to-make-network-connected/">1319. è¿é€šç½‘ç»œçš„æ“ä½œæ¬¡æ•°</a></h3><p>ç”¨ä»¥å¤ªç½‘çº¿ç¼†å°† n å°è®¡ç®—æœºè¿æ¥æˆä¸€ä¸ªç½‘ç»œï¼Œè®¡ç®—æœºçš„ç¼–å·ä» 0 åˆ° n-1ã€‚çº¿ç¼†ç”¨ connections è¡¨ç¤ºï¼Œå…¶ä¸­ connections[i] = [a, b] è¿æ¥äº†è®¡ç®—æœº a å’Œ bã€‚</p>
<p>ç½‘ç»œä¸­çš„ä»»ä½•ä¸€å°è®¡ç®—æœºéƒ½å¯ä»¥é€šè¿‡ç½‘ç»œç›´æ¥æˆ–è€…é—´æ¥è®¿é—®åŒä¸€ä¸ªç½‘ç»œä¸­å…¶ä»–ä»»æ„ä¸€å°è®¡ç®—æœºã€‚</p>
<p>ç»™ä½ è¿™ä¸ªè®¡ç®—æœºç½‘ç»œçš„åˆå§‹å¸ƒçº¿ connectionsï¼Œä½ å¯ä»¥æ‹”å¼€ä»»æ„ä¸¤å°ç›´è¿è®¡ç®—æœºä¹‹é—´çš„çº¿ç¼†ï¼Œå¹¶ç”¨å®ƒè¿æ¥ä¸€å¯¹æœªç›´è¿çš„è®¡ç®—æœºã€‚è¯·ä½ è®¡ç®—å¹¶è¿”å›ä½¿æ‰€æœ‰è®¡ç®—æœºéƒ½è¿é€šæ‰€éœ€çš„æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚å¦‚æœä¸å¯èƒ½ï¼Œåˆ™è¿”å› -1 ã€‚ </p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/02/01/4HfDievqKpbswNh.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">4</span>, connections = [[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šæ‹”ä¸‹è®¡ç®—æœº <span class="number">1</span> å’Œ <span class="number">2</span> ä¹‹é—´çš„çº¿ç¼†ï¼Œå¹¶å°†å®ƒæ’åˆ°è®¡ç®—æœº <span class="number">1</span> å’Œ <span class="number">3</span> ä¸Š</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/02/01/mDjJCSHwOrZoa9g.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">6</span>, connections = [[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">3</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">6</span>, connections = [[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">è¾“å‡ºï¼š-<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šçº¿ç¼†æ•°é‡ä¸è¶³ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">5</span>, connections = [[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">3</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>1 &lt;= n &lt;= 10^5</li>
<li>1 &lt;= connections.length &lt;= min(n*(n-1)/2, 10^5)</li>
<li>connections[i].length == 2</li>
<li>0 &lt;= connections[i][0], connections[i][1] &lt; n</li>
<li>connections[i][0] != connections[i][1]</li>
<li>æ²¡æœ‰é‡å¤çš„è¿æ¥ã€‚</li>
<li>ä¸¤å°è®¡ç®—æœºä¸ä¼šé€šè¿‡å¤šæ¡çº¿ç¼†è¿æ¥ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>1.12 å‘¨èµ›çš„ç¬¬ä¸‰é¢˜ï¼ŒæŒºæœ‰æ„æ€çš„ï¼Œå½“æ—¶æƒ³äº†ä¸€ä¼šå„¿ï¼Œç„¶åå°±ç›´æ¥æƒ³åˆ°äº†å¹¶æŸ¥é›†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] parent; <span class="comment">//çˆ¶ ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[] rank;</span><br><span class="line"></span><br><span class="line"><span class="comment">//p æ‰€å±çš„é›†åˆ ID</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index&lt;<span class="number">0</span> &amp;&amp; index&gt;=parent.length) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;index is out....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(parent[index]!=index)&#123;</span><br><span class="line">        parent[index]=parent[parent[index]];</span><br><span class="line">        index=parent[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">    <span class="type">int</span> pID=find(p);</span><br><span class="line">    <span class="type">int</span> qID=find(q);</span><br><span class="line">    <span class="keyword">if</span> (qID==pID) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rank[pID]&gt;rank[qID]) &#123;</span><br><span class="line">        parent[qID]=pID;    </span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rank[pID]&lt;rank[qID])&#123;</span><br><span class="line">        parent[pID]=qID;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123; <span class="comment">//é«˜åº¦ç›¸ç­‰æƒ…å†µï¼Œæ‰ä¼šå¢å¤§æ ‘çš„é«˜åº¦</span></span><br><span class="line">        parent[pID]=qID; </span><br><span class="line">        rank[qID]++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­é›†åˆ ID æ˜¯ä¸æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> q)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> find(q)==find(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initUF</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    rank=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        parent[i]=i;</span><br><span class="line">        rank[i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">makeConnected</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>[][] connections)</span> &#123;</span><br><span class="line">    initUF(n);</span><br><span class="line">    <span class="type">int</span> more=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;connections.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isConnected(connections[i][<span class="number">0</span>],connections[i][<span class="number">1</span>])) &#123;</span><br><span class="line">            more++; <span class="comment">//å¤šå‡ºæ¥çš„è¾¹ä¸ªæ•°</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            union(connections[i][<span class="number">0</span>],connections[i][<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (parent[i]==i) &#123;</span><br><span class="line">            count++; <span class="comment">//é›†åˆä¸ªæ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count-<span class="number">1</span>&lt;=more?count-<span class="number">1</span>:-<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒæ€è·¯å°±æ˜¯å°†å…ƒç´ åˆå¹¶ï¼Œç„¶åä¸­é—´æ±‚å‡ºå¤šå‡ºçš„è¾¹ï¼Œæœ€ååˆ¤æ–­å¤šå‡ºæ¥çš„è¾¹èƒ½ä¸èƒ½å°†æ‰€æœ‰çš„é›†åˆèšåˆæˆä¸€ä¸ªå¤§é›†åˆï¼Œä¹Ÿå°±æ˜¯<code>count-1&lt;=more</code>çš„æ—¶å€™æ‰å¯ä»¥è”é€šï¼Œå¦åˆ™å°±æ— æ³•è”é€š</p>
<h3 id="399-é™¤æ³•æ±‚å€¼"><a href="#399-é™¤æ³•æ±‚å€¼" class="headerlink" title="399. é™¤æ³•æ±‚å€¼"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/evaluate-division/">399. é™¤æ³•æ±‚å€¼</a></h3><p>ç»™å‡ºæ–¹ç¨‹å¼ A / B = k, å…¶ä¸­ A å’Œ B å‡ä¸ºä»£è¡¨å­—ç¬¦ä¸²çš„å˜é‡ï¼Œ k æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹æ•°å­—ã€‚æ ¹æ®å·²çŸ¥æ–¹ç¨‹å¼æ±‚è§£é—®é¢˜ï¼Œå¹¶è¿”å›è®¡ç®—ç»“æœã€‚å¦‚æœç»“æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1.0ã€‚</p>
<p>ç¤ºä¾‹ :</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ç»™å®š a / b = <span class="number">2.0</span>, b / c = <span class="number">3.0</span></span><br><span class="line">é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ? </span><br><span class="line">è¿”å› [<span class="number">6.0</span>, <span class="number">0.5</span>, -<span class="number">1.0</span>, <span class="number">1.0</span>, -<span class="number">1.0</span> ]</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥ä¸ºï¼š<code>vector&lt;pair&lt;string, string&gt;&gt; equations, vector&lt;double&gt;&amp; values, vector&lt;pair&lt;string, string&gt;&gt; queriesï¼ˆæ–¹ç¨‹å¼ï¼Œæ–¹ç¨‹å¼ç»“æœï¼Œé—®é¢˜æ–¹ç¨‹å¼ï¼‰</code>ï¼Œ å…¶ä¸­ <code>equations.size() == values.size()</code>ï¼Œå³æ–¹ç¨‹å¼çš„é•¿åº¦ä¸æ–¹ç¨‹å¼ç»“æœé•¿åº¦ç›¸ç­‰ï¼ˆç¨‹å¼ä¸ç»“æœä¸€ä¸€å¯¹åº”ï¼‰ï¼Œå¹¶ä¸”ç»“æœå€¼å‡ä¸ºæ­£æ•°ã€‚ä»¥ä¸Šä¸ºæ–¹ç¨‹å¼çš„æè¿°ã€‚ è¿”å›<code>vector&lt;double&gt;</code>ç±»å‹ã€‚</p>
<p>åŸºäºä¸Šè¿°ä¾‹å­ï¼Œè¾“å…¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">equationsï¼ˆæ–¹ç¨‹å¼ï¼‰ = [ [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>], [<span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>] ],</span><br><span class="line">valuesï¼ˆæ–¹ç¨‹å¼ç»“æœï¼‰ = [<span class="number">2.0</span>, <span class="number">3.0</span>],</span><br><span class="line">queriesï¼ˆé—®é¢˜æ–¹ç¨‹å¼ï¼‰ = [ [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;c&quot;</span>], [<span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>], [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;e&quot;</span>], [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>], [<span class="string">&quot;x&quot;</span>, <span class="string">&quot;x&quot;</span>] ]. </span><br></pre></td></tr></table></figure>

<p>è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¦–å…ˆå¼„æ¸…æ¥šé¢˜ç›®çš„æ„æ€ï¼Œè¿™é¢˜ LeetCode ä¸Šåªæ˜¯ midï¼Œå…¶å®æˆ‘æ„Ÿè§‰å¦‚æœç”¨å¹¶æŸ¥é›†åšçš„è¯å°±ä¸æ˜¯ mid é¢˜äº†ï¼Œä»Šå¤©æäº†å¥½é•¿æ—¶é—´å¹¶æŸ¥é›†çš„è§£æ³•</p>
<p>é¦–å…ˆæ¥ä¸€ç‰ˆä¸å¸¦è·¯å¾„å‹ç¼©çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> HashMap&lt;String,String&gt; parent=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> HashMap&lt;String,Double&gt; quotient=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸å¸¦è·¯å¾„å‹ç¼©</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">find</span><span class="params">(String p)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (parent.get(p)!=p) &#123;</span><br><span class="line">        p=parent.get(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(String s)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!parent.containsKey(s)) &#123;</span><br><span class="line">        parent.put(s,s);</span><br><span class="line">        quotient.put(s,<span class="number">1.0</span>);   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(String a,String b,Double value)</span>&#123;</span><br><span class="line">    init(a);init(b);</span><br><span class="line">    String fa=find(a); <span class="comment">// a/fa=val[a], b/fb=val[b]</span></span><br><span class="line">    String fb=find(b);</span><br><span class="line">    <span class="keyword">if</span> (fa.equals(fb)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    parent.put(fa,fb);</span><br><span class="line">    quotient.put(fa,value*(cal(b)/cal(a))); <span class="comment">//cal(a) å’Œ cal(b) ä»£è¡¨ a å’Œ b åˆ°æ ¹èŠ‚ç‚¹çš„æ€»å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span>[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, <span class="type">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;equations.size();i++) &#123;</span><br><span class="line">        List&lt;String&gt; equation=equations.get(i);</span><br><span class="line">        merge(equation.get(<span class="number">0</span>),equation.get(<span class="number">1</span>),values[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span>[] res=<span class="keyword">new</span> <span class="title class_">double</span>[queries.size()];</span><br><span class="line">    <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (List&lt;String&gt; query:queries) &#123;</span><br><span class="line">        String a=find(query.get(<span class="number">0</span>));</span><br><span class="line">        String b=find(query.get(<span class="number">1</span>));</span><br><span class="line">        System.out.println(a+<span class="string">&quot; &quot;</span>+b);</span><br><span class="line">        <span class="keyword">if</span> (!parent.containsKey(query.get(<span class="number">0</span>)) || !parent.containsKey(query.get(<span class="number">1</span>)) || !a.equals(b)) &#123;</span><br><span class="line">            res[index++]=-<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//æ²¡æœ‰è·¯åŠ²å‹ç¼©ï¼Œéœ€è¦éå†æ•´ä¸ªè·¯åŠ²æ±‚ç§¯</span></span><br><span class="line">            res[index++]=cal(query.get(<span class="number">0</span>))/cal(query.get(<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—å½“å‰èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¹˜ç§¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">cal</span><span class="params">(String index)</span>&#123;</span><br><span class="line">    <span class="type">double</span> res=quotient.get(index);</span><br><span class="line">    <span class="keyword">while</span>(parent.get(index)!=index)&#123;</span><br><span class="line">        index=parent.get(index);</span><br><span class="line">        res*=quotient.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®è¿™é¢˜æˆ‘å¼€å§‹æƒ³åˆ°å°±æ˜¯å»ºå›¾ç„¶å BFSï¼Œå¹¶æŸ¥é›†æˆ‘æ˜¯çœŸæ²¡æƒ³åˆ°ï¼Œçœ‹æ¥è¿˜æ˜¯ä¸å¤Ÿæ•é”ï¼Œä¸è¿‡æœ‰ä¸€è¯´ä¸€å¹¶æŸ¥é›†çš„æ–¹æ³•ç¡®å®æ¯”è¾ƒéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯å¸¦äº†è·¯å¾„å‹ç¼©çš„ã€‚</p>
<p>è¿™é‡Œæˆ‘çš„å¹¶æŸ¥é›†çš„æ–¹å‘æ˜¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">a/b=<span class="number">2</span> , b/c=<span class="number">3</span></span><br><span class="line">    </span><br><span class="line">        c  <span class="number">1</span></span><br><span class="line">        ^</span><br><span class="line">        |</span><br><span class="line">        b  <span class="number">3</span></span><br><span class="line">        ^</span><br><span class="line">        |</span><br><span class="line">        a  <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><code>quotient</code>ä»£è¡¨çš„æ˜¯<strong>å½“å‰èŠ‚ç‚¹</strong>æ˜¯<strong>ç›´æ¥çˆ¶èŠ‚ç‚¹</strong>çš„å¤šå°‘å€ï¼Œä¹Ÿå°±æ˜¯ <code>A/fatherA</code>  ï¼Œé‡ç‚¹å°±æ˜¯åˆå¹¶ä¸¤ä¸ªé›†åˆçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">å·²çŸ¥</span><br><span class="line">a / fa = val[a]</span><br><span class="line">b / fb = val[b]</span><br><span class="line">ç°åœ¨æˆ‘ä»¬è¦åˆå¹¶ aï¼Œb ä¸” a / b=value</span><br><span class="line">æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½® parent[fa]=fb</span><br><span class="line">ç”±äº fa çˆ¶èŠ‚ç‚¹å‘ç”Ÿäº†å˜åŒ–æ‰€ä»¥å®ƒçš„å€¼ä¹Ÿéœ€è¦å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¦æ±‚ fa/fb çš„å€¼</span><br><span class="line">val[fa] = fa/fb = a/b * b/fb * fa/a = value * (val[b] / val[a])</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> HashMap&lt;String,String&gt; parent=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> HashMap&lt;String,Double&gt; quotient=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¦è·¯å¾„å‹ç¼©çš„</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">find</span><span class="params">(String p)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parent.get(p)!=p) &#123;</span><br><span class="line">        <span class="comment">//éœ€è¦å…ˆä¿å­˜çˆ¶äº²çš„å€¼ï¼Œå› ä¸ºåé¢å‹ç¼©åæ ‘åªæœ‰ä¸¤å±‚ï¼Œåé¢*çš„å°±æ˜¯æ ¹èŠ‚ç‚¹çš„æƒå€¼ 1, æ˜¯ä¸å¯¹çš„</span></span><br><span class="line">        <span class="comment">//è¿™é‡Œå¯ä»¥çœ‹çœ‹ä¸Šé¢çš„å¹¶èŒ¶å‡ çš„æ–¹å‘å’Œå€¼æ¥åˆ¤æ–­</span></span><br><span class="line">        String f=parent.get(p); </span><br><span class="line">        parent.put(p,find(f));</span><br><span class="line">        <span class="comment">//è¿™æ ·å‹ç¼©åçš„å­èŠ‚ç‚¹æ‰æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">        quotient.put(p,quotient.get(p)*quotient.get(f));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parent.get(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(String s)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!parent.containsKey(s)) &#123;</span><br><span class="line">        parent.put(s,s);</span><br><span class="line">        quotient.put(s,<span class="number">1.0</span>);   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(String a,String b,Double value)</span>&#123;</span><br><span class="line">    init(a);init(b);</span><br><span class="line">    String fa=find(a); <span class="comment">// fa/a=val[a], fb/b=val[b]</span></span><br><span class="line">    String fb=find(b);</span><br><span class="line">    <span class="keyword">if</span> (fa.equals(fb)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    parent.put(fa,fb);</span><br><span class="line">    quotient.put(fa,value*(quotient.get(b)/quotient.get(a))); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span>[] calcEquation(List&lt;List&lt;String&gt;&gt; equations, <span class="type">double</span>[] values, List&lt;List&lt;String&gt;&gt; queries) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;equations.size();i++) &#123;</span><br><span class="line">        List&lt;String&gt; equation=equations.get(i);</span><br><span class="line">        merge(equation.get(<span class="number">0</span>),equation.get(<span class="number">1</span>),values[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span>[] res=<span class="keyword">new</span> <span class="title class_">double</span>[queries.size()];</span><br><span class="line">    <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (List&lt;String&gt; query:queries) &#123;</span><br><span class="line">        String a=query.get(<span class="number">0</span>);</span><br><span class="line">        String b=query.get(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (!parent.containsKey(a) || !parent.containsKey(b)) &#123;</span><br><span class="line">            res[index++]=-<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å…ˆåšè·¯å¾„å‹ç¼©</span></span><br><span class="line">            res[index++]=find(a).equals(find(b))?quotient.get(a)/quotient.get(b):-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°å·²ç»çœç•¥äº†<code>cal</code> å‡½æ•°è®¡ç®—ä»å½“å‰èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æ€»æƒå€¼ç§¯ï¼Œå› ä¸ºè¿™é‡Œè·¯å¾„å‹ç¼©å·²ç»å°†æ ‘å‹ç¼©åˆ°åªæœ‰ä¸¤å±‚äº†ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦äº†ï¼Œæ—¢ç„¶è¦å‹ç¼©åˆ°åªæœ‰ä¸¤å±‚ï¼Œè¿™é‡Œå°±åªèƒ½ä½¿ç”¨é€’å½’æ¥å‹ç¼©ï¼Œå¾ªç¯çš„ç‰ˆæœ¬æ²¡åŠæ³•å‹åˆ°åªæœ‰ä¸¤å±‚ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„å‹ç¼©ä¸­å€¼çš„å˜åŒ–ã€‚</p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>å›¾çš„è§£æ³•æ”¾åˆ°äº† <a href="http://imlgw.top/2019/10/01/leetcode-zhan-dui-lie/">æ ˆå’Œé˜Ÿåˆ—ä¸“é¢˜</a> ä¸­äº†</p>
<h3 id="695-å²›å±¿çš„æœ€å¤§é¢ç§¯"><a href="#695-å²›å±¿çš„æœ€å¤§é¢ç§¯" class="headerlink" title="695. å²›å±¿çš„æœ€å¤§é¢ç§¯"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/max-area-of-island/">695. å²›å±¿çš„æœ€å¤§é¢ç§¯</a></h3><p>ç»™å®šä¸€ä¸ªåŒ…å«äº†ä¸€äº› 0 å’Œ 1 çš„éç©ºäºŒç»´æ•°ç»„ grid , ä¸€ä¸ª å²›å±¿ æ˜¯ç”±å››ä¸ªæ–¹å‘ ï¼ˆæ°´å¹³æˆ–å‚ç›´ï¼‰ çš„ 1 ï¼ˆä»£è¡¨åœŸåœ°ï¼‰ æ„æˆçš„ç»„åˆã€‚ä½ å¯ä»¥å‡è®¾äºŒç»´çŸ©é˜µçš„å››ä¸ªè¾¹ç¼˜éƒ½è¢«æ°´åŒ…å›´ç€ã€‚</p>
<p>æ‰¾åˆ°ç»™å®šçš„äºŒç»´æ•°ç»„ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯ã€‚ï¼ˆå¦‚æœæ²¡æœ‰å²›å±¿ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º 0ã€‚)</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line"> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸Šé¢è¿™ä¸ªç»™å®šçŸ©é˜µåº”è¿”å› 6ã€‚æ³¨æ„ç­”æ¡ˆä¸åº”è¯¥æ˜¯ 11ï¼Œå› ä¸ºå²›å±¿åªèƒ½åŒ…å«æ°´å¹³æˆ–å‚ç›´çš„å››ä¸ªæ–¹å‘çš„â€˜1â€™ã€‚</p>
<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸Šé¢è¿™ä¸ªç»™å®šçš„çŸ©é˜µï¼Œè¿”å› 0ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> ç»™å®šçš„çŸ©é˜µ grid çš„é•¿åº¦å’Œå®½åº¦éƒ½ä¸è¶…è¿‡ 50</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>lc æ‰“å¡é¢˜é€‰äº†è¿™é¢˜ï¼Œä¹‹å‰ç”¨çš„ dfsï¼Œè¿™æ¬¡ç”¨å¹¶æŸ¥é›†å®ç°ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¡¥å……ä¸€ä¸ªå¹¶æŸ¥é›†çš„è§£æ³•</span></span><br><span class="line"><span class="type">int</span>[] parent=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] size=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">    <span class="type">int</span> fa=find(a);</span><br><span class="line">    <span class="type">int</span> fb=find(b);</span><br><span class="line">    <span class="keyword">if</span>(fa==fb) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(size[fa]&gt;size[fb])&#123;</span><br><span class="line">        parent[fb]=fa;</span><br><span class="line">        size[fa]+=size[fb];</span><br><span class="line">        max=Math.max(max,size[fa]);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parent[fa]=fb;</span><br><span class="line">        size[fb]+=size[fa];</span><br><span class="line">        max=Math.max(max,size[fb]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> p)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(parent[p]==p) <span class="keyword">return</span> p;</span><br><span class="line">    parent[p]=find(parent[p]);</span><br><span class="line">    <span class="keyword">return</span> parent[p];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxAreaOfIsland</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> m=grid.length;</span><br><span class="line">    <span class="type">int</span> n=grid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//init</span></span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[m*n];</span><br><span class="line">    size=<span class="keyword">new</span> <span class="title class_">int</span>[m*n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m*n;i++)&#123;</span><br><span class="line">        parent[i]=i;</span><br><span class="line">        size[i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1 1 1 1 </span></span><br><span class="line">    <span class="comment">//1 1 1 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//ç‰¹åˆ¤ä¸€ä¸‹ hahaha~ æ„Ÿè§‰å¦‚æœä¸æ˜¯ lc æœ‰ wacase æˆ‘è¿˜æŒºéš¾å‘ç°è¿™ä¸ª</span></span><br><span class="line">                max=Math.max(max,<span class="number">1</span>);</span><br><span class="line">                <span class="comment">//å’Œå‰é¢ï¼Œä¸Šé¢çš„åˆå¹¶</span></span><br><span class="line">                <span class="keyword">if</span>(i&gt;<span class="number">0</span> &amp;&amp; grid[i-<span class="number">1</span>][j]==<span class="number">1</span>) merge(i*n+j,(i-<span class="number">1</span>)*n+j);</span><br><span class="line">                <span class="keyword">if</span>(j&gt;<span class="number">0</span> &amp;&amp; grid[i][j-<span class="number">1</span>]==<span class="number">1</span>) merge(i*n+j,i*n+j-<span class="number">1</span>);  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="200-å²›å±¿æ•°é‡"><a href="#200-å²›å±¿æ•°é‡" class="headerlink" title="200. å²›å±¿æ•°é‡"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-islands/">200. å²›å±¿æ•°é‡</a></h3><p>ç»™ä½ ä¸€ä¸ªç”± â€˜1â€™ï¼ˆé™†åœ°ï¼‰å’Œ â€˜0â€™ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚</p>
<p>å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆã€‚</p>
<p>æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line"><span class="number">11110</span></span><br><span class="line"><span class="number">11010</span></span><br><span class="line"><span class="number">11000</span></span><br><span class="line"><span class="number">00000</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line"><span class="number">11000</span></span><br><span class="line"><span class="number">00100</span></span><br><span class="line"><span class="number">00011</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šæ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥è€Œæˆã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¡¥å……ä¸€ä¸ªå¹¶æŸ¥é›†çš„å†™æ³•ï¼Œæ‰‹å†™å‡ºæ¥äº†ï¼Œä½†æ˜¯é€»è¾‘å‡ºäº†ä¸€ç‚¹å°é—®é¢˜ï¼Œå¡äº†ä¸€ä¼šå„¿</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¤ä¹ ä¸‹å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="type">int</span>[] rank=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] parent=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(parent[a]==a) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> parent[a]=find(parent[a]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">    <span class="type">int</span> fa=find(a);</span><br><span class="line">    <span class="type">int</span> fb=find(b);</span><br><span class="line">    <span class="keyword">if</span>(fa==fb) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(rank[fa]&gt;rank[fb])&#123;</span><br><span class="line">        parent[fb]=fa;</span><br><span class="line">        rank[fa]+=rank[fb];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parent[fa]=fb;</span><br><span class="line">        rank[fb]+=rank[fa];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numIslands2</span><span class="params">(<span class="type">char</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(grid==<span class="literal">null</span> || grid.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> m=grid.length,n=grid[<span class="number">0</span>].length;</span><br><span class="line">    rank=<span class="keyword">new</span> <span class="title class_">int</span>[m*n];</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[m*n];</span><br><span class="line">    <span class="comment">//init</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j]==<span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                parent[i*n+j]=i*n+j;</span><br><span class="line">                rank[i*n+j]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j]==<span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                <span class="comment">//å’Œä¸Š/å·¦åˆå¹¶</span></span><br><span class="line">                <span class="keyword">if</span>(i&gt;<span class="number">0</span> &amp;&amp; grid[i-<span class="number">1</span>][j]==<span class="string">&#x27;1&#x27;</span>) merge(i*n+j,(i-<span class="number">1</span>)*n+j);</span><br><span class="line">                <span class="keyword">if</span>(j&gt;<span class="number">0</span> &amp;&amp; grid[i][j-<span class="number">1</span>]==<span class="string">&#x27;1&#x27;</span>) merge(i*n+j,i*n+(j-<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//ç›´æ¥å¾ªç¯ parent ä¼šæœ‰é—®é¢˜ï¼Œè¿˜æ˜¯è€è€å®å®éå†çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j]==<span class="string">&#x27;1&#x27;</span> &amp;&amp; parent[i*n+j]==i*n+j)&#123;</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1020-é£åœ°çš„æ•°é‡"><a href="#1020-é£åœ°çš„æ•°é‡" class="headerlink" title="1020. é£åœ°çš„æ•°é‡"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-enclaves/">1020. é£åœ°çš„æ•°é‡</a></h3><p>ç»™å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„ <code>A</code>ï¼Œæ¯ä¸ªå•å…ƒæ ¼ä¸º 0ï¼ˆä»£è¡¨æµ·ï¼‰æˆ– 1ï¼ˆä»£è¡¨é™†åœ°ï¼‰ã€‚</p>
<p>ç§»åŠ¨æ˜¯æŒ‡åœ¨é™†åœ°ä¸Šä»ä¸€ä¸ªåœ°æ–¹èµ°åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼ˆæœå››ä¸ªæ–¹å‘ä¹‹ä¸€ï¼‰æˆ–ç¦»å¼€ç½‘æ ¼çš„è¾¹ç•Œã€‚</p>
<p>è¿”å›ç½‘æ ¼ä¸­<strong>æ— æ³•</strong>åœ¨ä»»æ„æ¬¡æ•°çš„ç§»åŠ¨ä¸­ç¦»å¼€ç½‘æ ¼è¾¹ç•Œçš„é™†åœ°å•å…ƒæ ¼çš„æ•°é‡ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼š </span><br><span class="line">æœ‰ä¸‰ä¸ª <span class="number">1</span> è¢« <span class="number">0</span> åŒ…å›´ã€‚ä¸€ä¸ª <span class="number">1</span> æ²¡æœ‰è¢«åŒ…å›´ï¼Œå› ä¸ºå®ƒåœ¨è¾¹ç•Œä¸Šã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æ‰€æœ‰ <span class="number">1</span> éƒ½åœ¨è¾¹ç•Œä¸Šæˆ–å¯ä»¥åˆ°è¾¾è¾¹ç•Œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>1 &lt;= A.length &lt;= 500</code></li>
<li><code>1 &lt;= A[i].length &lt;= 500</code></li>
<li><code>0 &lt;= A[i][j] &lt;= 1</code></li>
<li>æ‰€æœ‰è¡Œçš„å¤§å°éƒ½ç›¸åŒ</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="type">int</span>[] rank=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] parent=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(parent[a]==a) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> parent[a]=find(parent[a]); <span class="comment">//è·¯å¾„å‹ç¼©</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">    <span class="type">int</span> fa=find(a);</span><br><span class="line">    <span class="type">int</span> fb=find(b);</span><br><span class="line">    <span class="keyword">if</span>(fa==fb) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(rank[fa]&gt;rank[fb])&#123;</span><br><span class="line">        parent[fb]=fa;</span><br><span class="line">        rank[fa]+=rank[fb];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parent[fa]=fb;</span><br><span class="line">        rank[fb]+=rank[fa];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numEnclaves2</span><span class="params">(<span class="type">int</span>[][] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A==<span class="literal">null</span> || A.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> m=A.length,n=A[<span class="number">0</span>].length;</span><br><span class="line">    rank=<span class="keyword">new</span> <span class="title class_">int</span>[m*n+<span class="number">1</span>];</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[m*n+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//init</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                parent[i*n+j]=i*n+j;</span><br><span class="line">                rank[i*n+j]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†è¾¹ç•Œå’Œè™šæ‹ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">    <span class="type">int</span> dummyNode=m*n;</span><br><span class="line">    parent[dummyNode]=dummyNode;</span><br><span class="line">    rank[dummyNode]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span> || j==<span class="number">0</span> || i==m-<span class="number">1</span> || j==n-<span class="number">1</span>)&#123;</span><br><span class="line">                    merge(dummyNode,i*n+j);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">                    <span class="comment">//å’Œå‘¨å›´èŠ‚ç‚¹åˆå¹¶ï¼ˆä¸€å¼€å§‹å¤åˆ¶çš„ä¸Šé¢çš„ï¼Œåªå’Œå·¦ä¸Šçš„åˆå¹¶ï¼Œç»“æœå‡º bug äº† hahaha</span></span><br><span class="line">                    <span class="keyword">if</span>(A[i][j-<span class="number">1</span>]==<span class="number">1</span>) merge(i*n+j,i*n+j-<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span>(A[i-<span class="number">1</span>][j]==<span class="number">1</span>) merge(i*n+j,(i-<span class="number">1</span>)*n+j);</span><br><span class="line">                    <span class="keyword">if</span>(A[i][j+<span class="number">1</span>]==<span class="number">1</span>) merge(i*n+j,i*n+j+<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">if</span>(A[i+<span class="number">1</span>][j]==<span class="number">1</span>) merge(i*n+j,(i+<span class="number">1</span>)*n+j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> dump=find(dummyNode);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="comment">//åˆ¤æ–­å’Œè™šèŠ‚ç‚¹æ˜¯å¦è¿æ¥</span></span><br><span class="line">            <span class="keyword">if</span>(A[i][j]==<span class="number">1</span> &amp;&amp; find(i*n+j)!=dump)&#123;</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="990-ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§"><a href="#990-ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§" class="headerlink" title="990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/satisfiability-of-equality-equations/">990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§</a></h3><p>ç»™å®šä¸€ä¸ªç”±è¡¨ç¤ºå˜é‡ä¹‹é—´å…³ç³»çš„å­—ç¬¦ä¸²æ–¹ç¨‹ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²æ–¹ç¨‹ <code>equations[i]</code> çš„é•¿åº¦ä¸º <code>4</code>ï¼Œå¹¶é‡‡ç”¨ä¸¤ç§ä¸åŒçš„å½¢å¼ä¹‹ä¸€ï¼š<code>&quot;a==b&quot;</code> æˆ– <code>&quot;a!=b&quot;</code>ã€‚åœ¨è¿™é‡Œï¼Œa å’Œ b æ˜¯å°å†™å­—æ¯ï¼ˆä¸ä¸€å®šä¸åŒï¼‰ï¼Œè¡¨ç¤ºå•å­—æ¯å˜é‡åã€‚</p>
<p>åªæœ‰å½“å¯ä»¥å°†æ•´æ•°åˆ†é…ç»™å˜é‡åï¼Œä»¥ä¾¿æ»¡è¶³æ‰€æœ‰ç»™å®šçš„æ–¹ç¨‹æ—¶æ‰è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚ </p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="string">&quot;a==b&quot;</span>,<span class="string">&quot;b!=a&quot;</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šå¦‚æœæˆ‘ä»¬æŒ‡å®šï¼Œa = <span class="number">1</span> ä¸” b = <span class="number">1</span>ï¼Œé‚£ä¹ˆå¯ä»¥æ»¡è¶³ç¬¬ä¸€ä¸ªæ–¹ç¨‹ï¼Œä½†æ— æ³•æ»¡è¶³ç¬¬äºŒä¸ªæ–¹ç¨‹ã€‚æ²¡æœ‰åŠæ³•åˆ†é…å˜é‡åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ–¹ç¨‹ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å‡ºï¼š[<span class="string">&quot;b==a&quot;</span>,<span class="string">&quot;a==b&quot;</span>]</span><br><span class="line">è¾“å…¥ï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‡å®š a = <span class="number">1</span> ä¸” b = <span class="number">1</span> ä»¥æ»¡è¶³æ»¡è¶³è¿™ä¸¤ä¸ªæ–¹ç¨‹ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="string">&quot;a==b&quot;</span>,<span class="string">&quot;b==c&quot;</span>,<span class="string">&quot;a==c&quot;</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="string">&quot;a==b&quot;</span>,<span class="string">&quot;b!=c&quot;</span>,<span class="string">&quot;c==a&quot;</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="string">&quot;c==c&quot;</span>,<span class="string">&quot;b==d&quot;</span>,<span class="string">&quot;x!=z&quot;</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>1 &lt;= equations.length &lt;= 500</code></li>
<li><code>equations[i].length == 4</code></li>
<li><code>equations[i][0]</code> å’Œ <code>equations[i][3]</code> æ˜¯å°å†™å­—æ¯</li>
<li><code>equations[i][1]</code> è¦ä¹ˆæ˜¯ <code>&#39;=&#39;</code>ï¼Œè¦ä¹ˆæ˜¯ <code>&#39;!&#39;</code></li>
<li><code>equations[i][2]</code> æ˜¯ <code>&#39;=&#39;</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>2020.6.8 æ‰“å¡é¢˜ï¼Œåœ¨ç¾¤é‡Œçœ‹è§äº†è®¨è®ºè¯´å¹¶æŸ¥é›†ï¼Œæ‰€ä»¥ç›´æ¥å°±æƒ³åˆ°äº†å¹¶æŸ¥é›†çš„åšæ³•ï¼Œè‡ªå·±æƒ³çš„è¯ emmmï¼Œæ„Ÿè§‰ä¹Ÿèƒ½æƒ³åˆ°ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤æ‚çš„å¹¶æŸ¥é›†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·¯å¾„å‹ç¼©+æŒ‰ç§©åˆå¹¶</span></span><br><span class="line"><span class="type">int</span>[] parent;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] rank;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> p)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(parent[p]==p) <span class="keyword">return</span> p;</span><br><span class="line">    <span class="keyword">return</span> parent[p]=find(parent[p]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">    <span class="type">int</span> af=find(a);</span><br><span class="line">    <span class="type">int</span> bf=find(b);</span><br><span class="line">    <span class="keyword">if</span>(af==bf) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(rank[af]&gt;rank[bf])&#123;</span><br><span class="line">        parent[bf]=af;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rank[af]&lt;rank[bf])&#123;</span><br><span class="line">        parent[af]=bf;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parent[af]=bf;</span><br><span class="line">        rank[bf]++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equationsPossible</span><span class="params">(String[] equations)</span> &#123;</span><br><span class="line">    parent=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>]; <span class="comment">//-&#x27;a&#x27;å‡æ¥å‡å»å¤ªéº»çƒ¦äº†ï¼Œç›´æ¥è®¾ä¸ª 128 å®Œäº‹</span></span><br><span class="line">    rank=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>];</span><br><span class="line">    <span class="comment">//æ’åºåå…ˆåˆå¹¶==, å†åˆ¤æ–­ï¼= å·æ‡’çš„åšæ³•</span></span><br><span class="line">    <span class="comment">//Arrays.sort(equations,(s1,s2)-&gt;s2.charAt(1)-s1.charAt(1));</span></span><br><span class="line">    <span class="keyword">for</span> (String eq:equations) &#123;</span><br><span class="line">        parent[eq.charAt(<span class="number">0</span>)]=eq.charAt(<span class="number">0</span>);</span><br><span class="line">        rank[eq.charAt(<span class="number">0</span>)]=<span class="number">1</span>;</span><br><span class="line">        parent[eq.charAt(<span class="number">3</span>)]=eq.charAt(<span class="number">3</span>);</span><br><span class="line">        rank[eq.charAt(<span class="number">3</span>)]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (String eq:equations) &#123;</span><br><span class="line">        <span class="keyword">if</span>(eq.charAt(<span class="number">1</span>)==<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">            merge(eq.charAt(<span class="number">0</span>),eq.charAt(<span class="number">3</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (String eq:equations) &#123;</span><br><span class="line">        <span class="keyword">if</span>(eq.charAt(<span class="number">1</span>)==<span class="string">&#x27;!&#x27;</span> &amp;&amp; find(eq.charAt(<span class="number">0</span>))==find(eq.charAt(<span class="number">3</span>)))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="684-å†—ä½™è¿æ¥"><a href="#684-å†—ä½™è¿æ¥" class="headerlink" title="684. å†—ä½™è¿æ¥"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/redundant-connection/">684. å†—ä½™è¿æ¥</a></h3><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>åœ¨æœ¬é—®é¢˜ä¸­ï¼Œæ ‘æŒ‡çš„æ˜¯ä¸€ä¸ªè¿é€šä¸”æ— ç¯çš„<strong>æ— å‘</strong>å›¾ã€‚</p>
<p>è¾“å…¥ä¸€ä¸ªå›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæœ‰ç€ N ä¸ªèŠ‚ç‚¹ ï¼ˆèŠ‚ç‚¹å€¼ä¸é‡å¤ 1, 2, â€¦, N) çš„æ ‘åŠä¸€æ¡é™„åŠ çš„è¾¹æ„æˆã€‚é™„åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨ 1 åˆ° N ä¸­é—´ï¼Œè¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚</p>
<p>ç»“æœå›¾æ˜¯ä¸€ä¸ªä»¥<code>è¾¹</code>ç»„æˆçš„äºŒç»´æ•°ç»„ã€‚æ¯ä¸€ä¸ª<code>è¾¹</code>çš„å…ƒç´ æ˜¯ä¸€å¯¹<code>[u, v]</code>Â ï¼Œæ»¡è¶³Â <code>u &lt; v</code>ï¼Œè¡¨ç¤ºè¿æ¥é¡¶ç‚¹<code>u</code>Â å’Œ<code>v</code>çš„<strong>æ— å‘</strong>å›¾çš„è¾¹ã€‚</p>
<p>è¿”å›ä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ï¼Œä½¿å¾—ç»“æœå›¾æ˜¯ä¸€ä¸ªæœ‰ç€ N ä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œåˆ™è¿”å›äºŒç»´æ•°ç»„ä¸­æœ€åå‡ºç°çš„è¾¹ã€‚ç­”æ¡ˆè¾¹Â <code>[u, v]</code> åº”æ»¡è¶³ç›¸åŒçš„æ ¼å¼Â <code>u &lt; v</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[1,2], [1,3], [2,3]]</span><br><span class="line">è¾“å‡ºï¼š[2,3]</span><br><span class="line">è§£é‡Šï¼šç»™å®šçš„æ— å‘å›¾ä¸ºï¼š</span><br><span class="line">  1</span><br><span class="line"> / \</span><br><span class="line">2 - 3</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[1,2], [2,3], [3,4], [1,4], [1,5]]</span><br><span class="line">è¾“å‡ºï¼š[1,4]</span><br><span class="line">è§£é‡Šï¼šç»™å®šçš„æ— å‘å›¾ä¸ºï¼š</span><br><span class="line">5 - 1 - 2</span><br><span class="line">    |   |</span><br><span class="line">    4 - 3</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>  è¾“å…¥çš„äºŒç»´æ•°ç»„å¤§å°åœ¨ 3 åˆ° 1000ã€‚</li>
<li>  äºŒç»´æ•°ç»„ä¸­çš„æ•´æ•°åœ¨ 1 åˆ° N ä¹‹é—´ï¼Œå…¶ä¸­ N æ˜¯è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚</li>
</ul>
<p><strong>æ›´æ–° (2017-09-26):</strong><br>æˆ‘ä»¬å·²ç»é‡æ–°æ£€æŸ¥äº†é—®é¢˜æè¿°åŠæµ‹è¯•ç”¨ä¾‹ï¼Œæ˜ç¡®å›¾æ˜¯_<strong>æ— å‘Â **_å›¾ã€‚å¯¹äºæœ‰å‘å›¾è¯¦è§</strong>ã€‚**å¯¹äºé€ æˆä»»ä½•ä¸ä¾¿ï¼Œæˆ‘ä»¬æ·±æ„Ÿæ­‰æ„ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ²¡å•¥å¥½è¯´çš„ï¼Œé¢˜ç›®æ„æ€è¯»æ‡‚å°±è¡Œäº†</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> parent []<span class="type">int</span></span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">union</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"> Â  Â pa := find(a)</span><br><span class="line"> Â  Â pb := find(b)</span><br><span class="line"> Â  Â <span class="keyword">if</span> pa == pb &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â parent[pa] = pb</span><br><span class="line"> Â  Â <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(a <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">if</span> parent[a] == a &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> a</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â parent[a] = find(parent[a])</span><br><span class="line"> Â  Â <span class="keyword">return</span> parent[a]</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findRedundantConnection</span><span class="params">(edges [][]<span class="type">int</span>)</span></span> []<span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">var</span> n = <span class="built_in">len</span>(edges)</span><br><span class="line"> Â  Â parent = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â parent[i] = i</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> !union(edges[i][<span class="number">0</span>], edges[i][<span class="number">1</span>]) &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">return</span> edges[i]</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> []<span class="type">int</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="685-å†—ä½™è¿æ¥-II"><a href="#685-å†—ä½™è¿æ¥-II" class="headerlink" title="685. å†—ä½™è¿æ¥ II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/redundant-connection-ii/">685. å†—ä½™è¿æ¥ II</a></h3><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>åœ¨æœ¬é—®é¢˜ä¸­ï¼Œæœ‰æ ¹æ ‘æŒ‡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„<strong>æœ‰å‘</strong>å›¾ã€‚è¯¥æ ‘åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€æœ‰å…¶ä»–èŠ‚ç‚¹éƒ½æ˜¯è¯¥æ ¹èŠ‚ç‚¹çš„åç»§ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œé™¤äº†æ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ã€‚</p>
<p>è¾“å…¥ä¸€ä¸ªæœ‰å‘å›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæœ‰ç€ N ä¸ªèŠ‚ç‚¹ ï¼ˆèŠ‚ç‚¹å€¼ä¸é‡å¤ 1, 2, â€¦, N) çš„æ ‘åŠä¸€æ¡é™„åŠ çš„è¾¹æ„æˆã€‚é™„åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨ 1 åˆ° N ä¸­é—´ï¼Œè¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚</p>
<p>ç»“æœå›¾æ˜¯ä¸€ä¸ªä»¥<code>è¾¹</code>ç»„æˆçš„äºŒç»´æ•°ç»„ã€‚ æ¯ä¸€ä¸ª<code>è¾¹</code> çš„å…ƒç´ æ˜¯ä¸€å¯¹ <code>[u, v]</code>ï¼Œç”¨ä»¥è¡¨ç¤º<strong>æœ‰å‘</strong>å›¾ä¸­è¿æ¥é¡¶ç‚¹ <code>u</code> å’Œé¡¶ç‚¹ <code>v</code> çš„è¾¹ï¼Œå…¶ä¸­ <code>u</code> æ˜¯ <code>v</code> çš„ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ã€‚</p>
<p>è¿”å›ä¸€æ¡èƒ½åˆ é™¤çš„è¾¹ï¼Œä½¿å¾—å‰©ä¸‹çš„å›¾æ˜¯æœ‰ N ä¸ªèŠ‚ç‚¹çš„æœ‰æ ¹æ ‘ã€‚è‹¥æœ‰å¤šä¸ªç­”æ¡ˆï¼Œè¿”å›æœ€åå‡ºç°åœ¨ç»™å®šäºŒç»´æ•°ç»„çš„ç­”æ¡ˆã€‚</p>
<p><strong>ç¤ºä¾‹Â 1:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">1</span>,<span class="number">3</span>], [<span class="number">2</span>,<span class="number">3</span>]]</span><br><span class="line">è¾“å‡ºï¼š[<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">è§£é‡Šï¼šç»™å®šçš„æœ‰å‘å›¾å¦‚ä¸‹ï¼š</span><br><span class="line">  <span class="number">1</span></span><br><span class="line"> / \</span><br><span class="line">v   v</span><br><span class="line"><span class="number">2</span>--&gt;<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">2</span>,<span class="number">3</span>], [<span class="number">3</span>,<span class="number">4</span>], [<span class="number">4</span>,<span class="number">1</span>], [<span class="number">1</span>,<span class="number">5</span>]]</span><br><span class="line">è¾“å‡ºï¼š[<span class="number">4</span>,<span class="number">1</span>]</span><br><span class="line">è§£é‡Šï¼šç»™å®šçš„æœ‰å‘å›¾å¦‚ä¸‹ï¼š</span><br><span class="line"><span class="number">5</span> &lt;- <span class="number">1</span> -&gt; <span class="number">2</span></span><br><span class="line">     ^    |</span><br><span class="line">     |    v</span><br><span class="line">     <span class="number">4</span> &lt;- <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>  äºŒç»´æ•°ç»„å¤§å°çš„åœ¨ 3 åˆ° 1000 èŒƒå›´å†…ã€‚</li>
<li>  äºŒç»´æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°åœ¨ 1 åˆ° N ä¹‹é—´ï¼Œå…¶ä¸­ N æ˜¯äºŒç»´æ•°ç»„çš„å¤§å°ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ²¡åšå‡ºæ¥ï¼Œçœ‹çš„é¢˜è§£ï¼Œæ„Ÿè§‰æ€ªæ€ªçš„</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> parent []<span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">union</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    pa := find(a)</span><br><span class="line">    pb := find(b)</span><br><span class="line">    <span class="keyword">if</span> pa == pb &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    parent[pa] = pb</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(a <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> parent[a] == a &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    parent[a] = find(parent[a])</span><br><span class="line">    <span class="keyword">return</span> parent[a]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">judge</span><span class="params">(edges [][]<span class="type">int</span>, k <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    parent = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(edges)+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="built_in">len</span>(edges); i++ &#123;</span><br><span class="line">        parent[i] = i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(edges); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i == k &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> !union(edges[i][<span class="number">0</span>], edges[i][<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findRedundantDirectedConnection</span><span class="params">(edges [][]<span class="type">int</span>)</span></span> []<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(edges)</span><br><span class="line">    <span class="keyword">var</span> indegree = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        indegree[edges[i<span class="number">-1</span>][<span class="number">1</span>]]++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := n<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> indegree[edges[i][<span class="number">1</span>]] == <span class="number">2</span> &#123;</span><br><span class="line">            <span class="comment">//åˆ é™¤è¯¥è¾¹</span></span><br><span class="line">            <span class="keyword">if</span> judge(edges, i) &#123;</span><br><span class="line">                <span class="keyword">return</span> edges[i]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := n<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> indegree[edges[i][<span class="number">1</span>]] == <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> judge(edges, i) &#123;</span><br><span class="line">                <span class="keyword">return</span> edges[i]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> []<span class="type">int</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h3><p>å…¶å®ä¹‹å‰åšçš„ä¸€äº›é¢˜éƒ½å¯ä»¥ç”¨å¹¶æŸ¥é›†åšï¼Œåƒ <a href="">å²›å±¿æ•°é‡</a>ï¼Œ<a href="">å²›å±¿æœ€å¤§é¢ç§¯</a> å•¥çš„ï¼Œè¿™é‡Œå°±ä¸å¤šå†™äº†ï¼Œéƒ½å·®ä¸å¤š</p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
