<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        Redis é›†ç¾¤æ­å»º - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA"><span class="toc-text">Redis é›†ç¾¤æ­å»º</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Redis-%E7%AE%80%E4%BB%8B"><span class="toc-text">ä¸€ã€Redis ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%8E%E5%85%B3%E4%BA%8E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C-nosql-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">1ï¼å…³äºå…³ç³»å‹æ•°æ®åº“å’Œ nosql æ•°æ®åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Redis-%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">2 . Redis çš„å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Redis-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">3. Redis çš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9B%86%E7%BE%A4%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-text">3. é›†ç¾¤çš„æ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%9B%86%E7%BE%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">4. é›†ç¾¤çš„ä½¿ç”¨</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Redis é›†ç¾¤æ­å»º
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2018-05-27 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#æ·˜æ·˜å•†åŸ" title="æ·˜æ·˜å•†åŸ">æ·˜æ·˜å•†åŸ</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#Redis" title="Redis">Redis</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#é›†ç¾¤æ­å»º" title="é›†ç¾¤æ­å»º">é›†ç¾¤æ­å»º</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="Redis-é›†ç¾¤æ­å»º"><a href="#Redis-é›†ç¾¤æ­å»º" class="headerlink" title="Redis é›†ç¾¤æ­å»º"></a>Redis é›†ç¾¤æ­å»º</h1><h1 id="ä¸€ã€Redis-ç®€ä»‹"><a href="#ä¸€ã€Redis-ç®€ä»‹" class="headerlink" title="ä¸€ã€Redis ç®€ä»‹"></a>ä¸€ã€Redis ç®€ä»‹</h1><h3 id="1ï¼å…³äºå…³ç³»å‹æ•°æ®åº“å’Œ-nosql-æ•°æ®åº“"><a href="#1ï¼å…³äºå…³ç³»å‹æ•°æ®åº“å’Œ-nosql-æ•°æ®åº“" class="headerlink" title="1ï¼å…³äºå…³ç³»å‹æ•°æ®åº“å’Œ nosql æ•°æ®åº“"></a>1ï¼å…³äºå…³ç³»å‹æ•°æ®åº“å’Œ nosql æ•°æ®åº“</h3><p>   å…³ç³»å‹æ•°æ®åº“æ˜¯åŸºäºå…³ç³»è¡¨çš„æ•°æ®åº“ï¼Œæœ€ç»ˆä¼šå°†æ•°æ®æŒä¹…åŒ–åˆ° <a href="">ç£ç›˜</a> ä¸Šï¼Œè€Œ nosql æ•°æ®  åº“æ˜¯åŸºäºç‰¹æ®Šçš„ç»“æ„ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨åˆ° <a href="">å†…å­˜</a> çš„æ•°æ®åº“ã€‚ä»æ€§èƒ½ä¸Šè€Œè¨€ï¼Œnosql æ•°æ®åº“  è¦ä¼˜äºå…³ç³»å‹æ•°æ®åº“ï¼Œä»å®‰å…¨æ€§ä¸Šè€Œè¨€å…³ç³»å‹æ•°æ®åº“è¦ä¼˜äº nosql æ•°æ®åº“ï¼Œæ‰€ä»¥åœ¨å®  é™…å¼€å‘ä¸­ä¸€ä¸ªé¡¹ç›®ä¸­ nosql å’Œå…³ç³»å‹æ•°æ®åº“ä¼šä¸€èµ·ä½¿ç”¨ï¼Œè¾¾åˆ°æ€§èƒ½å’Œå®‰å…¨æ€§çš„åŒä¿è¯</p>
<h3 id="2-Redis-çš„å®‰è£…"><a href="#2-Redis-çš„å®‰è£…" class="headerlink" title="2 . Redis çš„å®‰è£…"></a>2 . Redis çš„å®‰è£…</h3><p>è¿™é‡Œå…³äº Redis çš„å®‰è£…ä¸æƒ³å¤šè¯´ï¼Œå®é™…ç”Ÿäº§ä¸­éƒ½æ˜¯å°† Reids å®‰è£…åœ¨ Linux ä¸Šçš„ï¼Œè¿™é‡Œä¸»è¦æ˜¯è¯´é›†ç¾¤çš„æ­å»ºã€‚</p>
<h3 id="3-Redis-çš„ä½¿ç”¨"><a href="#3-Redis-çš„ä½¿ç”¨" class="headerlink" title="3. Redis çš„ä½¿ç”¨"></a>3. Redis çš„ä½¿ç”¨</h3><p>   æˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ Redisï¼Œä½¿ç”¨å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆè¯´çš„ <a target="_blank" rel="noopener" href="http://www.runoob.com/redis/redis-tutorial.html">èœé¸Ÿæ•™ç¨‹</a> ä¸Šéƒ½æœ‰ï¼ŒæŒºç®€å•çš„ã€‚</p>
<h3 id="3-é›†ç¾¤çš„æ­å»º"><a href="#3-é›†ç¾¤çš„æ­å»º" class="headerlink" title="3. é›†ç¾¤çš„æ­å»º"></a>3. é›†ç¾¤çš„æ­å»º</h3><p>Redis è¦åšé›†ç¾¤å¿…é¡»è¦æœ‰è‡³å°‘ä¸‰ä¸ªèŠ‚ç‚¹å¦åˆ™ä»–çš„æŠ•ç¥¨æœºåˆ¶æ— æ³•è¿è¡Œ<br>å¿…é¡»è¦æœ‰è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹éƒ½è®¤ä¸ºæŸä¸€å° Redis æœºå™¨æŒ‚æ‰äº†æ‰ä¼šè®¤ä¸ºé›†ç¾¤æŒ‚æ‰äº†<br><img src="http://p3.cdn.img9.top/ipfs/QmX5E7BViadysS6bZLs7Eeu1VSkvCHEEcUrkSVgWBjwNCx?3.png" alt="Redis"></p>
<p>è¿™é‡Œå†çœ‹çœ‹ Redis é›†ç¾¤çš„æ¶æ„å›¾ï¼<a target="_blank" rel="noopener" href="http://p3.cdn.img9.top/ipfs/QmZ6PpYPozPHppvXGRBMY5LgnrsjAqDaT2s1NoUCT8EFuD?3.png">Redis</a><br>æ¶æ„ç»†èŠ‚ï¼š</p>
<p>(1) æ‰€æœ‰çš„ redis èŠ‚ç‚¹å½¼æ­¤äº’è” (PING-PONG æœºåˆ¶ï¼‰, å†…éƒ¨ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦å’Œå¸¦å®½ã€‚</p>
<p>(2) èŠ‚ç‚¹çš„ fail æ˜¯é€šè¿‡é›†ç¾¤ä¸­è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ£€æµ‹å¤±æ•ˆæ—¶æ‰ç”Ÿæ•ˆã€‚</p>
<p>(3) å®¢æˆ·ç«¯ä¸ redis èŠ‚ç‚¹ç›´è¿ï¼Œä¸éœ€è¦ä¸­é—´ proxy å±‚ã€‚å®¢æˆ·ç«¯ä¸éœ€è¦è¿æ¥é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿æ¥é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹å³å¯</p>
<p>(4)redis-cluster æŠŠæ‰€æœ‰çš„ç‰©ç†èŠ‚ç‚¹æ˜ å°„åˆ° [0-16383]slot ä¸Šï¼Œcluster è´Ÿè´£ç»´æŠ¤ node&lt;-&gt;slot&lt;-&gt;value<br>Redis é›†ç¾¤ä¸­å†…ç½®äº† 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œå½“éœ€è¦åœ¨ Redis é›†ç¾¤ä¸­æ”¾ç½®ä¸€ä¸ª key-value æ—¶ï¼Œredis å…ˆå¯¹ key ä½¿ç”¨ crc16 ç®—æ³•ç®—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹ 16384 æ±‚ä½™æ•°ï¼Œè¿™æ ·æ¯ä¸ª key éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨ 0-16383 ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œredis ä¼šæ ¹æ®èŠ‚ç‚¹æ•°é‡å¤§è‡´å‡ç­‰çš„å°†å“ˆå¸Œæ§½æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ Redis èŠ‚ç‚¹æœ€å¤šä¹Ÿå°± 16384 ä¸ªèŠ‚ç‚¹æœ€å°‘ 3 ä¸ªèŠ‚ç‚¹ã€‚</p>
<ul>
<li>å¼€å§‹æ­å»º<br>è¿™é‡Œæ­å»ºçš„æ˜¯æœ‰ 3 ä¸ªèŠ‚ç‚¹çš„æœ€å°çš„é›†ç¾¤ä¸ºä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€å°å¤‡ä»½æœºä¸€å…±éœ€è¦ 6 å°æœåŠ¡å™¨ï¼Œå°±éœ€è¦å¼€ 6 ä¸ªè™šæ‹Ÿæœºè¿™é‡Œå…¶å®åšæµ‹è¯•æ²¡é‚£ä¸ªå¿…è¦ï¼Œæ­å»ºä¸€ä¸ªä¼ªåˆ†å¸ƒå¼çš„å°±å¯ä»¥äº†ï¼Œåœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šæ­å»º 6 ä¸ª Redis å®ä¾‹</li>
<li>é›†ç¾¤æ­å»ºç¯å¢ƒ<br>1ã€ä½¿ç”¨ ruby è„šæœ¬æ­å»ºé›†ç¾¤ã€‚éœ€è¦ ruby çš„è¿è¡Œç¯å¢ƒã€‚<br>å®‰è£… ruby<br>yum install ruby<br>yum install rubygems<br>ï¼ˆæˆ‘è™šæ‹Ÿæœº yum çš„æ—¶å€™ä¸€ç›´æŠ¥é”™æ— æ³•è§£æï¼Œç„¶ååŠ äº† DNS åæŠ¥ 404 å¾ˆå¥‡æ€ª ç„¶å yum makecache åå°±å¥½äº†ï¼‰<br>2ã€å®‰è£… ruby è„šæœ¬è¿è¡Œä½¿ç”¨çš„åŒ… <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1bW6EUyeEevR5h1cT-g51mQ">redis-3.0.0.gem</a>ã€‚<br>gem install redis-3.0.0.gem<br>è¿™ä¸ªè„šæœ¬åœ¨ä½  Redis æºä»£ç çš„ src ç›®å½•ä¸‹ redis-trib.rb è¿™ä¸ªè„šæœ¬<br>3ã€åˆ›å»º 6 ä¸ª Redis å®ä¾‹<br>ç›´æ¥ copy5 ä»½ç¼–è¯‘åçš„ Redis æ–‡ä»¶ç„¶åæ”¹ä¸‹ç«¯å£ æŠŠ redis.confï¼ˆåœ¨ Redis æºä»£ç ä¸‹ copy è¿‡æ¥ï¼‰é‡Œ cluster-enabled yes å‰æ³¨é‡Šå»æ‰<br>3 ã€å¯åŠ¨ 6 ä¸ª Redis è¿™é‡Œå¯ä»¥å†™ä¸€ä¸ª shell<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">cd redis01</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br><span class="line">cd redis02</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br><span class="line">cd redis03</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br><span class="line">cd redis04</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br><span class="line">cd redis05</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br><span class="line">cd redis06</span><br><span class="line">./redis-server redis.conf</span><br><span class="line">cd ..</span><br></pre></td></tr></table></figure>
4ã€ç”¨ Ruby æ­å»ºé›†ç¾¤ åªéœ€è¦è¿™æ¡å‘½ä»¤é›†ç¾¤å°±æ­å»ºå®Œæ¯•äº†<br>./redis-trib.rb create â€“replicas 1 192.168.25.3:7001 192.168.25.3:7002 192.168.25.3:7003 192.168.25.3:7004 192.168.25.3:7005 192.168.25.3:7006<br>è¡¥ ï¼šè¿™é‡Œçš„ ip ä¸è¦å†™ 127.0.0.1 ä¸ç„¶è¿æ¥é›†ç¾¤çš„æ—¶å€™å°±ä¼šæŠ¥ Too many Cluster redirections? é”™è¯¯ äº²æµ‹ã€‚æˆ‘ä¸æ˜¯å†™çš„ 127.0.0.1 æˆ‘æ˜¯å› ä¸ºåæ¥è™šæ‹Ÿæœº ip å˜äº†ç„¶å<br>replicas åé¢å‚æ•° 1 ä»£è¡¨æ¯ä¸ªèŠ‚ç‚¹ä¼šæœ‰ä¸€å°å¤‡ä»½æœºæ‰€ä»¥åé¢çš„ ip å’Œç«¯å£å·å¿…é¡»æ˜¯å¶æ•°<h3 id="4-é›†ç¾¤çš„ä½¿ç”¨"><a href="#4-é›†ç¾¤çš„ä½¿ç”¨" class="headerlink" title="4. é›†ç¾¤çš„ä½¿ç”¨"></a>4. é›†ç¾¤çš„ä½¿ç”¨</h3>  redis01/redis-cli -p 7002 -c<br>åé¢çš„ c ä»£è¡¨è¿æ¥çš„æ˜¯é›†ç¾¤ å¦‚æœä¸åŠ  c å°±æ˜¯å•æœºçš„ å¦‚æœå­˜å…¥æ•°æ®çš„æ§½ä½ä¸å¯¹åº”å°±ä¼šæŠ¥é”™å½“ç„¶è¿™æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹çš„ä½¿ç”¨ï¼Œwindows ä¸‹ä¹Ÿæœ‰ä¸€äº› Redis çš„å®¢æˆ·ç«¯ã€‚è¿™é‡Œä¸»è¦è®²ç”¨ Java ä»£ç è¿æ¥ Redis è¿™å°±è¦ç”¨åˆ° Jedis äº†è·Ÿ JDBC é‚£ä¸€å¥—å·®ä¸å¤š è¿™é‡Œç›´æ¥è®²åœ¨æ·˜æ·˜ä¸­å®é™…æ˜¯æ€ä¹ˆç”¨çš„å§<br>è¿™é‡Œæœ‰ä¸¤ä¸ªç‰ˆæœ¬é›†ç¾¤ç‰ˆå’Œå•æœºç‰ˆ å¹³å¸¸æµ‹è¯•å°±ç”¨å•æœºç‰ˆæ‰€ä»¥å¯ä»¥å…ˆå†™ä¸€ä¸ªæ¥å£ï¼ŒæŠ½å–ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> redis;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">JedisClient</span> &#123;</span><br><span class="line"></span><br><span class="line">	String <span class="title function_">set</span><span class="params">(String key, String value)</span>;</span><br><span class="line">	String <span class="title function_">get</span><span class="params">(String key)</span>;</span><br><span class="line">	Boolean <span class="title function_">exists</span><span class="params">(String key)</span>;</span><br><span class="line">	Long <span class="title function_">expire</span><span class="params">(String key, <span class="type">int</span> seconds)</span>;</span><br><span class="line">	Long <span class="title function_">ttl</span><span class="params">(String key)</span>;</span><br><span class="line">	Long <span class="title function_">incr</span><span class="params">(String key)</span>;</span><br><span class="line">	Long <span class="title function_">hset</span><span class="params">(String key, String field, String value)</span>;</span><br><span class="line">	String <span class="title function_">hget</span><span class="params">(String key, String field)</span>;</span><br><span class="line">	Long <span class="title function_">hdel</span><span class="params">(String key, String... field)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç„¶åå†™å„è‡ªçš„å®ç°ç±»</p>
<ul>
<li>å•æœºç‰ˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> redis;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.Setter;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisClientPool</span> <span class="keyword">implements</span> <span class="title class_">JedisClient</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">set</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(key, value);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.get(key);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">exists</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Boolean</span> <span class="variable">result</span> <span class="operator">=</span> jedis.exists(key);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">expire</span><span class="params">(String key, <span class="type">int</span> seconds)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> jedis.expire(key, seconds);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">ttl</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> jedis.ttl(key);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">incr</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> jedis.incr(key);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">hset</span><span class="params">(String key, String field, String value)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> jedis.hset(key, field, value);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">hget</span><span class="params">(String key, String field)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.hget(key, field);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">hdel</span><span class="params">(String key, String... field)</span> &#123;</span><br><span class="line">		<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">		<span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> jedis.hdel(key, field);</span><br><span class="line">		jedis.close();</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>é›†ç¾¤ç‰ˆ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> redis;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">import</span> lombok.Setter;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisCluster;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisClientCluster</span> <span class="keyword">implements</span> <span class="title class_">JedisClient</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> JedisCluster jedisCluster;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">set</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.set(key, value);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.get(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Boolean <span class="title function_">exists</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.exists(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">expire</span><span class="params">(String key, <span class="type">int</span> seconds)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.expire(key, seconds);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">ttl</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.ttl(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">incr</span><span class="params">(String key)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.incr(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">hset</span><span class="params">(String key, String field, String value)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.hset(key, field, value);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">hget</span><span class="params">(String key, String field)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.hget(key, field);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">hdel</span><span class="params">(String key, String... field)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> jedisCluster.hdel(key, field);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<br> ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥å†™ä¸ª bean ç„¶ååœ¨éœ€è¦çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥æ³¨å…¥äº†</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">	xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">	xmlns:p=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="line">	xmlns:aop=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="line">	xmlns:tx=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="line">	xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">	xmlns:mybatis-spring=<span class="string">&quot;http://mybatis.org/schema/mybatis-spring&quot;</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">&quot;http://mybatis.org/schema/mybatis-spring http://mybatis.org/schema/mybatis-spring.xsd</span></span><br><span class="line"><span class="string">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</span></span><br><span class="line"><span class="string">		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd</span></span><br><span class="line"><span class="string">		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.2.xsd</span></span><br><span class="line"><span class="string">		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.2.xsd</span></span><br><span class="line"><span class="string">		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.2.xsd&quot;</span>&gt;</span><br><span class="line">	&lt;!--å•æœºç‰ˆ--&gt;</span><br><span class="line">    &lt;!-- 	&lt;bean id=<span class="string">&quot;jedisClientPool&quot;</span> class=<span class="string">&quot;redis.JedisClientPool&quot;</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">&quot;jedisPool&quot;</span> ref=<span class="string">&quot;jedisPool&quot;</span> /&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	&lt;bean id=<span class="string">&quot;jedisPool&quot;</span> class=<span class="string">&quot;redis.clients.jedis.JedisPool&quot;</span>&gt;</span><br><span class="line">		&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">		&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;6379&quot;</span>/&gt;</span><br><span class="line">	&lt;/bean&gt; --&gt;</span><br><span class="line">	&lt;!--é›†ç¾¤ç‰ˆ--&gt;</span><br><span class="line">	&lt;bean id=<span class="string">&quot;jedisClientCluster&quot;</span> class=<span class="string">&quot;redis.JedisClientCluster&quot;</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">&quot;jedisCluster&quot;</span> ref=<span class="string">&quot;jedisCluster&quot;</span>/&gt;		</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;bean id=<span class="string">&quot;jedisCluster&quot;</span> class=<span class="string">&quot;redis.clients.jedis.JedisCluster&quot;</span>&gt;</span><br><span class="line">		&lt;constructor-arg name=<span class="string">&quot;nodes&quot;</span>&gt;</span><br><span class="line">			&lt;set&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7001&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7002&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7003&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7004&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7005&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">				&lt;bean class=<span class="string">&quot;redis.clients.jedis.HostAndPort&quot;</span>&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;192.168.25.4&quot;</span>/&gt;</span><br><span class="line">					&lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;7006&quot;</span>/&gt;</span><br><span class="line">				&lt;/bean&gt;</span><br><span class="line">			&lt;/set&gt;</span><br><span class="line">		&lt;/constructor-arg&gt;			</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåœ¨é›†ç¾¤çš„æ—¶å€™é‡åˆ°äº†é—®é¢˜å°±æ˜¯æˆ‘ä¸Šé¢æåˆ°çš„ ip çš„é—®é¢˜ä¸è¦å†™ 127.0.0.1 è¦å†™å®é™…çš„å†…ç½‘ ip ä»¥åå¦‚æœ ip å˜äº†å°±åªèƒ½é‡æ–°æ¥ä¸€æ¬¡äº†ï¼Œé‚£ä¸ªå‘½ä»¤æˆ‘è¯•äº†ä¸‹æ‰§è¡Œç¬¬äºŒæ¬¡ï¼ŒæŠ¥é”™è¯´æˆ‘é‚£ä¸ªèŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œ<strong>ä¹Ÿè®¸</strong>æŠŠæ•°æ®æ¸…ç©ºäº†å°±å¯ä»¥äº†ã€‚</p>
<ul>
<li>æµ‹è¯•<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRedis</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="comment">//åˆå§‹åŒ– Spring å®¹å™¨</span></span><br><span class="line">	<span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;classpath:spring/applicationContext-redis.xml&quot;</span>);</span><br><span class="line">	<span class="comment">//ä»å®¹å™¨ä¸­è·å– jedisClient å¯¹è±¡ ï¼ˆå•æœºç‰ˆï¼‰ </span></span><br><span class="line">	JedisClient jedisClient=applicationContext.getBean(JedisClient.class);</span><br><span class="line">	jedisClient.set(<span class="string">&quot;testRedis&quot;</span>, <span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">	System.out.println(jedisClient.get(<span class="string">&quot;testRedis&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
