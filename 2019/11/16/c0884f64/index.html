<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        LRU é˜Ÿåˆ—å®ç° - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#146-LRU-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-text">146. LRU ç¼“å­˜æœºåˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UPDATE"><span class="toc-text">UPDATE</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        LRU é˜Ÿåˆ—å®ç°
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2019-11-16 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#LeetCode" title="LeetCode">LeetCode</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#LRU" title="LRU">LRU</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h2 id="146-LRU-ç¼“å­˜æœºåˆ¶"><a href="#146-LRU-ç¼“å­˜æœºåˆ¶" class="headerlink" title="146. LRU ç¼“å­˜æœºåˆ¶"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/lru-cache/">146. LRU ç¼“å­˜æœºåˆ¶</a></h2><p>è¿ç”¨ä½ æ‰€æŒæ¡çš„æ•°æ®ç»“æ„ï¼Œè®¾è®¡å’Œå®ç°ä¸€ä¸ª  LRU ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ ç¼“å­˜æœºåˆ¶ã€‚å®ƒåº”è¯¥æ”¯æŒä»¥ä¸‹æ“ä½œï¼š è·å–æ•°æ® get å’Œ å†™å…¥æ•°æ® put ã€‚</p>
<p>è·å–æ•°æ® <code>get(key)</code> - å¦‚æœå¯†é’¥ (key) å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è·å–å¯†é’¥çš„å€¼ï¼ˆæ€»æ˜¯æ­£æ•°ï¼‰ï¼Œå¦åˆ™è¿”å› -1ã€‚<br>å†™å…¥æ•°æ® <code>put(key, value)</code> - å¦‚æœå¯†é’¥ä¸å­˜åœ¨ï¼Œåˆ™å†™å…¥å…¶æ•°æ®å€¼ã€‚å½“ç¼“å­˜å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶ï¼Œå®ƒåº”è¯¥åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰åˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®å€¼ï¼Œä»è€Œä¸ºæ–°çš„æ•°æ®å€¼ç•™å‡ºç©ºé—´ã€‚</p>
<p><strong>è¿›é˜¶ï¼š</strong></p>
<p>ä½ æ˜¯å¦å¯ä»¥åœ¨ <code>O(1)</code> æ—¶é—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸¤ç§æ“ä½œï¼Ÿ</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">LRUCache</span> <span class="variable">cache</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LRUCache</span>( <span class="number">2</span> <span class="comment">/* ç¼“å­˜å®¹é‡ */</span> );</span><br><span class="line"></span><br><span class="line">cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">cache.put(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">cache.get(<span class="number">1</span>);       <span class="comment">// è¿”å›  1</span></span><br><span class="line">cache.put(<span class="number">3</span>, <span class="number">3</span>);    <span class="comment">// è¯¥æ“ä½œä¼šä½¿å¾—å¯†é’¥ 2 ä½œåºŸ</span></span><br><span class="line">cache.get(<span class="number">2</span>);       <span class="comment">// è¿”å› -1 ï¼ˆæœªæ‰¾åˆ°ï¼‰</span></span><br><span class="line">cache.put(<span class="number">4</span>, <span class="number">4</span>);    <span class="comment">// è¯¥æ“ä½œä¼šä½¿å¾—å¯†é’¥ 1 ä½œåºŸ</span></span><br><span class="line">cache.get(<span class="number">1</span>);       <span class="comment">// è¿”å› -1 ï¼ˆæœªæ‰¾åˆ°ï¼‰</span></span><br><span class="line">cache.get(<span class="number">3</span>);       <span class="comment">// è¿”å›  3</span></span><br><span class="line">cache.get(<span class="number">4</span>);       <span class="comment">// è¿”å›  4</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ”¹äº†å¥½å‡ æ¬¡æ‰æ”¹å¯¹ï¼Œæ ¸å¿ƒæ€è·¯å°±æ˜¯åˆ©ç”¨ HashMap+åŒå‘é“¾è¡¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node pre;</span><br><span class="line">        Node next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.value=value;</span><br><span class="line">            <span class="built_in">this</span>.key=key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    HashMap&lt;Integer,Node&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    Node head=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    Node tail=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> capacity=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity=capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            Node node=map.get(key);</span><br><span class="line">            <span class="comment">//ç§»åŠ¨åˆ°é“¾è¡¨å¤´</span></span><br><span class="line">            move2Head(node);</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        Node newHead=<span class="keyword">new</span> <span class="title class_">Node</span>(key,value);</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            Node node=map.get(key);</span><br><span class="line">            node.value=value;</span><br><span class="line">            <span class="comment">//ç§»åŠ¨åˆ°é“¾è¡¨å¤´</span></span><br><span class="line">            move2Head(node);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (map.size()==capacity) &#123;</span><br><span class="line">            map.remove(tail.key);</span><br><span class="line">            removeNode(tail);</span><br><span class="line">        &#125;</span><br><span class="line">        move2Head(newHead);</span><br><span class="line">        map.put(key,newHead);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeNode</span><span class="params">(Node node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node.key==tail.key) &#123;</span><br><span class="line">            tail=tail.pre;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.pre==<span class="literal">null</span> || node.next==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node.pre.next=node.next;</span><br><span class="line">        node.next.pre=node.pre;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move2Head</span><span class="params">(Node newHead)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (map.size()==<span class="number">0</span>) &#123;</span><br><span class="line">            head=tail=newHead;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newHead.key==head.key) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        removeNode(newHead);</span><br><span class="line">        newHead.next=head;</span><br><span class="line">        newHead.pre=<span class="literal">null</span>;</span><br><span class="line">        head.pre=newHead;</span><br><span class="line">        head=newHead;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶å·²ç»å®ç°äº†ï¼Œæˆ‘ä»¬å°±æ¥è€ƒè™‘ä¸‹ä¸ºå•¥è¦è¿™æ ·å®ç°</p>
<p>å…¶å®æˆ‘ä¸€å¼€å§‹ä¹Ÿä¸çŸ¥é“å’‹å®ç°ï¼ŒæŸ¥äº†ä¸‹æ‰çŸ¥é“ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li><p>é¦–å…ˆæ˜¯é¢˜ç›®è¦æ±‚ get/put æ—¶é—´å¤æ‚åº¦æ˜¯<code>O(1)</code> çš„ï¼Œè€Œæˆ‘ä»¬åœ¨ get/put çš„æ—¶å€™è‚¯å®šä¼šé¢‘ç¹çš„ç§»åŠ¨å…ƒç´ çš„ä½ç½®ï¼Œé‚£æˆ‘ä»¬è‚¯å®šæ˜¯ä¸èƒ½ç”¨æ•°ç»„ï¼Œé˜Ÿåˆ—ä¹‹ç±»çš„ç»“æ„äº†</p>
</li>
<li><p>é‚£æˆ‘ä»¬èƒ½ç”¨å•é“¾è¡¨ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥å°†æœ€è¿‘è®¿é—®çš„èŠ‚ç‚¹æ”¾åœ¨å¤´éƒ¨ï¼Œç„¶åæ¯æ¬¡æ»¡çš„æ—¶å€™å‰”é™¤å°¾èŠ‚ç‚¹çš„å…ƒç´ ï¼Œç”±äºæ˜¯é“¾è¡¨ï¼Œç§»åŠ¨èŠ‚ç‚¹çš„ä½ç½®éƒ½æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚æœè¦ get ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™å°±éº»çƒ¦äº†ï¼Œéœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ‰èƒ½å–åˆ°å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´å•é“¾è¡¨å®šä½æŸä¸ªå…ƒç´ æ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘ç”¨ HashMap æ¥è¾…åŠ©å•é“¾è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬ä»¥ key ä¸º map çš„ keyï¼ŒNode èŠ‚ç‚¹ä¸º map çš„ value å°±å¯ä»¥è¿…é€Ÿå®šä½åˆ°æŸä¸ªå…ƒç´ </p>
</li>
<li><p>å•é“¾è¡¨+HashMap å°±å¯ä»¥äº†ä¹ˆï¼Ÿå…¶å®è¿˜å·®ç‚¹å„¿ï¼Œå¦‚æœç°åœ¨æ»¡äº†ï¼Œéœ€è¦åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦å°† tail çš„å‰ä¸€ä¸ªä½œä¸ºæ–°çš„ tailï¼Œä½†æ˜¯ç”±äºæ˜¯å•é“¾è¡¨ï¼Œæ²¡æœ‰å‰ç½®æŒ‡é’ˆï¼Œä¸æ–¹ä¾¿å®šä½å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€åçš„æ–¹æ¡ˆå°±æ˜¯é‡‡ç”¨**åŒå‘é“¾è¡¨+HashMap **æ¥å®ç° LRU</p>
<p><img src="https://pic4.zhimg.com/80/v2-09f037608b1b2de70b52d1312ef3b307_hd.jpg" alt="img"></p>
</li>
</ol>
<p>å…¶å® LRU æ€æƒ³å¹¶ä¸å¤æ‚ï¼ŒæŒ‰ç…§è§„åˆ™æ¥ç§»åŠ¨èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹å°± OKï¼Œæ“ä½œç³»ç»Ÿæ•™ç¨‹ä¸Šä¹Ÿæœ‰ç±»ä¼¼çš„è¿‡ç¨‹å›¾ï¼Œç†è§£äº†ä¸‹é¢çš„å›¾ä»£ç å°±å¥½å†™äº†</p>
<p><img src="http://static.imlgw.top/blog/20191116/BISfMVdI96FT.png?imageslim" alt="mark"></p>
<p>ä½†æ˜¯å¦‚æœå®ç°çš„æ–¹å¼ä¸å¤ªå¥½çš„è¯ï¼Œå°±ä¼šå†™å¾ˆå¤š if-else åˆ¤æ–­ä¸€äº›è¾¹ç•Œï¼Œæ¯”å¦‚æˆ‘ä¸Šé¢è‡ªå·±çš„å®ç°å°±æ˜¯ã€‚</p>
<p>å…¶å®è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯æˆ‘ä¸Šé¢çš„æ–¹å¼ head å’Œ tail æ˜¯çœŸå®çš„èŠ‚ç‚¹ï¼Œä¸æ˜¯è™šèŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¼šæœ‰å¾ˆå¤šè¾¹ç•Œçš„é€»è¾‘åˆ¤æ–­ï¼Œé¢è¯•çš„æ—¶å€™ä¸å»ºè®®é‚£æ ·å†™ï¼Œå¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼ï¼ï¼</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>é¢è¯•ä¸­æ¯”è¾ƒæ¨èåƒè¿™æ ·å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node pre;</span><br><span class="line">        Node next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.value=value;</span><br><span class="line">            <span class="built_in">this</span>.key=key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    HashMap&lt;Integer,Node&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    Node head=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    Node tail=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> capacity=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity=capacity;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–å¤´å°¾èŠ‚ç‚¹ï¼Œæ³¨æ„è¿™ä¸¤ä¸ªèŠ‚ç‚¹åªæ˜¯ä¸ªå“¨å…µèŠ‚ç‚¹ï¼Œå¹¶ä¸ä¼šå­˜å…¥ map ä¸­</span></span><br><span class="line">        head=<span class="keyword">new</span> <span class="title class_">Node</span>(-<span class="number">1</span>,-<span class="number">1</span>);</span><br><span class="line">        tail=<span class="keyword">new</span> <span class="title class_">Node</span>(-<span class="number">1</span>,-<span class="number">1</span>);</span><br><span class="line">        head.next=tail;</span><br><span class="line">        tail.pre=head;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            Node node=map.get(key);</span><br><span class="line">            <span class="comment">//ç§»åŠ¨åˆ°é“¾è¡¨å¤´</span></span><br><span class="line">            move2Head(node);</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        Node newHead=<span class="keyword">new</span> <span class="title class_">Node</span>(key,value);</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            Node node=map.get(key);</span><br><span class="line">            <span class="comment">//è®¾ç½®èŠ‚ç‚¹å€¼ä¸ºæ–° value</span></span><br><span class="line">            node.value=value;</span><br><span class="line">            <span class="comment">//ç§»åŠ¨åˆ°é“¾è¡¨å¤´</span></span><br><span class="line">            move2Head(node);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ»¡äº†ï¼Œå…ˆå‰”é™¤ tail å†æ’å…¥</span></span><br><span class="line">        <span class="keyword">if</span> (map.size()==capacity) &#123;</span><br><span class="line">            map.remove(popTail().key);</span><br><span class="line">        &#125;</span><br><span class="line">        addFirst(newHead);</span><br><span class="line">        map.put(key,newHead);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼¹å‡º tail</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">popTail</span><span class="params">()</span>&#123;</span><br><span class="line">        Node newTail=tail.pre;</span><br><span class="line">        removeNode(newTail);</span><br><span class="line">        <span class="keyword">return</span> newTail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§»é™¤èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">removeNode</span><span class="params">(Node node)</span>&#123;</span><br><span class="line">        node.pre.next=node.next;</span><br><span class="line">        node.next.pre=node.pre;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»å¤´æ·»åŠ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(Node node)</span>&#123;</span><br><span class="line">        node.next=head.next;</span><br><span class="line">        head.next.pre=node;</span><br><span class="line">        head.next=node;</span><br><span class="line">        node.pre=head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§»åŠ¨èŠ‚ç‚¹åˆ° head</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">move2Head</span><span class="params">(Node node)</span>&#123;</span><br><span class="line">        <span class="comment">//åˆ é™¤åŸé“¾è¡¨ä¸­å¯¹åº”ä½ç½®çš„ node</span></span><br><span class="line">        removeNode(node);</span><br><span class="line">        <span class="comment">//ä»å¤´å†æ·»åŠ ä¸€é</span></span><br><span class="line">        addFirst(node);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åƒè¿™æ ·å†™ï¼Œå°±ä¸ç”¨è€ƒè™‘é‚£ä¹ˆå¤šè¾¹ç•Œï¼Œå†™é‚£ä¹ˆå¤šçš„ if å’Œ elseï¼Œé¢„å…ˆå¼€è¾Ÿä¸¤ä¸ªèŠ‚ç‚¹çš„ä½œä¸ºå“¨å…µèŠ‚ç‚¹ï¼Œè¿™æ ·ä»£ç å°±æ˜¾å¾—æ¸…æ™°ç®€æ´ï¼Œä¹Ÿä¸å®¹æ˜“å‡ºé—®é¢˜</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34133067">å‚è€ƒ</a></p>
<h2 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h2><p>éšä¾¿é‡å†™äº†ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">    </span><br><span class="line">    HashMap&lt;Integer, Node&gt; map = <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">Node</span> <span class="variable">head</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="type">Node</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">Node</span>(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">Node</span>(-<span class="number">1</span>, -<span class="number">1</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        removeNode(node);</span><br><span class="line">        insert2head(node);</span><br><span class="line">        <span class="keyword">return</span> node.val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            node = <span class="keyword">new</span> <span class="title class_">Node</span>(key, value);</span><br><span class="line">            insert2head(node);</span><br><span class="line">            map.put(key, node);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            removeNode(node);</span><br><span class="line">            node.val = value;</span><br><span class="line">            insert2head(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (map.size() &gt; capacity) &#123;</span><br><span class="line">            map.remove(tail.prev.key);</span><br><span class="line">            removeNode(tail.prev);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert2head</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.next = head.next;</span><br><span class="line">        node.prev = head;</span><br><span class="line">        head.next.prev = node;</span><br><span class="line">        head.next = node;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç§»é™¤ Node èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeNode</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">        node.next = <span class="literal">null</span>;</span><br><span class="line">        node.prev = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node prev, next;</span><br><span class="line">        <span class="type">int</span> key, val;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span> <span class="params">(<span class="type">int</span> key, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>Golang</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> LRUCache <span class="keyword">struct</span> &#123;</span><br><span class="line">    capacity <span class="type">int</span></span><br><span class="line">    cache <span class="keyword">map</span>[<span class="type">int</span>]*Node</span><br><span class="line">    head *Node</span><br><span class="line">    tail *Node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Node <span class="keyword">struct</span> &#123;</span><br><span class="line">    prev *Node</span><br><span class="line">    next *Node</span><br><span class="line">    key <span class="type">int</span></span><br><span class="line">    val <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">(capacity <span class="type">int</span>)</span></span> LRUCache &#123;</span><br><span class="line">    head := &amp;Node&#123;key : <span class="number">-1</span>, val : <span class="number">-1</span>&#125;</span><br><span class="line">    tail := &amp;Node&#123;key : <span class="number">-1</span>, val : <span class="number">-1</span>&#125;</span><br><span class="line">    head.next = tail</span><br><span class="line">    tail.next = head</span><br><span class="line">    <span class="keyword">return</span> LRUCache&#123;</span><br><span class="line">        capacity : capacity,</span><br><span class="line">        cache : <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]*Node),</span><br><span class="line">        head : head,</span><br><span class="line">        tail : tail,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LRUCache)</span></span> Get(key <span class="type">int</span>) <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> v, ok := this.cache[key]; ok &#123;</span><br><span class="line">        this.removeNode(v)</span><br><span class="line">        this.insert2Head(v)</span><br><span class="line">        <span class="keyword">return</span> v.val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LRUCache)</span></span> Put(key <span class="type">int</span>, value <span class="type">int</span>)  &#123;</span><br><span class="line">    <span class="keyword">if</span> v, ok := this.cache[key]; ok &#123;</span><br><span class="line">        this.removeNode(v)</span><br><span class="line">        v.val = value</span><br><span class="line">        this.insert2Head(v)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        newNode := &amp;Node&#123;key : key, val : value&#125;</span><br><span class="line">        this.cache[key] = newNode</span><br><span class="line">        this.insert2Head(newNode)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(this.cache) &gt; this.capacity &#123;</span><br><span class="line">        <span class="built_in">delete</span>(this.cache, this.tail.prev.key)</span><br><span class="line">        this.removeNode(this.tail.prev)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LRUCache)</span></span> removeNode (node *Node) &#123;</span><br><span class="line">    node.next.prev = node.prev</span><br><span class="line">    node.prev.next = node.next</span><br><span class="line">    node.prev = <span class="literal">nil</span></span><br><span class="line">    node.next = <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(this *LRUCache)</span></span> insert2Head (node *Node) &#123;</span><br><span class="line">    node.prev = this.head</span><br><span class="line">    node.next = this.head.next</span><br><span class="line">    this.head.next.prev = node</span><br><span class="line">    this.head.next = node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * obj := Constructor(capacity);</span></span><br><span class="line"><span class="comment"> * param_1 := obj.Get(key);</span></span><br><span class="line"><span class="comment"> * obj.Put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
