<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        LeetCode åŠ¨æ€è§„åˆ’ - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#70-%E7%88%AC%E6%A5%BC%E6%A2%AF"><span class="toc-text">70. çˆ¬æ¥¼æ¢¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#198-%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D"><span class="toc-text">198. æ‰“å®¶åŠ«èˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#213-%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D-II"><span class="toc-text">213. æ‰“å®¶åŠ«èˆ II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#64-%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C"><span class="toc-text">64. æœ€å°è·¯å¾„å’Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Path-sum-three-ways"><span class="toc-text">Path sum: three ways</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84"><span class="toc-text">62. ä¸åŒè·¯å¾„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#63-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84-II"><span class="toc-text">63. ä¸åŒè·¯å¾„ II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#576-%E5%87%BA%E7%95%8C%E7%9A%84%E8%B7%AF%E5%BE%84%E6%95%B0"><span class="toc-text">576. å‡ºç•Œçš„è·¯å¾„æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#688-%E2%80%9C%E9%A9%AC%E2%80%9D%E5%9C%A8%E6%A3%8B%E7%9B%98%E4%B8%8A%E7%9A%84%E6%A6%82%E7%8E%87"><span class="toc-text">688. â€œé©¬â€åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#935-%E9%AA%91%E5%A3%AB%E6%8B%A8%E5%8F%B7%E5%99%A8"><span class="toc-text">935. éª‘å£«æ‹¨å·å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#303-%E5%8C%BA%E5%9F%9F%E5%92%8C%E6%A3%80%E7%B4%A2-%E6%95%B0%E7%BB%84%E4%B8%8D%E5%8F%AF%E5%8F%98"><span class="toc-text">303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#413-%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97%E5%88%92%E5%88%86"><span class="toc-text">413. ç­‰å·®æ•°åˆ—åˆ’åˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#343-%E6%95%B4%E6%95%B0%E6%8B%86%E5%88%86"><span class="toc-text">343. æ•´æ•°æ‹†åˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#279-%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0"><span class="toc-text">279. å®Œå…¨å¹³æ–¹æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#91-%E8%A7%A3%E7%A0%81%E6%96%B9%E6%B3%95"><span class="toc-text">91. è§£ç æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-46-%E6%8A%8A%E6%95%B0%E5%AD%97%E7%BF%BB%E8%AF%91%E6%88%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">é¢è¯•é¢˜ 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5375-%E6%81%A2%E5%A4%8D%E6%95%B0%E7%BB%84"><span class="toc-text">5375. æ¢å¤æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#300-%E6%9C%80%E9%95%BF%E4%B8%8A%E5%8D%87%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-text">300. æœ€é•¿ä¸Šå‡å­åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#673-%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="toc-text">673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1016-%E4%BD%BF%E5%BA%8F%E5%88%97%E9%80%92%E5%A2%9E%E7%9A%84%E6%9C%80%E5%B0%8F%E4%BA%A4%E6%8D%A2%E6%AC%A1%E6%95%B0%EF%BC%88LintCode%EF%BC%89"><span class="toc-text">1016. ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼ˆLintCodeï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#354-%E4%BF%84%E7%BD%97%E6%96%AF%E5%A5%97%E5%A8%83%E4%BF%A1%E5%B0%81%E9%97%AE%E9%A2%98"><span class="toc-text">354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53-%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%92%8C"><span class="toc-text">53. æœ€å¤§å­åºå’Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#646-%E6%9C%80%E9%95%BF%E6%95%B0%E5%AF%B9%E9%93%BE"><span class="toc-text">646. æœ€é•¿æ•°å¯¹é“¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#376-%E6%91%86%E5%8A%A8%E5%BA%8F%E5%88%97"><span class="toc-text">376. æ‘†åŠ¨åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#978-%E6%9C%80%E9%95%BF%E6%B9%8D%E6%B5%81%E5%AD%90%E6%95%B0%E7%BB%84"><span class="toc-text">978. æœ€é•¿æ¹æµå­æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#96-%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91"><span class="toc-text">96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#120-%E4%B8%89%E8%A7%92%E5%BD%A2%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E5%92%8C"><span class="toc-text">120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#121-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA"><span class="toc-text">121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#122-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA-II"><span class="toc-text">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#123-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA-III"><span class="toc-text">123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#188-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA-IV"><span class="toc-text">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#714-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA%E5%90%AB%E6%89%8B%E7%BB%AD%E8%B4%B9"><span class="toc-text">714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#309-%E6%9C%80%E4%BD%B3%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E6%97%B6%E6%9C%BA%E5%90%AB%E5%86%B7%E5%86%BB%E6%9C%9F"><span class="toc-text">309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1269-%E5%81%9C%E5%9C%A8%E5%8E%9F%E5%9C%B0%E7%9A%84%E6%96%B9%E6%A1%88%E6%95%B0"><span class="toc-text">1269. åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#152-%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-text">152. ä¹˜ç§¯æœ€å¤§å­åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1567-%E4%B9%98%E7%A7%AF%E4%B8%BA%E6%AD%A3%E6%95%B0%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6"><span class="toc-text">1567. ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1594-%E7%9F%A9%E9%98%B5%E7%9A%84%E6%9C%80%E5%A4%A7%E9%9D%9E%E8%B4%9F%E7%A7%AF"><span class="toc-text">1594. çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#221-%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2"><span class="toc-text">221. æœ€å¤§æ­£æ–¹å½¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1277-%E7%BB%9F%E8%AE%A1%E5%85%A8%E4%B8%BA-1-%E7%9A%84%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%AD%90%E7%9F%A9%E9%98%B5"><span class="toc-text">1277. ç»Ÿè®¡å…¨ä¸º 1 çš„æ­£æ–¹å½¢å­çŸ©é˜µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1139-%E6%9C%80%E5%A4%A7%E7%9A%84%E4%BB%A5-1-%E4%B8%BA%E8%BE%B9%E7%95%8C%E7%9A%84%E6%AD%A3%E6%96%B9%E5%BD%A2"><span class="toc-text">1139. æœ€å¤§çš„ä»¥ 1 ä¸ºè¾¹ç•Œçš„æ­£æ–¹å½¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#44-%E9%80%9A%E9%85%8D%E7%AC%A6%E5%8C%B9%E9%85%8D"><span class="toc-text">44. é€šé…ç¬¦åŒ¹é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-text">10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1326-%E7%81%8C%E6%BA%89%E8%8A%B1%E5%9B%AD%E7%9A%84%E6%9C%80%E5%B0%91%E6%B0%B4%E9%BE%99%E5%A4%B4%E6%95%B0%E7%9B%AE"><span class="toc-text">1326. çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1335-%E5%B7%A5%E4%BD%9C%E8%AE%A1%E5%88%92%E7%9A%84%E6%9C%80%E4%BD%8E%E9%9A%BE%E5%BA%A6"><span class="toc-text">1335. å·¥ä½œè®¡åˆ’çš„æœ€ä½éš¾åº¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5331-%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F-V"><span class="toc-text">5331. è·³è·ƒæ¸¸æˆ V</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1262-%E5%8F%AF%E8%A2%AB%E4%B8%89%E6%95%B4%E9%99%A4%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C"><span class="toc-text">1262. å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-60-n-%E4%B8%AA%E9%AA%B0%E5%AD%90%E7%9A%84%E7%82%B9%E6%95%B0"><span class="toc-text">é¢è¯•é¢˜ 60. n ä¸ªéª°å­çš„ç‚¹æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#264-%E4%B8%91%E6%95%B0-II"><span class="toc-text">264. ä¸‘æ•° II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-62-%E5%9C%86%E5%9C%88%E4%B8%AD%E6%9C%80%E5%90%8E%E5%89%A9%E4%B8%8B%E7%9A%84%E6%95%B0%E5%AD%97"><span class="toc-text">é¢è¯•é¢˜ 62. åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1014-%E6%9C%80%E4%BD%B3%E8%A7%82%E5%85%89%E7%BB%84%E5%90%88"><span class="toc-text">1014. æœ€ä½³è§‚å…‰ç»„åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#983-%E6%9C%80%E4%BD%8E%E7%A5%A8%E4%BB%B7"><span class="toc-text">983. æœ€ä½ç¥¨ä»·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#837-%E6%96%B0-21-%E7%82%B9"><span class="toc-text">837. æ–° 21 ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#329-%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E8%B7%AF%E5%BE%84"><span class="toc-text">329. çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92"><span class="toc-text">å­—ç¬¦ä¸²ç±»å‹çš„åŠ¨æ€è§„åˆ’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1143-%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-text">1143. æœ€é•¿å…¬å…±å­åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AtCoder-LCS"><span class="toc-text">AtCoder-LCS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#718-%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84"><span class="toc-text">718. æœ€é•¿é‡å¤å­æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#72-%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB"><span class="toc-text">72. ç¼–è¾‘è·ç¦»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#647-%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2"><span class="toc-text">647. å›æ–‡å­ä¸²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7"><span class="toc-text">32. æœ€é•¿æœ‰æ•ˆæ‹¬å·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98-17-13-%E6%81%A2%E5%A4%8D%E7%A9%BA%E6%A0%BC"><span class="toc-text">é¢è¯•é¢˜ 17.13. æ¢å¤ç©ºæ ¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#174-%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F"><span class="toc-text">174. åœ°ä¸‹åŸæ¸¸æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#97-%E4%BA%A4%E9%94%99%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">97. äº¤é”™å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#857-%E6%9C%80%E5%B0%8F%E7%9A%84%E7%AA%97%E5%8F%A3%E5%AD%90%E5%BA%8F%E5%88%97%EF%BC%88LintCode%EF%BC%89"><span class="toc-text">857. æœ€å°çš„çª—å£å­åºåˆ—ï¼ˆLintCodeï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1553-%E5%90%83%E6%8E%89-N-%E4%B8%AA%E6%A9%98%E5%AD%90%E7%9A%84%E6%9C%80%E5%B0%91%E5%A4%A9%E6%95%B0"><span class="toc-text">1553. åƒæ‰ N ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NC549-%E5%8F%98%E5%90%91"><span class="toc-text">NC549. å˜å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NC554-%E7%AE%80%E5%8D%95%E5%8F%98%E5%90%91"><span class="toc-text">NC554 ç®€å•å˜å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#787-K-%E7%AB%99%E4%B8%AD%E8%BD%AC%E5%86%85%E6%9C%80%E4%BE%BF%E5%AE%9C%E7%9A%84%E8%88%AA%E7%8F%AD"><span class="toc-text">787. K ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NC557-%E5%A5%BD%E5%A4%9A%E7%89%9B%E7%89%9B"><span class="toc-text">NC557. å¥½å¤šç‰›ç‰›</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#926-%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BF%BB%E8%BD%AC%E5%88%B0%E5%8D%95%E8%B0%83%E9%80%92%E5%A2%9E"><span class="toc-text">926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LCP-19-%E7%A7%8B%E5%8F%B6%E6%94%B6%E8%97%8F%E9%9B%86"><span class="toc-text">LCP 19. ç§‹å¶æ”¶è—é›†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#845-%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E9%95%BF%E5%B1%B1%E8%84%89"><span class="toc-text">845. æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E9%97%B4-DP"><span class="toc-text">åŒºé—´ DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#312-%E6%88%B3%E6%B0%94%E7%90%83"><span class="toc-text">312. æˆ³æ°”çƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#877-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F"><span class="toc-text">877. çŸ³å­æ¸¸æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1039-%E5%A4%9A%E8%BE%B9%E5%BD%A2%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86%E7%9A%84%E6%9C%80%E4%BD%8E%E5%BE%97%E5%88%86"><span class="toc-text">1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#516-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97"><span class="toc-text">516. æœ€é•¿å›æ–‡å­åºåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1312-%E8%AE%A9%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%90%E4%B8%BA%E5%9B%9E%E6%96%87%E4%B8%B2%E7%9A%84%E6%9C%80%E5%B0%91%E6%8F%92%E5%85%A5%E6%AC%A1%E6%95%B0"><span class="toc-text">1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#664-%E5%A5%87%E6%80%AA%E7%9A%84%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="toc-text">664. å¥‡æ€ªçš„æ‰“å°æœº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1547-%E5%88%87%E6%A3%8D%E5%AD%90%E7%9A%84%E6%9C%80%E5%B0%8F%E6%88%90%E6%9C%AC"><span class="toc-text">1547. åˆ‡æ£å­çš„æœ€å°æˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E4%BD%8D-DP"><span class="toc-text">æ•°ä½ DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#233-%E6%95%B0%E5%AD%97-1-%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="toc-text">233. æ•°å­— 1 çš„ä¸ªæ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1420-%E7%94%9F%E6%88%90%E6%95%B0%E7%BB%84"><span class="toc-text">1420. ç”Ÿæˆæ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#902-%E6%9C%80%E5%A4%A7%E4%B8%BA-N-%E7%9A%84%E6%95%B0%E5%AD%97%E7%BB%84%E5%90%88"><span class="toc-text">902. æœ€å¤§ä¸º N çš„æ•°å­—ç»„åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E5%8E%8B-DP"><span class="toc-text">çŠ¶å‹ DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#464-%E6%88%91%E8%83%BD%E8%B5%A2%E5%90%97"><span class="toc-text">464. æˆ‘èƒ½èµ¢å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%9A%E5%BC%88-DP"><span class="toc-text">åšå¼ˆ DP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#292-Nim-%E6%B8%B8%E6%88%8F"><span class="toc-text">292. Nim æ¸¸æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1025-%E9%99%A4%E6%95%B0%E5%8D%9A%E5%BC%88"><span class="toc-text">1025. é™¤æ•°åšå¼ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1140-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F-II"><span class="toc-text">1140. çŸ³å­æ¸¸æˆ II</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1406-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F-III"><span class="toc-text">1406. çŸ³å­æ¸¸æˆ III</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1510-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F-IV"><span class="toc-text">1510. çŸ³å­æ¸¸æˆ IV</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#486-%E9%A2%84%E6%B5%8B%E8%B5%A2%E5%AE%B6"><span class="toc-text">486. é¢„æµ‹èµ¢å®¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E8%AE%BA"><span class="toc-text">å›¾è®º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#743-%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4"><span class="toc-text">743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1584-%E8%BF%9E%E6%8E%A5%E6%89%80%E6%9C%89%E7%82%B9%E7%9A%84%E6%9C%80%E5%B0%8F%E8%B4%B9%E7%94%A8"><span class="toc-text">1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        LeetCode åŠ¨æ€è§„åˆ’
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2019-09-01 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#åŠ¨æ€è§„åˆ’" title="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#LeetCode" title="LeetCode">LeetCode</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h2 id="70-çˆ¬æ¥¼æ¢¯"><a href="#70-çˆ¬æ¥¼æ¢¯" class="headerlink" title="70. çˆ¬æ¥¼æ¢¯"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/climbing-stairs/">70. çˆ¬æ¥¼æ¢¯</a></h2><p>You are climbing a stair case. It takes <em>n</em> steps to reach to the top.</p>
<p>Each time you can either climb 1 or 2 steps. In how many distinct ways can you climb to the top?</p>
<p><strong>Note:</strong> Given <em>n</em> will be a positive integer.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Input: <span class="number">2</span></span><br><span class="line">Output: <span class="number">2</span></span><br><span class="line">Explanation: There are two ways to climb to the top.</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> <span class="number">1</span> step + <span class="number">1</span> step</span><br><span class="line"><span class="number">2.</span> <span class="number">2</span> steps</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Input: <span class="number">3</span></span><br><span class="line">Output: <span class="number">3</span></span><br><span class="line">Explanation: There are three ways to climb to the top.</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> <span class="number">1</span> step + <span class="number">1</span> step + <span class="number">1</span> step</span><br><span class="line"><span class="number">2.</span> <span class="number">1</span> step + <span class="number">2</span> steps</span><br><span class="line"><span class="number">3.</span> <span class="number">2</span> steps + <span class="number">1</span> step</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ²¡å•¥å¥½è¯´çš„ï¼Œå¯ä»¥è¯´æ˜¯æœ€ç»å…¸çš„ dp é¢˜äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">climbStairsDp</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="type">int</span> []dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        dp[i]=dp[i-<span class="number">1</span>]+dp[i-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="198-æ‰“å®¶åŠ«èˆ"><a href="#198-æ‰“å®¶åŠ«èˆ" class="headerlink" title="198. æ‰“å®¶åŠ«èˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/house-robber/">198. æ‰“å®¶åŠ«èˆ</a></h2><p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p>
<p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½ åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Input: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line">Output: <span class="number">4</span></span><br><span class="line">Explanation: Rob house <span class="number">1</span> (money = <span class="number">1</span>) and then rob house <span class="number">3</span> (money = <span class="number">3</span>).</span><br><span class="line">             Total amount you <span class="type">can</span> <span class="variable">rob</span> <span class="operator">=</span> <span class="number">1</span> + <span class="number">3</span> = <span class="number">4.</span></span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Input: [<span class="number">2</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line">Output: <span class="number">12</span></span><br><span class="line">Explanation: Rob house <span class="number">1</span> (money = <span class="number">2</span>), rob house <span class="number">3</span> (money = <span class="number">9</span>) and rob house <span class="number">5</span> (money = <span class="number">1</span>).</span><br><span class="line">             Total amount you <span class="type">can</span> <span class="variable">rob</span> <span class="operator">=</span> <span class="number">2</span> + <span class="number">9</span> + <span class="number">1</span> = <span class="number">12.</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ç®€å•çš„ dp é¢˜ï¼Œdp æ–¹ç¨‹å¾ˆå®¹æ˜“å¾—åˆ°ï¼Œ<code>dp[i]=max(dp[i-2]+nums[i],dp[i-1])</code> ï¼ˆ2020.3.22 æ›´æ–°äº†ä»£ç ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  Max[i]=max(nums[i-2]+nums[i],nums[i-1])</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    dp[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">        dp[i]=Math.max(i&gt;=<span class="number">2</span>?dp[i-<span class="number">2</span>]+nums[i]:nums[i],dp[i-<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[nums.length-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ—¶é—´ç©ºé—´éƒ½æ˜¯ O(N)ï¼Œéœ€è¦æ³¨æ„è¾¹ç•Œæ¡ä»¶</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ç©ºé—´å¤æ‚åº¦çš„ä¼˜åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Max[i]=max(pre+nums[i],cur);  </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums==<span class="literal">null</span>||nums.length&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> pre= <span class="number">0</span>; <span class="comment">//å‰ä¸€å¤©</span></span><br><span class="line">    <span class="type">int</span> cur= <span class="number">0</span>; <span class="comment">//å½“å¤©ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†ä¿å­˜å‰åä¸¤å¤©çš„ dp[i]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="type">int</span> temp=cur;</span><br><span class="line">        cur=Math.max(pre+nums[i],cur);</span><br><span class="line">        <span class="comment">//å‘åèµ°</span></span><br><span class="line">        pre=temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="213-æ‰“å®¶åŠ«èˆ-II"><a href="#213-æ‰“å®¶åŠ«èˆ-II" class="headerlink" title="213. æ‰“å®¶åŠ«èˆ II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/house-robber-ii/">213. æ‰“å®¶åŠ«èˆ II</a></h2><p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½<strong>å›´æˆä¸€åœˆ</strong>ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„ã€‚åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p>
<p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½ åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šä½ ä¸èƒ½å…ˆå·çªƒ <span class="number">1</span> å·æˆ¿å±‹ï¼ˆé‡‘é¢ = <span class="number">2</span>ï¼‰ï¼Œç„¶åå·çªƒ <span class="number">3</span> å·æˆ¿å±‹ï¼ˆé‡‘é¢ = <span class="number">2</span>ï¼‰, å› ä¸ºä»–ä»¬æ˜¯ç›¸é‚»çš„ã€‚</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ 2:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šä½ å¯ä»¥å…ˆå·çªƒ <span class="number">1</span> å·æˆ¿å±‹ï¼ˆé‡‘é¢ = <span class="number">1</span>ï¼‰ï¼Œç„¶åå·çªƒ <span class="number">3</span> å·æˆ¿å±‹ï¼ˆé‡‘é¢ = <span class="number">3</span>ï¼‰ã€‚</span><br><span class="line">     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = <span class="number">1</span> + <span class="number">3</span> = <span class="number">4</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¸ä¸Šä¸€é¢˜ç›¸æ¯”æˆ¿å±‹éƒ½å›´æˆä¸€åœˆäº†ï¼Œå…¶å®å›´æˆä¸€åœˆä¹Ÿå°±è¯´æ˜<code>nums[0]</code>å’Œ<code>nums[len-1]</code>ä¸èƒ½åŒæ—¶å·ï¼Œæ‰€ä»¥å°±å¯ä»¥åˆ†ä¸¤ç§æƒ…å†µåˆ†åˆ«æ±‚æœ€å¤§å€¼ï¼Œç„¶åæ±‚æœ€ç»ˆçš„æœ€å¤§å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span> [] nums)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(nums==<span class="literal">null</span>||nums.length&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(nums.length==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(nums.length==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(nums[<span class="number">0</span>],nums[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=nums.length;</span><br><span class="line">    <span class="keyword">return</span> Math.max(rob(nums,<span class="number">1</span>,n),rob(nums,<span class="number">0</span>,n-<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums,<span class="type">int</span> start,<span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="type">int</span> pre=<span class="number">0</span>; <span class="comment">//å‰ä¸€å®¶æœ€å¤§å€¼</span></span><br><span class="line">    <span class="type">int</span> cur=<span class="number">0</span>; <span class="comment">//å½“å‰æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=start;i&lt;end;i++) &#123;</span><br><span class="line">        <span class="type">int</span> temp=cur;</span><br><span class="line">        cur=Math.max(pre+nums[i],cur);</span><br><span class="line">        pre=temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="64-æœ€å°è·¯å¾„å’Œ"><a href="#64-æœ€å°è·¯å¾„å’Œ" class="headerlink" title="64. æœ€å°è·¯å¾„å’Œ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-path-sum/">64. æœ€å°è·¯å¾„å’Œ</a></h2><p>ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ m x n ç½‘æ ¼ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚</p>
<p><strong>è¯´æ˜</strong>ï¼šæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[</span><br><span class="line">  [<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">5</span>,<span class="number">1</span>],</span><br><span class="line">  [<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šå› ä¸ºè·¯å¾„ <span class="number">1</span>â†’<span class="number">3</span>â†’<span class="number">1</span>â†’<span class="number">1</span>â†’<span class="number">1</span> çš„æ€»å’Œæœ€å°ã€‚</span><br></pre></td></tr></table></figure>

<p>å¾ˆç»å…¸çš„ DP é¢˜ã€‚</p>
<p>é€’æ¨å…¬å¼ï¼š<code>dp[i][j]  = grid[i][j] + Math.min(dp[i-1][j],dp[i][j-1])</code></p>
<p>dp[i] [j] ä¸ºæ¯ä¸ªæ ¼å­åˆ°<code>å·¦ä¸Šè§’</code>æœ€çŸ­è·¯å¾„ ï¼Œæ¯ä¸ªæ ¼å­åˆ°å·¦ä¸Šè§’çš„æœ€å°è·ç¦»ç­‰äºï¼Œå·¦è¾¹æ ¼å­æœ€å°å€¼å’Œä¸Šè¾¹æ ¼å­æœ€å°å€¼çš„æœ€å°å€¼åŠ ä¸Šå½“å‰æ ¼å­çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minPathSum</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[grid.length][grid[<span class="number">0</span>].length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;grid.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].length;j++) &#123;</span><br><span class="line">            <span class="comment">//ç¬¬ä¸€è¡Œ</span></span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span> &amp;&amp; j!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=grid[i][j]+dp[i][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i!=<span class="number">0</span> &amp;&amp; j==<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=grid[i][j]+dp[i-<span class="number">1</span>][j];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i!=<span class="number">0</span> &amp;&amp; j!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=grid[i][j]+Math.min(dp[i-<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=grid[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[grid.length-<span class="number">1</span>][grid[<span class="number">0</span>].length-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>UPDATE: 2020.7.20</strong></p>
<p>å†™ä¸‹é¢çš„ <a href="#path-sum-three-ways">path-sum-three-ways</a> çš„æ—¶å€™çœ‹äº†è¿™é¢˜ä¹‹å‰çš„ä»£ç ï¼Œå‘ç°å†™çš„ä¸å¤ªå¥½ï¼Œä¸€å † if-elseï¼Œé‡å†™ä¸‹</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minPathSum</span><span class="params">(grid [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">len</span>(grid)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, m)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i++&#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + grid[i][<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++&#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][j<span class="number">-1</span>] + grid[<span class="number">0</span>][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++&#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++&#123;</span><br><span class="line">            dp[i][j] = grid[i][j] + Min(dp[i<span class="number">-1</span>][j], dp[i][j<span class="number">-1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b&#123;</span><br><span class="line">        <span class="keyword">return</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Path-sum-three-ways"><a href="#Path-sum-three-ways" class="headerlink" title="Path sum: three ways"></a><a target="_blank" rel="noopener" href="https://projecteuler.net/problem=82">Path sum: three ways</a></h2><p>The minimal path sum in the 5 by 5 matrix below, by starting in any cell in the left column and finishing in any cell in the right column, and only moving up, down, and right, is indicated in red and bold; the sum is equal to 994.</p>
<p><img src="https://s1.ax1x.com/2020/07/20/UhOJw6.png" alt="UhOJw6.png"></p>
<p>Find the minimal path sum from the left column to the right column in matrix.txt (right click and â€œSave Link/Target Asâ€¦â€), a 31K text file containing an 80 by 80 matrix.</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ¥æº <a target="_blank" rel="noopener" href="https://leetcode-cn.com/circle/discuss/BNvWBP/">https://leetcode-cn.com/circle/discuss/BNvWBP/</a> ä»è¿™é‡Œçœ‹è§ qc å¤§ä½¬è´´äº†å‡ºå¤„ï¼Œæ‰€ä»¥ç‰¹åœ°æ³¨å†Œäº†è¿™ä¸ªç½‘ç«™è¯•äº†ä¸‹ï¼Œè¿™ä¸ªç½‘ç«™è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼ŒåªéªŒè¯ç­”æ¡ˆï¼Œæ—¶é—´å¤æ‚åº¦å•¥çš„éƒ½ä¸ç®¡</p>
<p>å’Œä¸Šé¢çš„æœ€å°è·¯å¾„å’Œå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯è¿™é‡Œèµ·ç‚¹å’Œç»ˆç‚¹éƒ½ä¸ç¡®å®šï¼Œè€Œä¸”æœ‰ 3 ä¸ªæ–¹å‘å¯ä»¥é€‰æ‹©ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥éå† 2 æ¬¡ï¼Œ<code>dp[i][j]</code>ä»£è¡¨ä»ç¬¬ä¸€åˆ—åˆ°å½“å‰<code>matrix[i][j]</code>çš„æœ€å°è·¯å¾„å’Œï¼Œå…ˆç»Ÿè®¡å•çº¯çš„å‘ä¸Šæˆ–è€…å‘ä¸‹çš„æœ€å°å€¼ï¼Œç„¶åå†ç»Ÿè®¡ç›¸åçš„æ–¹å‘çš„å€¼ï¼Œæ€»ä¹‹è¦ä¿è¯ 3 ä¸ªæ–¹å‘çš„å€¼éƒ½æ˜¯è®¡ç®—è¿‡çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="comment">//https://projecteuler.net/problem=82  answer:260324</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PathSum_threeWays_projecteuler</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;/usr/p082_matrix.txt&quot;</span>));</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">80</span>, n = <span class="number">80</span>;</span><br><span class="line">        <span class="type">int</span>[][] matrix = <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">        <span class="keyword">while</span> (index &lt; <span class="number">80</span>) &#123;</span><br><span class="line">            String[] line = reader.readLine().split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">80</span>; j++) &#123;</span><br><span class="line">                matrix[index][j] = Integer.valueOf(line[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            dp[j][<span class="number">0</span>] = matrix[j][<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="comment">//é¦–å…ˆåªè€ƒè™‘å‘å³èµ°å’Œå‘ä¸‹èµ°</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i==<span class="number">0</span>)&#123; <span class="comment">//ç¬¬ä¸€è¡Œï¼Œåªèƒ½ä»å·¦è¾¹è½¬ç§»</span></span><br><span class="line">                    dp[i][j] = matrix[i][j] + dp[i][j-<span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123; <span class="comment">//ä»å·¦è¾¹æˆ–è€…ä¸Šè¾¹è½¬ç§»</span></span><br><span class="line">                    dp[i][j] = matrix[i][j] + Math.min(dp[i][j-<span class="number">1</span>], dp[i-<span class="number">1</span>][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="comment">//ä¸‰ç›®å†™çš„å¤ªé•¿çœ‹ç€æŒºä¸èˆ’æœã€‚..</span></span><br><span class="line">                <span class="comment">//dp[i][j] = i==m-1?dp[i][j]:Math.min(dp[i][j], matrix[i][j]+dp[i+1][j]);</span></span><br><span class="line">                <span class="keyword">if</span> (i&lt;m-<span class="number">1</span>) &#123; <span class="comment">//ä»ä¸‹é¢è½¬ç§»å’Œä»ä¸Š/å·¦é¢è½¬ç§»çš„æœ€å°å€¼</span></span><br><span class="line">                    dp[i][j] = Math.min(dp[i][j], matrix[i][j]+dp[i+<span class="number">1</span>][j]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æœ€åä¸€è¡Œï¼Œåªèƒ½ä»å·¦è¾¹æˆ–è€…ä¸Šé¢è½¬ç§»ï¼Œä¹Ÿæ˜¯å°±æ˜¯ç¬¬ä¸€ä¸ªå¾ªç¯çš„å€¼</span></span><br><span class="line">                <span class="comment">//dp[i][j] = dp[i][j]</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> INF;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            res = Math.min(res, dp[i][m-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€å¼€å§‹å†™äº†ä¸ª 3 ç›®ï¼Œæ”¹äº†åŠå¤©çš„ bugï¼Œå‘ç°æ˜¯ 3 ç›®å’Œå‰é¢çš„å€¼æ··åˆ°ä¸€èµ·äº†ã€‚</p>
</blockquote>
<h2 id="62-ä¸åŒè·¯å¾„"><a href="#62-ä¸åŒè·¯å¾„" class="headerlink" title="62. ä¸åŒè·¯å¾„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-paths/">62. ä¸åŒè·¯å¾„</a></h2><p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€ ï¼‰ã€‚</p>
<p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€ï¼‰ã€‚</p>
<p>é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p>
<p><img src="http://static.imlgw.top/blog/20190818/DfwXk3ObWxX8.png?imageslim" alt="mark"></p>
<p><strong>è¯´æ˜ï¼š</strong>m å’Œ n çš„å€¼å‡ä¸è¶…è¿‡ 100ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šm = <span class="number">3</span>, n = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ€»å…±æœ‰ <span class="number">3</span> æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾å³ä¸‹è§’ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹</span><br><span class="line"><span class="number">2.</span> å‘å³ -&gt; å‘ä¸‹ -&gt; å‘å³</span><br><span class="line"><span class="number">3.</span> å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šm = <span class="number">7</span>, n = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">28</span></span><br></pre></td></tr></table></figure>

<p><strong>åŠ¨æ€è§„åˆ’è§£æ³•</strong></p>
<p>è¿™é¢˜ç®—æ˜¯æˆ‘ç¬¬ä¸€é“è‡ªå·±åšå‡ºæ¥çš„ DP é¢˜äº†ï¼Œè™½ç„¶å’Œä¸Šé¢çš„ä¸€é¢˜ä¸€æ ·çš„æ€è·¯ï¼Œä½†æ˜¯è¿˜æ˜¯æŒºå¼€å¿ƒçš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePaths</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(m&lt;<span class="number">0</span>||n&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>&amp;&amp;j!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j==<span class="number">0</span> &amp;&amp; i!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j!=<span class="number">0</span>&amp;&amp;i!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[i][j]=dp[i][j-<span class="number">1</span>]+dp[i-<span class="number">1</span>][j];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>][m-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦<code>O(m*n)</code>ï¼Œç©ºé—´å¤æ‚åº¦<code>O(m*n)</code>å¯ä»¥çœ‹å‡ºæ¥å®Œå…¨æ˜¯æŒ‰ç…§å‰ä¸€é¢˜çš„æ¨¡æ¿æ¥çš„ï¼Œä»£ç å†™çš„ä¸å¥½ï¼Œå¯ä»¥æŠŠ if-else åˆå¹¶èµ·æ¥ï¼Œè¿™é¢˜ç©ºé—´å¤æ‚åº¦å…¶å®è¿˜å¯ä»¥ä¼˜åŒ–æˆ O(m) æˆ– O(n) çš„ï¼ŒæŒ‰è¡Œæ¥å‘ä¸‹èµ°</p>
<p><strong>ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–</strong></p>
<p><img src="http://static.imlgw.top/blog/20190824/7uacSvsRMaWq.png?imageslim" alt="leetCode é¢˜è§£"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">uniquePaths2</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(m&lt;<span class="number">0</span>||n&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n]; </span><br><span class="line">    Arrays.fill(dp,<span class="number">1</span>); <span class="comment">//ç¬¬ä¸€è¡Œï¼Œç¬¬ä¸€åˆ—å‡ä¸º 1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;m;i++) &#123; <span class="comment">//ä¸€è¡Œä¸€è¡Œå‘ä¸‹èµ°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="comment">//è¿™é‡Œçš„ dp[j] å’Œ dp[j-1] åˆ†åˆ«å°±ä»£è¡¨äº† ä¸Šè¾¹ å’Œ å·¦è¾¹çš„å…ƒç´ </span></span><br><span class="line">            dp[j]=dp[j]+dp[j-<span class="number">1</span>]; <span class="comment">//æ±‚æ¯ä¸€è¡Œæ¯ä¸ªå…ƒç´ çš„ dp å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>]; <span class="comment">//æœ€åä¸€è¡Œæœ€åä¸€ä¸ª dp å€¼å°±æ˜¯ç»“æœ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç»„åˆæ•°å…¬å¼</strong></p>
<p>è¿™é¢˜å…¶å®å°±æ˜¯æˆ‘ä»¬åˆä¸­è¿˜æ˜¯é«˜ä¸­å­¦çš„æ’åˆ—ç»„åˆçš„é—®é¢˜ï¼Œæœºå™¨äººä¸€å…±èµ°<code>m+n-2</code> æ­¥ï¼Œå‘ä¸‹ä¼šèµ°<code>m-1</code> æ­¥ï¼Œå‘ä¸‹ä¼šèµ°<code>n-1</code> æ­¥ï¼Œæ‰€ä»¥å®é™…ä¸Šå°±æ˜¯æ±‚ä¸€ä¸ªç»„åˆæ•°çš„ç»“æœ <code>C(n-1ï¼Œm+n-2)</code> ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePaths</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(m&lt;<span class="number">0</span>||n&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> step=m+n-<span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> down=n-<span class="number">1</span>;</span><br><span class="line">    <span class="type">long</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=down;i++) &#123;</span><br><span class="line">        res=res*(step-down+i)/i; <span class="comment">//é€’æ¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="63-ä¸åŒè·¯å¾„-II"><a href="#63-ä¸åŒè·¯å¾„-II" class="headerlink" title="63. ä¸åŒè·¯å¾„ II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-paths-ii/">63. ä¸åŒè·¯å¾„ II</a></h2><p>ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€ ï¼‰ã€‚</p>
<p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€ï¼‰ã€‚</p>
<p>ç°åœ¨è€ƒè™‘ç½‘æ ¼ä¸­æœ‰éšœç¢ç‰©ã€‚é‚£ä¹ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’å°†ä¼šæœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p>
<p><img src="http://static.imlgw.top/blog/20190818/DfwXk3ObWxX8.png?imageslim" alt="mark"></p>
<p>ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨ 1 å’Œ 0 æ¥è¡¨ç¤ºã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong>m å’Œ n çš„å€¼å‡ä¸è¶…è¿‡ 100ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">[</span><br><span class="line">  [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">3x3 ç½‘æ ¼çš„æ­£ä¸­é—´æœ‰ä¸€ä¸ªéšœç¢ç‰©ã€‚</span><br><span class="line">ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’ä¸€å…±æœ‰ <span class="number">2</span> æ¡ä¸åŒçš„è·¯å¾„ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹ -&gt; å‘ä¸‹</span><br><span class="line"><span class="number">2.</span> å‘ä¸‹ -&gt; å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>çœ‹åˆ°è¿™ç§è·¯å¾„çš„é¢˜ï¼Œé¦–å…ˆæƒ³åˆ°çš„å¯èƒ½æ˜¯é€’å½’å›æº¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//dfs å›æº¯ , TLE</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span>[][] direction=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePathsWithObstacles</span><span class="params">(<span class="type">int</span>[][] obstacleGrid)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obstacleGrid==<span class="literal">null</span> || obstacleGrid.length&lt;=<span class="number">0</span> || obstacleGrid[<span class="number">0</span>][<span class="number">0</span>]==<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">boolean</span>[][] visit=<span class="keyword">new</span> <span class="title class_">boolean</span>[obstacleGrid.length][obstacleGrid[<span class="number">0</span>].length];</span><br><span class="line">    dfs(obstacleGrid,visit,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] obstacleGrid,<span class="type">boolean</span>[][] visit,<span class="type">int</span> x,<span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="comment">//!=1 æ˜¯ä¸ºäº† coner case</span></span><br><span class="line">    <span class="keyword">if</span> (x==obstacleGrid.length-<span class="number">1</span> &amp;&amp; y==obstacleGrid[<span class="number">0</span>].length-<span class="number">1</span> &amp;&amp; obstacleGrid[x][y]!=<span class="number">1</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;direction.length;i++) &#123;</span><br><span class="line">        <span class="type">int</span> nx=x+direction[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ny=y+direction[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (nx&lt;obstacleGrid.length &amp;&amp; ny&lt;obstacleGrid[<span class="number">0</span>].length &amp;&amp; !visit[nx][ny] &amp;&amp; obstacleGrid[nx][ny] !=<span class="number">1</span>) &#123;</span><br><span class="line">            visit[nx][ny]=<span class="literal">true</span>;</span><br><span class="line">            dfs(obstacleGrid,visit,nx,ny);</span><br><span class="line">            visit[nx][ny]=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¾ˆæƒ¨ï¼ŒTLE äº†ï¼Œåªè·‘äº†ä¸åˆ°ä¸€åŠçš„ case å°± TLE äº†</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>åŠ¨æ€è§„åˆ’çš„è§£æ³•ï¼Œå…¶å®å’Œä¸Šé¢ä¸€é¢˜æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡éœ€è¦æ³¨æ„éšœç¢ç‰©ä½ç½®çš„ dp å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePathsWithObstacles</span><span class="params">(<span class="type">int</span>[][] obstacleGrid)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obstacleGrid==<span class="literal">null</span> || obstacleGrid.length&lt;=<span class="number">0</span> || obstacleGrid[<span class="number">0</span>][<span class="number">0</span>]==<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[obstacleGrid.length][obstacleGrid[<span class="number">0</span>].length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;obstacleGrid.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>; j&lt;obstacleGrid[<span class="number">0</span>].length;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j]==<span class="number">1</span>) &#123;</span><br><span class="line">                dp[i][j]=<span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i==<span class="number">0</span> &amp;&amp; j==<span class="number">0</span>) &#123;</span><br><span class="line">                dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">0</span> &amp;&amp; j!=<span class="number">0</span>)&#123;</span><br><span class="line">                dp[<span class="number">0</span>][j]=dp[<span class="number">0</span>][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (j==<span class="number">0</span> &amp;&amp; i!=<span class="number">0</span>) &#123;</span><br><span class="line">                dp[i][<span class="number">0</span>]=dp[i-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j]+dp[i][j-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[obstacleGrid.length-<span class="number">1</span>][obstacleGrid[<span class="number">0</span>].length-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œä¸Šé¢ä¸€æ ·ä¹Ÿå¯ä»¥è¿›è¡Œç©ºé—´ä¸Šçš„ä¼˜åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸€ç»´ dp</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">uniquePathsWithObstacles</span><span class="params">(<span class="type">int</span>[][] obstacleGrid)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obstacleGrid==<span class="literal">null</span> || obstacleGrid.length&lt;=<span class="number">0</span> || obstacleGrid[<span class="number">0</span>][<span class="number">0</span>]==<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»¥è¡Œä¸ºå•ä½å‘ä¸‹èµ°</span></span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[obstacleGrid[<span class="number">0</span>].length];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;obstacleGrid.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>; j&lt;obstacleGrid[<span class="number">0</span>].length;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j]==<span class="number">1</span>) &#123;</span><br><span class="line">                dp[j]=<span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">0</span> &amp;&amp; j!=<span class="number">0</span>)&#123; <span class="comment">//ç¬¬ä¸€è¡Œ</span></span><br><span class="line">                dp[j]=dp[j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i!=<span class="number">0</span> &amp;&amp; j!=<span class="number">0</span>)&#123; </span><br><span class="line">                dp[j]=dp[j]+dp[j-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ¯ä¸€è¡Œç¬¬ä¸€åˆ—çš„ dp[j]=dp[j], å’Œä¸Šä¸€è¡Œçš„ç¬¬ä¸€åˆ—ä¿æŒä¸€è‡´å°±è¡Œ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[obstacleGrid[<span class="number">0</span>].length-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>UPDATE: 2020.7.6</strong></p>
<p>æƒ³å¯¹ç®€æ´çš„åšæ³•</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">uniquePathsWithObstacles</span><span class="params">(grid [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">len</span>(grid)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, m+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= m; i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span> <span class="comment">//åˆå§‹å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= m; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= n; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> grid[i<span class="number">-1</span>][j<span class="number">-1</span>] != <span class="number">1</span> &#123;</span><br><span class="line">                dp[i][j] = dp[i<span class="number">-1</span>][j] + dp[i][j<span class="number">-1</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="576-å‡ºç•Œçš„è·¯å¾„æ•°"><a href="#576-å‡ºç•Œçš„è·¯å¾„æ•°" class="headerlink" title="576. å‡ºç•Œçš„è·¯å¾„æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/out-of-boundary-paths/">576. å‡ºç•Œçš„è·¯å¾„æ•°</a></h2><p>ç»™å®šä¸€ä¸ª <strong>m Ã— n</strong> çš„ç½‘æ ¼å’Œä¸€ä¸ªçƒã€‚çƒçš„èµ·å§‹åæ ‡ä¸º <strong>(i,j)</strong> ï¼Œä½ å¯ä»¥å°†çƒç§»åˆ°<strong>ç›¸é‚»</strong>çš„å•å…ƒæ ¼å†…ï¼Œæˆ–è€…å¾€ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ä¸Šç§»åŠ¨ä½¿çƒç©¿è¿‡ç½‘æ ¼è¾¹ç•Œã€‚ä½†æ˜¯ï¼Œä½ <strong>æœ€å¤š</strong>å¯ä»¥ç§»åŠ¨ <strong>N</strong> æ¬¡ã€‚æ‰¾å‡ºå¯ä»¥å°†çƒç§»å‡ºè¾¹ç•Œçš„è·¯å¾„æ•°é‡ã€‚ç­”æ¡ˆå¯èƒ½éå¸¸å¤§ï¼Œè¿”å› ç»“æœ mod 109 + 7 çš„å€¼ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šm = <span class="number">2</span>, n = <span class="number">2</span>, N = <span class="number">2</span>, i = <span class="number">0</span>, j = <span class="number">0</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼š</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šm = <span class="number">1</span>, n = <span class="number">3</span>, N = <span class="number">3</span>, i = <span class="number">0</span>, j = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">12</span></span><br><span class="line">è§£é‡Šï¼š</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ol>
<li>çƒä¸€æ—¦å‡ºç•Œï¼Œå°±ä¸èƒ½å†è¢«ç§»åŠ¨å›ç½‘æ ¼å†…ã€‚</li>
<li>ç½‘æ ¼çš„é•¿åº¦å’Œé«˜åº¦åœ¨ [1,50] çš„èŒƒå›´å†…ã€‚</li>
<li>N åœ¨ [0,50] çš„èŒƒå›´å†…ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¦–å…ˆå†™å‡ºæ¥çš„è§£æ³•ï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œè®°å¿†åŒ–é€’å½’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] dir=&#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">Long[][][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findPaths</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n, <span class="type">int</span> N, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Long</span>[m][n][N+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)(dfs(m,n,i,j,N)%mod);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x][y][k]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[x][y][k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dir.length;i++)&#123;</span><br><span class="line">        <span class="type">int</span> nx=x+dir[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ny=y+dir[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(!valid(m,n,nx,ny))&#123;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count=(count+dfs(m,n,nx,ny,k-<span class="number">1</span>))%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[x][y][k]=(count)%mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">valid</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n,<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; x&lt;m &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œä¸éœ€è¦ visitï¼Œå› ä¸ºæœ‰ K çš„é™åˆ¶ï¼Œä¸ç”¨æ‹…å¿ƒæ­»å¾ªç¯ï¼Œæ„Ÿè§‰åŠ äº† visit åè€Œä¼šé”™ï¼Ÿ</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ•´ä½“ä¸Šæ¥è¯´è¿˜æ˜¯å±äºæ¯”è¾ƒç®€å•çš„åŠ¨æ€è§„åˆ’ï¼Œè‡³å°‘é€’æ¨æ–¹ç¨‹å¥½æƒ³</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªåº•å‘ä¸Šé€’æ¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findPaths</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n, <span class="type">int</span> N, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="comment">//ç¾¤é‡Œå·å­¦åˆ°çš„</span></span><br><span class="line">    <span class="type">int</span>[] dir=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,-<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">long</span>[][][] dp=<span class="keyword">new</span> <span class="title class_">long</span>[m][n][N+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k=<span class="number">1</span>;k&lt;=N;k++) &#123; <span class="comment">//æƒ³æƒ³ K ä¸ºä»€ä¹ˆåœ¨æœ€å¤–å±‚</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> r=<span class="number">0</span>;r&lt;m;r++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c=<span class="number">0</span>;c&lt;n;c++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> d=<span class="number">0</span>;d&lt;<span class="number">4</span>;d++) &#123;</span><br><span class="line">                    <span class="type">int</span> nx=r+dir[d];</span><br><span class="line">                    <span class="type">int</span> ny=c+dir[d+<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(nx&lt;<span class="number">0</span> || ny&lt;<span class="number">0</span> || nx&gt;=m ||ny&gt;=n)&#123;</span><br><span class="line">                        dp[r][c][k]++;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[r][c][k]=(dp[r][c][k]+dp[nx][ny][k-<span class="number">1</span>])%mod;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æå‰ç»“æŸï¼Œåªéœ€è¦ i,j,N å°±è¡Œäº†ï¼ˆè²Œä¼¼æ²¡æœ‰å¿«å¤šå°‘ï¼‰</span></span><br><span class="line">                <span class="keyword">if</span>(k==N &amp;&amp; r==i &amp;&amp; c==j)&#123;</span><br><span class="line">                    <span class="keyword">return</span> (<span class="type">int</span>)(dp[i][j][N]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//return (int)(dp[m-1][n-1][N]); md ä¸€å¼€å§‹è¿”å›é”™äº†ï¼Œçœ‹äº†åŠå¤©</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>K æ”¾åœ¨æœ€å¤–å±‚çš„åŸå› å…¶å®å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œæˆ‘ä»¬æ±‚æŸä¸€ä¸ªç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å‘¨å›´ 4 ä¸ªæ–¹å‘çš„<code>K-1</code>çš„å€¼ï¼Œè¿™äº›å€¼å¿…é¡»æ˜¯å·²ç»è®¡ç®—è¿‡çš„ï¼Œæ‰€ä»¥ K è‚¯å®šæ˜¯è¦æ”¾åœ¨æœ€å¤–å±‚çš„</p>
<h2 id="688-â€œé©¬â€åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡"><a href="#688-â€œé©¬â€åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡" class="headerlink" title="688. â€œé©¬â€åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/knight-probability-in-chessboard/">688. â€œé©¬â€åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡</a></h2><p>å·²çŸ¥ä¸€ä¸ª <code>N</code>x<code>N</code> çš„å›½é™…è±¡æ£‹æ£‹ç›˜ï¼Œæ£‹ç›˜çš„è¡Œå·å’Œåˆ—å·éƒ½æ˜¯ä» 0 å¼€å§‹ã€‚å³æœ€å·¦ä¸Šè§’çš„æ ¼å­è®°ä¸º <code>(0, 0)</code>ï¼Œæœ€å³ä¸‹è§’çš„è®°ä¸º <code>(N-1, N-1)</code>ã€‚ </p>
<p>ç°æœ‰ä¸€ä¸ª â€œé©¬â€ï¼ˆä¹Ÿè¯‘ä½œ â€œéª‘å£«â€ï¼‰ä½äº <code>(r, c)</code> ï¼Œå¹¶æ‰“ç®—è¿›è¡Œ <code>K</code> æ¬¡ç§»åŠ¨ã€‚ </p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå›½é™…è±¡æ£‹çš„ â€œé©¬â€ æ¯ä¸€æ­¥å…ˆæ²¿æ°´å¹³æˆ–å‚ç›´æ–¹å‘ç§»åŠ¨ 2 ä¸ªæ ¼å­ï¼Œç„¶åå‘ä¸ä¹‹ç›¸å‚ç›´çš„æ–¹å‘å†ç§»åŠ¨ 1 ä¸ªæ ¼å­ï¼Œå…±æœ‰ 8 ä¸ªå¯é€‰çš„ä½ç½®ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/05/15/YsAXFS.png" alt="YsAXFS.png"> </p>
<p>ç°åœ¨ â€œé©¬â€ æ¯ä¸€æ­¥éƒ½ä»å¯é€‰çš„ä½ç½®ï¼ˆåŒ…æ‹¬æ£‹ç›˜å¤–éƒ¨çš„ï¼‰ä¸­ç‹¬ç«‹éšæœºåœ°é€‰æ‹©ä¸€ä¸ªè¿›è¡Œç§»åŠ¨ï¼Œç›´åˆ°ç§»åŠ¨äº† <code>K</code> æ¬¡æˆ–è·³åˆ°äº†æ£‹ç›˜å¤–é¢ã€‚</p>
<p>æ±‚ç§»åŠ¨ç»“æŸåï¼Œâ€œé©¬â€ ä»ç•™åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0.0625</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">è¾“å…¥çš„æ•°æ®ä¾æ¬¡ä¸º N, K, r, c</span><br><span class="line">ç¬¬ <span class="number">1</span> æ­¥æ—¶ï¼Œæœ‰ä¸”åªæœ‰ <span class="number">2</span> ç§èµ°æ³•ä»¤ â€œé©¬â€ å¯ä»¥ç•™åœ¨æ£‹ç›˜ä¸Šï¼ˆè·³åˆ°ï¼ˆ<span class="number">1</span>,<span class="number">2</span>ï¼‰æˆ–ï¼ˆ<span class="number">2</span>,<span class="number">1</span>ï¼‰ï¼‰ã€‚å¯¹äºä»¥ä¸Šçš„ä¸¤ç§æƒ…å†µï¼Œå„è‡ªåœ¨ç¬¬ <span class="number">2</span> æ­¥å‡æœ‰ä¸”åªæœ‰ <span class="number">2</span> ç§èµ°æ³•ä»¤ â€œé©¬â€ ä»ç„¶ç•™åœ¨æ£‹ç›˜ä¸Šã€‚</span><br><span class="line">æ‰€ä»¥ â€œé©¬â€ åœ¨ç»“æŸåä»åœ¨æ£‹ç›˜ä¸Šçš„æ¦‚ç‡ä¸º <span class="number">0.0625</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><code>N</code> çš„å–å€¼èŒƒå›´ä¸º [1, 25]</li>
<li><code>K</code> çš„å–å€¼èŒƒå›´ä¸º [0, 100]</li>
<li>å¼€å§‹æ—¶ï¼Œâ€œé©¬â€ æ€»æ˜¯ä½äºæ£‹ç›˜ä¸Š</li>
</ul>
<p><strong>é”™è¯¯è§£æ³•ä¸€</strong></p>
<p>é¦–å…ˆé‡‡ç”¨äº†å’Œä¸Šä¸€é¢˜ç±»ä¼¼åšæ³•ï¼Œæ˜æ˜¾æ˜¯ä¸è¡Œçš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°æ•°æ®å¯ä»¥è¿‡ï¼Œå¤§æ•°æ®è¿‡ä¸äº†</span></span><br><span class="line"><span class="comment">//K[0,100] ç›´æ¥ 8^100 å°±çˆ†äº†ï¼Œæ‰€ä»¥è‚¯å®šä¸èƒ½åƒä¸Šé¢é‚£æ ·æ±‚ï¼Œdp å¾—å­˜æ¦‚ç‡</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">knightProbability</span><span class="params">(<span class="type">int</span> N, <span class="type">int</span> K, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dir=&#123;&#123;-<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">2</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">2</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span>[][][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][N][K+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">            <span class="comment">//è¿™é¢˜å¦‚æœåç€æ±‚å‡ºç•Œè·¯å¾„å°±é”™äº†ï¼Œå¾—æ­£å‘æ±‚</span></span><br><span class="line">            dp[i][j][<span class="number">0</span>]=<span class="number">1</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=K;k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">0</span>;d&lt;dir.length;d++)&#123;</span><br><span class="line">                    <span class="type">int</span> nx=i+dir[d][<span class="number">0</span>];</span><br><span class="line">                    <span class="type">int</span> ny=j+dir[d][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(nx&gt;=<span class="number">0</span> &amp;&amp; nx&lt;N &amp;&amp; ny&gt;=<span class="number">0</span> &amp;&amp; ny&lt;N)&#123;</span><br><span class="line">                        dp[i][j][k]+=(dp[nx][ny][k-<span class="number">1</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[r][c][K]/Math.pow(<span class="number">8</span>,K);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¤šè¯´ä¸€ç‚¹ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆä¸å’Œä¸Šé¢ä¸€æ ·ï¼Œç®—å‡ºç•Œçš„è·¯å¾„æ•°ï¼Œç„¶åç”¨<code>8^K</code>å‡å»å‡ºç•Œæ•°é‡ï¼Œç„¶åé™¤ä»¥<code>8^K</code>ï¼Ÿå…¶å®ä¸»è¦æ˜¯å‡ºç•Œçš„è¿™é‡Œå¹¶ä¸å¥½ç®—ï¼Œè¿™é‡Œè¦æ±‚çš„æ˜¯æ¦‚ç‡ï¼Œå‡ºç•Œçš„è·¯å¾„å¹¶ä¸èƒ½å®Œå…¨åŒ…å«å‡ºç•Œçš„æ–¹å¼ï¼ˆå¯ä»¥ç†è§£ä¸ºå‡ºç•Œåä»ç„¶å¯ä»¥èµ°ï¼‰</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ ‡å‡†çš„ dp è§£æ³•ï¼Œæ³¨æ„æ¦‚ç‡çš„è®¡ç®—å°±è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//DP å­˜æ¦‚ç‡ AC è§£æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">knightProbability</span><span class="params">(<span class="type">int</span> N, <span class="type">int</span> K, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dir=&#123;&#123;-<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">2</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">2</span>&#125;&#125;;</span><br><span class="line">    <span class="type">double</span>[][][] dp=<span class="keyword">new</span> <span class="title class_">double</span>[N][N][K+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">            dp[i][j][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=K;k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">0</span>;d&lt;dir.length;d++)&#123;</span><br><span class="line">                    <span class="type">int</span> nx=i+dir[d][<span class="number">0</span>];</span><br><span class="line">                    <span class="type">int</span> ny=j+dir[d][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(nx&gt;=<span class="number">0</span> &amp;&amp; nx&lt;N &amp;&amp; ny&gt;=<span class="number">0</span> &amp;&amp; ny&lt;N)&#123;</span><br><span class="line">                        <span class="comment">//mdï¼Œä¸€å¼€å§‹ä¸çŸ¥é“ä¸ºå•¥æƒ³åˆ°æ±‚ç‹¬ç«‹äº‹ä»¶ P(A U B) ä¸Šå»äº†</span></span><br><span class="line">                        <span class="comment">//ä½†æ˜¯å…¶å®ä¸¤è€…å¹¶ä¸æ˜¯ç‹¬ç«‹äº‹ä»¶ï¼Œæ˜¯äº’æ–¥äº‹ä»¶ç›´æ¥ P(A)+P(B) å°±è¡Œäº†</span></span><br><span class="line">                        dp[i][j][k]+=(dp[nx][ny][k-<span class="number">1</span>])/<span class="number">8</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æå‰è¿”å›</span></span><br><span class="line">                <span class="keyword">if</span>(i==r &amp;&amp; j==c &amp;&amp; k==K)&#123;</span><br><span class="line">                    <span class="keyword">return</span> dp[i][j][k];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[r][c][K];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸‰</strong></p>
<p>è®°å¿†åŒ–çš„æ–¹å¼ï¼Œå…¶å®ä¼šæ¯”ä¸Šé¢é€’æ¨çš„ä¼šå¿«ä¸€ç‚¹ï¼Œä¸Šé¢é€’æ¨çš„ä¼šæœ‰å¾ˆå¤šæ— ç”¨çŠ¶æ€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªé¡¶å‘ä¸Š</span></span><br><span class="line">Double[][][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[][] dir=&#123;&#123;-<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">2</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">2</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">knightProbability</span><span class="params">(<span class="type">int</span> N, <span class="type">int</span> K, <span class="type">int</span> r, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Double</span>[N][N][K+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(N,K,r,c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> N,<span class="type">int</span> k,<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x][y][k]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[x][y][k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> p=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;dir.length;i++) &#123;</span><br><span class="line">        <span class="type">int</span> nx=x+dir[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ny=y+dir[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(nx&gt;=<span class="number">0</span> &amp;&amp; nx&lt;N &amp;&amp; ny&gt;=<span class="number">0</span> &amp;&amp; ny&lt;N)&#123;</span><br><span class="line">            p+=dfs(N,k-<span class="number">1</span>,nx,ny)/<span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[x][y][k]=p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="935-éª‘å£«æ‹¨å·å™¨"><a href="#935-éª‘å£«æ‹¨å·å™¨" class="headerlink" title="935. éª‘å£«æ‹¨å·å™¨"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/knight-dialer/">935. éª‘å£«æ‹¨å·å™¨</a></h2><p>å›½é™…è±¡æ£‹ä¸­çš„éª‘å£«å¯ä»¥æŒ‰ä¸‹å›¾æ‰€ç¤ºè¿›è¡Œç§»åŠ¨ï¼š</p>
<p><img src="https://s1.ax1x.com/2020/05/15/YsAXFS.png" alt="YsAXFS.png"> .         <img src="https://s1.ax1x.com/2020/05/16/YcP3o8.png" alt="YcP3o8.png"></p>
<p>è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°† â€œéª‘å£«â€ æ”¾åœ¨ç”µè¯æ‹¨å·ç›˜çš„ä»»æ„æ•°å­—é”®ï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰ä¸Šï¼Œæ¥ä¸‹æ¥ï¼Œéª‘å£«å°†ä¼šè·³ N-1 æ­¥ã€‚æ¯ä¸€æ­¥å¿…é¡»æ˜¯ä»ä¸€ä¸ªæ•°å­—é”®è·³åˆ°å¦ä¸€ä¸ªæ•°å­—é”®ã€‚</p>
<p>æ¯å½“å®ƒè½åœ¨ä¸€ä¸ªé”®ä¸Šï¼ˆåŒ…æ‹¬éª‘å£«çš„åˆå§‹ä½ç½®ï¼‰ï¼Œéƒ½ä¼šæ‹¨å‡ºé”®æ‰€å¯¹åº”çš„æ•°å­—ï¼Œæ€»å…±æŒ‰ä¸‹ <code>N</code> ä½æ•°å­—ã€‚</p>
<p>ä½ èƒ½ç”¨è¿™ç§æ–¹å¼æ‹¨å‡ºå¤šå°‘ä¸ªä¸åŒçš„å·ç ï¼Ÿ</p>
<p>å› ä¸ºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œ<strong>æ‰€ä»¥è¾“å‡ºç­”æ¡ˆæ¨¡ 10^9 + 7</strong>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">20</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">46</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= N &lt;= 5000</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å…ˆä¸Šä¸€ä¸ªæå…¶ç²—ç³™çš„è§£æ³•ï¼Œä¹Ÿæ˜¯æœ€å¼€å§‹çš„è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] dir=&#123;&#123;-<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">2</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">2</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">2</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">Integer[][][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">knightDialer</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] grid=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">4</span>][<span class="number">3</span>][N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;grid.length;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].length;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j]!=-<span class="number">1</span>)&#123;</span><br><span class="line">                res=(res+dfs(grid,i,j,N-<span class="number">1</span>))%mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] grid,<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> N)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(N==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x][y][N]!=<span class="literal">null</span>) <span class="keyword">return</span> dp[x][y][N];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>; <span class="comment">//ä¸€å¼€å§‹èµ‹å€¼æˆ 1 äº†ã€‚ä»å½“å‰ä½ç½®èµ·è·³ï¼Œæ‰€ä»¥å½“å‰ä½ç½®ä¸åº”è¯¥æœ‰åˆå§‹å€¼</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dir.length;i++)&#123;</span><br><span class="line">        <span class="type">int</span> nx=x+dir[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ny=y+dir[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(valid(grid,nx,ny))&#123;</span><br><span class="line">            res=(res+dfs(grid,nx,ny,N-<span class="number">1</span>))%mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[x][y][N]=res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">valid</span><span class="params">(<span class="type">int</span>[][] grid,<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; x&lt;grid.length &amp;&amp; y&lt;grid[<span class="number">0</span>].length &amp;&amp; grid[x][y]!=-<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å°å·§ç²¾è‡´çš„è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">Integer[][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">knightDialer</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="comment">//ç›´æ¥çœ‹å›¾å»ºç«‹å¯¹åº”å…³ç³»</span></span><br><span class="line">    <span class="type">int</span>[][] next=&#123;&#123;<span class="number">4</span>,<span class="number">6</span>&#125;,&#123;<span class="number">6</span>,<span class="number">8</span>&#125;,&#123;<span class="number">7</span>,<span class="number">9</span>&#125;,&#123;<span class="number">4</span>,<span class="number">8</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>,<span class="number">9</span>&#125;,&#123;&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">7</span>&#125;,&#123;<span class="number">2</span>,<span class="number">6</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">2</span>,<span class="number">4</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">10</span>][N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">        res=(res+dfs(i,N-<span class="number">1</span>,next))%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> num,<span class="type">int</span> N,<span class="type">int</span>[][] next)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(N==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[num][N]!=<span class="literal">null</span>) <span class="keyword">return</span> dp[num][N];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>; <span class="comment">//æ³¨æ„åˆ«å†™æˆ 1 äº†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;next[num].length;i++)&#123;</span><br><span class="line">        res=(res+dfs(next[num][i],N-<span class="number">1</span>,next))%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[num][N]=res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸‰</strong></p>
<p>é€’æ¨çš„æ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€’æ¨çš„æ–¹å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">knightDialer</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="comment">//next[i]: i ä¸‹ä¸€æ­¥èƒ½è·³åˆ°çš„ä½ç½®</span></span><br><span class="line">    <span class="type">int</span>[][] next=&#123;&#123;<span class="number">4</span>,<span class="number">6</span>&#125;,&#123;<span class="number">6</span>,<span class="number">8</span>&#125;,&#123;<span class="number">7</span>,<span class="number">9</span>&#125;,&#123;<span class="number">4</span>,<span class="number">8</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>,<span class="number">9</span>&#125;,&#123;&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">7</span>&#125;,&#123;<span class="number">2</span>,<span class="number">6</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">2</span>,<span class="number">4</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][<span class="number">10</span>];</span><br><span class="line">    Arrays.fill(dp[<span class="number">0</span>],<span class="number">1</span>); <span class="comment">//base dp[0]</span></span><br><span class="line">    <span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;N;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num=<span class="number">0</span>;num&lt;=<span class="number">9</span>;num++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;next[num].length;j++) &#123;</span><br><span class="line">                dp[i][num]=(dp[i][num]+dp[i-<span class="number">1</span>][next[num][j]])%mod;   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++) res=(res+dp[N-<span class="number">1</span>][i])%mod;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="303-åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜"><a href="#303-åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜" class="headerlink" title="303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/range-sum-query-immutable/">303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„  numsï¼Œæ±‚å‡ºæ•°ç»„ä»ç´¢å¼• i åˆ° j  (i â‰¤ j) èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼ŒåŒ…å« i,  j ä¸¤ç‚¹ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ç»™å®š nums = [-<span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, -<span class="number">5</span>, <span class="number">2</span>, -<span class="number">1</span>]ï¼Œæ±‚å’Œå‡½æ•°ä¸º sumRange()</span><br><span class="line"></span><br><span class="line">sumRange(<span class="number">0</span>, <span class="number">2</span>) -&gt; <span class="number">1</span></span><br><span class="line">sumRange(<span class="number">2</span>, <span class="number">5</span>) -&gt; -<span class="number">1</span></span><br><span class="line">sumRange(<span class="number">0</span>, <span class="number">5</span>) -&gt; -<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸å¯å˜ã€‚</li>
<li>ä¼šå¤šæ¬¡è°ƒç”¨ sumRange æ–¹æ³•ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™é¢˜å…¶å®ä¸€å¼€å§‹å°±æ˜¯æƒ³çš„ç¼“å­˜ä¸€ä¸‹ä¹‹å‰è°ƒç”¨äº§ç”Ÿçš„å€¼ï¼Œæ²¡æœ‰ç†è§£åˆ°è¿™é¢˜çš„è¦ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NumArray</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] sums=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums!=<span class="literal">null</span> &amp;&amp; nums.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            sums=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">            sums[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;sums.length;i++) &#123;</span><br><span class="line">                sums[i]=sums[i-<span class="number">1</span>]+nums[i];</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRange</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> sums[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sums[j]-sums[i-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your NumArray object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * NumArray obj = new NumArray(nums);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.sumRange(i,j);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>è¿™é¢˜å…³é”®æœ‰ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯ <code>sumRange(i , j) = sumRange(0, j)-sumRange(0, i-1)</code> ï¼Œå¦ä¸€ä¸ªå…³é”®å°±æ˜¯åœ¨æ„é€ å™¨é‡Œé¢å°†æ‰€æœ‰çš„ <code>sumRange(0 , i)</code> ç»™é¢„å…ˆæ±‚å‡ºæ¥ï¼Œè¿™æ ·åœ¨åé¢çš„è°ƒç”¨æ—¶æ—¶é—´å¤æ‚åº¦å°±æ˜¯<code>O(1)</code>çš„äº†ã€‚</p>
<p>è¿™é‡Œæ±‚<code>sumRange(0, i)</code>çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ dp.</p>
<h2 id="413-ç­‰å·®æ•°åˆ—åˆ’åˆ†"><a href="#413-ç­‰å·®æ•°åˆ—åˆ’åˆ†" class="headerlink" title="413. ç­‰å·®æ•°åˆ—åˆ’åˆ†"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/arithmetic-slices/">413. ç­‰å·®æ•°åˆ—åˆ’åˆ†</a></h2><p>å¦‚æœä¸€ä¸ªæ•°åˆ—è‡³å°‘æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ä»»æ„ä¸¤ä¸ªç›¸é‚»å…ƒç´ ä¹‹å·®ç›¸åŒï¼Œåˆ™ç§°è¯¥æ•°åˆ—ä¸ºç­‰å·®æ•°åˆ—ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹æ•°åˆ—ä¸ºç­‰å·®æ•°åˆ—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span></span><br><span class="line"><span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span></span><br><span class="line"><span class="number">3</span>, -<span class="number">1</span>, -<span class="number">5</span>, -<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ•°åˆ—ä¸æ˜¯ç­‰å·®æ•°åˆ—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span></span><br></pre></td></tr></table></figure>

<p>æ•°ç»„ A åŒ…å« N ä¸ªæ•°ï¼Œä¸”ç´¢å¼•ä» 0 å¼€å§‹ã€‚æ•°ç»„ A çš„ä¸€ä¸ªå­æ•°ç»„åˆ’åˆ†ä¸ºæ•°ç»„ (P, Q)ï¼ŒP ä¸ Q æ˜¯æ•´æ•°ä¸”æ»¡è¶³ 0&lt;=P&lt;Q&lt;N ã€‚</p>
<p>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ç§°å­æ•°ç»„ (P, Q) ä¸ºç­‰å·®æ•°ç»„ï¼š</p>
<p>å…ƒç´  A[P], A[p + 1], â€¦, A[Q - 1], A[Q] æ˜¯ç­‰å·®çš„ã€‚å¹¶ä¸” P + 1 &lt; Q ã€‚</p>
<p>å‡½æ•°è¦è¿”å›æ•°ç»„ A ä¸­æ‰€æœ‰ä¸ºç­‰å·®æ•°ç»„çš„å­æ•°ç»„ä¸ªæ•°ã€‚</p>
<p> <strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">A = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">è¿”å›ï¼š<span class="number">3</span>, A ä¸­æœ‰ä¸‰ä¸ªå­ç­‰å·®æ•°ç»„ï¼š[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] ä»¥åŠè‡ªèº« [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p>dp çš„é¢˜å•Šï¼Œç­”æ¡ˆä¸€çœ‹å°±æ˜ç™½ï¼Œå°±æ˜¯è‡ªå·±æƒ³ä¸åˆ°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numberOfArithmeticSlices</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A.length&lt;<span class="number">3</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i]=dp[i-1]+1;</span></span><br><span class="line">    <span class="type">int</span> []dp=<span class="keyword">new</span> <span class="title class_">int</span>[A.length]; <span class="comment">//ä»¥ A[i] ç»“å°¾çš„ç­‰å·®æ•°åˆ—æœ‰å¤šå°‘ä¸ª</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;A.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A[i]-A[i-<span class="number">1</span>]==A[i-<span class="number">1</span>]-A[i-<span class="number">2</span>])&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;dp.length;i++) &#123;</span><br><span class="line">        res+=dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯æ²¡æƒ³åˆ°è¦å¯¹ä»¥å½“å‰å…ƒç´ ç»“å°¾çš„åŠ¨æ€æ•°ç»„æ•°é‡åš dpï¼Œå½“ç„¶ä¸Šé¢çš„åšæ³•çš„ç©ºé—´è¿˜å¯ä»¥ä¼˜åŒ–æˆ O(1) çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numberOfArithmeticSlices2</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A.length&lt;<span class="number">3</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i]=dp[i-1]+1;</span></span><br><span class="line">    <span class="type">int</span> dp=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;A.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A[i]-A[i-<span class="number">1</span>]==A[i-<span class="number">1</span>]-A[i-<span class="number">2</span>])&#123;</span><br><span class="line">            dp=dp+<span class="number">1</span>;</span><br><span class="line">            res+=dp;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦æ ¹æ®ä¸Šä¸€æ¬¡çš„ dp å€¼æ›´æ–°å°±è¡Œï¼Œå¦‚æœ break ç­‰å·®æ•°åˆ—ï¼Œå°±ç½®ä¸º 0</p>
<hr>
<h2 id="343-æ•´æ•°æ‹†åˆ†"><a href="#343-æ•´æ•°æ‹†åˆ†" class="headerlink" title="343. æ•´æ•°æ‹†åˆ†"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/integer-break/">343. æ•´æ•°æ‹†åˆ†</a></h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° nï¼Œå°†å…¶æ‹†åˆ†ä¸º<strong>è‡³å°‘</strong>ä¸¤ä¸ªæ­£æ•´æ•°çš„å’Œï¼Œå¹¶ä½¿è¿™äº›æ•´æ•°çš„ä¹˜ç§¯æœ€å¤§åŒ–ã€‚ è¿”å›ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ä¹˜ç§¯ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">2</span> = <span class="number">1</span> + <span class="number">1</span>, <span class="number">1</span> Ã— <span class="number">1</span> = <span class="number">1</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">36</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">10</span> = <span class="number">3</span> + <span class="number">3</span> + <span class="number">4</span>, <span class="number">3</span> Ã— <span class="number">3</span> Ã— <span class="number">4</span> = <span class="number">36</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong> ä½ å¯ä»¥å‡è®¾ n ä¸å°äº 2 ä¸”ä¸å¤§äº 58ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åˆ«é—®ï¼Œé—®å°±æ˜¯æš´åŠ›</p>
<p><img src="http://static.imlgw.top/blog/20190822/BKqmfoXMVq3Q.png?imageslim" alt="leetCode é¢˜è§£ 97wgl"></p>
<p><strong>é€’æ¨å¼ï¼š</strong> <code>F(n) = max &#123;i * F(n - i)&#125;ï¼Œi = 1ï¼Œ2ï¼Œ...ï¼Œn - 1</code>  </p>
<p>ç©·ä¸¾æ¯ä¸€ç§åˆ†è§£æƒ…å†µï¼Œæ±‚æœ€å¤§å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">integerBreak</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++) &#123;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ª Max æ±‚æœ€å¤§å€¼ï¼Œç¬¬äºŒä¸ª Max ä¸»è¦æ˜¯ä¸ºäº†è€ƒè™‘ åªåˆ†ä¸¤ä¸ªæ•°å°±æ˜¯æœ€å¤§å€¼çš„æƒ…å†µï¼ˆ&lt;=7 çš„æƒ…å†µï¼‰</span></span><br><span class="line">        res=Math.max(res, Math.max((n-j)*j,integerBreak(n-j)*j));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„å°±æ˜¯ç¬¬äºŒä¸ª Max åˆ«å¿˜äº†<strong>åªåˆ†ä¸ºä¸¤ä¸ªæ•°å°±åˆ°è¾¾æœ€å¤§å€¼</strong>çš„æƒ…å†µï¼Œæ¯”å¦‚ n&lt;=7 çš„æ—¶å€™ï¼Œ<code>integerBreak(n-j)*j)</code>  è‡³å°‘æ˜¯ä¸‰ä¸ªï¼Œä¸‹é¢çš„ DP ä¹Ÿæ˜¯ä¸€æ ·çš„è¦æ³¨æ„åˆ«å¿˜äº†ä¸¤ä¸ªæ•°çš„æƒ…å†µ</p>
<p>é€’å½’çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯<code>O(N!)</code> ï¼Œåé¢çš„ case ä¼šè¶…æ—¶ï¼Œå…¶å®å¾ˆæ˜æ˜¾ï¼Œé€’å½’è¿‡ç¨‹ä¸­ä¼šæœ‰å¾ˆå¤šçš„é‡å¤è®¡ç®—æ‰€ä»¥å¯ä»¥é‡‡ç”¨è®°å¿†åŒ–é€’å½’ç¼“å­˜ä¸€ä¸‹ä¹‹å‰çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span>  Integer[] cache=<span class="literal">null</span>;</span><br><span class="line"><span class="comment">//åªé¡¶å‘ä¸‹ï¼Œè®°å¿†åŒ–é€’å½’</span></span><br><span class="line"><span class="keyword">public</span>  <span class="type">int</span> <span class="title function_">integerBreak</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> breakInteger(n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>  <span class="type">int</span> <span class="title function_">breakInteger</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cache[n]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[n];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€’å½’å‡ºå£</span></span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;n;j++) &#123;</span><br><span class="line">        res=Math.max(res, Math.max((n-j)*j,breakInteger(n-j)*j));</span><br><span class="line">    &#125;</span><br><span class="line">    cache[n]=res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è§£æ³•æ˜¯å¯ä»¥ AC çš„ï¼Œç¼“å­˜ä¹‹å‰è®¡ç®—çš„ç»“æœï¼Œé¿å…äº†é‡å¤çš„è®¡ç®—</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>åŠ¨æ€è§„åˆ’ï¼Œç»“åˆä¸Šé¢çš„é€’å½’å¾—åˆ°<code>é€’æ¨æ–¹ç¨‹</code></p>
<p><code>dp[i] = max(dp[i]ï¼Œmax(dp[ i-j ] * j ï¼Œ(i-j) * j));</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">integerBreak2</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> [] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">2</span>]=<span class="number">1</span>; <span class="comment">//0,1 ä¸è€ƒè™‘</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">3</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++) &#123;</span><br><span class="line">            dp[i]=Math.max(dp[i],Math.max(dp[i-j]*j,(i-j)*j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>æ‰“æ¿æ‰¾è§„å¾‹ï¼Œç¬”è¯•çš„æ—¶å€™èƒ½ç›´æ¥ä¸€çœ¼çœ‹å‡ºæ¥è§„å¾‹çš„è‚¯å®šä¼˜å…ˆæ‰¾è§„å¾‹äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">integerBreak3</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] base=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">12</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">7</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> base[n-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">2</span>]=base[<span class="number">0</span>];</span><br><span class="line">    dp[<span class="number">3</span>]=base[<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">4</span>]=base[<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">5</span>]=base[<span class="number">3</span>];</span><br><span class="line">    dp[<span class="number">6</span>]=base[<span class="number">4</span>];</span><br><span class="line">    dp[<span class="number">7</span>]=base[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">8</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        dp[i]=dp[i-<span class="number">3</span>]*<span class="number">3</span>; <span class="comment">//N&gt;7 ä¹‹å dp[N]=dp[N-3]*3</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•å››</strong></p>
<p>æ•°å­¦åˆ†æï¼Œå…¶å®åˆ†æä¸€ä¸‹ä¼šå‘ç°ï¼Œåªæœ‰ 2 å’Œ 3 æ˜¯åˆ†è§£åå€¼æ¯”<strong>æœ¬èº«è¿˜è¦å°</strong>çš„ï¼Œ4 åˆ†è§£åç›¸ç­‰ï¼Œè¿™æ ·ä¸€åˆ†æï¼Œä»æ•´ä½“ä¸Šæ¥çœ‹å…¶å®å°±æ¸…æ¥šäº†ï¼Œåªè¦åˆ†åˆ° 2 æˆ–è€… 3 çš„æ—¶å€™å°±ä¸å†åˆ†å°±è¡Œäº†ï¼Œæ­¤æ—¶çš„å€¼ä¸€å®šæ˜¯æœ€å¤§å€¼ï¼Œå¦‚æœ 2ï¼Œ3 ç»§ç»­åˆ†å€¼å°±ä¼šå‡å°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">integerBreak</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] base=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> base[n-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;=<span class="number">5</span>)&#123;</span><br><span class="line">        res*=<span class="number">3</span>;</span><br><span class="line">        n-=<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    res*=n;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å–æ¨¡å†™æ³•ï¼Œè¿™é‡Œå…¶å®æ¶‰åŠåˆ°å–æ¨¡çš„ä¸€ä¸ªè§„åˆ™ï¼Œ<code>(a*b)%mod=(a%mid * b%mid) % mod</code> </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">cuttingRope</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">3</span>) <span class="keyword">return</span> n-<span class="number">1</span>;</span><br><span class="line">    <span class="type">long</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;=<span class="number">5</span>)&#123;</span><br><span class="line">        n-=<span class="number">3</span>;</span><br><span class="line">        res=(res*<span class="number">3</span>)%<span class="number">1000000007</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)(res*n%<span class="number">1000000007</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="279-å®Œå…¨å¹³æ–¹æ•°"><a href="#279-å®Œå…¨å¹³æ–¹æ•°" class="headerlink" title="279. å®Œå…¨å¹³æ–¹æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/perfect-squares/">279. å®Œå…¨å¹³æ–¹æ•°</a></h2><p>ç»™å®šæ­£æ•´æ•° nï¼Œæ‰¾åˆ°è‹¥å¹²ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼ˆæ¯”å¦‚ 1, 4, 9, 16, â€¦ï¼‰ä½¿å¾—å®ƒä»¬çš„å’Œç­‰äº nã€‚ä½ éœ€è¦è®©ç»„æˆå’Œçš„å®Œå…¨å¹³æ–¹æ•°çš„ä¸ªæ•°æœ€å°‘ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">12</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span> </span><br><span class="line">è§£é‡Šï¼š<span class="number">12</span> = <span class="number">4</span> + <span class="number">4</span> + <span class="number">4.</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">13</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">13</span> = <span class="number">4</span> + <span class="number">9.</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’ï¼Œä¸å®¹æ˜“å•Šï¼Œè‡ªå·±æ¨å‡ºäº† DP æ–¹ç¨‹ï¼Œæ²¡çœ‹ç­”æ¡ˆï¼Œå…¶å®ä¹Ÿå€Ÿé‰´äº†ä¸Šä¸€é¢˜çš„æ€è·¯</p>
<p><code>dp[i] =min(dp[i]ï¼Œdp[i-j*j]+1)</code> </p>
<p>å…¶å®ä¹Ÿæ˜¯å°†æ•´æ•°æ‹†åˆ†ï¼Œä¸è¿‡æ‹†åˆ†çš„æ—¶å€™æŒ‰ç…§ <strong>å®Œå…¨å¹³æ–¹æ•°</strong> æ¥æ‹†åˆ†ï¼Œå®Œå…¨å¹³æ–¹æ•°çš„è‚¯å®šæ˜¯ 1 æ‰€ä»¥æœ€åè¦åŠ ä¸ª 1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">numSquares</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        dp[i]=Integer.MAX_VALUE; <span class="comment">//dp[i] åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;i&gt;=j*j;++j)&#123;</span><br><span class="line">            dp[i]=Math.min(dp[i],dp[i-j*j]+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>50%å·¦å³ï¼Œçœ‹äº†ä¸‹æ—¶é—´å¤æ‚åº¦åº”è¯¥æ˜¯ <code>O(N^1.5)</code>  è¿˜æ˜¯æŒºé«˜çš„ï¼ˆè¯„è®ºåŒºç”¨ Py çš„éƒ½è¶…æ—¶äº†ï¼‰</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>BFSï¼Œå°†æ•°å­—æŒ‰ç…§å®Œå…¨å¹³æ–¹æ•°è¿æ¥ä¸ºä¸€ä¸ªå›¾ï¼Œç„¶å BFS æ±‚ä¸€ä¸ªä» n åˆ° 0 çš„æœ€çŸ­çš„è·¯å¾„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">numSquares</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Queue&lt;Pair&gt; queue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">boolean</span>[] visit=<span class="keyword">new</span> <span class="title class_">boolean</span>[n+<span class="number">1</span>];</span><br><span class="line">    queue.add(<span class="keyword">new</span> <span class="title class_">Pair</span>(n,<span class="number">0</span>));</span><br><span class="line">    visit[n]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">        Pair pair=queue.poll();</span><br><span class="line">        <span class="type">int</span> num=pair.num;</span><br><span class="line">        <span class="type">int</span> step=pair.step;</span><br><span class="line">        <span class="keyword">if</span> (num==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> step;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i*i&lt;=num;i++) &#123;</span><br><span class="line">            <span class="type">int</span> temp=num-i*i;</span><br><span class="line">            <span class="keyword">if</span> (!visit[temp]) &#123;</span><br><span class="line">                queue.add(<span class="keyword">new</span> <span class="title class_">Pair</span>(temp,step+<span class="number">1</span>));</span><br><span class="line">                visit[temp]=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> step;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> num;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(<span class="type">int</span> num,<span class="type">int</span> step)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.num=num;</span><br><span class="line">        <span class="built_in">this</span>.step=step;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é¢˜æœ€å¿«çš„åšæ³•åº”è¯¥æ˜¯åˆ©ç”¨ <strong>å››å¹³æ–¹å’Œå®šç†</strong> æˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œæ‰€ä»¥æš‚æ—¶å…ˆä¸ç ”ç©¶è¿™ç§åšæ³•</p>
<h2 id="91-è§£ç æ–¹æ³•"><a href="#91-è§£ç æ–¹æ³•" class="headerlink" title="91. è§£ç æ–¹æ³•"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/decode-ways/">91. è§£ç æ–¹æ³•</a></h2><p>ä¸€æ¡åŒ…å«å­—æ¯ A-Z çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œäº†ç¼–ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;A&#x27;</span> -&gt; <span class="number">1</span></span><br><span class="line"><span class="string">&#x27;B&#x27;</span> -&gt; <span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="string">&#x27;Z&#x27;</span> -&gt; <span class="number">26</span></span><br></pre></td></tr></table></figure>

<p>ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„éç©ºå­—ç¬¦ä¸²ï¼Œè¯·è®¡ç®—è§£ç æ–¹æ³•çš„æ€»æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;12&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šå®ƒå¯ä»¥è§£ç ä¸º <span class="string">&quot;AB&quot;</span>ï¼ˆ<span class="number">1</span> <span class="number">2</span>ï¼‰æˆ–è€… <span class="string">&quot;L&quot;</span>ï¼ˆ<span class="number">12</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;226&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šå®ƒå¯ä»¥è§£ç ä¸º <span class="string">&quot;BZ&quot;</span> (<span class="number">2</span> <span class="number">26</span>), <span class="string">&quot;VF&quot;</span> (<span class="number">22</span> <span class="number">6</span>), æˆ–è€… <span class="string">&quot;BBF&quot;</span> (<span class="number">2</span> <span class="number">2</span> <span class="number">6</span>) ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å“‡ï¼Œè¿™é¢˜æˆ‘åäº†ï¼Œå¥½ä¸å®¹æ˜“çœ‹å‡ºæ¥äº†é€’æ¨å…¬å¼ï¼Œè¢«è¾¹ç•Œç»™æ•´æ­»äº†ã€‚é¢å‘æµ‹è¯•ç”¨ä¾‹ç¼–ç¨‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">numDecodings</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.startsWith(<span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] s_nums=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++) &#123;</span><br><span class="line">        s_nums[i]=Integer.valueOf(s.charAt(i)-<span class="number">48</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] dp =<span class="keyword">new</span> <span class="title class_">int</span>[s_nums.length];</span><br><span class="line">    Arrays.fill(dp,<span class="number">1</span>);</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;s_nums.length;j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(s_nums[j]==<span class="number">0</span> &amp;&amp; s_nums[j-<span class="number">1</span>]==<span class="number">0</span> || (s_nums[j]==<span class="number">0</span> &amp;&amp; s_nums[j-<span class="number">1</span>]&gt;<span class="number">2</span>))&#123;</span><br><span class="line">            <span class="comment">//ç›´æ¥ return</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( s_nums[j]==<span class="number">0</span> || s_nums[j-<span class="number">1</span>]==<span class="number">0</span> || (j&lt;s_nums.length-<span class="number">1</span> &amp;&amp;s_nums[j+<span class="number">1</span>]==<span class="number">0</span>))&#123;</span><br><span class="line">            <span class="comment">//ä¸ºäº†å¤„ç† 12120 è¿™ç§æƒ…å†µ</span></span><br><span class="line">            res*=dp[j-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s_nums[j-<span class="number">1</span>]*<span class="number">10</span>+s_nums[j]&lt;=<span class="number">26</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j==<span class="number">1</span>)&#123;</span><br><span class="line">                dp[j]=<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[j]=dp[j-<span class="number">1</span>]+dp[j-<span class="number">2</span>];    </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//åˆ’åˆ†ç‚¹ã€‚</span></span><br><span class="line">            res*=dp[j-<span class="number">1</span>];</span><br><span class="line">            dp[j-<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">            dp[j]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€åä¸€æ®µ</span></span><br><span class="line">    res*=dp[s_nums.length-<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆè¦æ¨å‡ºè¿™é¢˜çš„é€’æ¨å…¬å¼ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨çº¸ä¸Šç”»äº†åŠå¤©æ‰çœ‹å‡ºæ¥ï¼Œå¦‚æœè¿™ä¸ªæ•°ç»„å‰åä¸¤ä¸ªå…ƒç´ ä¹‹å’Œéƒ½æ˜¯å°äº 26 çš„é‚£ä¹ˆè¿™ä¸€æ®µçš„ç¼–ç æ–¹å¼å°±æ˜¯ä¸€ä¸ª<strong>æ–æ³¢æ‹‰å¥‘æ•°åˆ—</strong> ï¼Œä¹Ÿå°±æ˜¯ <code>dp[i]=dp[i-1]+dp[i-2]</code></p>
<p>80%å·¦å³ï¼Œè¿™é¢˜å…¶å®ä¸€å¼€å§‹å¹¶ä¸æ˜¯è¿™æ ·åšçš„ï¼Œæˆ‘è§‰å¾—æˆ‘å¼€å§‹çš„æ€è·¯è¿˜æ˜¯æŒºå¥½çš„ï¼Œå°†å­—ç¬¦ä¸²åˆ†æ®µï¼Œå½“å‰ä¸€ä¸ªå’Œåä¸€ä¸ªæ— æ³•åˆå¹¶çš„æ—¶å€™å°±ä½œä¸ºä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œæœ€åå°†æ¯ä¸€æ®µçš„ç¼–ç æ–¹å¼ç›¸ä¹˜å°±æ˜¯ç»“æœäº†ã€‚</p>
<p>ä½†æ˜¯ ï¼ï¼ï¼ æˆ‘å¿½ç•¥äº† 0 è¿™ä¸ªä¸œè¥¿äº†ï¼Œè¿™é¢˜åé¢ç»™çš„ case é‡Œé¢éƒ½æ˜¯å¸¦æœ‰ 0 çš„ï¼ï¼ï¼ï¼å¤„ç†è¿™ä¸ªè¾¹ç•Œå¤„ç†äº†ä¸€ä¸Šåˆç»ˆäºè·‘è¿‡äº†ã€‚ä»£ç ä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå†™çš„å¤ªçƒ‚äº†ï¼Œè¿™ç§ä»£ç æ²¡å•¥æ„ä¹‰ï¼Œéƒ½æ˜¯èµ°ä¸€æ­¥çœ‹ä¸€æ­¥ã€‚</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">numDecodings2</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.startsWith(<span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] s_nums=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++) &#123;</span><br><span class="line">        s_nums[i]=Integer.valueOf(s.charAt(i)-<span class="number">48</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;=s.length();i++) &#123;</span><br><span class="line">        <span class="type">int</span> a=s_nums[i-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(a!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//åˆ°è¿™é‡Œ dp[i]==0, æ²¡æœ‰åˆå§‹åŒ–ï¼Œé»˜è®¤å°±æ˜¯ 0</span></span><br><span class="line">            <span class="comment">//å…¶å®ç­‰ä»·äº dp[i]=dp[i-1], å»¶ç»­å‰ä¸€ä¸ªå­—ç¬¦çš„çŠ¶æ€</span></span><br><span class="line">            dp[i]+=dp[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(s_nums[i-<span class="number">2</span>]==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå‰å‰ä¸€ä¸ªå­—ç¬¦ä¸º 0 é‚£ä¹ˆå°±ä¸ç”¨ dp äº†ï¼Œä¿æŒ i-1 çš„çŠ¶æ€å°± OK</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‰å‰ä¸€ä¸ªå­—ç¬¦å’Œ</span></span><br><span class="line">        <span class="type">int</span> b=s_nums[i-<span class="number">2</span>]*<span class="number">10</span>+s_nums[i-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(b&lt;=<span class="number">26</span>)&#123;</span><br><span class="line">            dp[i]+=dp[i-<span class="number">2</span>]; <span class="comment">//ä¸Šä¸‹è¿™ä¸¤ä¸ª dp å¿…é¡»æ‰§è¡Œä¸€ä¸ªå¦åˆ™æœ€åå°± return 0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[s_nums.length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•å°±æ¸…æ™°å¤šäº†ï¼Œåˆ†æå„ç§æƒ…å†µï¼Œdp ä»£è¡¨æˆªè‡³å­—ç¬¦çš„ç¼–ç æ–¹å¼</p>
<p>ğŸ’¬  <code>s_num[i-1]!=0 &amp;&amp; s_num[i-2]!=0 &amp;&amp; s_num[i-2]+s_num[i-1] &lt;=26</code>  </p>
<p>ç±»ä¼¼äº <strong>112</strong>  è¿™æ ·çš„ï¼Œè¿™å°±æ˜¯æ­£å¸¸ dp çš„æƒ…å†µç¬¦åˆæ–æ³¢æ‹‰å¥‘æ•°åˆ—</p>
<p>ğŸ’¬  <code>s_num[i-1]==0 &amp;&amp; s_num[i-2]!=0 &amp;&amp; s_num[i-2]+s_num[i-1] &lt;=26</code></p>
<p>ç±»ä¼¼äº <strong>102</strong> è¿™æ ·çš„ï¼Œè¿™æ ·å°±ç›´æ¥<code>ç»§æ‰¿ dp[i-2] çš„çŠ¶æ€</code>å°±è¡Œäº†ï¼Œç›¸å½“äº<code>dp[i]=dp[i-2]</code></p>
<p>ğŸ’¬  <code>s_num[i-1]!=0 &amp;&amp; s_num[i-2]!=0 &amp;&amp; s_num[i-2]+s_num[i-1] &gt;26</code></p>
<p>ç±»ä¼¼äº <strong>132</strong> è¿™æ ·çš„ï¼Œè¿™æ ·å°±ç›´æ¥<code>ç»§æ‰¿ dp[i-2] çš„çŠ¶æ€</code>å°±è¡Œäº†ï¼Œç›¸å½“äº<code>dp[i]=dp[i-2]</code></p>
<p>ğŸ’¬ <code>s_num[i-1]!=0 &amp;&amp; s_num[i-2]==0 &amp;&amp; s_num[i-2]+s_num[i-1] &lt;=26</code></p>
<p>ç±»ä¼¼äº **â€¦012 **è¿™æ ·çš„ï¼Œ<code>dp[i]=dp[i-1]</code></p>
<p>ğŸ’¬ <code>s_num[i-1]==0 &amp;&amp; s_num[i-2]==0</code> æˆ–è€…<code>s_num[i-1]==0 &amp;&amp; s_num[i-2]!=0 &amp;&amp; s_num[i-2]+s_num[i-1]&gt;26</code></p>
<p>ç±»ä¼¼äº** 00** å’Œ** 30** è¿™æ ·çš„ï¼Œ è¿™æ ·å°±ä»£è¡¨è¿™ä¸ªå­—ç¬¦ä¸²æ— æ³•ç¼–ç äº† <strong>dp[i]=0</strong> æœ€åè¿”å›çš„å°±æ˜¯ 0</p>
<h2 id="é¢è¯•é¢˜-46-æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²"><a href="#é¢è¯•é¢˜-46-æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²" class="headerlink" title="é¢è¯•é¢˜ 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/">é¢è¯•é¢˜ 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</a></h2><p>ç»™å®šä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æŠŠå®ƒç¿»è¯‘ä¸ºå­—ç¬¦ä¸²ï¼š0 ç¿»è¯‘æˆ â€œaâ€ ï¼Œ1 ç¿»è¯‘æˆ â€œbâ€ï¼Œâ€¦â€¦ï¼Œ11 ç¿»è¯‘æˆ â€œlâ€ï¼Œâ€¦â€¦ï¼Œ25 ç¿»è¯‘æˆ â€œzâ€ã€‚ä¸€ä¸ªæ•°å­—å¯èƒ½æœ‰å¤šä¸ªç¿»è¯‘ã€‚è¯·ç¼–ç¨‹å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è®¡ç®—ä¸€ä¸ªæ•°å­—æœ‰å¤šå°‘ç§ä¸åŒçš„ç¿»è¯‘æ–¹æ³•ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">12258</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">12258</span> æœ‰ <span class="number">5</span> ç§ä¸åŒçš„ç¿»è¯‘ï¼Œåˆ†åˆ«æ˜¯<span class="string">&quot;bccfi&quot;</span>, <span class="string">&quot;bwfi&quot;</span>, <span class="string">&quot;bczi&quot;</span>, <span class="string">&quot;mcfi&quot;</span>å’Œ<span class="string">&quot;mzi&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>0 &lt;= num &lt; 231</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä»£ç æ¯”è¾ƒä¸‘ï¼Œé€»è¾‘è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œå…¶å®è¿™é¢˜ç®—æ˜¯ä¸Šé¢ <a href="#91-%E8%A7%A3%E7%A0%81%E6%96%B9%E6%B3%95">91. è§£ç æ–¹æ³•</a>çš„å¼±åŒ–æ²¡æœ‰äº† 0 çš„é™åˆ¶ï¼Œ0 æ˜¯åˆæ³•çš„æ•°å­—ï¼Œè¿™æ ·å°±èˆ’æœå¤šäº†ï¼Œä¸Šé¢è§£ç æ–¹æ³•ç¡®å®åšçš„è„‘å£³ç–¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">translateNum</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">    String s=String.valueOf(num);</span><br><span class="line">    <span class="type">int</span> len=s.length();</span><br><span class="line">    <span class="keyword">if</span>(len==<span class="number">0</span> || len==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">    <span class="comment">//1 2 2 5 8</span></span><br><span class="line">    <span class="comment">//1 2 3 5 5</span></span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=Integer.valueOf(s.substring(<span class="number">0</span>,<span class="number">2</span>))&gt;<span class="number">25</span>?<span class="number">1</span>:<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="type">int</span> pre=Integer.valueOf(s.charAt(i-<span class="number">1</span>))-<span class="number">48</span>;</span><br><span class="line">        <span class="type">int</span> cur=Integer.valueOf(s.charAt(i))-<span class="number">48</span>;</span><br><span class="line">        <span class="keyword">if</span>(pre!=<span class="number">0</span> &amp;&amp; Integer.valueOf(pre*<span class="number">10</span>+cur)&lt;=<span class="number">25</span>)&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>]+dp[i-<span class="number">2</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[len-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5375-æ¢å¤æ•°ç»„"><a href="#5375-æ¢å¤æ•°ç»„" class="headerlink" title="5375. æ¢å¤æ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/restore-the-array/">5375. æ¢å¤æ•°ç»„</a></h2><p>æŸä¸ªç¨‹åºæœ¬æ¥åº”è¯¥è¾“å‡ºä¸€ä¸ªæ•´æ•°æ•°ç»„ã€‚ä½†æ˜¯è¿™ä¸ªç¨‹åºå¿˜è®°è¾“å‡ºç©ºæ ¼äº†ä»¥è‡´è¾“å‡ºäº†ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æ‰€çŸ¥é“çš„ä¿¡æ¯åªæœ‰ï¼šæ•°ç»„ä¸­æ‰€æœ‰æ•´æ•°éƒ½åœ¨ [1, k] ä¹‹é—´ï¼Œä¸”æ•°ç»„ä¸­çš„æ•°å­—éƒ½æ²¡æœ‰å‰å¯¼ 0 ã€‚</p>
<p>ç»™ä½ å­—ç¬¦ä¸² s å’Œæ•´æ•° k ã€‚å¯èƒ½ä¼šæœ‰å¤šç§ä¸åŒçš„æ•°ç»„æ¢å¤ç»“æœã€‚</p>
<p>æŒ‰ç…§ä¸Šè¿°ç¨‹åºï¼Œè¯·ä½ è¿”å›æ‰€æœ‰å¯èƒ½è¾“å‡ºå­—ç¬¦ä¸² s çš„æ•°ç»„æ–¹æ¡ˆæ•°ã€‚</p>
<p>ç”±äºæ•°ç»„æ–¹æ¡ˆæ•°å¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¯·ä½ è¿”å›å®ƒå¯¹ 10^9 + 7 å–ä½™ åçš„ç»“æœã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;1000&quot;</span>, k = <span class="number">10000</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šå”¯ä¸€ä¸€ç§å¯èƒ½çš„æ•°ç»„æ–¹æ¡ˆæ˜¯ [<span class="number">1000</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;1000&quot;</span>, k = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šä¸å­˜åœ¨ä»»ä½•æ•°ç»„æ–¹æ¡ˆæ»¡è¶³æ‰€æœ‰æ•´æ•°éƒ½ &gt;= <span class="number">1</span> ä¸” &lt;= <span class="number">10</span> åŒæ—¶è¾“å‡ºç»“æœä¸º s ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;1317&quot;</span>, k = <span class="number">2000</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">8</span></span><br><span class="line">è§£é‡Šï¼šå¯è¡Œçš„æ•°ç»„æ–¹æ¡ˆä¸º [<span class="number">1317</span>]ï¼Œ[<span class="number">131</span>,<span class="number">7</span>]ï¼Œ[<span class="number">13</span>,<span class="number">17</span>]ï¼Œ[<span class="number">1</span>,<span class="number">317</span>]ï¼Œ[<span class="number">13</span>,<span class="number">1</span>,<span class="number">7</span>]ï¼Œ[<span class="number">1</span>,<span class="number">31</span>,<span class="number">7</span>]ï¼Œ[<span class="number">1</span>,<span class="number">3</span>,<span class="number">17</span>]ï¼Œ[<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;2020&quot;</span>, k = <span class="number">30</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„æ•°ç»„æ–¹æ¡ˆæ˜¯ [<span class="number">20</span>,<span class="number">20</span>] ã€‚ [<span class="number">2020</span>] ä¸æ˜¯å¯è¡Œçš„æ•°ç»„æ–¹æ¡ˆï¼ŒåŸå› æ˜¯ <span class="number">2020</span> &gt; <span class="number">30</span> ã€‚ [<span class="number">2</span>,<span class="number">020</span>] ä¹Ÿä¸æ˜¯å¯è¡Œçš„æ•°ç»„æ–¹æ¡ˆï¼Œå› ä¸º <span class="number">020</span> å«æœ‰å‰å¯¼ <span class="number">0</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;1234567890&quot;</span>, k = <span class="number">90</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">34</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>1 &lt;= s.length &lt;= 10^5.</li>
<li>s åªåŒ…å«æ•°å­—ä¸”ä¸åŒ…å«å‰å¯¼ 0 ã€‚</li>
<li>1 &lt;= k &lt;= 10^9.</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>24th åŒå‘¨èµ›çš„ T4ï¼Œå…¶å® dp çš„çŠ¶æ€è½¬æ¢è¿˜æ˜¯æƒ³å‡ºæ¥äº†ï¼Œæˆ‘æƒ³çš„æ˜¯ä»å·¦å‘å³ï¼Œä½†æ˜¯ç»†èŠ‚æ²¡ç†æ¸…æ¥šï¼Œç„äº†ä¸€çœ¼è¯„è®ºåŒºï¼Œå‘ç°ä»å³å¾€å·¦æ¯”è¾ƒç®€å•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numberOfArrays</span><span class="params">(String s, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mod=<span class="number">1_000_000_000</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()+<span class="number">1</span>];        </span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//dp[i]=dp[i-1]+dp[i-2]+...+dp[0];</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i-<span class="number">1</span>;j&gt;=<span class="number">0</span> &amp;&amp; i-j&lt;=<span class="number">9</span>;j--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(j)!=<span class="string">&#x27;0&#x27;</span> &amp;&amp; valid(s,j,i,k))&#123; <span class="comment">//éªŒè¯å³è¾¹æ˜¯å¦æ»¡è¶³</span></span><br><span class="line">                dp[i]=(dp[i]+dp[j])%mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[s.length()];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//10 0000 0000</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">valid</span><span class="params">(String s,<span class="type">int</span> j,<span class="type">int</span> i,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="type">long</span> value=Long.valueOf(s.substring(j,i));</span><br><span class="line">    <span class="keyword">return</span> value&lt;=k &amp;&amp; value&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘å¼€å§‹ä»¥ä¸ºæ—¶é—´å¤æ‚åº¦æ˜¯<code>O(N^2)</code>ä¼š T æ‰ï¼Œåæ¥å†™å‡ºæ¥æ‰å‘ç°å…¶å®æ—¶é—´å¤æ‚åº¦å…¶å®æ˜¯<code>O(10N)</code> ï¼Œå¹¶ä¸éš¾ï¼Œè¿˜æ˜¯é¢˜ç›®å†™å°‘äº†å•Šï¼ï¼ï¼</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ä¸€ç‚¹å°ä¼˜åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numberOfArrays</span><span class="params">(String s, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mod=<span class="number">1_000_000_000</span> + <span class="number">7</span>;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()+<span class="number">1</span>];        </span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i-<span class="number">1</span>;j&gt;=<span class="number">0</span> &amp;&amp; i-j&lt;=<span class="number">9</span>;j--) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(j)==<span class="string">&#x27;0&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">long</span> value=Long.valueOf(s.substring(j,i));</span><br><span class="line">            <span class="keyword">if</span>(value&gt;k) <span class="keyword">break</span>; <span class="comment">//è¿™ä¸€æ­¥å…¶å®æ˜¯å¯¹ä¸Šé¢è§£æ³•çš„ä¼˜åŒ–</span></span><br><span class="line">            dp[i]=(dp[i]+dp[j])%mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[s.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="300-æœ€é•¿ä¸Šå‡å­åºåˆ—"><a href="#300-æœ€é•¿ä¸Šå‡å­åºåˆ—" class="headerlink" title="300. æœ€é•¿ä¸Šå‡å­åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-increasing-subsequence/">300. æœ€é•¿ä¸Šå‡å­åºåˆ—</a></h2><p>ç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">10</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">101</span>,<span class="number">18</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span> </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿çš„ä¸Šå‡å­åºåˆ—æ˜¯ [<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">101</span>]ï¼Œå®ƒçš„é•¿åº¦æ˜¯ <span class="number">4</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>å¯èƒ½ä¼šæœ‰å¤šç§æœ€é•¿ä¸Šå‡å­åºåˆ—çš„ç»„åˆï¼Œä½ åªéœ€è¦è¾“å‡ºå¯¹åº”çš„é•¿åº¦å³å¯ã€‚</li>
<li>ä½ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(n2) ã€‚</li>
<li>è¿›é˜¶ï¼šä½ èƒ½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ° O(n log n) å—ï¼Ÿ</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>LISï¼Œè¿™é¢˜å¥½åƒåœ¨å¾ˆå¤šåœ°æ–¹è§åˆ°è¿‡äº†ï¼Œè¿˜æ˜¯è¦å¥½å¥½ç†è§£ä¸‹ï¼Œ<strong>dp[i] è¡¨ç¤ºä»¥å½“å‰å…ƒç´ ç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lengthOfLIS</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span>||nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="comment">//Arrays.fill(dp,1);</span></span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        dp[i]=<span class="number">1</span>; <span class="comment">//åˆå§‹åŒ– dp[i]=1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;nums[j])&#123;</span><br><span class="line">                <span class="comment">//éå† i ä¹‹å‰çš„å…ƒç´ ï¼Œæ‰¾ä¸€ä¸ªæœ€å¤§çš„ dp[j]+1</span></span><br><span class="line">                dp[i]=Math.max(dp[j]+<span class="number">1</span>,dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;dp.length;i++) &#123;</span><br><span class="line">        res=res&gt;dp[i]?res:dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€å¼€å§‹é¢˜ç›®å°±æ²¡çœ‹æ¸…æ¥šå°±å¼€å§‹åšï¼Œä»¥ä¸ºæ˜¯è¿ç»­çš„ï¼Œå¿ƒæƒ³è¿™ä¸æ˜¯ O(N) çš„ä¹ˆï¼Œä¸ºå•¥è¦æˆ‘å†™ O(N^2) çš„ğŸ¤£ </p>
<p><img src="http://static.imlgw.top/blog/20190824/86VLMN8VWcpI.png?imageslim" alt="mark"></p>
<p>çµé­‚ç”»æ‰‹ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€é“å¾ˆç®€å•çš„ DPï¼ˆç„¶è€Œæˆ‘è¿˜æ˜¯æ²¡æƒ³å‡ºæ¥ï¼‰ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ O(N^2)ï¼Œå¯ä»¥ä¼˜åŒ–æˆ O(NlogN)</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p><code>è´ªå¿ƒ+äºŒåˆ†</code>  è¿™ä¸ªè´ªå¿ƒè¿˜æ˜¯æœ‰ç‚¹éªšçš„ï¼Œæ ¸å¿ƒæ€æƒ³ï¼š</p>
<p><strong>å¦‚æœå‰é¢çš„æ•°è¶Šå°ï¼Œåé¢æ¥ä¸Šä¸€ä¸ªéšæœºæ•°ï¼Œå°±ä¼šæœ‰æ›´å¤§çš„å¯èƒ½æ€§æ„æˆä¸€ä¸ªæ›´é•¿çš„â€œä¸Šå‡å­åºåˆ—â€ã€‚</strong></p>
<p>å®šä¹‰<code>tail</code>æ•°ç»„ï¼Œ<code>tail[i]</code>ä¸­å­˜å‚¨é•¿åº¦ä¸º <code>i + 1</code> çš„æœ€é•¿é€’å¢å­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç»´æŠ¤ tail æ•°ç»„ï¼Œä½¿å¾—å„ä¸ªé•¿åº¦çš„<code>tail[i]</code>çš„å°½å¯èƒ½åœ°å°ï¼Œè¿™æ ·åé¢èƒ½æ¥çš„é•¿åº¦å°±è¶Šé•¿ï¼Œå¾ˆæ˜æ˜¾ tail æ˜¯ä¸ªå•è°ƒé€’å¢çš„æ•°ç»„ï¼ˆåè¯ï¼‰æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨éå† nums çš„æ—¶å€™åœ¨ tail æ•°ç»„ä¸­äºŒåˆ†å¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äº nums[i] çš„å…ƒç´ ï¼Œç”¨ nums[i] æ›¿æ¢è¯¥ä½ç½®çš„å…ƒç´ ï¼Œè¿™æ ·å°±ä½¿å¾—<code>tail[i]</code>æ˜¯å½“å‰ nums[i] ä¹‹å‰ï¼Œé•¿åº¦ä¸º i+1 çš„é€’å¢åºåˆ—æœ€å°çš„ç»“å°¾å…ƒç´ ï¼Œå½“æˆ‘ä»¬éå†å®Œæ‰€æœ‰çš„å…ƒç´ ï¼Œtail æ•°ç»„çš„é•¿åº¦å°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ï¼ˆæ³¨æ„ tail ä¸ä¸€å®šæ˜¯åˆæ³•çš„æœ€é•¿é€’å¢å­åºåˆ—ï¼Œå¦‚æœè¦æ±‚å‡ºå­åºåˆ—å¯ä»¥åœ¨é•¿åº¦å¢åŠ çš„æ—¶å€™æ‹·è´ä¸€ä»½é•¿åº¦ä¸º<code>i-1</code>çš„æ•°ç»„ï¼Œç„¶åå†æ“ä½œï¼‰</p>
<p>2020.3.20</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">lengthOfLIS</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] top = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        <span class="comment">//å¯»æ‰¾å·¦ä¾§æœ€å°çš„å †é¡¶</span></span><br><span class="line">        <span class="type">int</span> index=binarySearch(top,len,num);</span><br><span class="line">        <span class="keyword">if</span> (index == len) &#123;</span><br><span class="line">            len++;</span><br><span class="line">        &#125;</span><br><span class="line">        top[index] = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥æœç´¢</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> len, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>,right=len;</span><br><span class="line">    <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">        <span class="type">int</span> mid=left+(right-left)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums[mid]&lt;target)&#123;</span><br><span class="line">            left=mid+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            right=mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆæ˜¯è®°ä½äº†è¿™ä¸ªå¥—è·¯ï¼Œç„¶åä¼˜åŒ–äº†äºŒåˆ†çš„å†™æ³•</p>
<p><img src="http://static.imlgw.top/blog/20200320/zhcxcxmK4Amt.png?imageslim" alt="mark"></p>
<p>ï¼ˆcopy è‡ªä» liweiwei å¤§ä½¬ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-increasing-subsequence/solution/dong-tai-gui-hua-er-fen-cha-zhao-tan-xin-suan-fa-p/">é¢˜è§£</a>ï¼‰</p>
<h2 id="673-æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°"><a href="#673-æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°" class="headerlink" title="673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/">673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°</a></h2><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæœ‰ä¸¤ä¸ªæœ€é•¿é€’å¢å­åºåˆ—ï¼Œåˆ†åˆ«æ˜¯ [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>] å’Œ [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦æ˜¯ <span class="number">1</span>ï¼Œå¹¶ä¸”å­˜åœ¨ <span class="number">5</span> ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º <span class="number">1</span>ï¼Œå› æ­¤è¾“å‡º <span class="number">5</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong> ç»™å®šçš„æ•°ç»„é•¿åº¦ä¸è¶…è¿‡ 2000 å¹¶ä¸”ç»“æœä¸€å®šæ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¸€å¼€å§‹è¿˜æ²¡æƒ³åˆ°ï¼Œå±å®èœé¸¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findNumberOfLIS</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> n=nums.length;</span><br><span class="line">    <span class="comment">//dp[i][0] ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—ï¼Œdp[i][1] ä»£è¡¨ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        dp[i][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;nums[j])&#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[j][<span class="number">0</span>]+<span class="number">1</span>==dp[i][<span class="number">0</span>])&#123;</span><br><span class="line">                    dp[i][<span class="number">1</span>]+=dp[j][<span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dp[j][<span class="number">0</span>]+<span class="number">1</span>&gt;dp[i][<span class="number">0</span>])&#123;</span><br><span class="line">                    dp[i][<span class="number">1</span>]=dp[j][<span class="number">1</span>];</span><br><span class="line">                    dp[i][<span class="number">0</span>]=dp[j][<span class="number">0</span>]+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        max=Math.max(max,dp[i][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        res+=dp[i][<span class="number">0</span>]==max?dp[i][<span class="number">1</span>]:<span class="number">0</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1016-ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼ˆLintCodeï¼‰"><a href="#1016-ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼ˆLintCodeï¼‰" class="headerlink" title="1016. ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼ˆLintCodeï¼‰"></a><a target="_blank" rel="noopener" href="https://www.lintcode.com/problem/minimum-swaps-to-make-sequences-increasing/description">1016. ä½¿åºåˆ—é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ï¼ˆLintCodeï¼‰</a></h2><p>æœ‰ä¸¤ä¸ªå…·æœ‰ç›¸åŒéé›¶é•¿åº¦çš„æ•´æ•°åºåˆ— A å’Œ Bã€‚å¯ä»¥äº¤æ¢å®ƒä»¬çš„ä¸€äº›å…ƒç´  A[i] å’Œ B[i]ã€‚ æ³¨æ„ï¼Œä¸¤ä¸ªå¯äº¤æ¢çš„å…ƒç´ åœ¨å®ƒä»¬å„è‡ªçš„åºåˆ—ä¸­å¤„äºç›¸åŒçš„ç´¢å¼•ä½ç½®ã€‚è¿›è¡Œä¸€äº›äº¤æ¢ä¹‹åï¼ŒA å’Œ B éœ€è¦ä¸¥æ ¼é€’å¢ã€‚ ï¼ˆå½“ä¸”ä»…å½“ A[0] &lt; A[1] &lt; A[2] &lt; â€¦ &lt; A[A.length - 1] æ—¶ï¼Œåºåˆ—ä¸¥æ ¼é€’å¢ã€‚ï¼‰</p>
<p>ç»™å®š A å’Œ Bï¼Œè¿”å›ä½¿ä¸¤ä¸ªåºåˆ—ä¸¥æ ¼é€’å¢çš„æœ€å°äº¤æ¢æ¬¡æ•°ã€‚ ä¿è¯ç»™å®šçš„è¾“å…¥ç»è¿‡äº¤æ¢å¯ä»¥æ»¡è¶³é€’å¢çš„æ¡ä»¶ã€‚</p>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>A, B æ˜¯é•¿åº¦ç›¸åŒçš„æ•°ç»„ï¼Œå®ƒä»¬çš„é•¿åº¦èŒƒå›´ä¸º [1, 1000]ã€‚</li>
<li>A[i], B[i] æ˜¯åœ¨ [0, 2000] èŒƒå›´å†…çš„æ•´æ•°ã€‚</li>
</ul>
<p><strong>æ ·ä¾‹ 1</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šA = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>], B = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šäº¤æ¢ A[<span class="number">3</span>] and B[<span class="number">3</span>]. ä¸¤ä¸ªåºåˆ—å˜ä¸ºï¼š</span><br><span class="line">  A = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>] å’Œ B = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">  æ­¤æ—¶å®ƒä»¬éƒ½æ˜¯ä¸¥æ ¼é€’å¢çš„ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>æ ·ä¾‹ 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šA = [<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">10</span>], B = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ç›´æ¥æŠ„ç­”æ¡ˆï¼Œå¾ˆå·§å¦™çš„åŒåºåˆ—å‹ dpï¼Œä¸çœ‹ç­”æ¡ˆçœŸæƒ³ä¸å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minSwap</span><span class="params">(<span class="type">int</span>[] A, <span class="type">int</span>[] B)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (A == <span class="literal">null</span> || B == <span class="literal">null</span> || A.length &lt;=<span class="number">0</span> || B.length &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Write your code here</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> A.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="comment">//dp[i][0]: A å’Œ B å‰ i ä¸ªå­—ç¬¦éƒ½ä¿æŒæœ‰åºï¼Œå¹¶ä¸”ä¸äº¤æ¢ç¬¬ i ä¸ªå…ƒç´ çš„æœ€å°äº¤æ¢æ¬¡æ•°</span></span><br><span class="line">    <span class="comment">//dp[i][1]: A å’Œ B å‰ i ä¸ªå­—ç¬¦éƒ½ä¿æŒæœ‰åºï¼Œå¹¶ä¸”äº¤æ¢ç¬¬ i ä¸ªå…ƒç´ çš„æœ€å°äº¤æ¢æ¬¡æ•°</span></span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        Arrays.fill(dp[i], INF);</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>; dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="comment">//å¾ˆå·§å¦™çš„åˆ†ç±»è®¨è®º</span></span><br><span class="line">        <span class="keyword">if</span>(A[i] &gt; A[i-<span class="number">1</span>] &amp;&amp; B[i] &gt; B[i-<span class="number">1</span>])&#123;</span><br><span class="line">            <span class="comment">//å‰åéƒ½ä¸äº¤æ¢</span></span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            <span class="comment">//å‰åéƒ½äº¤æ¢</span></span><br><span class="line">            dp[i][<span class="number">1</span>] = dp[i-<span class="number">1</span>][<span class="number">1</span>]+<span class="number">1</span>; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(A[i] &gt; B[i-<span class="number">1</span>] &amp;&amp; B[i] &gt; A[i-<span class="number">1</span>])&#123;</span><br><span class="line">            <span class="comment">//å½“å‰ä¸äº¤æ¢ï¼Œäº¤æ¢å‰é¢çš„</span></span><br><span class="line">            dp[i][<span class="number">0</span>] = Math.min(dp[i][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">//å½“å‰äº¤æ¢ï¼Œå‰é¢ä¸äº¤æ¢</span></span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.min(dp[i][<span class="number">1</span>], dp[i-<span class="number">1</span>][<span class="number">0</span>]+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Math.min(dp[n-<span class="number">1</span>][<span class="number">0</span>],dp[n-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span>  res == INF ? <span class="number">0</span> : res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="354-ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜"><a href="#354-ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜" class="headerlink" title="354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/russian-doll-envelopes/">354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜</a></h2><p>ç»™å®šä¸€äº›æ ‡è®°äº†å®½åº¦å’Œé«˜åº¦çš„ä¿¡å°ï¼Œå®½åº¦å’Œé«˜åº¦ä»¥æ•´æ•°å¯¹å½¢å¼ <code>(w, h)</code> å‡ºç°ã€‚å½“å¦ä¸€ä¸ªä¿¡å°çš„å®½åº¦å’Œé«˜åº¦éƒ½æ¯”è¿™ä¸ªä¿¡å°å¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªä¿¡å°å°±å¯ä»¥æ”¾è¿›å¦ä¸€ä¸ªä¿¡å°é‡Œï¼Œå¦‚åŒä¿„ç½—æ–¯å¥—å¨ƒä¸€æ ·ã€‚</p>
<p>è¯·è®¡ç®—æœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ªä¿¡å°èƒ½ç»„æˆä¸€ç»„â€œä¿„ç½—æ–¯å¥—å¨ƒâ€ä¿¡å°ï¼ˆå³å¯ä»¥æŠŠä¸€ä¸ªä¿¡å°æ”¾åˆ°å¦ä¸€ä¸ªä¿¡å°é‡Œé¢ï¼‰ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong><br>ä¸å…è®¸æ—‹è½¬ä¿¡å°ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šenvelopes = [[<span class="number">5</span>,<span class="number">4</span>],[<span class="number">6</span>,<span class="number">4</span>],[<span class="number">6</span>,<span class="number">7</span>],[<span class="number">2</span>,<span class="number">3</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span> </span><br><span class="line">è§£é‡Šï¼šæœ€å¤šä¿¡å°çš„ä¸ªæ•°ä¸º <span class="number">3</span>, ç»„åˆä¸ºï¼š[<span class="number">2</span>,<span class="number">3</span>] =&gt; [<span class="number">5</span>,<span class="number">4</span>] =&gt; [<span class="number">6</span>,<span class="number">7</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxEnvelopes</span><span class="params">(<span class="type">int</span>[][] envelopes)</span> &#123;</span><br><span class="line">    <span class="type">int</span> [] dp=<span class="keyword">new</span> <span class="title class_">int</span>[envelopes.length];</span><br><span class="line">    <span class="comment">//lamdba ä¼šæ¯”è¾ƒæ…¢</span></span><br><span class="line">    Arrays.sort(envelopes,(a,b)-&gt;(a[<span class="number">0</span>]-b[<span class="number">0</span>])); <span class="comment">//ä¿è¯åé¢çš„ä¸ä¼šè¢«å‰é¢çš„è£…è¿›å»å°±è¡Œäº†</span></span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;envelopes.length;i++) &#123;</span><br><span class="line">        dp[i]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (envelopes[i][<span class="number">0</span>]&gt;envelopes[j][<span class="number">0</span>] &amp;&amp; envelopes[i][<span class="number">1</span>]&gt;envelopes[j][<span class="number">1</span>])&#123;</span><br><span class="line">                dp[i]=Math.max(dp[j]+<span class="number">1</span>,dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(res,dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å’Œä¸Šé¢çš„ LIS æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘æ”¾åœ¨äº†ä¸€èµ·ï¼Œå·®ç‚¹ bugfreeï¼Œè¢«ç©ºè¾“å…¥å‘äº†ä¸€å‘ï¼Œå¯æƒœè¿™ä¸ªè§£æ³•å¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œè€Œä¸”ä¹Ÿä¸ç¬¦åˆè¿™é¢˜çš„å›°éš¾ tagï¼Œè¿™é¢˜çš„æœ€ä¼˜è§£åº”è¯¥æ˜¯åˆ©ç”¨ä¸Šé¢çš„è´ªå¿ƒ+äºŒåˆ†çš„åšæ³•ï¼Œè¿™é‡Œå®åœ¨æ˜¯èƒ½åŠ›æ—¶é—´éƒ½æœ‰é™ï¼Œæ²¡æ³•å»ç ”ç©¶é‚£ç§è§£æ³•ï¼Œæš‚ä¸”å…ˆç”¨è¿™ä¸ªè§£æ³•å§</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>2020.3.20 é˜¿é‡Œç¬”è¯•è€ƒäº†è¿™ä¸€é¢˜ï¼Œdp è¶…æ—¶äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxEnvelopes</span><span class="params">(<span class="type">int</span>[][] envelopes)</span> &#123;</span><br><span class="line">    Arrays.sort(envelopes,(a,b)-&gt;a[<span class="number">0</span>]!=b[<span class="number">0</span>]?a[<span class="number">0</span>]-b[<span class="number">0</span>]:b[<span class="number">1</span>]-a[<span class="number">1</span>]); <span class="comment">//è¿™ä¸ªæ’åºå¾ˆå…³é”®</span></span><br><span class="line">    <span class="type">int</span> N=envelopes.length;</span><br><span class="line">    <span class="type">int</span>[] top=<span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">    <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="type">int</span> cur=envelopes[i][<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//äºŒåˆ†æœç´¢å †é¡¶ï¼Œæ‰¾ç¬¬ä¸€ä¸ªå°äºå½“å‰ç‰Œçš„</span></span><br><span class="line">        <span class="type">int</span> index=binarySearch(top,cur,len);</span><br><span class="line">        <span class="keyword">if</span>(index==len)&#123; <span class="comment">//æ²¡æ‰¾åˆ°åˆé€‚çš„ä½ç½®</span></span><br><span class="line">            len++; <span class="comment">//æ–°å»ºç‰Œå †ï¼Œç‰Œå †++</span></span><br><span class="line">        &#125;</span><br><span class="line">        top[index]=cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] top,<span class="type">int</span> target,<span class="type">int</span> len)</span>&#123;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>,right=len;</span><br><span class="line">    <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">        <span class="type">int</span> mid=left+(right-left)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(top[mid]&lt;target)&#123;</span><br><span class="line">            left=mid+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            right=mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ­¥çš„æ’åºå¾ˆå…³é”®ï¼Œå¦‚æœåªæŒ‰ç…§å®½åº¦æ’å¥½åºä¹‹åï¼Œå¯¹é«˜åº¦æ±‚ä¸€æ¬¡æœ€é•¿é€’å¢å­åºåˆ—å°±æ˜¯æˆ‘ä»¬çš„ç­”æ¡ˆï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯é¢˜ç›®è¯´äº†ï¼šå®½åº¦å’Œé«˜åº¦éƒ½æ¯”å½“å‰ä¿¡å°å¤§çš„æ—¶å€™æ‰èƒ½è£…è¿›å»ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªä¿¡å°æ˜¯<code>(1,3) (1,5)</code>é‚£ä¹ˆå‰è€…æ˜¯ä¸èƒ½è¢«åè€…è£…è¿›å»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œåšä¸€ä¸‹å¤„ç†ï¼Œåœ¨å®½åº¦ç›¸åŒçš„æ—¶å€™ï¼Œè®©é«˜åº¦é™åºæ’åˆ—ï¼Œè¿™æ ·åœ¨å¯¹é«˜åº¦æ±‚æœ€é€’å¢å­åºåˆ—çš„æ—¶å€™å°±ä¸ä¼šå‡ºç°é”™è¯¯äº†</p>
<p><strong>UPDATE: 2020.7.13</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxEnvelopes</span><span class="params">(env [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    sort.Slice(env, <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>, j <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> env[i][<span class="number">0</span>] == env[j][<span class="number">0</span>]&#123;</span><br><span class="line">            <span class="keyword">return</span> env[i][<span class="number">1</span>] &gt; env[j][<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> env[i][<span class="number">0</span>] &lt; env[j][<span class="number">0</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> tail = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(env))</span><br><span class="line">    <span class="keyword">var</span> tlen = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(env); i++&#123;</span><br><span class="line">        idx := search(tail, env[i][<span class="number">1</span>], tlen)</span><br><span class="line">        <span class="keyword">if</span> idx == tlen&#123;</span><br><span class="line">            tlen++</span><br><span class="line">        &#125;</span><br><span class="line">        tail[idx] = env[i][<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tlen</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">search</span><span class="params">(nums []<span class="type">int</span>, target <span class="type">int</span>, tlen <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> right = tlen<span class="number">-1</span></span><br><span class="line">    <span class="keyword">var</span> res = tlen</span><br><span class="line">    <span class="keyword">for</span> left &lt;= right&#123;</span><br><span class="line">        mid := left+(right-left)/<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid] &gt;= target&#123;</span><br><span class="line">            res = mid</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="53-æœ€å¤§å­åºå’Œ"><a href="#53-æœ€å¤§å­åºå’Œ" class="headerlink" title="53. æœ€å¤§å­åºå’Œ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-subarray/">53. æœ€å¤§å­åºå’Œ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[-<span class="number">2</span>,<span class="number">1</span>,-<span class="number">3</span>,<span class="number">4</span>,-<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,-<span class="number">5</span>,<span class="number">4</span>],</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [<span class="number">4</span>,-<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>] çš„å’Œæœ€å¤§ï¼Œä¸º <span class="number">6</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¿›é˜¶ï¼š</strong></p>
<p>å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„åˆ†æ²»æ³•æ±‚è§£ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’é€’æ¨çš„è§£æ³•ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼Œè¿™é¢˜å…¶å®è¿˜æœ‰ä¸€é“å§Šå¦¹é¢˜ï¼Œè¦æ±‚å‡ºæœ€å¤§å­åºåˆ—ï¼Œä¸ä»…ä»…æ˜¯æœ€å¤§å€¼ï¼Œ<a href="(http://imlgw.top/2019/07/20/leetcode-hua-dong-chuang-kou-tag/#239-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC)">æˆ‘æ”¾åˆ°äº†æ»‘åŠ¨çª—å£ä¸“é¢˜ä¸­</a> </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿™æ¬¡æ˜¯ç›´æ¥åœ¨ Web ä¸Šå†™çš„</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums==<span class="literal">null</span> || nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="comment">//ä¸€å¼€å§‹æ²¡å¤„ç†å¥½ Wa äº†ä¸€å‘</span></span><br><span class="line">    <span class="type">int</span> max=dp[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i-<span class="number">1</span>]&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            dp[i]=nums[i];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>]+nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        max=Math.max(max,dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ ¹æ®äºŒç»´æ”¹ä¸€ç»´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(nums==<span class="literal">null</span> || nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> dp1=nums[<span class="number">0</span>],dp2=<span class="number">0</span>,max=nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp1&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">            dp2=nums[i];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp2=dp1+nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        dp1=dp2;</span><br><span class="line">        max=Math.max(max,dp2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ„Ÿè§‰ä¸€ç»´çš„ä¸ç”¨å»ç†è§£å«ä¹‰ï¼Œèƒ½æ ¹æ®äºŒç»´æ”¹å‡ºæ¥å°± ok äº†ï¼Œé‡ç‚¹æ˜¯ç†è§£å¤šç»´çš„</p>
<h2 id="646-æœ€é•¿æ•°å¯¹é“¾"><a href="#646-æœ€é•¿æ•°å¯¹é“¾" class="headerlink" title="646. æœ€é•¿æ•°å¯¹é“¾"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-length-of-pair-chain/">646. æœ€é•¿æ•°å¯¹é“¾</a></h2><p>ç»™å‡º <code>n</code> ä¸ªæ•°å¯¹ã€‚ åœ¨æ¯ä¸€ä¸ªæ•°å¯¹ä¸­ï¼Œç¬¬ä¸€ä¸ªæ•°å­—æ€»æ˜¯æ¯”ç¬¬äºŒä¸ªæ•°å­—å°ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ç§è·Ÿéšå…³ç³»ï¼Œå½“ä¸”ä»…å½“ <code>b &lt; c</code> æ—¶ï¼Œæ•°å¯¹<code>(c, d)</code> æ‰å¯ä»¥è·Ÿåœ¨ <code>(a, b)</code> åé¢ã€‚æˆ‘ä»¬ç”¨è¿™ç§å½¢å¼æ¥æ„é€ ä¸€ä¸ªæ•°å¯¹é“¾ã€‚</p>
<p>ç»™å®šä¸€ä¸ªå¯¹æ•°é›†åˆï¼Œæ‰¾å‡ºèƒ½å¤Ÿå½¢æˆçš„æœ€é•¿æ•°å¯¹é“¾çš„é•¿åº¦ã€‚ä½ ä¸éœ€è¦ç”¨åˆ°æ‰€æœ‰çš„æ•°å¯¹ï¼Œä½ å¯ä»¥ä»¥ä»»ä½•é¡ºåºé€‰æ‹©å…¶ä¸­çš„ä¸€äº›æ•°å¯¹æ¥æ„é€ ã€‚</p>
<p><strong>ç¤ºä¾‹ :</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">2</span>,<span class="number">3</span>], [<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿çš„æ•°å¯¹é“¾æ˜¯ [<span class="number">1</span>,<span class="number">2</span>] -&gt; [<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>ç»™å‡ºæ•°å¯¹çš„ä¸ªæ•°åœ¨ [1, 1000] èŒƒå›´å†…ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findLongestChain</span><span class="params">(<span class="type">int</span>[][] pairs)</span> &#123;</span><br><span class="line">    Arrays.sort(pairs,(a,b)-&gt;a[<span class="number">0</span>]-b[<span class="number">0</span>]);</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[pairs.length];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;pairs.length;i++) &#123;</span><br><span class="line">        dp[i]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pairs[i][<span class="number">0</span>]&gt;pairs[j][<span class="number">1</span>]) &#123;</span><br><span class="line">                dp[i]=Math.max(dp[i],dp[j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res=res&gt;dp[i]?res:dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™é‡Œæ²¡æœ‰è¦æ±‚é¡ºåºï¼Œæ‰€ä»¥å…ˆç»™ä»–æ’ä¸ªåºï¼Œç„¶åå†è¿›è¡Œ DPï¼Œå¦‚æœä¸æ’åºå¾ˆéš¾ dpï¼Œdp[i] è¡¨ç¤ºå½“å‰æ•°å¯¹èƒ½æ„æˆçš„æœ€é•¿é“¾ï¼Œdp è¿‡ç¨‹å’Œä¸Šé¢çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ç›¸åŒ</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è´ªå¿ƒï¼Œä¹Ÿæ˜¯æœ€ä¼˜è§£ï¼ŒåŒæ ·å…ˆæ’åºï¼Œä¸è¿‡æ˜¯æŒ‰ç…§ç¬¬äºŒä¸ªå…ƒç´ æ¥æ’åºï¼Œæ ¸å¿ƒæ€æƒ³</p>
<p><code>æ¯æ¬¡éƒ½åœ¨åˆ—è¡¨ä¸­æ‰¾ç¬¬äºŒä¸ªå…ƒç´ æœ€å°çš„æ•°å¯¹ä¾æ¬¡ç»„æˆé“¾ï¼Œæœ€åå¾—åˆ°çš„ä¸€å®šæ˜¯æœ€é•¿çš„é“¾</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findLongestChain</span><span class="params">(<span class="type">int</span>[][] pairs)</span> &#123;</span><br><span class="line">    Arrays.sort(pairs,(a,b)-&gt;a[<span class="number">1</span>]-b[<span class="number">1</span>]);</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> tail=pairs[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;pairs.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pairs[i][<span class="number">0</span>]&gt;tail) &#123;</span><br><span class="line">            res++;</span><br><span class="line">            tail=pairs[i][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>ä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„åˆ†æ²»æ³•ï¼Œåˆ†æ²»æ³•åœ¨è¿™é‡Œå¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œæ—¶é—´å¤æ‚åº¦<code>O(NlogN)</code>ï¼Œä½†æ˜¯æ€è·¯è¿˜æ˜¯å¾ˆå·§å¦™ï¼Œé¦–å…ˆä¹Ÿæ˜¯è®²æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œç„¶åæœ€å¤§åºåˆ—å’Œå°±æœ‰ä¸‰ç§æƒ…å†µ    </p>
<ol>
<li>å…¨åœ¨å·¦è¾¹</li>
<li>å…¨åœ¨å³è¾¹</li>
<li>è·¨ä¸­ç‚¹ï¼Œä¸¤è¾¹éƒ½æœ‰</li>
</ol>
<p>ç„¶åç»Ÿè®¡ä¸‰ä¸ªå€¼å¾—æœ€å¤§å€¼ï¼Œé€’å½’å­è¿‡ç¨‹æ±‚è§£ï¼Œä»£ç å°±ä¸å†™äº†ï¼Œåé¢æƒ³èµ·æ¥æœ‰æ—¶é—´å†è¡¥</p>
<h2 id="376-æ‘†åŠ¨åºåˆ—"><a href="#376-æ‘†åŠ¨åºåˆ—" class="headerlink" title="376. æ‘†åŠ¨åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/wiggle-subsequence/">376. æ‘†åŠ¨åºåˆ—</a></h2><p>å¦‚æœè¿ç»­æ•°å­—ä¹‹é—´çš„å·®ä¸¥æ ¼åœ°åœ¨æ­£æ•°å’Œè´Ÿæ•°ä¹‹é—´äº¤æ›¿ï¼Œåˆ™æ•°å­—åºåˆ—ç§°ä¸ºæ‘†åŠ¨åºåˆ—ã€‚ç¬¬ä¸€ä¸ªå·®ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰å¯èƒ½æ˜¯æ­£æ•°æˆ–è´Ÿæ•°ã€‚å°‘äºä¸¤ä¸ªå…ƒç´ çš„åºåˆ—ä¹Ÿæ˜¯æ‘†åŠ¨åºåˆ—ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ <code>[1,7,4,9,2,5]</code> æ˜¯ä¸€ä¸ªæ‘†åŠ¨åºåˆ—ï¼Œå› ä¸ºå·®å€¼ <code>(6,-3,5,-7,3)</code> æ˜¯æ­£è´Ÿäº¤æ›¿å‡ºç°çš„ã€‚ç›¸åï¼Œ<code>[1,4,7,2,5]</code> å’Œ <code>[1,7,4,5,5]</code> ä¸æ˜¯æ‘†åŠ¨åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„å‰ä¸¤ä¸ªå·®å€¼éƒ½æ˜¯æ­£æ•°ï¼Œç¬¬äºŒä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„æœ€åä¸€ä¸ªå·®å€¼ä¸ºé›¶ã€‚</p>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œè¿”å›ä½œä¸ºæ‘†åŠ¨åºåˆ—çš„æœ€é•¿å­åºåˆ—çš„é•¿åº¦ã€‚ é€šè¿‡ä»åŸå§‹åºåˆ—ä¸­åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å…ƒç´ æ¥è·å¾—å­åºåˆ—ï¼Œå‰©ä¸‹çš„å…ƒç´ ä¿æŒå…¶åŸå§‹é¡ºåºã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span> </span><br><span class="line">è§£é‡Šï¼šæ•´ä¸ªåºåˆ—å‡ä¸ºæ‘†åŠ¨åºåˆ—ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">17</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">16</span>,<span class="number">8</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šè¿™ä¸ªåºåˆ—åŒ…å«å‡ ä¸ªé•¿åº¦ä¸º <span class="number">7</span> æ‘†åŠ¨åºåˆ—ï¼Œå…¶ä¸­ä¸€ä¸ªå¯ä¸º [<span class="number">1</span>,<span class="number">17</span>,<span class="number">10</span>,<span class="number">13</span>,<span class="number">10</span>,<span class="number">16</span>,<span class="number">8</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿›é˜¶ï¼š</strong></p>
<ul>
<li>ä½ èƒ½å¦ç”¨ O(n) æ—¶é—´å¤æ‚åº¦å®Œæˆæ­¤é¢˜ï¼Ÿ</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>O(N^2 ) åŠ¨æ€è§„åˆ’ï¼Œdp[i] ä»£è¡¨ç›®å‰ä¸ºæ­¢ä»¥ nums[i] ç»“å°¾çš„æœ€é•¿çš„<code>ä¸Šå‡æ‘‡æ‘†åºåˆ—</code>ï¼Œdown[i] ä»£è¡¨ç›®å‰ä¸ºæ­¢ä»¥ nums[i] ç»“å°¾çš„æœ€é•¿çš„<code>ä¸‹é™æ‘‡æ‘†åºåˆ—</code>ï¼Œåé¢è¿‡ç¨‹å°±å’Œä¸Šé¢çš„<code>LIS</code>çš„è§£æ³•ç±»ä¼¼äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">wiggleMaxLength</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> []up=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length]; </span><br><span class="line">    <span class="type">int</span> []down=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length]; </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        up[i]=<span class="number">1</span>; down[i]=<span class="number">1</span>; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]&gt;nums[j])&#123;</span><br><span class="line">                <span class="comment">//æ‰¾ä¸€ä¸ªæœ€å¤§çš„ä¸‹é™æ²¿</span></span><br><span class="line">                up[i]=Math.max(up[i],down[j]+<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i]&lt;nums[j])&#123;</span><br><span class="line">                <span class="comment">//æ‰¾ä¸€ä¸ªæœ€å¤§çš„ä¸Šå‡æ²¿</span></span><br><span class="line">                down[i]=Math.max(down[i],up[j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(up[nums.length-<span class="number">1</span>],down[nums.length-<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>çº¿æ€§åŠ¨æ€è§„åˆ’ï¼Œå…¶å®ä¸Šé¢çš„å¾ªç¯æ‰¾æœ€å¤§æ“ä½œæœ‰ç‚¹å¤šä½™ï¼Œå¦‚æœ<code>nums[i]&gt;nums[i-1]</code> é‚£ä¹ˆä»¥ nums[i] ä¸ºä¸Šå‡æ²¿ç»“å°¾ï¼ˆæ‘†åŠ¨ä¸Šå‡ï¼‰çš„æœ€é•¿æ‘‡æ‘†åºåˆ— <code>up[i]=down[i-1]+1</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">wiggleMaxLength2</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> []up=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span> []down=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    up[<span class="number">0</span>]=down[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i]&gt;nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">            up[i]=down[i-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">            down[i]=down[i-<span class="number">1</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i]&lt;nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">            down[i]=up[i-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">            up[i]=up[i-<span class="number">1</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//ç›¸ç­‰çš„æ—¶å€™åˆ«å¿˜äº†ç»§æ‰¿å‰é¢çš„çŠ¶æ€</span></span><br><span class="line">            down[i]=down[i-<span class="number">1</span>];</span><br><span class="line">            up[i]=up[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(up[nums.length-<span class="number">1</span>],down[nums.length-<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘æ„Ÿè§‰èƒ½å†™å‡º O(1) çš„å‰ææ˜¯å…ˆå†™å‡º O(N) çš„ï¼Œå†™å‡º O(N) çš„ä¹‹åå†æ”¹æˆ O(1) ä¼šæ¯”è¾ƒç®€å•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">wiggleMaxLength</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> up=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> down=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i]&gt;nums[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            up=down+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (nums[i]&gt;nums[i-<span class="number">1</span>])&#123;</span><br><span class="line">            down=up+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="comment">//else å°±æ˜¯ä¸å˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(up,down);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="978-æœ€é•¿æ¹æµå­æ•°ç»„"><a href="#978-æœ€é•¿æ¹æµå­æ•°ç»„" class="headerlink" title="978. æœ€é•¿æ¹æµå­æ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-turbulent-subarray/">978. æœ€é•¿æ¹æµå­æ•°ç»„</a></h2><p>å½“ <code>A</code> çš„å­æ•°ç»„ <code>A[i], A[i+1], ..., A[j]</code> æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º<em>æ¹æµå­æ•°ç»„</em>ï¼š</p>
<ul>
<li>è‹¥ <code>i &lt;= k &lt; j</code>ï¼Œå½“ <code>k</code> ä¸ºå¥‡æ•°æ—¶ï¼Œ <code>A[k] &gt; A[k+1]</code>ï¼Œä¸”å½“ <code>k</code> ä¸ºå¶æ•°æ—¶ï¼Œ<code>A[k] &lt; A[k+1]</code>ï¼›</li>
<li><strong>æˆ–</strong> è‹¥ <code>i &lt;= k &lt; j</code>ï¼Œå½“ <code>k</code> ä¸ºå¶æ•°æ—¶ï¼Œ<code>A[k] &gt; A[k+1]</code> ï¼Œä¸”å½“ <code>k</code> ä¸ºå¥‡æ•°æ—¶ï¼Œ <code>A[k] &lt; A[k+1]</code>ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ¯”è¾ƒç¬¦å·åœ¨å­æ•°ç»„ä¸­çš„æ¯ä¸ªç›¸é‚»å…ƒç´ å¯¹ä¹‹é—´ç¿»è½¬ï¼Œåˆ™è¯¥å­æ•°ç»„æ˜¯æ¹æµå­æ•°ç»„ã€‚ï¼ˆä¸Šé¢çš„æ˜¯åºŸè¯ï¼‰</p>
<p>è¿”å› <code>A</code> çš„æœ€å¤§æ¹æµå­æ•°ç»„çš„<strong>é•¿åº¦</strong>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">9</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼š(A[<span class="number">1</span>] &gt; A[<span class="number">2</span>] &lt; A[<span class="number">3</span>] &gt; A[<span class="number">4</span>] &lt; A[<span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">4</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">16</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">100</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>1 &lt;= A.length &lt;= 40000</code></li>
<li><code>0 &lt;= A[i] &lt;= 10^9</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åœ¨æ»‘çª— tag é‡Œå‘ç°çš„ï¼Œä¸€ç›´æ²¡å¾€ dp ä¸Šæƒ³ï¼Œçœ‹äº†è¯„è®ºåŒºæ‰å‘ç°ğŸ˜‚ï¼Œè¿™é¢˜å…¶å®æ˜¯ä¸Šé¢ <a href="#376-%E6%91%86%E5%8A%A8%E5%BA%8F%E5%88%97">376. æ‘†åŠ¨åºåˆ—</a>çš„å¼±åŒ–ï¼Œè¿™é‡Œæ˜¯è¦æ±‚è¿ç»­çš„ï¼Œä½†æ˜¯åšæ³•è¿˜æ˜¯ä¸€æ ·çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’ï¼Œä»æ»‘çª— tag è¿‡æ¥çš„ã€‚.. æ²¡å¾€ dp ä¸Šæƒ³ï¼Œçœ‹äº†è¯„è®ºåŒºæ‰æƒ³èµ·æ¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxTurbulenceSize</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A==<span class="literal">null</span> || A.length&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> up=<span class="number">1</span>,down=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;A.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A[i]&gt;A[i-<span class="number">1</span>])&#123;</span><br><span class="line">            up=down+<span class="number">1</span>;</span><br><span class="line">            down=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (A[i]&lt;A[i-<span class="number">1</span>])&#123;</span><br><span class="line">            down=up+<span class="number">1</span>;</span><br><span class="line">            up=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            up=<span class="number">1</span>;down=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(res,Math.max(up,down));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ»‘çª—ï¼Œä¹Ÿæ˜¯ä¸€å¼€å§‹çš„åšæ³•ï¼Œæ¯”è¾ƒç®€å•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¼˜åŒ– if æ¡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxTurbulenceSize</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A==<span class="literal">null</span> || A.length&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> right=left+<span class="number">1</span>;right&lt;A.length;right++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(A[right]==A[right-<span class="number">1</span>])&#123; <span class="comment">//è·³è¿‡ç›¸ç­‰çš„</span></span><br><span class="line">            left=right;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¼˜åŒ–äº† if æ¡ä»¶ï¼Œä¹‹å‰çœ‹åˆ«äººé¢˜è§£å­¦åˆ°çš„</span></span><br><span class="line">        <span class="keyword">if</span>(right&gt;=<span class="number">2</span> &amp;&amp; (A[right]&gt;A[right-<span class="number">1</span>])==(A[right-<span class="number">1</span>]&gt;A[right-<span class="number">2</span>]))&#123;</span><br><span class="line">            left=right-<span class="number">1</span>; <span class="comment">//left è·³åˆ°ä¸­é—´å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(res,right-left+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="96-ä¸åŒçš„äºŒå‰æœç´¢æ ‘"><a href="#96-ä¸åŒçš„äºŒå‰æœç´¢æ ‘" class="headerlink" title="96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-binary-search-trees/">96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘</a></h2><p>Given <em>n</em>, how many structurally unique <strong>BSTâ€™s</strong> (binary search trees) that store values 1 â€¦ <em>n</em>?</p>
<p><strong>Example:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Input: <span class="number">3</span></span><br><span class="line">Output: <span class="number">5</span></span><br><span class="line">Explanation:</span><br><span class="line"><span class="type">Given</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">3</span>, there are a total of <span class="number">5</span> unique BST<span class="string">&#x27;s:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   1         3     3      2      1</span></span><br><span class="line"><span class="string">    \       /     /      / \      \</span></span><br><span class="line"><span class="string">     3     2     1      1   3      2</span></span><br><span class="line"><span class="string">    /     /       \                 \</span></span><br><span class="line"><span class="string">   2     1         2                 3</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™ä¸ªè§£æ³•å®é™…ä¸Šæ¥è‡ª <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-binary-search-trees-ii/">95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">numTrees</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> generateTree(<span class="number">1</span>,n).size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;TreeNode&gt; <span class="title function_">generateTree</span><span class="params">(<span class="type">int</span> start,<span class="type">int</span> end)</span>&#123;</span><br><span class="line">    List&lt;TreeNode&gt; res=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (start&gt;end) &#123;</span><br><span class="line">        res.add(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=start;i&lt;=end;i++) &#123;</span><br><span class="line">        List&lt;TreeNode&gt; left=generateTree(start,i-<span class="number">1</span>);</span><br><span class="line">        List&lt;TreeNode&gt; right=generateTree(i+<span class="number">1</span>,end);</span><br><span class="line">        <span class="keyword">for</span> (TreeNode l:left) &#123;</span><br><span class="line">            <span class="keyword">for</span> (TreeNode r:right) &#123;</span><br><span class="line">                TreeNode currentNode=<span class="keyword">new</span> <span class="title class_">TreeNode</span>(i);</span><br><span class="line">                currentNode.left=l;</span><br><span class="line">                currentNode.right=r;</span><br><span class="line">                res.add(currentNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•å¾ˆæ˜æ˜¾è¿‡ä¸äº†è¿™é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¯ä»¥æ±‚å‡ºæ‰€æœ‰çš„ BST é›†åˆã€‚</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>åŠ¨æ€è§„åˆ’ï¼Œ<code>dp[i]</code>ä»£è¡¨é•¿åº¦ä¸º <code>i</code> çš„é€’å¢åºåˆ—æ„æˆçš„ä¸åŒçš„ BST çš„æ•°é‡ï¼ˆåºåˆ—ä»<code>1 åˆ° i</code> é€’å¢ï¼‰</p>
<p>é€’æ¨å…¬å¼ï¼š<code>dp[i]=dp[i-1]* dp[n-i]</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numTrees</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n&lt;=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> []dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) &#123; <span class="comment">//æ§åˆ¶åºåˆ—é•¿åº¦ ç›´åˆ°æˆ‘ä»¬æ±‚å¾— n</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=i;j++) &#123; <span class="comment">//æ§åˆ¶æ ¹çš„é€‰æ‹©</span></span><br><span class="line">            <span class="comment">//ç´¯åŠ å’Œï¼Œj ä¸ºæ ¹èŠ‚ç‚¹ dp[j-1] ä»£è¡¨å·¦å­æ ‘æ•°é‡ï¼Œdp[i-j] ä»£è¡¨å³å­æ ‘æ•°é‡</span></span><br><span class="line">            dp[i]+=dp[j-<span class="number">1</span>]*dp[i-j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ <code>i</code> ä½ç½®å…ƒç´ ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå¯ä»¥å¾—å‡ºå¯èƒ½çš„ BST æ•°é‡ä¸ºï¼Œ<code>[1 ~ i-1]</code> å¯ä»¥æ„æˆçš„ BST æ•°é‡ ä¹˜ä»¥  <code>[i+1ï¼Œn]</code>å¯ä»¥æ„æˆçš„ BST æ•°é‡ï¼Œä¹Ÿå°±æ˜¯<em>å·¦å­æ ‘  *  å³å­æ ‘</em>  ï¼Œå†æ¨å¹¿åˆ°æ•´ä¸ªåºåˆ—çš„ BST æ€»æ•°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ <strong>ä»¥æ¯ä¸ªå…ƒç´ ä¸ºæ ¹èŠ‚ç‚¹æ„æˆçš„ BST çš„æ•°é‡ä¹‹å’Œ</strong> ï¼Œéœ€è¦ç†è§£çš„åœ°æ–¹å°±æ˜¯<code>dp[i]</code> çš„å«ä¹‰ï¼Œæ˜ç¡®æœ¬é¢˜ä¸­<code>dp[i]</code> å…¶å®<strong>åªå’Œé•¿åº¦ <code>i</code>æœ‰å…³</strong>è€Œå’Œå†…å®¹æ— å…³ï¼Œæ¯”å¦‚ 1ï¼Œ2ï¼Œ3 å’Œ 4ï¼Œ5ï¼Œ6 æ‰€èƒ½æ„æˆçš„ BST æ•°é‡å…¶å®æ˜¯ç›¸åŒçš„</p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>å¡å¡”å…°æ•°ï¼Œé€’æ¨å¼ <code>Gn+1 =2(2n+1)/ n+2  *  Gn</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numTrees3</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">C</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">        C = C * <span class="number">2</span> * (<span class="number">2</span> * i + <span class="number">1</span>) /(i + <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>) C;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"><a href="#120-ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ" class="headerlink" title="120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/triangle/">120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</a></h2><p>ç»™å®šä¸€ä¸ªä¸‰è§’å½¢ï¼Œæ‰¾å‡ºè‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œã€‚æ¯ä¸€æ­¥åªèƒ½ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œä¸­ç›¸é‚»çš„ç»“ç‚¹ä¸Šã€‚</p>
<p>ä¾‹å¦‚ï¼Œç»™å®šä¸‰è§’å½¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">     [<span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">   [<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>],</span><br><span class="line">  [<span class="number">4</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">3</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œä¸º <code>11</code>ï¼ˆå³ï¼Œ2 + 3 + 5 + 1 = 11ï¼‰ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<p>å¦‚æœä½ å¯ä»¥åªä½¿ç”¨ O(n) çš„é¢å¤–ç©ºé—´ï¼ˆn ä¸ºä¸‰è§’å½¢çš„æ€»è¡Œæ•°ï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ çš„ç®—æ³•ä¼šå¾ˆåŠ åˆ†</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>äºŒç»´ dpï¼Œemmmï¼Œä¸€å¼€å§‹å†™æˆè´ªå¿ƒäº†ã€‚è´ªå¿ƒæ˜æ˜¾æ˜¯é”™çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//dp åšæ³• O(N^2) ç©ºé—´</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle)</span> &#123;</span><br><span class="line">    <span class="type">int</span> rows=triangle.size();</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨çš„æ˜¯æ¯ i å±‚ç¬¬ j ä¸ªå…ƒç´ åˆ°æœ€åº•å±‚çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[rows+<span class="number">1</span>][rows+<span class="number">1</span>]; <span class="comment">//row+1</span></span><br><span class="line">    <span class="comment">/*for (int i=0;i&lt;triangle.get(rows-1).size();i++) &#123;</span></span><br><span class="line"><span class="comment">        //ç»™æœ€åä¸€è¡Œèµ‹åˆå§‹å€¼</span></span><br><span class="line"><span class="comment">        dp[rows-1][i]=triangle.get(rows-1).get(i);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    for (int i=rows-2;i&gt;=0;i--) &#123;</span></span><br><span class="line"><span class="comment">        for (int j=0;j&lt;triangle.get(i).size();j++) &#123;</span></span><br><span class="line"><span class="comment">            //æ ¸å¿ƒé€’æ¨å¼ dp[i][j]=min(dp[i+1][j],dp[i+1][j+1])+triangle(i)(j)</span></span><br><span class="line"><span class="comment">            dp[i][j]=Math.min(dp[i+1][j],dp[i+1][j+1])+triangle.get(i).get(j);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="comment">//ç›´æ¥ä»æœ€åä¸€è¡Œå¼€å§‹ï¼Œè¿™æ ·å°±ä¸ç”¨æ‰‹åŠ¨ç»™æœ€åä¸€è¡Œèµ‹åˆå§‹å€¼äº†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=rows-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;triangle.get(i).size();j++) &#123;</span><br><span class="line">            <span class="comment">//æ ¸å¿ƒé€’æ¨å¼ dp[i][j]=min(dp[i+1][j],dp[i+1][j+1])+triangle(i)(j)</span></span><br><span class="line">            dp[i][j]=Math.min(dp[i+<span class="number">1</span>][j],dp[i+<span class="number">1</span>][j+<span class="number">1</span>])+triangle.get(i).get(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è®°å¿†åŒ–é€’å½’ï¼Œä¹Ÿå¾ˆå¿«</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®°å¿†åŒ–é€’å½’</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal2</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle)</span> &#123;</span><br><span class="line">    <span class="comment">//ç”¨ Integer æ¯”è¾ƒå¥½ï¼Œæ–¹ä¾¿åˆ¤ç©º</span></span><br><span class="line">    Integer [][] cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[triangle.size()][triangle.size()];</span><br><span class="line">    <span class="keyword">return</span> minimumTotal(triangle,<span class="number">0</span>,<span class="number">0</span>,cache);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle,<span class="type">int</span> cen,<span class="type">int</span> index,Integer[][]cache)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cache[cen][index]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[cen][index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cen==triangle.size()-<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> triangle.get(cen).get(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> left=minimumTotal(triangle,cen+<span class="number">1</span>,index,cache);</span><br><span class="line">    <span class="type">int</span> right=minimumTotal(triangle,cen+<span class="number">1</span>,index+<span class="number">1</span>,cache);</span><br><span class="line">    <span class="keyword">return</span> cache[cen][index]=triangle.get(cen).get(index)+(left&lt;right?left:right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸‰</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//dp O(N) ç©ºé—´</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumTotal</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; triangle)</span> &#123;</span><br><span class="line">    <span class="type">int</span> rows=triangle.size();</span><br><span class="line">    <span class="comment">//dp[i] ä»£è¡¨çš„æ˜¯æ¯ä¸€å±‚ç¬¬ i ä¸ªå…ƒç´ åˆ°æœ€åº•å±‚çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line">    <span class="comment">//ä¸Šé¢äºŒç»´ dp å®é™…ä¸Šä¹Ÿåªå’Œä¸‹ä¸€å±‚çš„çŠ¶æ€æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡å¤çš„ä½¿ç”¨è¿™ä¸ªæ•°ç»„ä¿å­˜æ¯ä¸€å±‚çš„çŠ¶æ€</span></span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[rows+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=rows-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;triangle.get(i).size();j++) &#123;</span><br><span class="line">            <span class="comment">//åˆ°è¿™é‡Œå…¶å® Math.min() é‡Œé¢çš„éƒ½æ˜¯ä¸Šä¸€æ¬¡å¾ªç¯çš„ç»“æœ</span></span><br><span class="line">            <span class="comment">//ä¹Ÿå°±æ˜¯ä¸‹ä¸€å±‚çš„ï¼Œå¯¹åº”å½“å‰ j ä½ç½®å·¦å³ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹çš„æœ€å°è·ç¦»</span></span><br><span class="line">            dp[j]=Math.min(dp[j+<span class="number">1</span>],dp[j])+triangle.get(i).get(j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>O(N) ç©ºé—´å¤æ‚åº¦ï¼Œåªå’Œä¸‹é¢é‚£ä¸€å±‚çš„æ¯ä¸€ä¸ªå…ƒç´ çš„ dp[i] æœ‰å…³ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ”¹æˆä¸€ç»´ dp</p>
<p><strong>UPDATE: 2020.7.14</strong></p>
<p>ä»Šå¤©çš„æ‰“å¡é¢˜ï¼Œå†™äº†ä¸€ä¸ªä»ä¸Šè€Œä¸‹çš„ dpï¼Œéœ€è¦å¤„ç†è¾¹ç•Œä¼šéº»çƒ¦ä¸€ç‚¹ï¼Œå’Œä¹‹å‰çš„åç€çš„ï¼Œæœç„¶åˆ·é¢˜ä¸»è¦è¿˜æ˜¯åˆ·ä¸€ä¸ªæ„Ÿè§‰ï¼Œæƒ³è®°ä½é¢˜ç›®è§£æ³•æ˜¯ä¸å¯èƒ½çš„ï¼Œèƒ½é”»ç‚¼ä¸€äº›æ€è€ƒçš„èƒ½åŠ›æ‰æ˜¯å…³é”®</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minimumTotal</span><span class="params">(triangle [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(triangle) &lt;= <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> INF = <span class="number">1</span>&lt;&lt;<span class="number">31</span></span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(triangle)</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++&#123;</span><br><span class="line">        dp[i] = INF</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>] = triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> res = INF</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++&#123;</span><br><span class="line">        <span class="keyword">for</span> j :=i; j &gt;=<span class="number">0</span>; j--&#123;</span><br><span class="line">            <span class="keyword">if</span> j == <span class="number">0</span>&#123;</span><br><span class="line">                dp[j] = dp[j] + triangle[i][j]</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> j == i&#123;</span><br><span class="line">                dp[j] = dp[j<span class="number">-1</span>] + triangle[i][j]</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[j] = Min(dp[j], dp[j<span class="number">-1</span>]) + triangle[i][j]</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> i == n<span class="number">-1</span>&#123;</span><br><span class="line">                res = Min(res, dp[j])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> res == INF&#123;</span><br><span class="line">        <span class="keyword">return</span> triangle[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> a &lt; b&#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p>
<p>å¦‚æœä½ <strong>æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“</strong>ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚</p>
<p>æ³¨æ„ä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">7</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">2</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">1</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">5</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">6</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = <span class="number">6</span>-<span class="number">1</span> = <span class="number">5</span>  ï¼Œæ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ <span class="number">7</span>-<span class="number">1</span> = <span class="number">6</span>, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">7</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰äº¤æ˜“å®Œæˆï¼Œæ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º <span class="number">0</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>éåŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œè¿˜æ˜¯æŒºç®€å•çš„ï¼Œæ±‚ä¸ªæœ€å¤§çš„å·®å€¼å°± okï¼Œå› ä¸ºåªèƒ½ä¹°ä¸€æ¬¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éé€’å½’çš„æ€è·¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> min=Integer.MAX_VALUE,max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="comment">//å½“å¤©ä»·æ ¼å‡å» *ä¹‹å‰* ä»·æ ¼æœ€ä½çš„ä¹°å…¥æ—¶æœº</span></span><br><span class="line">        max=Math.max(max,prices[i]-min);</span><br><span class="line">        <span class="comment">//ç»Ÿè®¡ä»·æ ¼æœ€ä½çš„ä¹°å…¥æ—¶æœº</span></span><br><span class="line">        min=Math.min(min,prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ—¢ç„¶æ˜¯åŠ¨æ€è§„åˆ’çš„é¢˜ï¼Œè‡ªç„¶å¾—å†™ä¸ªåŠ¨æ€è§„åˆ’çš„ç‰ˆæœ¬</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[prices.length][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]= -prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+[i]);</span><br><span class="line">        dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],-prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[prices.length-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®æ”¹æˆä¸€ç»´çš„å°±å’Œä¸Šé¢çš„ä¸€æ¨¡ä¸€æ ·äº†</p>
<h2 id="122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II"><a href="#122-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-II" class="headerlink" title="122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</a></h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p>
<p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚<strong>ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“</strong>ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong>ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">7</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">2</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">1</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">3</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">5</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">5</span>-<span class="number">1</span> = <span class="number">4</span> ã€‚</span><br><span class="line">éšåï¼Œåœ¨ç¬¬ <span class="number">4</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">3</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">5</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">6</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">6</span>-<span class="number">3</span> = <span class="number">3</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">1</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">1</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">5</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">5</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">5</span>-<span class="number">1</span> = <span class="number">4</span> ã€‚</span><br><span class="line">æ³¨æ„ä½ ä¸èƒ½åœ¨ç¬¬ <span class="number">1</span> å¤©å’Œç¬¬ <span class="number">2</span> å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">7</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰äº¤æ˜“å®Œæˆï¼Œæ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º <span class="number">0</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ­£å¸¸çš„æ€è·¯ï¼ˆéåŠ¨æ€è§„åˆ’ï¼‰ï¼Œæ³¨æ„å®¡é¢˜ï¼Œä¸Šé¢çš„åªèƒ½ä¹°ä¸€æ¬¡ï¼Œè¿™é‡Œæ˜¯ä¸é™åˆ¶æ¬¡æ•°çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (prices[i]&gt;prices[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            ans+=prices[i]-prices[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä»£ç è¿˜æ˜¯å¾ˆæœ‰è¿·æƒ‘æ€§çš„ï¼Œå®é™…ä¸Šåˆ†äº†ä¸‰ç§æƒ…å†µï¼Œæœ‰ä¸¤ç§åˆå¹¶äº†</p>
<blockquote>
<p><strong>å•ç‹¬äº¤æ˜“æ—¥</strong>ï¼šæ˜å¤©æ¯”ä»Šå¤©ä»·æ ¼é«˜ï¼Œä»Šå¤©ä¹°ï¼Œæ˜å¤©å–</p>
<p><strong>è¿ç»­ä¸Šæ¶¨äº¤æ˜“æ—¥</strong>ï¼šå¼€å§‹çš„ç¬¬ä¸€å¤©ä¹° , æ¶¨åœçš„æœ€åä¸€å¤©å–æœ€æœ‰åˆ©ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥è½¬æ¢æˆè¯´<code>é™¤äº†ç¬¬ä¸€å¤©ï¼Œæ¯å¤©éƒ½å–äº†åˆä¹°</code>ï¼Œä¹Ÿå°±æ˜¯<code>pn-p1 = (p2-p1)+(p3-p2)+....(pn-pn-1)</code>  å¾ˆè‡ªç„¶çš„å°±è½¬æ¢æˆäº†å•ç‹¬äº¤æ˜“æ—¥çš„æƒ…å†µ<br><strong>è¿ç»­ä¸‹é™äº¤æ˜“æ—¥</strong>ï¼šä¸ä¹°å–æœ€æœ‰åˆ©</p>
</blockquote>
<p>å¦‚æœè¿˜æ˜¯ä¸æ˜ç™½å¯ä»¥çœ‹çœ‹å®˜æ–¹çš„å›¾</p>
<p><img src="http://static.imlgw.top/blog/20191017/Wpsvs09EmnmF.png?imageslim" alt="mark"></p>
<p>A-&gt;D æ˜¯ä¸€æ®µè¿ç»­ä¸Šæ¶¨æ—¥ï¼Œ<code>D-A çš„å·®å€¼</code> å°±æ˜¯ A-&gt;D å„ä¸ªç›¸é‚»èŠ‚ç‚¹å·®å€¼ä¹‹å’Œ</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æˆ‘ä»¬çš„ä¸»è§’ï¼ŒåŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//dp çš„æ€è·¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[prices.length][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+prices[i]);</span><br><span class="line">        dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]-prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[prices.length-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€çœ¼çœ‹å¯èƒ½è§‰å¾—çœ‹ä¸æ‡‚ï¼Œç†Ÿæ‚‰äº†å°±çŸ¥é“äº†ï¼Œå…¶å®éƒ½æ˜¯å¥—è·¯ï¼Œè‚¡ç¥¨é¢˜ç‰¹æœ‰çš„å¥—è·¯ï¼Œå…ˆè€ƒè™‘é¢˜ç›®æœ‰å‡ ç§çŠ¶æ€ï¼Œè¿™é¢˜è¯´äº†ä¸é™åˆ¶æ¬¡æ•°ï¼Œé‚£ä¹ˆå°±ä¸è€ƒè™‘æ¬¡æ•°çš„é—®é¢˜ï¼Œç„¶åå‰©ä¸‹çš„çŠ¶æ€å°±æ˜¯ï¼šé‚£ä¸€å¤©ï¼Œå’Œæ˜¯å¦æŒæœ‰è‚¡ç¥¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªäºŒç»´çš„æ•°ç»„æ¥è¡¨è¿°è¿™ä¸¤ç§çŠ¶æ€ æ¯”å¦‚<code>dp[i][0]</code> åˆ™ä»£è¡¨ç¬¬ i å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Šï¼Œ<code>dp[i][1]</code>åˆ™ä»£è¡¨ç¬¬ i å¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Šï¼Œç„¶åæˆ‘ä»¬å†çœ‹çœ‹çŠ¶æ€è½¬æ¢çš„è¿‡ç¨‹</p>
<p><img src="http://static.imlgw.top/blog/20191017/J7tfvKDvqC2b.png?imageslim" alt="mark"></p>
<p>å…¶å®æ— éå°±æ˜¯è¿™ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢ï¼Œç„¶åæ ¹æ®è¿™ä¸ªçŠ¶æ€è½¬æ¢çš„è¿‡ç¨‹å°±å¯ä»¥å¾ˆè½»æ˜“çš„å†™å‡ºæˆ‘ä»¬çš„çŠ¶æ€è½¬æ¢æ–¹ç¨‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+prices[i]);</span><br><span class="line">dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]-prices[i]);</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿™é‡Œå…¶å®ä¹Ÿå¾ˆå®¹æ˜“å°±å¯ä»¥æ”¹æˆä¸€å”¯çš„ dpï¼Œç©ºé—´å¤æ‚åº¦å˜ä¸º O(1)ï¼Œå› ä¸ºå½“å¤©çš„æœ€å¤§æ”¶ç›Šåªå’Œå‰ä¸€å¤©çš„æœ€å¤§æ”¶ç›Šç›¸å…³ï¼Œä¸¤ä¸ªå˜é‡å°±æ˜¯è¶³å¤Ÿè¡¨ç¤º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> hlod=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> empty=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="comment">//ä¿å­˜å‰ä¸€å¤©çš„çŠ¶æ€</span></span><br><span class="line">        <span class="type">int</span> temp=empty;</span><br><span class="line">        empty=Math.max(empty,hlod+prices[i]);</span><br><span class="line">        hlod=Math.max(hlod,temp-prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘æ„Ÿè§‰ leetcode çš„ case æœ‰é—®é¢˜ï¼Œæˆ‘å¼€å§‹æ²¡æœ‰ç¼“å­˜å‰ä¸€å¤©çš„ empty å€¼ï¼Œç›´æ¥å°† empty å¸¦åˆ° hold å»äº†ï¼Œç»“æœè¿˜è¿‡äº†ã€‚ä¸è¿‡æˆ‘æ‡’å¾—å»æƒ³ case äº†ï¼Œåæ­£æäº¤äº† leecode ä¹Ÿä¸ä¼šç†æˆ‘ğŸ˜…</p>
<h2 id="123-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III"><a href="#123-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-III" class="headerlink" title="123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/">123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III</a></h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p>
<p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ ä¸¤ç¬” äº¤æ˜“ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">3</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">4</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">0</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">6</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">3</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">3</span>-<span class="number">0</span> = <span class="number">3</span> ã€‚</span><br><span class="line">     éšåï¼Œåœ¨ç¬¬ <span class="number">7</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">1</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">8</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">4</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">4</span>-<span class="number">1</span> = <span class="number">3</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">1</span> å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">1</span>ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">5</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">5</span>ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">5</span>-<span class="number">1</span> = <span class="number">4</span> ã€‚   </span><br><span class="line">     æ³¨æ„ä½ ä¸èƒ½åœ¨ç¬¬ <span class="number">1</span> å¤©å’Œç¬¬ <span class="number">2</span> å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚   </span><br><span class="line">     å› ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">7</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">1</span>] </span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span> </span><br><span class="line">è§£é‡Šï¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œæ²¡æœ‰äº¤æ˜“å®Œæˆï¼Œæ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>äºŒç»´åŠ¨æ€è§„åˆ’ï¼Œå®šä¹‰å‡ºæ¯ä¸ªçŠ¶æ€ï¼Œç„¶åè½¬æ¢å°±å¯ä»¥äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//çŠ¶æ€å®šä¹‰ï¼š</span></span><br><span class="line">    <span class="comment">//j=0 ä»€ä¹ˆéƒ½ä¸åš</span></span><br><span class="line">    <span class="comment">//j=1 ç¬¬ä¸€æ¬¡ä¹°å…¥</span></span><br><span class="line">    <span class="comment">//j=2 ç¬¬ä¸€æ¬¡å–å‡º</span></span><br><span class="line">    <span class="comment">//j=3 ç¬¬äºŒæ¬¡ä¹°å…¥</span></span><br><span class="line">    <span class="comment">//j=4 ç¬¬äºŒæ¬¡å–å‡º</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[prices.length][<span class="number">5</span>];</span><br><span class="line">    <span class="comment">//è¿™æ ·ä¼šæº¢å‡º</span></span><br><span class="line">    <span class="comment">//Arrays.fill(dp[0],Integer.MIN_VALUE);</span></span><br><span class="line">    <span class="comment">//è¿™æ ·å¯ä»¥è¿‡ï¼Œä½†æ˜¯æ„Ÿè§‰è¿˜æ˜¯åˆ¤æ–­ä¸€ä¸‹å¥½</span></span><br><span class="line">    <span class="comment">//Arrays.fill(dp[0],-0x3f3f3f3f);</span></span><br><span class="line">    <span class="type">int</span> INF=Integer.MIN_VALUE,n=prices.length;</span><br><span class="line">    Arrays.fill(dp[<span class="number">0</span>],INF); <span class="comment">//ä¸å¯è¾¾çŠ¶æ€</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">        dp[i][<span class="number">1</span>]=Math.max(-prices[i],dp[i-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        dp[i][<span class="number">2</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>]+prices[i],dp[i-<span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">        dp[i][<span class="number">3</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">2</span>]!=INF?dp[i-<span class="number">1</span>][<span class="number">2</span>]-prices[i]:INF,dp[i-<span class="number">1</span>][<span class="number">3</span>]);</span><br><span class="line">        dp[i][<span class="number">4</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">3</span>]!=INF?dp[i-<span class="number">1</span>][<span class="number">3</span>]+prices[i]:INF,dp[i-<span class="number">1</span>][<span class="number">4</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(Math.max(dp[n-<span class="number">1</span>][<span class="number">0</span>],dp[n-<span class="number">1</span>][<span class="number">2</span>]),dp[n-<span class="number">1</span>][<span class="number">4</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å› ä¸ºé¢˜ç›®çš„æ•°æ®ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œæ²¡æœ‰è¶…è¿‡<code>10^9</code> ç›´æ¥åˆå§‹åŒ–ä¸º <code>-0x3f3f3f3f</code> å°±ä¸ç”¨åˆ¤æ–­å‰é¢çš„çŠ¶æ€æ˜¯å¦å¯è¾¾äº†ï¼Œ</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ä¼˜åŒ–æˆä¸€ç»´çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">    <span class="type">int</span> n=prices.length;</span><br><span class="line">    Arrays.fill(dp,-<span class="number">0x3f3f3f3f</span>);</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="comment">//é€†åºé€’æ¨é¿å…è¦†ç›–ï¼ˆå…¶å®æ­£ç€å†™ä¹Ÿæ˜¯å¯¹çš„ï¼Œè¿™é¢˜ç›¸é‚»çš„çŠ¶æ€ä¸ä¼šåŒæ—¶æ›´æ–°ï¼Œä½†æ˜¯ä¸ºäº†è§„èŒƒæœ€å¥½è¿˜æ˜¯é€†åºå†™ï¼‰</span></span><br><span class="line">        dp[<span class="number">4</span>]=Math.max(dp[<span class="number">3</span>]+prices[i],dp[<span class="number">4</span>]);</span><br><span class="line">        dp[<span class="number">3</span>]=Math.max(dp[<span class="number">2</span>]-prices[i],dp[<span class="number">3</span>]);</span><br><span class="line">        dp[<span class="number">2</span>]=Math.max(dp[<span class="number">1</span>]+prices[i],dp[<span class="number">2</span>]);</span><br><span class="line">        dp[<span class="number">1</span>]=Math.max(-prices[i],dp[<span class="number">1</span>]);</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(Math.max(dp[<span class="number">0</span>],dp[<span class="number">2</span>]),dp[<span class="number">4</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="188-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV"><a href="#188-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-IV" class="headerlink" title="188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</a></h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p>
<p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚</p>
<p>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>], k = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">1</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">2</span>) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">2</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">4</span>) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">4</span>-<span class="number">2</span> = <span class="number">2</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">3</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">3</span>], k = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ <span class="number">2</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">2</span>) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">3</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">6</span>) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">6</span>-<span class="number">2</span> = <span class="number">4</span> ã€‚</span><br><span class="line">     éšåï¼Œåœ¨ç¬¬ <span class="number">5</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">0</span>) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ <span class="number">6</span> å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = <span class="number">3</span>) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = <span class="number">3</span>-<span class="number">0</span> = <span class="number">3</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™é¢˜å…¶å®å°±æ˜¯æ±‚ä¸Šé¢ä¸€é¢˜çš„é€šè§£ï¼Œä¸Šé¢çš„ä»£ç è§„å¾‹å·²ç»éå¸¸æ˜æ˜¾äº†ï¼Œ<code>j</code>ä¸ºå¥‡æ•°çš„æ—¶å€™ä¹°å…¥ï¼Œå¶æ•°çš„æ—¶å€™å–å‡ºï¼Œæˆ‘ä»¬ç»Ÿè®¡æœ€åå¶æ•°çš„æœ€å¤§å€¼å°±å¯ä»¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span> || k&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k&gt;prices.length/<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> maxProfit(prices);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//k æ¬¡äº¤æ˜“ï¼Œ2*k+1 ç§çŠ¶æ€</span></span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>*k+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> n=prices.length;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    Arrays.fill(dp,-<span class="number">0x3f3f3f3f</span>);</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„å€’æ¨</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">2</span>*k;j&gt;<span class="number">0</span>;j--)&#123;</span><br><span class="line">            <span class="keyword">if</span>((j&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;</span><br><span class="line">                dp[j]=Math.max(dp[j-<span class="number">1</span>]-prices[i],dp[j]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[j]=Math.max(dp[j-<span class="number">1</span>]+prices[i],dp[j]);</span><br><span class="line">                res=Math.max(dp[j],res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (prices[i]&gt;prices[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            ans+=prices[i]-prices[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ­£å¸¸çš„ DP é€šè§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¸¸è§„ 2 ç»´è§£æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span> || k&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k&gt;prices.length/<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> maxProfit(prices);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¬¬ k æ¬¡äº¤æ˜“ï¼ŒæŒè‚¡/ä¸æŒè‚¡</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[k+<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">    <span class="type">int</span> n=prices.length;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> INF=-<span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=k;i++)&#123;</span><br><span class="line">        Arrays.fill(dp[i],INF);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¶å®è¿™é¢˜éš¾æçš„å°±æ˜¯å¯¹äºåˆå§‹çŠ¶æ€çš„ init</span></span><br><span class="line">    <span class="comment">//ç¬¬ä¸€å¤©æ²¡æœ‰äº¤æ˜“å’Œç¬¬ä¸€å¤©æœ‰ä¸€æ¬¡äº¤æ˜“çš„åˆå§‹å€¼</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;dp[<span class="number">0</span>][<span class="number">1</span>]=INF;</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">0</span>;dp[<span class="number">1</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„å€’æ¨</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=k;j&gt;<span class="number">0</span>;j--)&#123;</span><br><span class="line">            <span class="comment">//è¿™é‡Œå°†ä¹°å…¥å’Œå–å‡ºä½œä¸ºä¸€ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥è¿™é‡Œä¹°å…¥æ–°è‚¡ç¥¨ï¼Œè‚¯å®šå°±æ˜¯å±äºä¸‹ä¸€æ¬¡äº¤æ˜“äº†</span></span><br><span class="line">            <span class="comment">//æ‰€ä»¥è¿™é‡Œçš„ j éœ€è¦å‡ä¸€ï¼Œä»£è¡¨ä¸Šä¸€æ¬¡äº¤æ˜“å–å‡ºæ—¶å€™çš„æ”¶ç›Š</span></span><br><span class="line">            dp[j][<span class="number">0</span>]=Math.max(dp[j][<span class="number">1</span>]+prices[i],dp[j][<span class="number">0</span>]);</span><br><span class="line">            dp[j][<span class="number">1</span>]=Math.max(dp[j-<span class="number">1</span>][<span class="number">0</span>]-prices[i],dp[j][<span class="number">1</span>]);</span><br><span class="line">            res=Math.max(dp[j][<span class="number">0</span>],res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (prices[i]&gt;prices[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            ans+=prices[i]-prices[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="714-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"><a href="#714-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹" class="headerlink" title="714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>prices</code>ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ï¼Œéè´Ÿæ•´æ•° fee ä»£è¡¨äº†äº¤æ˜“è‚¡ç¥¨çš„æ‰‹ç»­è´¹ç”¨</p>
<p>ä½ å¯ä»¥æ— é™æ¬¡åœ°å®Œæˆäº¤æ˜“ï¼Œä½†æ˜¯ä½ æ¯æ¬¡äº¤æ˜“éƒ½éœ€è¦ä»˜æ‰‹ç»­è´¹ã€‚å¦‚æœä½ å·²ç»è´­ä¹°äº†ä¸€ä¸ªè‚¡ç¥¨ï¼Œåœ¨å–å‡ºå®ƒä¹‹å‰ä½ å°±ä¸èƒ½å†ç»§ç»­è´­ä¹°è‚¡ç¥¨äº†ã€‚</p>
<p>è¿”å›è·å¾—åˆ©æ¶¦çš„æœ€å¤§å€¼ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šprices = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">9</span>], fee = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">8</span></span><br><span class="line">è§£é‡Šï¼šèƒ½å¤Ÿè¾¾åˆ°çš„æœ€å¤§åˆ©æ¶¦ï¼š</span><br><span class="line">åœ¨æ­¤å¤„ä¹°å…¥ prices[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">åœ¨æ­¤å¤„å–å‡º prices[<span class="number">3</span>] = <span class="number">8</span></span><br><span class="line">åœ¨æ­¤å¤„ä¹°å…¥ prices[<span class="number">4</span>] = <span class="number">4</span></span><br><span class="line">åœ¨æ­¤å¤„å–å‡º prices[<span class="number">5</span>] = <span class="number">9</span></span><br><span class="line">æ€»åˆ©æ¶¦ï¼š((<span class="number">8</span> - <span class="number">1</span>) - <span class="number">2</span>) + ((<span class="number">9</span> - <span class="number">4</span>) - <span class="number">2</span>) = <span class="number">8.</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><code>0 &lt; prices.length &lt;= 50000.</code></li>
<li><code>0 &lt; prices[i] &lt; 50000.</code></li>
<li><code>0 &lt;= fee &lt; 50000.</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æˆ‘èµ·äº†ï¼Œä¸€æªç§’äº†ï¼Œæœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices, <span class="type">int</span> fee)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[prices.length][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+prices[i]-fee);</span><br><span class="line">        dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]-prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[prices.length-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹ä¸º O(1) ç©ºé—´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ”¹ä¸º O(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices, <span class="type">int</span> fee)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> empty=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> hold=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="type">int</span> temp=empty;</span><br><span class="line">        empty=Math.max(empty,hold+prices[i]-fee);</span><br><span class="line">        hold=Math.max(hold,temp-prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="309-æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ"><a href="#309-æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ" class="headerlink" title="309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ </p>
<p>è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:</p>
<ul>
<li>ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰</li>
<li>å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ ï¼ˆå³å†·å†»æœŸä¸º 1 å¤©ï¼‰</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span> </span><br><span class="line">è§£é‡Šï¼šå¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸ºï¼š[ä¹°å…¥ï¼Œå–å‡ºï¼Œå†·å†»æœŸï¼Œä¹°å…¥ï¼Œå–å‡º]</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¾ç„¶æ˜¯ä¸Šé¢é¢˜çš„å‡çº§ç‰ˆï¼Œç›¸æ¯”ä¸Šä¸€é¢˜åˆå¤šäº†ä¸ªé™åˆ¶æ¡ä»¶ï¼ŒåŠ äº† cdï¼Œä¹°å–ä¸€æ¬¡åæœ‰ä¸€å¤©çš„ cdï¼Œå½“å¤©ä¸èƒ½å†ä¹°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][0] ä»£è¡¨ç¬¬ i å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line">    <span class="comment">//dp[i][1] ä»£è¡¨ç¬¬ i å¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[prices.length][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="comment">//è¿™äº›ç©æ„æƒ³èµ·è¿˜æ˜¯è›®æ‰“è„‘é˜”çš„</span></span><br><span class="line">        dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>]+prices[i],dp[i-<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">        <span class="comment">//dp[i][1]=Math.max(i&lt;2?-prices[i]:dp[i-2][0]-prices[i],dp[i-1][1]);</span></span><br><span class="line">        <span class="comment">//è¿™é‡Œ i&lt;2 å°±æ˜¯ç¬¬ä¸€æ¬¡å¾ªç¯ï¼Œi=1, ä¹Ÿå°±æ˜¯ç¬¬äºŒå¤©æŒæœ‰è‚¡ç¥¨ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯é¦–æ¬¡ä¹°è‚¡ç¥¨ï¼Œç›´æ¥åˆå§‹åŒ–ä¸º -prices[1]</span></span><br><span class="line">        <span class="comment">//æ˜¨å¤©æœ‰è‚¡ç¥¨ï¼Œæˆ–è€…æ˜¨å¤©å†·å†»å‰å¤©å–å‡º</span></span><br><span class="line">        dp[i][<span class="number">1</span>]=Math.max(i&lt;<span class="number">2</span>?-prices[<span class="number">1</span>]:dp[i-<span class="number">2</span>][<span class="number">0</span>]-prices[i],dp[i-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[prices.length-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯„è®ºåŒºå¾ˆå¤šçš„è§£æ³•éƒ½æ˜¯ç”¨äº†ä¸‰ä¸ªçŠ¶æ€æ•°ç»„ï¼Œç›¸æ¯”è¿™ç§å¤šäº†ä¸€ä¸ª å†·å†»æœŸçš„æœ€å¤§å€¼ï¼Œæ„Ÿè§‰æŒºè¿·æƒ‘çš„ã€‚è™½ç„¶ç»“æœæ˜¯å¯¹çš„ï¼Œä½†æ˜¯æ€»æ—¶æ„Ÿè§‰åˆ«æ‰­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æŒ‰ç…§ä¸Šé¢çš„æ€è·¯ï¼Œç”¨ä¸¤ä¸ªçŠ¶æ€è¡¨ç¤ºï¼ŒçŠ¶æ€è½¬æ¢å›¾å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„</p>
<p><img src="http://static.imlgw.top/blog/20191017/J7tfvKDvqC2b.png?imageslim" alt="mark"></p>
<p>å½“å¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Šï¼Œå°±æ˜¯ä½ å½“å¤©ä¹°è‚¡ç¥¨ï¼Œæˆ–è€… rest å•¥ä¹Ÿä¸å¹²å»¶ç»­å‰ä¸€å¤©çš„çŠ¶æ€ï¼Œä¸¤è€…çš„æœ€å¤§å€¼</p>
<p>è¿™é‡Œå’Œä¸Šé¢ä¸åŒçš„å°±æ˜¯ä»<code>ä¸æŒæœ‰è‚¡ç¥¨</code> åˆ°<code>æŒæœ‰è‚¡ç¥¨</code>ï¼ˆä¹Ÿå°±æ˜¯ä¹°è‚¡ç¥¨ï¼‰çš„æƒ…å†µï¼Œ å› ä¸ºæœ‰å†·å†»æœŸçš„å­˜åœ¨ï¼Œ<strong>æ‰€ä»¥ä½ å½“å¤©ä¹°è‚¡ç¥¨çš„æœ€å¤§å€¼ä¸å†æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§å€¼ï¼Œè€Œæ˜¯å‰å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§å€¼</strong></p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>æ”¹ä¸ºç©ºé—´å¤æ‚åº¦ O(1) çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (prices==<span class="literal">null</span> || prices.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> hold=-prices[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> empty=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//å‰ä¸€å¤©ä¹°å‡ºçš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line">    <span class="type">int</span> prePre=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;prices.length;i++) &#123;</span><br><span class="line">        <span class="type">int</span> temp=empty;</span><br><span class="line">        empty=Math.max(hold+prices[i],empty);</span><br><span class="line">        hold=Math.max(i&lt;<span class="number">2</span>?-prices[<span class="number">1</span>]:prePre-prices[i],hold);</span><br><span class="line">        <span class="comment">//åˆ°è¿™é‡Œ pre å°±å˜æˆäº†å‰ä¸€å¤©</span></span><br><span class="line">        prePre=temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>çœ‹äº†ä¸‹è¯„è®ºåŒºè¿˜æ˜¯è›®å¤šäº‰è®®çš„ï¼Œæ„Ÿè§‰è¿™é‡Œæ ¹æ® dp[i-2] è½¬æ¢æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œç„¶åç¿»äº†ç¿»è¯„è®ºåŒºçœ‹è§äº†å¤§ç¥çš„å›ç­”</p>
<p><code>dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])</code></p>
<p><code>dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])</code></p>
<p>æ·»åŠ  â€œå†·å†»æœŸâ€ æ¡ä»¶åï¼Œä¹°å…¥çš„å‰ä¸€å¤©æ˜¯ä¸èƒ½å–çš„ï¼Œè€Œ<code>dp[i-1][0] - prices[i]</code>å¹¶ä¸èƒ½ç¡®ä¿ <code>i-1 å¤©ä¸å–å‡º</code>   </p>
<p>æ‰€ä»¥è¿›ä¸€æ­¥æ‹†è§£<code>dp[i-1][0]</code>ï¼Œ å¥—ç”¨ä¸Šé¢çš„è½¬æ¢æ–¹ç¨‹å¯ä»¥å¾—åˆ°</p>
<p><code>dp[i-1][0] = max(dp[i-2][0], dp[i-2][1] + prices[i-1])</code> </p>
<p>å†å¸¦å…¥åŸå¼å­ï¼Œåˆ™å¯ä»¥å¾—åˆ°</p>
<p><code>dp[i][1] = max(dp[i-1][1], max(dp[i-2][0], dp[i-2][1] + prices[i-1]) - prices[i])</code></p>
<p>å…¶ä¸­<code>dp[i-2][1] + prices[i-1]</code> ä»£è¡¨ç€ <code>â€œi-1 å‘ç”Ÿäº†å–å‡ºè¡Œä¸ºâ€</code>ï¼Œæœ‰è¿é¢˜æ„ï¼Œåº”äºˆåˆ é™¤ï¼Œå¾—ä¸‹å¼ï¼Œæœ€ç»ˆå’Œä¸Šé¢çš„çŠ¶æ€è½¬æ¢æ–¹ç¨‹ä¸€è‡´</p>
<p><code>dp[i][1] = max(dp[i-1][1], max(dp[i-2][0]) - prices[i])</code></p>
<p>è¿™æ ·ä¸€è¯æ˜å°±å¾ˆæ¸…æ¥šäº†</p>
</blockquote>
<h2 id="1269-åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°"><a href="#1269-åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°" class="headerlink" title="1269. åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/">1269. åœåœ¨åŸåœ°çš„æ–¹æ¡ˆæ•°</a></h2><p>æœ‰ä¸€ä¸ªé•¿åº¦ä¸º arrLen çš„æ•°ç»„ï¼Œå¼€å§‹æœ‰ä¸€ä¸ªæŒ‡é’ˆåœ¨ç´¢å¼• 0 å¤„ã€‚</p>
<p>æ¯ä¸€æ­¥æ“ä½œä¸­ï¼Œä½ å¯ä»¥å°†æŒ‡é’ˆå‘å·¦æˆ–å‘å³ç§»åŠ¨ 1 æ­¥ï¼Œæˆ–è€…åœåœ¨åŸåœ°ï¼ˆæŒ‡é’ˆä¸èƒ½è¢«ç§»åŠ¨åˆ°æ•°ç»„èŒƒå›´å¤–ï¼‰ã€‚</p>
<p>ç»™ä½ ä¸¤ä¸ªæ•´æ•° steps å’Œ arrLen ï¼Œè¯·ä½ è®¡ç®—å¹¶è¿”å›ï¼šåœ¨æ°å¥½æ‰§è¡Œ steps æ¬¡æ“ä½œä»¥åï¼ŒæŒ‡é’ˆä»ç„¶æŒ‡å‘ç´¢å¼• 0 å¤„çš„æ–¹æ¡ˆæ•°ã€‚</p>
<p>ç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œè¯·è¿”å›æ–¹æ¡ˆæ•° æ¨¡ 10^9 + 7 åçš„ç»“æœã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šsteps = <span class="number">3</span>, arrLen = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">3</span> æ­¥åï¼Œæ€»å…±æœ‰ <span class="number">4</span> ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥åœåœ¨ç´¢å¼• <span class="number">0</span> å¤„ã€‚</span><br><span class="line">å‘å³ï¼Œå‘å·¦ï¼Œä¸åŠ¨</span><br><span class="line">ä¸åŠ¨ï¼Œå‘å³ï¼Œå‘å·¦</span><br><span class="line">å‘å³ï¼Œä¸åŠ¨ï¼Œå‘å·¦</span><br><span class="line">ä¸åŠ¨ï¼Œä¸åŠ¨ï¼Œä¸åŠ¨</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹  2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šsteps = <span class="number">2</span>, arrLen = <span class="number">4</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">2</span> æ­¥åï¼Œæ€»å…±æœ‰ <span class="number">2</span> ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥åœåœ¨ç´¢å¼• <span class="number">0</span> å¤„ã€‚</span><br><span class="line">å‘å³ï¼Œå‘å·¦</span><br><span class="line">ä¸åŠ¨ï¼Œä¸åŠ¨</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šsteps = <span class="number">4</span>, arrLen = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">8</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= steps &lt;= 500</code></li>
<li><code>1 &lt;= arrLen &lt;= 10^6</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>11.24 çš„å‘¨èµ›æœ€åä¸€é¢˜ï¼Œå¾ˆå¯æƒœæ²¡åšå‡ºæ¥ã€‚è¦æ˜¯æŠŠè¿™é¢˜æ”¾åœ¨ç¬¬ä¸‰é¢˜æˆ‘å¯èƒ½å°±åšå‡ºæ¥äº†ã€‚è¿˜æ˜¯èœå•Š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numWays</span><span class="params">(<span class="type">int</span> steps, <span class="type">int</span> arrLen)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mod=<span class="number">1_000_000_007</span>;</span><br><span class="line">    <span class="type">long</span>[][] dp=<span class="keyword">new</span> <span class="title class_">long</span>[steps+<span class="number">1</span>][steps+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>; <span class="comment">//dp[i][j] çš„å«ä¹‰æ˜¯ i æ­¥ä¹‹åå¤„äº j ä½ç½®çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=steps;i++) &#123;</span><br><span class="line">        <span class="comment">//i æ­¥èƒ½è¾¾åˆ°çš„æœ€å¤§è·ç¦»å°±æ˜¯ i, æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå–ä¸€ä¸ªæœ€å°å€¼</span></span><br><span class="line">        <span class="type">int</span> k=Math.min(i,arrLen-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;=k;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j==<span class="number">0</span>) &#123;</span><br><span class="line">                dp[i][j]=(dp[i-<span class="number">1</span>][j+<span class="number">1</span>]+dp[i-<span class="number">1</span>][j])%mod;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (j&lt;k) &#123;</span><br><span class="line">                dp[i][j]=(dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+dp[i-<span class="number">1</span>][j+<span class="number">1</span>]+dp[i-<span class="number">1</span>][j])%mod;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123; <span class="comment">//å¤§äº k å°±åªèƒ½æ˜¯ä»å³è¾¹è¿‡æ¥çš„</span></span><br><span class="line">                dp[i][j]=(dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+dp[i-<span class="number">1</span>][j])%mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dp[steps][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æˆ‘æ¯”è¾ƒå–œæ¬¢çš„è®°å¿†åŒ–é€’å½’ğŸ˜ï¼Œ10ms ç”šè‡³æ¯”ä¸Šé¢è¿˜å¿«ä¸€ç‚¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> mod=<span class="number">1_000_000_007</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cache</span></span><br><span class="line">Long[][] cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numWays</span><span class="params">(<span class="type">int</span> steps, <span class="type">int</span> arrLen)</span> &#123;</span><br><span class="line">    <span class="type">int</span> maxIndex=Math.min(steps,arrLen-<span class="number">1</span>);</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Long</span>[steps+<span class="number">1</span>][maxIndex+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dfs(steps,<span class="number">0</span>,maxIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> steps, <span class="type">int</span> index,<span class="type">int</span> maxIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (steps==<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> index==<span class="number">0</span>?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (index&lt;<span class="number">0</span> || index &gt; maxIndex )  &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cache[steps][index]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[steps][index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//steps ä¸€ç›´åœ¨é€’å‡ï¼Œsteps æœ€å¤šèµ°åˆ° steps ä½ç½®</span></span><br><span class="line">    <span class="comment">//ä¸ºäº†èŠ‚çº¦æ—¶é—´å¯ä»¥åœ¨è¿™é‡Œä¼˜åŒ–ä¸‹</span></span><br><span class="line">    maxIndex=Math.min(steps,maxIndex);</span><br><span class="line">    <span class="comment">//ä¸åŠ¨</span></span><br><span class="line">    <span class="type">long</span> res=dfs(steps-<span class="number">1</span>,index,maxIndex);</span><br><span class="line">    <span class="comment">//å‘å·¦</span></span><br><span class="line">    res+=dfs(steps-<span class="number">1</span>,index-<span class="number">1</span>,maxIndex);</span><br><span class="line">    <span class="comment">//å‘å³</span></span><br><span class="line">    res+=dfs(steps-<span class="number">1</span>,index+<span class="number">1</span>,maxIndex);</span><br><span class="line">    <span class="keyword">return</span> cache[steps][index]=res%mod;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="152-ä¹˜ç§¯æœ€å¤§å­åºåˆ—"><a href="#152-ä¹˜ç§¯æœ€å¤§å­åºåˆ—" class="headerlink" title="152. ä¹˜ç§¯æœ€å¤§å­åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-product-subarray/">152. ä¹˜ç§¯æœ€å¤§å­åºåˆ—</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºä¸€ä¸ªåºåˆ—ä¸­ä¹˜ç§¯æœ€å¤§çš„è¿ç»­å­åºåˆ—ï¼ˆè¯¥åºåˆ—è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">3</span>,-<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šå­æ•°ç»„ [<span class="number">2</span>,<span class="number">3</span>] æœ‰æœ€å¤§ä¹˜ç§¯ <span class="number">6</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[-<span class="number">2</span>,<span class="number">0</span>,-<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šç»“æœä¸èƒ½ä¸º <span class="number">2</span>, å› ä¸º [-<span class="number">2</span>,-<span class="number">1</span>] ä¸æ˜¯å­æ•°ç»„ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>è‡ªå·±æœ€å¼€å§‹è‡ªå·±å†™å‡ºæ¥çš„è„‘ç˜« dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxProduct</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp1=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span>[] dp2=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="comment">//æœ€å¤§å€¼</span></span><br><span class="line">    dp1[<span class="number">0</span>]=nums[<span class="number">0</span>]&gt;=<span class="number">0</span>?nums[<span class="number">0</span>]:<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æœ€å°å€¼</span></span><br><span class="line">    dp2[<span class="number">0</span>]=nums[<span class="number">0</span>]&gt;=<span class="number">0</span>?<span class="number">0</span>:nums[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> max=nums[<span class="number">0</span>]&gt;<span class="number">0</span>?dp1[<span class="number">0</span>]:dp2[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i]&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i-<span class="number">1</span>]&lt;<span class="number">0</span>) &#123;</span><br><span class="line">                dp1[i]=dp1[i-<span class="number">1</span>]!=<span class="number">0</span>?nums[i]*dp1[i-<span class="number">1</span>]:nums[i];</span><br><span class="line">                dp2[i]=dp2[i-<span class="number">1</span>]*nums[i];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i-<span class="number">1</span>]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                dp1[i]=dp1[i-<span class="number">1</span>]*nums[i];</span><br><span class="line">                dp2[i]=dp2[i-<span class="number">1</span>]!=<span class="number">0</span>?nums[i]*dp2[i-<span class="number">1</span>]:<span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp1[i]=nums[i];</span><br><span class="line">                dp2[i]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (nums[i]&lt;<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i-<span class="number">1</span>]&lt;<span class="number">0</span>) &#123;</span><br><span class="line">                dp1[i]=dp2[i-<span class="number">1</span>]*nums[i];</span><br><span class="line">                dp2[i]=dp1[i-<span class="number">1</span>]!=<span class="number">0</span>?dp1[i-<span class="number">1</span>]*nums[i]:nums[i];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[i-<span class="number">1</span>]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                dp1[i]=dp1[i-<span class="number">1</span>]!=<span class="number">0</span>?nums[i]*dp2[i-<span class="number">1</span>]:<span class="number">0</span>;</span><br><span class="line">                dp2[i]=dp1[i-<span class="number">1</span>]*nums[i];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp1[i]=<span class="number">0</span>;</span><br><span class="line">                dp2[i]=nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp1[i]=<span class="number">0</span>;</span><br><span class="line">            dp2[i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//System.out.println(dp1[i]+&quot;,&quot;+dp2[i]);</span></span><br><span class="line">        max=Math.max(max,dp1[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    //     -2  2  3   -4        </span></span><br><span class="line"><span class="comment">    //dp1:  0  2  6   48        </span></span><br><span class="line"><span class="comment">    //dp2: -2 -4 -12 -24 </span></span><br><span class="line"><span class="comment">    //</span></span><br><span class="line"><span class="comment">    // 2 -5   -2  -4   3</span></span><br><span class="line"><span class="comment">    // 2  0   20   8   24</span></span><br><span class="line"><span class="comment">    // 0 -10  -2  -80 -240</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>ä¸æƒ³è§£é‡Šå¤ªå¤šï¼Œè™½ç„¶è¿‡äº†ï¼Œä½†æ˜¯ç¡®å®æœ‰ç‚¹è ¢</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p><code>max[i],min[i]</code> ä»£è¡¨çš„å°±æ˜¯ä»¥<code>nums[i]</code> ç»“å°¾çš„<strong>æœ€å¤§</strong>ä¹˜ç§¯å’Œ<strong>æœ€å°</strong>ä¹˜ç§¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">maxProduct</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] min=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span>[] max=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">    <span class="type">int</span> res=max[<span class="number">0</span>]=min[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        max[i]=Math.max(nums[i]*min[i-<span class="number">1</span>],Math.max(nums[i],nums[i]*max[i-<span class="number">1</span>]));</span><br><span class="line">        min[i]=Math.min(nums[i]*min[i-<span class="number">1</span>],Math.min(nums[i],nums[i]*max[i-<span class="number">1</span>]));</span><br><span class="line">        res=Math.max(res,max[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆè¦è®°å½•æœ€å°ä¹˜ç§¯ç›¸ä¿¡ä¸éœ€è¦æˆ‘å¤šè¯´äº†å§ï¼Œå…¶å®åªè¦æƒ³æ¸…æ¥šä¸€ç‚¹å°± okï¼Œæ¯ä¸ªä½ç½®çš„<code>max[i]</code>å…¶å®åªæœ‰ä¸‰ç§æ¥æºï¼ˆçº¸ä¸Šå†™å†™å°±æ˜ç™½äº†ï¼‰</p>
<ul>
<li><p><code>nums[i] &gt;= 0</code> å¹¶ä¸”<code>max[i-1] &gt; 0</code>ï¼Œ<code>max[i] = max[i-1] * nums[i]</code></p>
</li>
<li><p> <code>nums[i] &gt;= 0</code> å¹¶ä¸”<code>max[i-1] &lt; 0</code>ï¼Œæ­¤æ—¶å¦‚æœå’Œå‰è¾¹çš„æ•°ç´¯ä¹˜çš„è¯ï¼Œä¼šå˜æˆè´Ÿæ•°ï¼Œæ‰€ä»¥<code>max[i] = nums[i]</code></p>
</li>
<li><p><code>nums[i] &lt; 0</code>ï¼Œå¦‚æœæ˜¯è´Ÿæ•°å°±ä¸åº”è¯¥å†å’Œå‰é¢<code>max[i]</code>ç›¸ä¹˜ï¼Œè€Œæ˜¯è€ƒè™‘<code>min[i]</code></p>
<ul>
<li><code>å½“ min[i-1] &lt; 0ï¼Œmax[i] = min[i-1] * nums[i]</code></li>
<li><code>å½“ min[i-1] &gt;= 0ï¼Œmax[i] = nums[i]</code></li>
</ul>
<p>ç„¶åæˆ‘ä»¬ç›´æ¥æ±‚è¿™ä¸‰ç§æƒ…å†µçš„æœ€å¤§å€¼å°± ok äº†ï¼Œä¸ç”¨è€ƒè™‘é‚£äº›åˆ†æ”¯ï¼Œæˆ‘ä¸Šé¢çš„ç¬¬ä¸€ç§è§£æ³•å…¶å®å°±æ˜¯è€ƒè™‘äº†æ‰€æœ‰åˆ†æ”¯ï¼Œç»“æœæ‰å†™å‡ºäº†é‚£æ ·çš„ dpï¼Œ <code>min[i]</code> çš„è¿‡ç¨‹å’Œä¸Šé¢ä¸€æ ·ï¼Œå°±ä¸èµ˜è¿°</p>
</li>
</ul>
<h2 id="1567-ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦"><a href="#1567-ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦" class="headerlink" title="1567. ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-length-of-subarray-with-positive-product/">1567. ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code>Â ï¼Œè¯·ä½ æ±‚å‡ºä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p>ä¸€ä¸ªæ•°ç»„çš„å­æ•°ç»„æ˜¯ç”±åŸæ•°ç»„ä¸­é›¶ä¸ªæˆ–è€…æ›´å¤šä¸ªè¿ç»­æ•°å­—ç»„æˆçš„æ•°ç»„ã€‚</p>
<p>è¯·ä½ è¿”å›ä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹Â  1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šæ•°ç»„æœ¬èº«ä¹˜ç§¯å°±æ˜¯æ­£æ•°ï¼Œå€¼ä¸º <span class="number">24</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">-4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿ä¹˜ç§¯ä¸ºæ­£æ•°çš„å­æ•°ç»„ä¸º [<span class="number">1</span>,<span class="number">-2</span>,<span class="number">-3</span>] ï¼Œä¹˜ç§¯ä¸º <span class="number">6</span> ã€‚</span><br><span class="line">æ³¨æ„ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠ <span class="number">0</span> ä¹ŸåŒ…æ‹¬åˆ°å­æ•°ç»„ä¸­ï¼Œå› ä¸ºè¿™æ ·ä¹˜ç§¯ä¸º <span class="number">0</span> ï¼Œä¸æ˜¯æ­£æ•°ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šä¹˜ç§¯ä¸ºæ­£æ•°çš„æœ€é•¿å­æ•°ç»„æ˜¯ [<span class="number">-1</span>,<span class="number">-2</span>] æˆ–è€… [<span class="number">-2</span>,<span class="number">-3</span>] ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">-1</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">-6</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">10</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= nums.length &lt;= 10^5</code></li>
<li>  <code>-10^9 &lt;= nums[i]Â &lt;= 10^9</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¸€å¼€å§‹æƒ³æ­ªäº†ï¼Œå’Œä¸Šé¢ä¸€é¢˜æœ€å¼€å§‹ä¸€æ ·å†™äº†ä¸ªè´¼è ¢çš„ dpï¼Œå¥½åœ¨åé¢è¿˜æ˜¯è‡ªå·±æƒ³å‡ºæ¥äº†ï¼Œä¸‹é¢çš„æ˜¯åé¢æƒ³å‡ºæ¥çš„ç®€å•è§£æ³•</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getMaxLen</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">var</span> n = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="comment">//dp[i][0]: </span></span><br><span class="line"> Â  Â <span class="keyword">var</span> dp = <span class="built_in">make</span>([][<span class="number">2</span>]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line"> Â  Â <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> nums[i<span class="number">-1</span>] &gt; <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + <span class="number">1</span></span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">if</span> dp[i<span class="number">-1</span>][<span class="number">1</span>] != <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][<span class="number">1</span>] = dp[i<span class="number">-1</span>][<span class="number">1</span>] + <span class="number">1</span> Â  </span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â   &#125; <span class="keyword">else</span> <span class="keyword">if</span> nums[i<span class="number">-1</span>] &lt; <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">if</span> dp[i<span class="number">-1</span>][<span class="number">1</span>] != <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">1</span>] + <span class="number">1</span> Â  </span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">1</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] + <span class="number">1</span></span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> dp[i][<span class="number">0</span>] &gt; res &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â res = dp[i][<span class="number">0</span>]</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>è´¼è ¢çš„ DPï¼Œé¢å‘ case ç¼–ç¨‹</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åƒåœ¾ DPï¼Œé¢å‘ case ç¼–ç¨‹ï¼Œæ²¡æœ‰ case ä¸€è¾ˆå­æ”¹ä¸å‡ºæ¥ï¼ˆå±…ç„¶è¿˜è¢«æˆ‘æ”¹å¯¹äº†ï¼‰</span></span><br><span class="line"><span class="comment">//100+ms æ—¶é—´å¤æ‚åº¦ O(N^2)ï¼Œlc çš„ case æ²¡èƒ½å¡æ‰ï¼Œä½†æ˜¯åº”è¯¥æ˜¯å¯ä»¥æ„é€ å‡ºä¸€ç»„ç‰¹æ®Š case å¡æ‰çš„ï¼Œæ‡’å¾—æƒ³äº†</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getMaxLen</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> nums[<span class="number">0</span>] &gt; <span class="number">0</span> &#123;</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> res = dp[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> &#123;</span><br><span class="line">            dp[i] = dp[i<span class="number">-1</span>] + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> nums[i] &lt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> i-dp[i<span class="number">-1</span>]<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; nums[i-dp[i<span class="number">-1</span>]<span class="number">-1</span>] &lt; <span class="number">0</span> &#123;</span><br><span class="line">                dp[i] = dp[i<span class="number">-1</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> i-dp[i<span class="number">-1</span>]<span class="number">-2</span> &gt;= <span class="number">0</span> &#123;</span><br><span class="line">                    dp[i] += dp[i-dp[i<span class="number">-1</span>]<span class="number">-2</span>]</span><br><span class="line">                &#125;   </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//ä» i-dp[i-1] å¼€å§‹æ‰¾è´Ÿæ•°ï¼Œç„¶åä»è¿™ä¸ªè´Ÿæ•°æˆªæ–­</span></span><br><span class="line">                <span class="keyword">var</span> cnt = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> k := i-dp[i<span class="number">-1</span>]; k &lt; i; k++ &#123;</span><br><span class="line">                    <span class="keyword">if</span> nums[k] &lt; <span class="number">0</span> &#123;</span><br><span class="line">                        dp[i] = dp[i<span class="number">-1</span>]-cnt</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    cnt++</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> dp[i] &gt; res &#123;</span><br><span class="line">            res = dp[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1594-çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯"><a href="#1594-çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯" class="headerlink" title="1594. çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-non-negative-product-in-a-matrix/">1594. çŸ©é˜µçš„æœ€å¤§éè´Ÿç§¯</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º <code>rows x cols</code> çš„çŸ©é˜µ <code>grid</code> ã€‚æœ€åˆï¼Œä½ ä½äºå·¦ä¸Šè§’ <code>(0, 0)</code> ï¼Œæ¯ä¸€æ­¥ï¼Œä½ å¯ä»¥åœ¨çŸ©é˜µä¸­ <strong>å‘å³</strong> æˆ– <strong>å‘ä¸‹</strong> ç§»åŠ¨ã€‚</p>
<p>åœ¨ä»å·¦ä¸Šè§’ <code>(0, 0)</code> å¼€å§‹åˆ°å³ä¸‹è§’ <code>(rows - 1, cols - 1)</code> ç»“æŸçš„æ‰€æœ‰è·¯å¾„ä¸­ï¼Œæ‰¾å‡ºå…·æœ‰ <strong>æœ€å¤§éè´Ÿç§¯</strong> çš„è·¯å¾„ã€‚è·¯å¾„çš„ç§¯æ˜¯æ²¿è·¯å¾„è®¿é—®çš„å•å…ƒæ ¼ä¸­æ‰€æœ‰æ•´æ•°çš„ä¹˜ç§¯ã€‚</p>
<p>è¿”å› <strong>æœ€å¤§éè´Ÿç§¯</strong> å¯¹**<code>10&lt;sup&gt;9&lt;/sup&gt;Â + 7</code>** <strong>å–ä½™</strong> çš„ç»“æœã€‚å¦‚æœæœ€å¤§ç§¯ä¸ºè´Ÿæ•°ï¼Œåˆ™è¿”å›<code>-1</code> ã€‚</p>
<p><strong>æ³¨æ„ï¼Œ</strong>å–ä½™æ˜¯åœ¨å¾—åˆ°æœ€å¤§ç§¯ä¹‹åæ‰§è¡Œçš„ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>],</span><br><span class="line">Â             [<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">-3</span>],</span><br><span class="line">Â             [<span class="number">-3</span>,<span class="number">-3</span>,<span class="number">-2</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">-1</span></span><br><span class="line">è§£é‡Šï¼šä» (<span class="number">0</span>, <span class="number">0</span>) åˆ° (<span class="number">2</span>, <span class="number">2</span>) çš„è·¯å¾„ä¸­æ— æ³•å¾—åˆ°éè´Ÿç§¯ï¼Œæ‰€ä»¥è¿”å› <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[<span class="number">1</span>,<span class="number">-2</span>,<span class="number">1</span>],</span><br><span class="line">Â             [<span class="number">1</span>,<span class="number">-2</span>,<span class="number">1</span>],</span><br><span class="line">Â             [<span class="number">3</span>,<span class="number">-4</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">8</span></span><br><span class="line">è§£é‡Šï¼šæœ€å¤§éè´Ÿç§¯å¯¹åº”çš„è·¯å¾„å·²ç»ç”¨ç²—ä½“æ ‡å‡º (<span class="number">1</span> * <span class="number">1</span> * <span class="number">-2</span> * <span class="number">-4</span> * <span class="number">1</span> = <span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">Â             [<span class="number">0</span>,<span class="number">-4</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šæœ€å¤§éè´Ÿç§¯å¯¹åº”çš„è·¯å¾„å·²ç»ç”¨ç²—ä½“æ ‡å‡º (<span class="number">1</span> * <span class="number">0</span> * <span class="number">-4</span> = <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[ <span class="number">1</span>, <span class="number">4</span>,<span class="number">4</span>,<span class="number">0</span>],</span><br><span class="line">Â             [<span class="number">-2</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">Â             [ <span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæœ€å¤§éè´Ÿç§¯å¯¹åº”çš„è·¯å¾„å·²ç»ç”¨ç²—ä½“æ ‡å‡º (<span class="number">1</span> * <span class="number">-2</span> * <span class="number">1</span> * <span class="number">-1</span> * <span class="number">1</span> * <span class="number">1</span> = <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= rows, cols &lt;= 15</code></li>
<li>  <code>-4 &lt;= grid[i][j] &lt;= 4</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å’Œä¸Šé¢ä¸¤é¢˜ä¸€æ ·ï¼Œéå¸¸å¥—è·¯çš„ DPï¼Œä½†æ˜¯æˆ‘ä¸€å¼€å§‹æƒ³æŠŠåˆå§‹åŒ–ç»™çœæ‰ï¼Œè°ƒäº†åŠå¤©å‘ç°ä¸å¤ªå¥½æã€‚å¤–å›´çš„ dp å–å€¼ä¼šå½±å“å†…éƒ¨çš„å–å€¼ï¼Œæ‰€ä»¥è¿˜æ˜¯è€è€å®å®æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œè€æ˜¯æƒ³å·æ‡’æœ‰æ—¶å€™å¯èƒ½ä¼šé€‚å¾—å…¶åï¼ˆå¥½æœªæ¥ç¬”è¯•ï¼‰</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProductPath</span><span class="params">(grid [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">var</span> m, n = <span class="built_in">len</span>(grid), <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line"> Â  Â <span class="keyword">var</span> MOD = <span class="type">int</span>(<span class="number">1e9</span>+<span class="number">7</span>)</span><br><span class="line"> Â  Â <span class="keyword">var</span> dp = <span class="built_in">make</span>([][][<span class="number">2</span>]<span class="type">int</span>, m)</span><br><span class="line"> Â  Â <span class="keyword">var</span> Max = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a &lt; b &#123;<span class="keyword">return</span> b&#125;; <span class="keyword">return</span> a&#125;</span><br><span class="line"> Â  Â <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a &gt; b &#123;<span class="keyword">return</span> b&#125;; <span class="keyword">return</span> a&#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â dp[i] = <span class="built_in">make</span>([][<span class="number">2</span>]<span class="type">int</span>, n)</span><br><span class="line"> Â  Â &#125;</span><br><span class="line"> Â  Â dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>] = grid[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"> Â  Â dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â dp[i][<span class="number">0</span>][<span class="number">0</span>] = grid[i][<span class="number">0</span>] * dp[i<span class="number">-1</span>][<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"> Â  Â  Â  Â dp[i][<span class="number">0</span>][<span class="number">1</span>] = dp[i][<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++ &#123;</span><br><span class="line"> Â  Â  Â  Â dp[<span class="number">0</span>][j][<span class="number">0</span>] = grid[<span class="number">0</span>][j] * dp[<span class="number">0</span>][j<span class="number">-1</span>][<span class="number">0</span>]</span><br><span class="line"> Â  Â  Â  Â dp[<span class="number">0</span>][j][<span class="number">1</span>] = dp[<span class="number">0</span>][j][<span class="number">0</span>]</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; m; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; n; j++ &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">if</span> grid[i][j] &gt; <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][j][<span class="number">0</span>] = Â grid[i][j] * Max(dp[i][j<span class="number">-1</span>][<span class="number">0</span>], dp[i<span class="number">-1</span>][j][<span class="number">0</span>])</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][j][<span class="number">1</span>] = Â grid[i][j] * Min(dp[i][j<span class="number">-1</span>][<span class="number">1</span>], dp[i<span class="number">-1</span>][j][<span class="number">1</span>])</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;<span class="keyword">else</span> <span class="keyword">if</span> grid[i][j] &lt; <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][j][<span class="number">0</span>] = Â grid[i][j] * Min(dp[i][j<span class="number">-1</span>][<span class="number">1</span>], dp[i<span class="number">-1</span>][j][<span class="number">1</span>])</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i][j][<span class="number">1</span>] = Â grid[i][j] * Max(dp[i][j<span class="number">-1</span>][<span class="number">0</span>], dp[i<span class="number">-1</span>][j][<span class="number">0</span>])</span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">if</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>][<span class="number">0</span>] &lt; <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> dp[m<span class="number">-1</span>][n<span class="number">-1</span>][<span class="number">0</span>] % MOD</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="221-æœ€å¤§æ­£æ–¹å½¢"><a href="#221-æœ€å¤§æ­£æ–¹å½¢" class="headerlink" title="221. æœ€å¤§æ­£æ–¹å½¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximal-square/">221. æœ€å¤§æ­£æ–¹å½¢</a></h2><p>åœ¨ä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« 1 çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>é€’æ¨å…¬å¼ï¼š<code>dp[i][j]=1+min(dp[i-1][j-1],dp[i-1][j],dp[i][j-1])</code>  æœ‰çš„ç±»ä¼¼çŸ­æ¿ç†è®ºï¼Œå–å†³äºæœ€å°çš„å“ªä¸€ä¸ªæ­£æ–¹å½¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximalSquare</span><span class="params">(<span class="type">char</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (matrix==<span class="literal">null</span> || matrix.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> m=matrix.length;</span><br><span class="line">    <span class="type">int</span> n=matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//è¿™é‡Œ+1 å¤„ç†è¾¹ç•Œ</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (matrix[i-<span class="number">1</span>][j-<span class="number">1</span>]==<span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                dp[i][j]=<span class="number">1</span>+Math.min(dp[i-<span class="number">1</span>][j-<span class="number">1</span>],Math.min(dp[i][j-<span class="number">1</span>],dp[i-<span class="number">1</span>][j]));</span><br><span class="line">                max=Math.max(max,dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max*max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é¢˜è¿˜æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯è¾¹ç•Œçš„å¤„ç†ï¼Œè¿™é‡Œå®ç°çš„ä»£ç ä¸­<code>dp[i][j]</code> å…¶å®è¡¨ç¤ºçš„æ˜¯ä»¥ <code>matrix[i-1][j-1]</code> ä½œä¸ºå³ä¸‹è§’ç»“å°¾çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ï¼Œè¿™æ ·çš„è¯å°±ä¸ç”¨è€ƒè™‘ä¸Šä¸‹ä¸¤æ¡è¾¹çš„è¾¹ç•Œ caseï¼Œç›¸å½“äºåœ¨ dp æ•°ç»„ä¸Šä¸‹è¾¹ç•Œä¹‹å¤–åˆåŠ äº†ä¸€å±‚ 0</p>
<blockquote>
<p>åˆ°è¿™é‡Œæˆ‘ä¹Ÿå¤§è‡´æ˜ç™½äº†ä¸€äº›åŠ¨æ€è§„åˆ’çš„é¢˜ç›®çš„é€’æ¨å†™æ³•ä¸ºéƒ½æ˜¯ä» 1 å¼€å§‹äº†ï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¼–è¾‘è·ç¦»</p>
</blockquote>
<h2 id="1277-ç»Ÿè®¡å…¨ä¸º-1-çš„æ­£æ–¹å½¢å­çŸ©é˜µ"><a href="#1277-ç»Ÿè®¡å…¨ä¸º-1-çš„æ­£æ–¹å½¢å­çŸ©é˜µ" class="headerlink" title="1277. ç»Ÿè®¡å…¨ä¸º 1 çš„æ­£æ–¹å½¢å­çŸ©é˜µ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/count-square-submatrices-with-all-ones/">1277. ç»Ÿè®¡å…¨ä¸º 1 çš„æ­£æ–¹å½¢å­çŸ©é˜µ</a></h2><p>ç»™ä½ ä¸€ä¸ª <code>m * n</code> çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„å…ƒç´ ä¸æ˜¯ <code>0</code> å°±æ˜¯ <code>1</code>ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›å…¶ä¸­å®Œå…¨ç”± <code>1</code> ç»„æˆçš„ <strong>æ­£æ–¹å½¢</strong> å­çŸ©é˜µçš„ä¸ªæ•°ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix =</span><br><span class="line">[</span><br><span class="line">  [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">  [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">15</span></span><br><span class="line">è§£é‡Šï¼š </span><br><span class="line">è¾¹é•¿ä¸º <span class="number">1</span> çš„æ­£æ–¹å½¢æœ‰ <span class="number">10</span> ä¸ªã€‚</span><br><span class="line">è¾¹é•¿ä¸º <span class="number">2</span> çš„æ­£æ–¹å½¢æœ‰ <span class="number">4</span> ä¸ªã€‚</span><br><span class="line">è¾¹é•¿ä¸º <span class="number">3</span> çš„æ­£æ–¹å½¢æœ‰ <span class="number">1</span> ä¸ªã€‚</span><br><span class="line">æ­£æ–¹å½¢çš„æ€»æ•° = <span class="number">10</span> + <span class="number">4</span> + <span class="number">1</span> = <span class="number">15.</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = </span><br><span class="line">[</span><br><span class="line">  [<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line">  [<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">è¾¹é•¿ä¸º <span class="number">1</span> çš„æ­£æ–¹å½¢æœ‰ <span class="number">6</span> ä¸ªã€‚ </span><br><span class="line">è¾¹é•¿ä¸º <span class="number">2</span> çš„æ­£æ–¹å½¢æœ‰ <span class="number">1</span> ä¸ªã€‚</span><br><span class="line">æ­£æ–¹å½¢çš„æ€»æ•° = <span class="number">6</span> + <span class="number">1</span> = <span class="number">7.</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= arr.length &lt;= 300</code></li>
<li><code>1 &lt;= arr[0].length &lt;= 300</code></li>
<li><code>0 &lt;= arr[i][j] &lt;= 1</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>12.1 çš„å‘¨èµ›é¢˜ç›®ï¼Œå…¶å®å…ˆåšçš„ä¸Šé¢çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œç„¶åå‘ç°è¿™ä¸€é¢˜å’Œä¸Šé¢çš„ä¸€æ ·ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSquares</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (matrix==<span class="literal">null</span> || matrix.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> m=matrix.length;</span><br><span class="line">    <span class="type">int</span> n=matrix[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span> [][]dp=<span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (matrix[i-<span class="number">1</span>][j-<span class="number">1</span>]==<span class="number">1</span>) &#123;</span><br><span class="line">                dp[i][j]=Math.min(dp[i-<span class="number">1</span>][j-<span class="number">1</span>],Math.min(dp[i][j-<span class="number">1</span>],dp[i-<span class="number">1</span>][j]))+<span class="number">1</span>;</span><br><span class="line">                res+=dp[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ‘¸ä¸€æ ·ï¼Œç†è§£ä¸€ç‚¹å°± okï¼Œ<strong>ä»¥<code>matrix[i][j]</code> ä¸ºå³ä¸‹è§’çš„æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿ï¼Œå°±æ˜¯ä»¥è¿™ä¸ªç‚¹ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢çš„æ•°é‡ï¼ï¼ï¼</strong></p>
<h2 id="1139-æœ€å¤§çš„ä»¥-1-ä¸ºè¾¹ç•Œçš„æ­£æ–¹å½¢"><a href="#1139-æœ€å¤§çš„ä»¥-1-ä¸ºè¾¹ç•Œçš„æ­£æ–¹å½¢" class="headerlink" title="1139. æœ€å¤§çš„ä»¥ 1 ä¸ºè¾¹ç•Œçš„æ­£æ–¹å½¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/largest-1-bordered-square/">1139. æœ€å¤§çš„ä»¥ 1 ä¸ºè¾¹ç•Œçš„æ­£æ–¹å½¢</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹² <code>0</code> å’Œ <code>1</code> ç»„æˆçš„äºŒç»´ç½‘æ ¼Â <code>grid</code>ï¼Œè¯·ä½ æ‰¾å‡ºè¾¹ç•Œå…¨éƒ¨ç”± <code>1</code> ç»„æˆçš„æœ€å¤§ <strong>æ­£æ–¹å½¢</strong> å­ç½‘æ ¼ï¼Œå¹¶è¿”å›è¯¥å­ç½‘æ ¼ä¸­çš„å…ƒç´ æ•°é‡ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>0</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šgrid = [[<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= grid.length &lt;= 100</code></li>
<li>  <code>1 &lt;= grid[0].length &lt;= 100</code></li>
<li>  <code>grid[i][j]</code> ä¸ºÂ <code>0</code>Â æˆ–Â <code>1</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™ä¸ªé¢˜ç›®è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œç¬¬ä¸€æ¬¡çœ‹äº†ä»¥åæ²¡å•¥æ€è·¯ï¼Œçœ‹äº†é¢˜è§£å¯¹ dp æ•°ç»„çš„çš„å®šä¹‰åå°±æ˜ç™½äº†ï¼Œä»Šå¤©æ¥å®ç°ä¸‹ï¼ŒWA äº† 2 æ¬¡ï¼Œéƒ½ WA çš„æœ‰ç†æœ‰æ®ï¼Œå¾ˆèˆ’æœï¼Œåšè¿™ç§é¢˜å°±å¾ˆèˆ’æœ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">largest1BorderedSquare</span><span class="params">(<span class="type">int</span>[][] grid)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> grid.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> grid[<span class="number">0</span>].length;</span><br><span class="line">    <span class="comment">//dp[i][j][0]: i,j å·¦è¾¹è¿ç»­çš„ 1 çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="comment">//dp[i][j][1]: i,j ä¸Šè¾¹è¿ç»­çš„ 1 çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span>[][][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i-<span class="number">1</span>][j-<span class="number">1</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">                dp[i][j][<span class="number">0</span>] = <span class="number">1</span> + dp[i][j-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">                dp[i][j][<span class="number">1</span>] = <span class="number">1</span> + dp[i-<span class="number">1</span>][j][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="comment">//WA ç‚¹ 2ï¼šæœ€çŸ­çš„é‚£æ¡è¾¹ä¸ä¸€å®šæ˜¯è¾¹é•¿ï¼Œå¯ä»¥æ›´çŸ­æ‰€ä»¥éœ€è¦éå†æ‰€æœ‰å°äºæœ€çŸ­è¾¹é•¿çš„é•¿åº¦</span></span><br><span class="line">            <span class="comment">//æ‰€ä»¥é¢˜ç›®çš„æ•°æ®èŒƒå›´æ˜¯ä¸ä¼šéª—äººçš„ï¼Œç»™çš„ 100 é‚£ä¹ˆæ—¶é—´å¤æ‚åº¦ä¸€å®šä¸æ˜¯ N2 çš„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">side</span> <span class="operator">=</span> Math.min(dp[i][j][<span class="number">0</span>], dp[i][j][<span class="number">1</span>]); side &gt;= <span class="number">1</span>; side--)&#123;</span><br><span class="line">                <span class="comment">//WA ç‚¹ 1ï¼šå¤§äºç­‰äº</span></span><br><span class="line">                <span class="keyword">if</span> (dp[i][j-side+<span class="number">1</span>][<span class="number">1</span>] &gt;= side &amp;&amp; dp[i-side+<span class="number">1</span>][j][<span class="number">0</span>] &gt;= side)&#123;</span><br><span class="line">                    res = Math.max(res, side);</span><br><span class="line">                    <span class="keyword">break</span>; <span class="comment">//æ›´çŸ­çš„å°±æ²¡å¿…è¦è€ƒè™‘äº†</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res * res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®è¿™ä¸ªé¢˜ç›®çš„å…³é”®å°±åœ¨äºçŠ¶æ€çš„å®šä¹‰ï¼Œå¦‚ä½•å»æ„é€ ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œä¸€å›¾èƒœåƒè¨€ï¼ˆPPT ç”»å›¾è¿˜æ˜¯æŒºæ–¹ä¾¿ï¼‰<br><img src="http://static.imlgw.top/blog/20200730/2NpjXbbGcEjQ.png?imageslim" alt="mark"><br>ï¼ˆä¹‹å‰çš„å›¾æœ‰ç‚¹å°é—®é¢˜ï¼Œæ”¹äº†ä¸‹ï¼‰</p>
<p>æ±‚ä»¥æŸä¸ªç‚¹ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢ï¼Œé¦–å…ˆæˆ‘ä»¬è€ƒè™‘è¿™ä¸ªç‚¹ä¸ºå³ä¸‹è§’å¯èƒ½æ„æˆçš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿æ˜¯å¤šå¤§</p>
<p>å¾ˆæ˜æ˜¾åº”è¯¥æ˜¯è¯¥ç‚¹å·¦è¾¹å’Œä¸Šè¾¹è¿ç»­ 1 ä¸ªæ•°çš„æœ€å°å€¼ï¼Œå¦‚ä¸Šå›¾çš„ï¼ˆ6ï¼Œ5ï¼‰ç‚¹ï¼Œæœ€å¤§çš„å¯èƒ½è¾¹é•¿å°±åº”è¯¥æ˜¯ 6ï¼Œç„¶åæˆ‘ä»¬æšä¸¾æ‰€æœ‰çš„å°äºç­‰äº 6 å¤§äºç­‰äº 1 çš„è¾¹é•¿ sideï¼ŒéªŒè¯ side èƒ½å¦æ„æˆæ­£æ–¹å½¢</p>
<p>éªŒè¯ side æ˜¯å¦åˆæ³•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ï¼ˆ6ï¼Œ5ï¼‰ä¸Šè¾¹è·ç¦»ä¸º side çš„ç‚¹çš„å·¦è¾¹è¿ç»­ 1 çš„ä¸ªæ•°æ˜¯å¦å¤§äºç­‰äº sideï¼ˆ<code>dp[i-side+1][j][0] &gt;= side</code>ï¼‰ï¼Œä»¥åŠå·¦è¾¹è·ç¦»ä¸º side çš„ç‚¹çš„ä¸Šè¾¹è¿ç»­çš„ 1 çš„ä¸ªæ•°æ˜¯å¦å¤§äºç­‰äº sideï¼ˆ<code>dp[i][j-side+1][1] &gt;= side</code>ï¼‰ï¼Œå¦‚æœéƒ½å¤§äºç­‰äº side é‚£ä¹ˆè¯¥ side å°±æ˜¯åˆæ³•çš„ï¼Œæˆ‘ä»¬ç»Ÿè®¡è¿™äº›åˆæ³•çš„ side çš„æœ€å¤§å€¼å°± ok äº†</p>
<blockquote>
<p>åœ¨ lc ä¸Šæ°´äº†ä¸€å‘ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/largest-1-bordered-square/solution/java-dong-tai-gui-hua-by-resolmi/">é¢˜è§£</a></p>
</blockquote>
<h2 id="44-é€šé…ç¬¦åŒ¹é…"><a href="#44-é€šé…ç¬¦åŒ¹é…" class="headerlink" title="44. é€šé…ç¬¦åŒ¹é…"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/wildcard-matching/">44. é€šé…ç¬¦åŒ¹é…</a></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² (s) å’Œä¸€ä¸ªå­—ç¬¦æ¨¡å¼ (p) ï¼Œå®ç°ä¸€ä¸ªæ”¯æŒ â€˜?â€™ å’Œ â€˜*â€™ çš„é€šé…ç¬¦åŒ¹é…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;?&#x27;</span> å¯ä»¥åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚</span><br><span class="line"><span class="string">&#x27;*&#x27;</span> å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç©ºå­—ç¬¦ä¸²ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªå­—ç¬¦ä¸²å®Œå…¨åŒ¹é…æ‰ç®—åŒ¹é…æˆåŠŸã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>s å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ã€‚</li>
<li>p å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ ? å’Œ *ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;aa&quot;</span></span><br><span class="line">p = <span class="string">&quot;a&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&quot;a&quot;</span> æ— æ³•åŒ¹é… <span class="string">&quot;aa&quot;</span> æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;aa&quot;</span></span><br><span class="line">p = <span class="string">&quot;*&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&#x27;*&#x27;</span> å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;cb&quot;</span></span><br><span class="line">p = <span class="string">&quot;?a&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&#x27;?&#x27;</span> å¯ä»¥åŒ¹é… <span class="string">&#x27;c&#x27;</span>, ä½†ç¬¬äºŒä¸ª <span class="string">&#x27;a&#x27;</span> æ— æ³•åŒ¹é… <span class="string">&#x27;b&#x27;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;adceb&quot;</span></span><br><span class="line">p = <span class="string">&quot;*a*b&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šç¬¬ä¸€ä¸ª <span class="string">&#x27;*&#x27;</span> å¯ä»¥åŒ¹é…ç©ºå­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ª <span class="string">&#x27;*&#x27;</span> å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² <span class="string">&quot;dce&quot;</span>.</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;acdcb&quot;</span></span><br><span class="line">p = <span class="string">&quot;a*c?b&quot;</span></span><br><span class="line">è¾“å…¥ï¼š<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å…¶å®è¿™é¢˜è¿˜æœ‰ä¸€é“ç±»ä¼¼çš„é¢˜ï¼Œ<a href="http://imlgw.top/2019/10/10/leetcode-hui-su/#10-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D">10. æ­£åˆ™è¡¨è¾¾å¼ç”Ÿæˆ</a> æˆ‘æ”¾åœ¨å›æº¯é‡Œäº†ï¼Œå› ä¸º dp çš„è§£æ³•æš‚æ—¶è¿˜æ²¡èŠ±æ—¶é—´å»çœ‹ï¼Œæ„Ÿè§‰é€’å½’å¥½ç†è§£ä¸€ç‚¹ï¼Œåé¢æœ‰æ—¶é—´å†åŠ è¿›æ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isMatch</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨ s[0,i-1](s çš„å‰ i ä¸ªå­—ç¬¦ï¼‰,p[0,j-1](p çš„å‰ j ä¸ªå­—ç¬¦)æ˜¯å¦åŒ¹é…</span></span><br><span class="line">    <span class="type">boolean</span>[][] dp=<span class="keyword">new</span> <span class="title class_">boolean</span>[s.length()+<span class="number">1</span>][p.length()+<span class="number">1</span>];        </span><br><span class="line">    <span class="comment">//dp[i][0]=false dp[0][j] p[j]==&quot;*&quot;|&quot;?&quot;</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=p.length();j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p.charAt(j-<span class="number">1</span>)==<span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j]=dp[<span class="number">0</span>][j-<span class="number">1</span>]; <span class="comment">//dp[0][j]=true æ˜¯é”™çš„</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1. p[i]=p[j] dp[i][j]=dp[i-1][j-1]</span></span><br><span class="line">    <span class="comment">//2. p[j]=&quot;?&quot;  dp[i][j]=dp[i-1][j-1]</span></span><br><span class="line">    <span class="comment">//3. p[j]=&quot;*&quot;  dp[i][j]=dp[i-1][j] | dp[i][j-1]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=p.length();j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i-<span class="number">1</span>) == p.charAt(j-<span class="number">1</span>) || p.charAt(j-<span class="number">1</span>)==<span class="string">&#x27;?&#x27;</span>) &#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p.charAt(j-<span class="number">1</span>)==<span class="string">&#x27;*&#x27;</span>) &#123; <span class="comment">//abcd ab* | ab ab*</span></span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j]|dp[i][j-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[s.length()][p.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€è·¯éƒ½åœ¨æ³¨é‡Šé‡Œé¢äº†ï¼Œæ¯”æ­£åˆ™é‚£ä¸ªè¦ç®€å•ï¼Œæ¯”è¾ƒä¸å¥½æƒ³çš„ä¸€ç‚¹å°±æ˜¯ <code>dp[i][j]=dp[i-1][j]|dp[i][j-1]</code>å…¶å®åˆ†åˆ«å¯¹åº”çš„å°±æ˜¯ <code>*</code> <strong>åŒ¹é…ä»»æ„å­—ç¬¦</strong>çš„æƒ…å†µå’Œ<strong>åŒ¹é…ç©ºå­—ç¬¦</strong>çš„æƒ…å†µï¼ŒåŒ¹é…ä»»æ„å­—ç¬¦ä¸ºä»€ä¹ˆä¸æ˜¯<code>dp[i-1][j-1]</code>? å› ä¸º<code>*</code> ä¸ä»…ä»…åªå¯ä»¥åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œå®ƒå¯ä»¥åŒ¹é…ä»»æ„ä¸ªæ•°çš„ä»»æ„å­—ç¬¦ï¼Œå°±æ¯”å¦‚è¿™æ ·çš„<code>abcdï¼Œab*</code> çš„ï¼Œè¿™ç§æƒ…å†µå…¶å®æœ€ç»ˆè¿˜æ˜¯è½¬æ¢æˆäº†åŒ¹é…ç©ºå­—ç¬¦çš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯åŠ¨æ€è§„åˆ’çš„æ€æƒ³æ‰€åœ¨ã€‚</p>
<h2 id="10-æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"><a href="#10-æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…" class="headerlink" title="10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/regular-expression-matching/">10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</a></h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ <code>p</code>ï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ <code>&#39;.&#39;</code> å’Œ <code>&#39;*&#39;</code> çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;.&#x27;</span> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</span><br><span class="line"><span class="string">&#x27;*&#x27;</span> åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure>

<p>æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² s çš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>s å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ã€‚</li>
<li>p å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ . å’Œ *ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;aa&quot;</span></span><br><span class="line">p = <span class="string">&quot;a&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&quot;a&quot;</span> æ— æ³•åŒ¹é… <span class="string">&quot;aa&quot;</span> æ•´ä¸ªå­—ç¬¦ä¸²ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;aa&quot;</span></span><br><span class="line">p = <span class="string">&quot;a*&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šå› ä¸º <span class="string">&#x27;*&#x27;</span> ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ <span class="string">&#x27;a&#x27;</span>ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² <span class="string">&quot;aa&quot;</span> å¯è¢«è§†ä¸º <span class="string">&#x27;a&#x27;</span> é‡å¤äº†ä¸€æ¬¡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;ab&quot;</span></span><br><span class="line">p = <span class="string">&quot;.*&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&quot;.*&quot;</span> è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ<span class="string">&#x27;*&#x27;</span>ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ<span class="string">&#x27;.&#x27;</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;aab&quot;</span></span><br><span class="line">p = <span class="string">&quot;c*a*b&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šå› ä¸º <span class="string">&#x27;*&#x27;</span> è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ <span class="string">&#x27;c&#x27;</span> ä¸º <span class="number">0</span> ä¸ªï¼Œ<span class="string">&#x27;a&#x27;</span> è¢«é‡å¤ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² <span class="string">&quot;aab&quot;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">s = <span class="string">&quot;mississippi&quot;</span></span><br><span class="line">p = <span class="string">&quot;mis*is*p*.&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>dfs å›æº¯ï¼Œæš´åŠ›è§£æ³•ï¼ŒæŒºéš¾æ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isMatch</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> match(s,<span class="number">0</span>,p,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(String s,<span class="type">int</span> sIdx, String p,<span class="type">int</span> pIdx)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sIdx&gt;=s.length() &amp;&amp; pIdx&gt;=p.length()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pIdx&gt;=p.length()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿™é‡Œçš„åˆ¤æ–­å…¶å®ä¸å¤ªå¯¹ï¼Œä¹Ÿä¸èƒ½è¯´ä¸å¯¹ï¼Œä¼šç¨å¾®æ…¢ä¸€ç‚¹ï¼Œå› ä¸ºé¢˜ç›®ä¸­æ˜¯ä¸ä¼šç»™**è¿™æ ·çš„ case çš„</span></span><br><span class="line">    <span class="comment">//å¯ä»¥ç›´æ¥ä¸€æ¬¡è·³ä¸¤æ­¥åˆ¤æ–­æ˜¯ä¸æ˜¯*</span></span><br><span class="line">    <span class="keyword">if</span> (sIdx == s.length()) &#123;</span><br><span class="line">        <span class="comment">//åé¢æ²¡æœ‰*çš„æƒ…å†µ aaa aaaa</span></span><br><span class="line">        <span class="keyword">if</span> (pIdx==p.length()-<span class="number">1</span> &amp;&amp; p.charAt(pIdx)!=<span class="string">&#x27;*&#x27;</span>) &#123; <span class="comment">//p ä¹Ÿåˆ°å°½å¤´ï¼Œå¹¶ä¸”ä¸ä¸º*</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(pIdx&lt;p.length())&#123; <span class="comment">//p æ²¡åˆ°å°½å¤´ï¼Œæ£€æŸ¥åé¢çš„æ˜¯å¦æœ‰ä¸¤ä¸ªè¿ç»­çš„é*</span></span><br><span class="line">            <span class="keyword">if</span> (p.charAt(pIdx) != <span class="string">&#x27;*&#x27;</span> &amp;&amp; (pIdx+<span class="number">1</span>&lt;p.length() &amp;&amp; p.charAt(pIdx+<span class="number">1</span>)!=<span class="string">&#x27;*&#x27;</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pIdx++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//aaa aaa*c</span></span><br><span class="line">        <span class="keyword">return</span> p.charAt(pIdx-<span class="number">1</span>)==<span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pIdx+<span class="number">1</span> &lt; p.length() &amp;&amp; p.charAt(pIdx+<span class="number">1</span>) ==<span class="string">&#x27;*&#x27;</span>) &#123; <span class="comment">//pIdx ä¸‹ä¸€ä¸ªæ˜¯ *</span></span><br><span class="line">        <span class="comment">//*åŒ¹é…è‡³å°‘ä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span> ((s.charAt(sIdx) == p.charAt(pIdx) || p.charAt(pIdx)==<span class="string">&#x27;.&#x27;</span>) &amp;&amp; match(s,sIdx+<span class="number">1</span>,p,pIdx)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//*åŒ¹é… 0 ä¸ª</span></span><br><span class="line">        <span class="keyword">return</span> match(s,sIdx,p,pIdx+<span class="number">2</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//pIdx ä¸‹ä¸€ä¸ªä¸æ˜¯*</span></span><br><span class="line">        <span class="keyword">if</span> ((p.charAt(pIdx) == s.charAt(sIdx) || p.charAt(pIdx)==<span class="string">&#x27;.&#x27;</span>) &amp;&amp; match(s,sIdx+<span class="number">1</span>,p,pIdx+<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é¢˜è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œæ¯•ç«Ÿæ˜¯ hard é¢˜ï¼Œæˆ‘ä¹Ÿæ˜¯çœ‹äº†é¢˜è§£æ‰å†™å‡ºæ¥ï¼Œæ ¸å¿ƒå°±æ˜¯è¦æŠŠé¢˜ç›®æ„æ€ç†è§£å¯¹ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰åšè®°å¿†åŒ–ï¼Œæ‡’å¾—å†™</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ä»–æ¥äº†ä»–æ¥äº†ï¼Œä»–å¸¦ç€ dp è§£æ³•æ¥äº†ï¼Œç»ˆäºè¿˜æ˜¯æŠŠ dp çš„è§£æ³•è¡¥ä¸Šæ¥äº†ï¼Œå‚è€ƒ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/regular-expression-matching/solution/dong-tai-gui-hua-si-yao-su-by-a380922457-5/">é¢˜è§£ </a> ï¼Œæ³¨æ„ä¸‹æ ‡çš„è½¬æ¢ï¼Œè¿™é‡Œå®¹æ˜“è¢«ç»•è¿›å»ï¼Œè¯¦ç»†çš„éƒ½åœ¨æ³¨é‡Šä¸­äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//update: 2020.4.12</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isMatch</span><span class="params">(String text, String pattern)</span> &#123;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨ text[0,i) å’Œ pattern[0,j) æ˜¯å¦åŒ¹é…</span></span><br><span class="line">    <span class="type">boolean</span>[][] dp=<span class="keyword">new</span> <span class="title class_">boolean</span>[text.length()+<span class="number">1</span>][pattern.length()+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//éƒ½ä¸ºç©ºçš„æ—¶å€™è‚¯å®šæ˜¯åŒ¹é…çš„</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//pattern ä¸ºç©ºï¼Œtext ä¸ä¸ºç©ºè‚¯å®šæ˜¯æ— æ³•åŒ¹é…ï¼Œé»˜è®¤ false, ä¸ç”¨å¤„ç†</span></span><br><span class="line">    <span class="comment">//text ä¸ºç©ºï¼Œpattern ä¸ä¸ºç©ºéœ€è¦é¢å¤–åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=pattern.length();i++)&#123;</span><br><span class="line">        dp[<span class="number">0</span>][i]=pattern.charAt(i-<span class="number">1</span>)==<span class="string">&#x27;*&#x27;</span>&amp;&amp;dp[<span class="number">0</span>][i-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=text.length();i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=pattern.length();j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(singleMatch(text,pattern,i-<span class="number">1</span>,j-<span class="number">1</span>))&#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pattern.charAt(j-<span class="number">1</span>)==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                <span class="comment">//j ä¸€å®šæ˜¯&gt;=2 çš„ï¼Œp å¦‚æœæ˜¯*å¼€å¤´å°±æ˜¯é”™è¯¯çš„è¯­æ³•ï¼Œä¸è¿‡ lc å…¶å®ä¹Ÿæ²¡æœ‰è¿™æ ·çš„ case</span></span><br><span class="line">                <span class="keyword">if</span>(j&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//ab abb*    --&gt; &#x27;*&#x27;åŒ¹é… 0 ä¸ª b</span></span><br><span class="line">                <span class="comment">//abbbbb ab* --&gt; &#x27;*&#x27;åŒ¹é…å¤šä¸ª b</span></span><br><span class="line">                <span class="comment">//æ³¨æ„ dp[i-1][j] å’Œ text.charAt(i-1) çš„ i-1 å«ä¹‰æ˜¯ä¸ä¸€æ ·çš„</span></span><br><span class="line">                <span class="comment">//text.charAt(i-1) çš„ i-1 å…¶å®æŒ‡çš„æ˜¯å½“å‰å…ƒç´ ï¼Œè€Œ dp[i-1][j] ä¸­çš„ i-1 æ˜¯å‰ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="comment">//abc ab*</span></span><br><span class="line">                dp[i][j]=dp[i][j-<span class="number">2</span>] || (singleMatch(text,pattern,i-<span class="number">1</span>,j-<span class="number">2</span>) &amp;&amp; dp[i-<span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[text.length()][pattern.length()];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">singleMatch</span><span class="params">(String s,String p,<span class="type">int</span> i,<span class="type">int</span> j)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s.charAt(i)==p.charAt(j) || p.charAt(j)==<span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœç„¶è¿˜æ˜¯åŠ¨æ€è§„åˆ’ç®€æ´ï¼Œè€Œä¸”ææ‡‚ä¹‹åä¹Ÿå¾ˆå¥½ç†è§£~~</p>
<h2 id="1326-çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®"><a href="#1326-çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®" class="headerlink" title="1326. çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-number-of-taps-to-open-to-water-a-garden/">1326. çŒæº‰èŠ±å›­çš„æœ€å°‘æ°´é¾™å¤´æ•°ç›®</a></h2><p>åœ¨ x è½´ä¸Šæœ‰ä¸€ä¸ªä¸€ç»´çš„èŠ±å›­ã€‚èŠ±å›­é•¿åº¦ä¸º nï¼Œä»ç‚¹ 0 å¼€å§‹ï¼Œåˆ°ç‚¹ n ç»“æŸã€‚</p>
<p>èŠ±å›­é‡Œæ€»å…±æœ‰ n + 1 ä¸ªæ°´é¾™å¤´ï¼Œåˆ†åˆ«ä½äº [0, 1, â€¦, n] ã€‚</p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n å’Œä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•´æ•°æ•°ç»„ ranges ï¼Œå…¶ä¸­ ranges[i] ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰è¡¨ç¤ºï¼šå¦‚æœæ‰“å¼€ç‚¹ i å¤„çš„æ°´é¾™å¤´ï¼Œå¯ä»¥çŒæº‰çš„åŒºåŸŸä¸º [i -  ranges[i], i + ranges[i]] ã€‚</p>
<p>è¯·ä½ è¿”å›å¯ä»¥çŒæº‰æ•´ä¸ªèŠ±å›­çš„ æœ€å°‘æ°´é¾™å¤´æ•°ç›® ã€‚å¦‚æœèŠ±å›­å§‹ç»ˆå­˜åœ¨æ— æ³•çŒæº‰åˆ°çš„åœ°æ–¹ï¼Œè¯·ä½ è¿”å› -1 ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/02/03/kAPc2ELusMa9qJZ.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">5</span>, ranges = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ç‚¹ <span class="number">0</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [-<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">ç‚¹ <span class="number">1</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [-<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line">ç‚¹ <span class="number">2</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">ç‚¹ <span class="number">3</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">ç‚¹ <span class="number">4</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [<span class="number">4</span>,<span class="number">4</span>]</span><br><span class="line">ç‚¹ <span class="number">5</span> å¤„çš„æ°´é¾™å¤´å¯ä»¥çŒæº‰åŒºé—´ [<span class="number">5</span>,<span class="number">5</span>]</span><br><span class="line">åªéœ€è¦æ‰“å¼€ç‚¹ <span class="number">1</span> å¤„çš„æ°´é¾™å¤´å³å¯çŒæº‰æ•´ä¸ªèŠ±å›­ [<span class="number">0</span>,<span class="number">5</span>] ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">3</span>, ranges = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">è¾“å‡ºï¼š-<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šå³ä½¿æ‰“å¼€æ‰€æœ‰æ°´é¾™å¤´ï¼Œä½ ä¹Ÿæ— æ³•çŒæº‰æ•´ä¸ªèŠ±å›­ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">7</span>, ranges = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">8</span>, ranges = [<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">8</span>, ranges = [<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= n &lt;= 10^4</code></li>
<li><code>ranges.length == n + 1</code></li>
<li><code>0 &lt;= ranges[i] &lt;= 100</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>172 å‘¨èµ›çš„æœ€åä¸€é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minTaps</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>[] ranges)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>]; <span class="comment">//æµ‡æº‰ i ä½ç½®å‰éœ€è¦æœ€å°‘çš„æ°´é¾™å¤´</span></span><br><span class="line">    Arrays.fill(dp,Integer.MAX_VALUE);</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        <span class="type">int</span> left=Math.max(<span class="number">0</span>,i-ranges[i]);</span><br><span class="line">        <span class="type">int</span> right=Math.min(n,i+ranges[i]);</span><br><span class="line">        <span class="keyword">if</span> (dp[left]==Integer.MAX_VALUE) &#123; <span class="comment">//å·¦è¾¹ç•Œä¸å¯è¾¾</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=left+<span class="number">1</span>;j&lt;=right;j++) &#123;</span><br><span class="line">            dp[j]=Math.min(dp[j],dp[left]+<span class="number">1</span>); <span class="comment">//èŒƒå›´å†…çš„åŒºåŸŸ dp å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n]==Integer.MAX_VALUE?-<span class="number">1</span>:dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€è§„åˆ’çš„è§£æ³•ï¼Œå¯¹æ¯ä¸ªæ°´é¾™å¤´æ‰€è¦†ç›–çš„åŒºåŸŸè¿›è¡Œé€’æ¨ï¼Œdp[i] ä»£è¡¨æµ‡çŒ<code>0 ~ i</code> ä½ç½®åŒºåŸŸæ‰€éœ€è¦çš„æœ€å°‘çš„æ°´å¤´æ‰€ä»¥å¾ˆå®¹æ˜“å¾—åˆ°é€’æ¨å…¬å¼<code>dp[j]=Math.min(dp[j],dp[left]+1)</code>  ï¼Œæ•´ä½“è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è´ªå¿ƒç®—æ³•ï¼Œå’Œ <a href="http://imlgw.top/2020/01/21/leetcode-tan-xin/">è´ªå¿ƒä¸“é¢˜</a> ä¸­çš„ <a href="http://imlgw.top/2020/01/21/leetcode-tan-xin/#1024-%E8%A7%86%E9%A2%91%E6%8B%BC%E6%8E%A5">1024. è§†é¢‘å‰ªè¾‘</a> æ˜¯ä¸€æ ·çš„é¢˜ç›®</p>
<p>æœ‰æ—¶é—´å†æ¥è¡¥å§</p>
<h2 id="1335-å·¥ä½œè®¡åˆ’çš„æœ€ä½éš¾åº¦"><a href="#1335-å·¥ä½œè®¡åˆ’çš„æœ€ä½éš¾åº¦" class="headerlink" title="1335. å·¥ä½œè®¡åˆ’çš„æœ€ä½éš¾åº¦"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-difficulty-of-a-job-schedule/">1335. å·¥ä½œè®¡åˆ’çš„æœ€ä½éš¾åº¦</a></h2><p>ä½ éœ€è¦åˆ¶å®šä¸€ä»½ d å¤©çš„å·¥ä½œè®¡åˆ’è¡¨ã€‚å·¥ä½œä¹‹é—´å­˜åœ¨ä¾èµ–ï¼Œè¦æƒ³æ‰§è¡Œç¬¬ i é¡¹å·¥ä½œï¼Œä½ å¿…é¡»å®Œæˆå…¨éƒ¨ j é¡¹å·¥ä½œï¼ˆ <code>0 &lt;= j &lt; i</code>ï¼‰ã€‚</p>
<p>ä½ æ¯å¤© <strong>è‡³å°‘</strong> éœ€è¦å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å·¥ä½œè®¡åˆ’çš„æ€»éš¾åº¦æ˜¯è¿™ <code>d</code> å¤©æ¯ä¸€å¤©çš„éš¾åº¦ä¹‹å’Œï¼Œè€Œä¸€å¤©çš„å·¥ä½œéš¾åº¦æ˜¯å½“å¤©åº”è¯¥å®Œæˆå·¥ä½œçš„æœ€å¤§éš¾åº¦ã€‚</p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>jobDifficulty</code> å’Œä¸€ä¸ªæ•´æ•° dï¼Œåˆ†åˆ«ä»£è¡¨å·¥ä½œéš¾åº¦å’Œéœ€è¦è®¡åˆ’çš„å¤©æ•°ã€‚ç¬¬ i é¡¹å·¥ä½œçš„éš¾åº¦æ˜¯ <code>jobDifficulty[i]</code>ã€‚</p>
<p>è¿”å›æ•´ä¸ªå·¥ä½œè®¡åˆ’çš„ <strong>æœ€å°éš¾åº¦</strong> ã€‚å¦‚æœæ— æ³•åˆ¶å®šå·¥ä½œè®¡åˆ’ï¼Œåˆ™è¿”å› -1 ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/01/27/ipKvNZQASOhVmdI.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šjobDifficulty = [<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>], d = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šç¬¬ä¸€å¤©ï¼Œæ‚¨å¯ä»¥å®Œæˆå‰ <span class="number">5</span> é¡¹å·¥ä½œï¼Œæ€»éš¾åº¦ = <span class="number">6.</span></span><br><span class="line">ç¬¬äºŒå¤©ï¼Œæ‚¨å¯ä»¥å®Œæˆæœ€åä¸€é¡¹å·¥ä½œï¼Œæ€»éš¾åº¦ = <span class="number">1.</span></span><br><span class="line">è®¡åˆ’è¡¨çš„éš¾åº¦ = <span class="number">6</span> + <span class="number">1</span> = <span class="number">7</span> </span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šjobDifficulty = [<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>], d = <span class="number">4</span></span><br><span class="line">è¾“å‡ºï¼š-<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šå°±ç®—ä½ æ¯å¤©å®Œæˆä¸€é¡¹å·¥ä½œï¼Œä»ç„¶æœ‰ä¸€å¤©æ˜¯ç©ºé—²çš„ï¼Œä½ æ— æ³•åˆ¶å®šä¸€ä»½èƒ½å¤Ÿæ»¡è¶³æ—¢å®šå·¥ä½œæ—¶é—´çš„è®¡åˆ’è¡¨ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šjobDifficulty = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>], d = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šå·¥ä½œè®¡åˆ’ä¸ºæ¯å¤©ä¸€é¡¹å·¥ä½œï¼Œæ€»éš¾åº¦ä¸º <span class="number">3</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šjobDifficulty = [<span class="number">7</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">1</span>], d = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">15</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>173 å‘¨èµ›çš„æœ€åä¸€é“ dp é¢˜ï¼Œäº‹åä¸€ä¸ªå°æ—¶å·¦å³ç‹¬ç«‹çš„ acï¼Œè¿˜æ˜¯æŒºèˆ’æœçš„ï¼Œå¸Œæœ›ä»¥åèƒ½æ›´å¿« ac</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDifficulty</span><span class="params">(<span class="type">int</span>[] jobDifficulty, <span class="type">int</span> d)</span> &#123;</span><br><span class="line">    <span class="type">int</span> jlen=jobDifficulty.length;</span><br><span class="line">    <span class="keyword">if</span>(jlen&lt;d)&#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][j]   ç¬¬ i å¤©å®Œæˆå‰ j é¡¹ä»»åŠ¡çš„æœ€ä½éš¾åº¦</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[d][jlen];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dp.length;i++)&#123;</span><br><span class="line">        Arrays.fill(dp[i],Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;jlen;j++)&#123;</span><br><span class="line">        max=Math.max(max,jobDifficulty[j]);</span><br><span class="line">        dp[<span class="number">0</span>][j]=max;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;d;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;jlen;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=j-<span class="number">1</span>;k&gt;=i-<span class="number">1</span>;k--)&#123;</span><br><span class="line">                dp[i][j]=Math.min(dp[i][j], dp[i-<span class="number">1</span>][k]+maxDifficulty(jobDifficulty,k+<span class="number">1</span>,j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[d-<span class="number">1</span>][jlen-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDifficulty</span><span class="params">(<span class="type">int</span>[] jobDifficulty,<span class="type">int</span> left,<span class="type">int</span> right)</span>&#123;</span><br><span class="line">    <span class="type">int</span> max=jobDifficulty[left];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=left;i&lt;=right;i++)&#123;</span><br><span class="line">        max=Math.max(max,jobDifficulty[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒçš„é€’æ¨å…¬å¼ï¼š <code>dp[i][j]=min(dp[i][j],dp[i-1][0~k]+max(k+1,j))</code> </p>
<p>å…¶å®ä¹Ÿä¸æ˜¯ä¸€å¼€å§‹å°±æƒ³åˆ°äº†è¿™ä¸ªé€’æ¨å…¬å¼ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šçš„æ˜¯ç”¨å‡ ç»´æ•°ç»„å’Œé€’æ¨æ•°ç»„çš„å«ä¹‰ï¼Œè¿™ä¸ªé¢˜ç›®ä¸¤ä¸ªå˜é‡ï¼šå¤©æ•°å’Œå·¥ä½œé‡ï¼›æ‰€ä»¥åº”è¯¥æ˜¯äºŒç»´çš„ç»“æ„ï¼Œ<code>dp[i][j]</code> ç„¶åå¯¹åº”é¢˜ç›®æ‰€è¦æ±‚çš„ä¸œè¥¿ï¼Œå…¶å®å°±å¯ä»¥ç¡®å®š dp æ•°ç»„çš„å«ä¹‰</p>
<p><code>dp[i][j]</code> çš„å«ä¹‰æ˜¯å‰<code>i</code>å¤©å®Œæˆå‰<code>j</code>é¡¹å·¥ä½œçš„æœ€ä½éš¾åº¦ï¼Œæœ€åè¿”å›çš„ç»“æœå°±æ˜¯<code>dp[d-1][jlen-1]</code></p>
<p>ä½†æ˜¯ä¸Šé¢è¿™ä¸ªè§£æ³•æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œ<code>O(dN^3)</code>ï¼Œå…¶å®å¯ä»¥åšä¸€ä¸‹é¢„å¤„ç†é™ä½æ—¶é—´å¤æ‚åº¦</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>é¢„å¤„ç†çš„åœ°æ–¹ä¹Ÿå†™æˆäº†åŠ¨æ€è§„åˆ’ hahaha~ å…¶å®å°±æ˜¯æ±‚ä¸€ä¸ª<strong>åŒºé—´å’Œ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDifficulty</span><span class="params">(<span class="type">int</span>[] jobDifficulty, <span class="type">int</span> d)</span> &#123;</span><br><span class="line">    <span class="type">int</span> jlen=jobDifficulty.length;</span><br><span class="line">    <span class="keyword">if</span>(jlen&lt;d)&#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][j]   å‰ i å¤©å®Œæˆå‰ j é¡¹ä»»åŠ¡çš„æœ€ä½éš¾åº¦</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[d][jlen];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dp.length;i++)&#123;</span><br><span class="line">        Arrays.fill(dp[i],Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é¢„å¤„ç†</span></span><br><span class="line">    <span class="type">int</span>[][] maxRange=<span class="keyword">new</span> <span class="title class_">int</span>[jlen][jlen];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;jlen;i++)&#123;</span><br><span class="line">        maxRange[i][i]=jobDifficulty[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;jlen;j++) &#123;</span><br><span class="line">            <span class="comment">//è¿™é‡Œä¹Ÿæ˜¯ä¸ªåŠ¨æ€è§„åˆ’ hahaha~</span></span><br><span class="line">            maxRange[i][j]=Math.max(maxRange[i][j-<span class="number">1</span>],jobDifficulty[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;jlen;j++)&#123;</span><br><span class="line">        dp[<span class="number">0</span>][j]=maxRange[<span class="number">0</span>][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;d;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;jlen;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=j-<span class="number">1</span>;k&gt;=i-<span class="number">1</span>;k--)&#123; <span class="comment">//æ³¨æ„è¿™é‡Œ k&gt;=i-1 çš„å«ä¹‰</span></span><br><span class="line">                dp[i][j]=Math.min(dp[i][j], dp[i-<span class="number">1</span>][k]+maxRange[k+<span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[d-<span class="number">1</span>][jlen-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æ—¶é—´å¤æ‚åº¦å°±é™ä½ä¸º<code>O(dN^2)</code> ï¼Œå½“ç„¶è¿˜æ˜¯æœ‰ä¸€ç‚¹ä¸å®Œç¾ï¼Œå°±æ˜¯å¯¹è¾¹ç•Œçš„å¤„ç†å¯ä»¥é€šè¿‡å¯¹ dp æ•°ç»„+1 æ¥è§„é¿ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä¹‹å‰ä¹Ÿè¯´è¿‡ï¼Œè¿™æˆ‘å°è¯•æ”¹äº†ä¸‹ï¼Œæ²¡æ”¹å¥½ï¼Œä¸æ”¹äº†ï¼Œå“ˆå“ˆå“ˆ~</p>
<h2 id="5331-è·³è·ƒæ¸¸æˆ-V"><a href="#5331-è·³è·ƒæ¸¸æˆ-V" class="headerlink" title="5331. è·³è·ƒæ¸¸æˆ V"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/jump-game-v/">5331. è·³è·ƒæ¸¸æˆ V</a></h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ arr å’Œä¸€ä¸ªæ•´æ•° d ã€‚æ¯ä¸€æ­¥ä½ å¯ä»¥ä»ä¸‹æ ‡ i è·³åˆ°ï¼š</p>
<ul>
<li><code>i + x</code> ï¼Œå…¶ä¸­ <code>i + x &lt; arr.length ä¸” 0 &lt; x &lt;= d</code> ã€‚</li>
<li><code>i - x</code> ï¼Œå…¶ä¸­ <code>i - x &gt;= 0 ä¸” 0 &lt; x &lt;= d</code> ã€‚</li>
</ul>
<p>é™¤æ­¤ä»¥å¤–ï¼Œä½ ä»ä¸‹æ ‡ i è·³åˆ°ä¸‹æ ‡ j éœ€è¦æ»¡è¶³ï¼š<code>arr[i] &gt; arr[j] ä¸” arr[i] &gt; arr[k]</code> ï¼Œå…¶ä¸­ä¸‹æ ‡ k æ˜¯æ‰€æœ‰ i åˆ° j ä¹‹é—´çš„æ•°å­—ï¼ˆæ›´æ­£å¼çš„ï¼Œmin(i, j) &lt; k &lt; max(i, j)ï¼‰ã€‚</p>
<p>ä½ å¯ä»¥é€‰æ‹©æ•°ç»„çš„ä»»æ„ä¸‹æ ‡å¼€å§‹è·³è·ƒã€‚è¯·ä½ è¿”å›ä½  <strong>æœ€å¤š</strong> å¯ä»¥è®¿é—®å¤šå°‘ä¸ªä¸‹æ ‡ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œä»»ä½•æ—¶åˆ»ä½ éƒ½ä¸èƒ½è·³åˆ°æ•°ç»„çš„å¤–é¢</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/02/02/lroNpJhPkVc46Ya.png" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šarr = [<span class="number">6</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">6</span>,<span class="number">12</span>], d = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šä½ å¯ä»¥ä»ä¸‹æ ‡ <span class="number">10</span> å‡ºå‘ï¼Œç„¶åå¦‚ä¸Šå›¾ä¾æ¬¡ç»è¿‡ <span class="number">10</span> --&gt; <span class="number">8</span> --&gt; <span class="number">6</span> --&gt; <span class="number">7</span> ã€‚</span><br><span class="line">æ³¨æ„ï¼Œå¦‚æœä½ ä»ä¸‹æ ‡ <span class="number">6</span> å¼€å§‹ï¼Œä½ åªèƒ½è·³åˆ°ä¸‹æ ‡ <span class="number">7</span> å¤„ã€‚ä½ ä¸èƒ½è·³åˆ°ä¸‹æ ‡ <span class="number">5</span> å¤„å› ä¸º <span class="number">13</span> &gt; <span class="number">9</span> ã€‚ä½ ä¹Ÿä¸èƒ½è·³åˆ°ä¸‹æ ‡ <span class="number">4</span> å¤„ï¼Œå› ä¸ºä¸‹æ ‡ <span class="number">5</span> åœ¨ä¸‹æ ‡ <span class="number">4</span> å’Œ <span class="number">6</span> ä¹‹é—´ä¸” <span class="number">13</span> &gt; <span class="number">9</span> ã€‚</span><br><span class="line">ç±»ä¼¼çš„ï¼Œä½ ä¸èƒ½ä»ä¸‹æ ‡ <span class="number">3</span> å¤„è·³åˆ°ä¸‹æ ‡ <span class="number">2</span> æˆ–è€…ä¸‹æ ‡ <span class="number">1</span> å¤„ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šarr = [<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>], d = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šä½ å¯ä»¥ä»ä»»æ„ä¸‹æ ‡å¤„å¼€å§‹ä¸”ä½ æ°¸è¿œæ— æ³•è·³åˆ°ä»»ä½•å…¶ä»–åæ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šarr = [<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>], d = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">7</span></span><br><span class="line">è§£é‡Šï¼šä»ä¸‹æ ‡ <span class="number">0</span> å¤„å¼€å§‹ï¼Œä½ å¯ä»¥æŒ‰ç…§æ•°å€¼ä»å¤§åˆ°å°ï¼Œè®¿é—®æ‰€æœ‰çš„ä¸‹æ ‡ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= arr.length &lt;= 1000</code></li>
<li><code>1 &lt;= arr[i] &lt;= 10^5</code></li>
<li><code>1 &lt;= d &lt;= arr.length</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¢„å¤„ç†+å›æº¯+è®°å¿†åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer[] cache=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxJumps</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> d)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] max=<span class="keyword">new</span> <span class="title class_">int</span>[arr.length][arr.length];</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[arr.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">        max[i][i]=arr[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;arr.length;j++) &#123;</span><br><span class="line">            max[i][j]=Math.max(max[i][j-<span class="number">1</span>],arr[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">        res=Math.max(jump(arr,d,i,max),res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">jump</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> d,<span class="type">int</span> index,<span class="type">int</span>[][] max)</span>&#123; <span class="comment">//ä» index èµ·è·³èƒ½è·³å¤šè¿œ</span></span><br><span class="line">    <span class="keyword">if</span> (cache[index]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=Math.max(index-d,<span class="number">0</span>);i&lt;index;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[index]&gt;arr[i] &amp;&amp; arr[index]&gt;max[i+<span class="number">1</span>][index-<span class="number">1</span>]) &#123;</span><br><span class="line">            res=Math.max(jump(arr,d,i,max)+<span class="number">1</span>,res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//index=0, i=1 , i&lt;=1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=index+<span class="number">1</span>;i&lt;=Math.min(index+d,arr.length-<span class="number">1</span>);i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[index]&gt;arr[i] &amp;&amp; arr[index]&gt;max[index+<span class="number">1</span>][i-<span class="number">1</span>]) &#123;</span><br><span class="line">            res=Math.max(jump(arr,d,i,max)+<span class="number">1</span>,res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[index]=res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®å·²ç»åœ¨è¶…æ—¶çš„è¾¹ç¼˜äº†ã€‚æ²¡æœ‰å¿…è¦åšé¢„å¤„ç†ï¼Œä¸€å¼€å§‹è¢«é¢˜æ‹¬å·é‡Œé¢çš„ä¿¡æ¯ç»™è¿·æƒ‘äº†ï¼Œä¸ç„¶ä¹Ÿä¸ä¼šæä¸ªé¢„å¤„ç†ï¼Œå…¶å®é¢˜ç›®çš„æ„æ€å°±æ˜¯åªèƒ½å‘ä½å¤„è·³ï¼Œæˆ‘å¼€å§‹è¿˜æäº†ä¸¤ä¸ªåŒºé—´å€¼ hahaï¼Œè„‘å£³æœ‰ç‚¹ä¸äº²ç™½</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ”¹è‰¯åçš„å›æº¯+è®°å¿†åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer[] cache=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxJumps</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> d)</span> &#123;</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[arr.length];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">        res=Math.max(jump(arr,d,i),res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">jump</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> d,<span class="type">int</span> index)</span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (cache[index]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æŒ¨ä¸ªè·³ï¼Œæœ‰ä¸€ä¸ªè·³ä¸åˆ°ï¼Œåé¢æ‰€æœ‰çš„å°±éƒ½è·³ä¸åˆ°äº†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=index-<span class="number">1</span>;i&gt;=Math.max(index-d,<span class="number">0</span>) &amp;&amp; arr[index]&gt;arr[i];i--) &#123;</span><br><span class="line">        res=Math.max(jump(arr,d,i)+<span class="number">1</span>,res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=index+<span class="number">1</span>;i&lt;=Math.min(index+d,arr.length-<span class="number">1</span>) &amp;&amp; arr[index]&gt;arr[i];i++) &#123;</span><br><span class="line">        res=Math.max(jump(arr,d,i)+<span class="number">1</span>,res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[index]=res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸‰</strong></p>
<p>è‡ªåº•å‘ä¸ŠåŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxJumps</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> d)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>,len=arr.length;</span><br><span class="line">    Pair[] pair=<span class="keyword">new</span> <span class="title class_">Pair</span>[len];</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">    Arrays.fill(dp,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++) pair[i]=<span class="keyword">new</span> <span class="title class_">Pair</span>(i,arr[i]);</span><br><span class="line">    Arrays.sort(pair,(p1,p2)-&gt;p1.value-p2.value);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;len;i++) &#123;</span><br><span class="line">        <span class="type">int</span> index=pair[i].index;</span><br><span class="line">        <span class="comment">//å‘å·¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=index-<span class="number">1</span>;j&gt;=Math.max(index-d,<span class="number">0</span>) &amp;&amp; arr[index]&gt;arr[j];j--) &#123;</span><br><span class="line">            dp[index]=Math.max(dp[j]+<span class="number">1</span>,dp[index]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‘å³</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=index+<span class="number">1</span>;j&lt;=Math.min(index+d,arr.length-<span class="number">1</span>) &amp;&amp; arr[index]&gt;arr[j];j++) &#123;</span><br><span class="line">            dp[index]=Math.max(dp[j]+<span class="number">1</span>,dp[index]);</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(dp[index],res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span>&#123;</span><br><span class="line">    <span class="type">int</span> index;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(<span class="type">int</span> index,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.index=index;</span><br><span class="line">        <span class="built_in">this</span>.value=value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå…¶å®åŠ¨æ€è§„åˆ’è¿˜æœ‰éº»çƒ¦ä¸€ç‚¹ï¼Œå› ä¸ºéœ€è¦ä»é«˜å‘ä½è·³ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆä¿è¯ä½å¤„çš„ dp å€¼å…ˆè®¡ç®—å®Œæˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆæ’åºï¼ŒåŒæ—¶è¦ä¿ç•™åŸç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ª<code>Pair</code>æ•°ç»„æ¥è¾…åŠ©ï¼Œè·³çš„æ–¹å¼å’Œä¸Šé¢å›æº¯çš„ä¸€æ ·</p>
<h2 id="1262-å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ"><a href="#1262-å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ" class="headerlink" title="1262. å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/greatest-sum-divisible-by-three/">1262. å¯è¢«ä¸‰æ•´é™¤çš„æœ€å¤§å’Œ</a></h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›èƒ½è¢«ä¸‰æ•´é™¤çš„å…ƒç´ æœ€å¤§å’Œã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">3</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">8</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">18</span></span><br><span class="line">è§£é‡Šï¼šé€‰å‡ºæ•°å­— <span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span> å’Œ <span class="number">8</span>ï¼Œå®ƒä»¬çš„å’Œæ˜¯ <span class="number">18</span>ï¼ˆå¯è¢« <span class="number">3</span> æ•´é™¤çš„æœ€å¤§å’Œï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">4</span> ä¸èƒ½è¢« <span class="number">3</span> æ•´é™¤ï¼Œæ‰€ä»¥æ— æ³•é€‰å‡ºæ•°å­—ï¼Œè¿”å› <span class="number">0</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">12</span></span><br><span class="line">è§£é‡Šï¼šé€‰å‡ºæ•°å­— <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span> ä»¥åŠ <span class="number">4</span>ï¼Œå®ƒä»¬çš„å’Œæ˜¯ <span class="number">12</span>ï¼ˆå¯è¢« <span class="number">3</span> æ•´é™¤çš„æœ€å¤§å’Œï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 4 * 10^4</code></li>
<li><code>1 &lt;= nums[i] &lt;= 10^4</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’çš„è§£æ³•ï¼Œå¾ˆä¹…ä¹‹å‰çš„ä¸€æ¬¡å‘¨èµ›çš„é¢˜ï¼Œå¥½åƒæ˜¯ç¬¬ä¸€æ¬¡åŒå‘¨èµ›çš„é¢˜ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSumDivThree</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][k] 0~i ä¹‹é—´/3 ä½™ k çš„æœ€å¤§å…ƒç´ å’Œ</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length+<span class="number">1</span>][<span class="number">3</span>]; </span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>; <span class="comment">//åˆå§‹çŠ¶æ€å®šä¹‰</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>]=Integer.MIN_VALUE;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">2</span>]=Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">2</span>],dp[i-<span class="number">1</span>][<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">1</span>) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">2</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+nums[i-<span class="number">1</span>]);   </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">2</span>) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">0</span>],dp[i-<span class="number">1</span>][<span class="number">1</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">1</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">1</span>],dp[i-<span class="number">1</span>][<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>]=Math.max(dp[i-<span class="number">1</span>][<span class="number">2</span>],dp[i-<span class="number">1</span>][<span class="number">0</span>]+nums[i-<span class="number">1</span>]);   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  Math.max(<span class="number">0</span>,dp[nums.length][<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹ä¸€ä¸‹æ•°æ®çš„èŒƒå›´<code>40000</code>ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦è‚¯å®šæ˜¯<code>O(N)</code> æˆ–<code>O(NlogN)</code>çš„ï¼Œ<code>O(N^2)</code>çš„è‚¯å®šè¶…æ—¶å•¦</p>
<p>æƒ³äº†å¾ˆä¹…æ²¡æƒ³å‡ºæ¥ï¼Œç„¶åç„äº†ä¸€çœ¼è¯„è®ºåŒºï¼Œå‘ç° dp æ•°ç»„å®šä¹‰çš„æ˜¯å’Œä½™æ•°ç›¸å…³çš„ï¼Œç„¶åå°±ååº”è¿‡æ¥äº†ï¼Œä½™ 0 ä½™ 1 ä½™ 2ï¼Œ ä»–ä»¬çš„ç»„åˆå°±å¯ä»¥å¾—åˆ°æ–°çš„æœ€å¤§ä½™æ•°å’Œï¼Œæˆ‘ä»¬æœ€åè¦æ±‚çš„å°±æ˜¯æœ€å<code>[0,nums.length]</code> ä½™æ•°ä¸º 0 çš„æœ€å¤§å’Œ</p>
<p>é€’æ¨å…¬å¼å°±ä¸ç”¨å¤šè¯´äº†ï¼Œçœ‹ä»£ç å°±è¡Œäº†ï¼Œé€’æ¨å…¬å¼å¾ˆå®¹æ˜“å¾—åˆ°ï¼Œå…³é”®å°±æ˜¯åˆå§‹çš„çŠ¶æ€å®šä¹‰ï¼Œç¬¬ä¸€æ­¥çš„é€’æ¨ï¼Œæˆ‘ä¸€å¼€å§‹æ²¡æœ‰è®¾ç½®è¾¹ç•Œï¼Œç›´æ¥å¼€å§‹ dp ç„¶ååé¢æ€ä¹ˆæ”¹éƒ½ä¸å¯¹ï¼Œä¸€å¼€å§‹å®šä¹‰çš„ base dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>]=nums[<span class="number">0</span>]%<span class="number">3</span>==<span class="number">0</span>?nums[<span class="number">0</span>]:Integer.MIN_VALUE;</span><br><span class="line">dp[<span class="number">0</span>][<span class="number">1</span>]=nums[<span class="number">0</span>]%<span class="number">3</span>==<span class="number">1</span>?nums[<span class="number">0</span>]:Integer.MIN_VALUE;</span><br><span class="line">dp[<span class="number">0</span>][<span class="number">2</span>]=nums[<span class="number">0</span>]%<span class="number">3</span>==<span class="number">2</span>?nums[<span class="number">0</span>]:Integer.MIN_VALUE;</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿‡äº†å‡ ååå¡åœ¨äº†ä¸ª case ä¸Š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">16</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<p>é€’æ¨åˆ°ç¬¬äºŒä¸ªå…¶å®å°±æœ‰é—®é¢˜äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">      <span class="number">0</span>     <span class="number">1</span>      <span class="number">2</span> </span><br><span class="line"><span class="number">2</span>    MIN   MIN     <span class="number">2</span> </span><br><span class="line"><span class="number">19</span>   <span class="number">21</span>    MIN+<span class="number">19</span>  <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ 19 çš„ 1 æ˜æ˜¾åº”è¯¥å°±æ˜¯ 19ï¼Œè¿™é‡Œç›´æ¥æ ¹æ®<code>dp[i-1][1]+19</code>é€’æ¨å¾—åˆ°çš„ï¼Œåé¢çš„è‚¯å®šéƒ½ä¸å¯¹äº†ï¼Œé‚£æˆ‘ä»¬è¿™é‡Œå°†åˆå§‹å€¼è®¾ç½®ä¸º 0 å¯ä»¥ä¹ˆï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">dp[<span class="number">0</span>][<span class="number">0</span>]=nums[<span class="number">0</span>]%<span class="number">3</span>==<span class="number">0</span>?nums[<span class="number">0</span>]:<span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>å¯¹è¿™ä¸ª case ç¡®å®å¯ä»¥ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–çš„å°±ä¸å¯¹äº†ï¼Œè¿™å®¹æ˜“æƒ³åˆ°ï¼Œä½ è®¾ç½®ä¸º 0 ä¸‹ä¸€å±‚çš„ dp å€¼å°±å¯ä»¥ä»è¿™ä¸ªå€¼é€’æ¨è¿‡æ¥ï¼Œä½†æ˜¯è¿™æ˜æ˜¾æ˜¯ä¸å¯¹çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š <code>3ï¼Œ4</code> ä½ å°†ç¬¬ä¸€ä¸ª 3 çš„ä½™ 2 æœ€å¤§å€¼è®¾ç½®ä¸º 0ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ª 4 å°±å¯ä»¥é€šè¿‡ä¸Šä¸€ä¸ªä½™ 2 çš„æœ€å¤§å€¼æ¥æ›´æ–°å½“å‰çš„ä½™ 0 æœ€å¤§å€¼ï¼Œå˜æˆ 4ï¼Œè¿™å¾ˆæ˜æ˜¾å°±ä¸å¯¹äº†ï¼Œ4 æ ¹æœ¬å°±ä¸èƒ½è¢« 3 æ•´é™¤</p>
<p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æœ€å¥½çš„å¤„ç†æ–¹å¼æ˜¯æ·»åŠ ä¸€ä¸ªè¾¹ç•Œï¼Œç›¸å½“äºåœ¨æ•°ç»„çš„æœ€å‰é¢æ·»åŠ ä¸€ä¸ª 0ï¼Œ0%3=0</p>
<p>ç„¶åæˆ‘ä»¬åªéœ€è¦å°†<code>dp[0][0]</code>è®¾ç½®ä¸º 0 å°±å¯ä»¥äº†ï¼Œè€Œ 1 å’Œ 2 å°±è®¾ç½®ä¸º<code>INT_MIN</code>ï¼Œè®©ä¸‹ä¸€å±‚ä¸èƒ½é€šå®ƒæ¥è½¬ç§»</p>
<blockquote>
<p>dp è¾¹ç•Œçš„å¤„ç†æ–¹å¼è¿˜æ˜¯è¦å¤šç»ƒå•Š</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ä¼˜åŒ–ç©ºé—´ä¸º O(1)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSumDivThree2</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">    dp[<span class="number">1</span>]=Integer.MIN_VALUE;</span><br><span class="line">    dp[<span class="number">2</span>]=Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=nums.length;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">0</span>) &#123;</span><br><span class="line">            dp[<span class="number">0</span>]=Math.max(dp[<span class="number">0</span>],dp[<span class="number">0</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">1</span>]=Math.max(dp[<span class="number">1</span>],dp[<span class="number">1</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">2</span>]=Math.max(dp[<span class="number">2</span>],dp[<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="type">int</span> temp0=dp[<span class="number">0</span>];</span><br><span class="line">            dp[<span class="number">0</span>]=Math.max(dp[<span class="number">0</span>],dp[<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">2</span>]=Math.max(dp[<span class="number">2</span>],dp[<span class="number">1</span>]+nums[i-<span class="number">1</span>]); <span class="comment">//æŒ‰ä¾èµ–å…³ç³»è°ƒæ•´é¡ºåºï¼Œå‡å°‘å˜é‡</span></span><br><span class="line">            dp[<span class="number">1</span>]=Math.max(dp[<span class="number">1</span>],temp0+nums[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[i-<span class="number">1</span>]%<span class="number">3</span>==<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="type">int</span> temp0=dp[<span class="number">0</span>];</span><br><span class="line">            dp[<span class="number">0</span>]=Math.max(dp[<span class="number">0</span>],dp[<span class="number">1</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">1</span>]=Math.max(dp[<span class="number">1</span>],dp[<span class="number">2</span>]+nums[i-<span class="number">1</span>]);</span><br><span class="line">            dp[<span class="number">2</span>]=Math.max(dp[<span class="number">2</span>],temp0+nums[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºä»£ç è¿˜æ˜¯å¯ä»¥ç®€åŒ–çš„å¾ˆçŸ­çš„ï¼Œä¸ºäº†è¡¨è¾¾çš„æ¸…æ™°å°±ä¸æ”¹äº†</p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>è´ªå¿ƒï¼Œæ”¾åœ¨ <a href="http://imlgw.top/2020/01/21/leetcode-tan-xin/#406-%E6%A0%B9%E6%8D%AE%E8%BA%AB%E9%AB%98%E9%87%8D%E5%BB%BA%E9%98%9F%E5%88%97">è´ªå¿ƒä¸“é¢˜</a> ä¸­</p>
<h2 id="é¢è¯•é¢˜-60-n-ä¸ªéª°å­çš„ç‚¹æ•°"><a href="#é¢è¯•é¢˜-60-n-ä¸ªéª°å­çš„ç‚¹æ•°" class="headerlink" title="é¢è¯•é¢˜ 60. n ä¸ªéª°å­çš„ç‚¹æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/nge-tou-zi-de-dian-shu-lcof/">é¢è¯•é¢˜ 60. n ä¸ªéª°å­çš„ç‚¹æ•°</a></h2><p>æŠŠ n ä¸ªéª°å­æ‰”åœ¨åœ°ä¸Šï¼Œæ‰€æœ‰éª°å­æœä¸Šä¸€é¢çš„ç‚¹æ•°ä¹‹å’Œä¸º sã€‚è¾“å…¥ nï¼Œæ‰“å°å‡º s çš„æ‰€æœ‰å¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡ã€‚</p>
<p>ä½ éœ€è¦ç”¨ä¸€ä¸ªæµ®ç‚¹æ•°æ•°ç»„è¿”å›ç­”æ¡ˆï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨è¿™ n ä¸ªéª°å­æ‰€èƒ½æ·å‡ºçš„ç‚¹æ•°é›†åˆä¸­ç¬¬ i å°çš„é‚£ä¸ªçš„æ¦‚ç‡ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š[<span class="number">0.16667</span>,<span class="number">0.16667</span>,<span class="number">0.16667</span>,<span class="number">0.16667</span>,<span class="number">0.16667</span>,<span class="number">0.16667</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š[<span class="number">0.02778</span>,<span class="number">0.05556</span>,<span class="number">0.08333</span>,<span class="number">0.11111</span>,<span class="number">0.13889</span>,<span class="number">0.16667</span>,<span class="number">0.13889</span>,<span class="number">0.11111</span>,<span class="number">0.08333</span>,<span class="number">0.05556</span>,<span class="number">0.02778</span>]</span><br></pre></td></tr></table></figure>

<p><strong>é™åˆ¶ï¼š</strong></p>
<p><code>1 &lt;= n &lt;= 11</code></p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å¾ˆæœ‰æ„æ€çš„é¢˜ï¼Œçœ‹è¿”å›å€¼è¿˜ä¸å®¹æ˜“æƒ³åˆ°ç”¨åŠ¨æ€è§„åˆ’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span>[] twoSum(<span class="type">int</span> n) &#123;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨ i æšè‰²å­å’Œä¸º j çš„æ¦‚ç‡</span></span><br><span class="line">    <span class="type">double</span>[][] dp=<span class="keyword">new</span> <span class="title class_">double</span>[n+<span class="number">1</span>][<span class="number">6</span>*n+<span class="number">1</span>];</span><br><span class="line">    <span class="type">double</span> probability=<span class="number">1.0</span>/<span class="number">6.0</span>;</span><br><span class="line">    <span class="comment">//base åˆå§‹åŒ–</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;i++) dp[<span class="number">1</span>][i]=probability;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123; <span class="comment">//æšä¸¾è‰²å­</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=i*<span class="number">6</span>;j++)&#123; <span class="comment">//æšä¸¾ç‚¹æ•°</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=j &amp;&amp; k&lt;=<span class="number">6</span>;k++)&#123; <span class="comment">//æšä¸¾å½“å‰è‰²å­çš„ç‚¹æ•°</span></span><br><span class="line">                dp[i][j]+=(probability*dp[i-<span class="number">1</span>][j-k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span>[] res=<span class="keyword">new</span> <span class="title class_">double</span>[<span class="number">5</span>*n+<span class="number">1</span>];<span class="comment">//</span></span><br><span class="line">    System.arraycopy(dp[n],n,res,<span class="number">0</span>,res.length);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>dp[i][j]</code>ä»£è¡¨** i <strong>æšè‰²å­å’Œä¸º</strong> j **çš„æ¦‚ç‡ é€’æ¨å…¬å¼å¾ˆå®¹æ˜“æƒ³åˆ° <code>dp[i][j]= 1/6(dp[i-1][j-1]+dp[i-1][j-2]+dp[i-1][j-3]...dp[i-1][j-6])</code> ç„¶åæˆ‘ä»¬æšä¸¾å„ä¸ªçŠ¶æ€å°± ok äº†</p>
<h2 id="264-ä¸‘æ•°-II"><a href="#264-ä¸‘æ•°-II" class="headerlink" title="264. ä¸‘æ•° II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/ugly-number-ii/">264. ä¸‘æ•° II</a></h2><p>ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰¾å‡ºç¬¬ n ä¸ªä¸‘æ•°ã€‚</p>
<p>ä¸‘æ•°å°±æ˜¯åªåŒ…å«è´¨å› æ•° 2, 3, 5 çš„æ­£æ•´æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">12</span></span><br><span class="line">è§£é‡Šï¼š<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span> æ˜¯å‰ <span class="number">10</span> ä¸ªä¸‘æ•°ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong>  </p>
<ol>
<li>æ˜¯ä¸‘æ•°ã€‚</li>
<li>n ä¸è¶…è¿‡ 1690ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å°æ ¹å †ï¼Œå°† base æ¯æ¬¡ä¹˜ 2 ä¹˜ 3 ä¹˜ 5 çš„ç»“æœæ”¾å…¥å°æ ¹å †ï¼Œç„¶åå°†å †é¡¶æ‹¿å‡ºæ¥ baseï¼Œç»§ç»­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸­é—´è¦æ³¨æ„å»é‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">nthUglyNumber3</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    PriorityQueue&lt;Long&gt; queue=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">    n-=<span class="number">1</span>;</span><br><span class="line">    <span class="type">long</span> base=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n-- &gt;<span class="number">0</span>)&#123;</span><br><span class="line">        queue.add(base*<span class="number">2</span>);</span><br><span class="line">        queue.add(base*<span class="number">3</span>);</span><br><span class="line">        queue.add(base*<span class="number">5</span>);</span><br><span class="line">        base=queue.poll();</span><br><span class="line">        <span class="comment">//å»é‡</span></span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty()&amp;&amp;base==queue.peek())&#123;</span><br><span class="line">            queue.poll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)base;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨<code>HashSet</code>å»é‡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">nthUglyNumber</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    PriorityQueue&lt;Long&gt; queue=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">    HashSet&lt;Long&gt; set=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="type">long</span> base=<span class="number">1</span>;</span><br><span class="line">    <span class="type">long</span>[] ugly=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    n-=<span class="number">1</span>;</span><br><span class="line">    set.add(<span class="number">1L</span>);</span><br><span class="line">    <span class="keyword">while</span>(n--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!set.contains(ugly[i]*base)) &#123;</span><br><span class="line">                queue.add(ugly[i]*base);</span><br><span class="line">                set.add(ugly[i]*base);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        base=queue.poll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)base;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>è¿™ä¸ªè§£æ³•è¿˜æ˜¯å¾ˆæœ‰æŠ€å·§æ€§çš„ï¼Œå…¶å®å°±æ˜¯æŒ‰é¡ºåºç”Ÿæˆä¸‘æ•°ï¼Œä¸€å¼€å§‹è§‚å¯Ÿçš„æ—¶å€™å°±å‘ç°äº†ä½†æ˜¯ç¡®å®æƒ³ä¸åˆ°ä¸‰æŒ‡é’ˆçš„è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">nthUglyNumber4</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> index1=<span class="number">0</span>,index2=<span class="number">0</span>,index3=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</span><br><span class="line">        dp[i]=Math.min(dp[index1]*<span class="number">2</span>,Math.min(dp[index2]*<span class="number">3</span>,dp[index3]*<span class="number">5</span>));</span><br><span class="line">        index1+=(dp[index1]*<span class="number">2</span>==dp[i]?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">        index2+=(dp[index2]*<span class="number">3</span>==dp[i]?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">        index3+=(dp[index3]*<span class="number">5</span>==dp[i]?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é¢è¯•é¢˜-62-åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—"><a href="#é¢è¯•é¢˜-62-åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—" class="headerlink" title="é¢è¯•é¢˜ 62. åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/">é¢è¯•é¢˜ 62. åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—</a></h2><p>0,1,,n-1 è¿™ n ä¸ªæ•°å­—æ’æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­— 0 å¼€å§‹ï¼Œæ¯æ¬¡ä»è¿™ä¸ªåœ†åœˆé‡Œåˆ é™¤ç¬¬ m ä¸ªæ•°å­—ã€‚æ±‚å‡ºè¿™ä¸ªåœ†åœˆé‡Œå‰©ä¸‹çš„æœ€åä¸€ä¸ªæ•°å­—ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ0ã€1ã€2ã€3ã€4 è¿™ 5 ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­— 0 å¼€å§‹æ¯æ¬¡åˆ é™¤ç¬¬ 3 ä¸ªæ•°å­—ï¼Œåˆ™åˆ é™¤çš„å‰ 4 ä¸ªæ•°å­—ä¾æ¬¡æ˜¯ 2ã€0ã€4ã€1ï¼Œå› æ­¤æœ€åå‰©ä¸‹çš„æ•°å­—æ˜¯ 3ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">5</span>, m = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">10</span>, m = <span class="number">17</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>é™åˆ¶ï¼š</strong></p>
<ul>
<li>1 &lt;= n &lt;= 10^5</li>
<li>1 &lt;= m &lt;= 10^6</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ç”¨é“¾è¡¨æ¨¡æ‹Ÿçš„è§£æ³•ï¼Œåœ¨æ•°æ®å¤ªå¤§çš„æ—¶å€™ä¼š TLE</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é“¾è¡¨æ¨¡æ‹Ÿè§£æ³•</span></span><br><span class="line"><span class="comment">0 1 2 3 4 5 m=3</span></span><br><span class="line"><span class="comment">3 4 5 0 1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lastRemaining</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; queue=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        queue.addLast(i);</span><br><span class="line">    <span class="keyword">while</span>(queue.size()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="type">int</span> temp=queue.removeFirst();</span><br><span class="line">            <span class="keyword">if</span>(i!=m-<span class="number">1</span>)&#123;</span><br><span class="line">                queue.addLast(temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> queue.getFirst();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ•°å­¦å½’çº³æ³•ï¼ŒåŠ ä¸Šä¸€ç‚¹é€’æ¨ dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    0 ~ n-1 æ¯æ¬¡ kill ç¬¬ k ä¸ªäºº</span></span><br><span class="line"><span class="comment">    k=(m-1)%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    kill k ä¹‹åï¼Œåœ¨ n-1 ä¸ªäººä¸­é‡å»ºæ–°ç´¢å¼•</span></span><br><span class="line"><span class="comment">    åŸå§‹ç´¢å¼•   æ–°çš„ index</span></span><br><span class="line"><span class="comment">    k+1         0</span></span><br><span class="line"><span class="comment">    k+2         1</span></span><br><span class="line"><span class="comment">    k+3         2</span></span><br><span class="line"><span class="comment">    ...         ...</span></span><br><span class="line"><span class="comment">    n-1         n-k-2</span></span><br><span class="line"><span class="comment">    0           n-k-1</span></span><br><span class="line"><span class="comment">    1           n-k</span></span><br><span class="line"><span class="comment">    2           n-k+1</span></span><br><span class="line"><span class="comment">    ...         ...</span></span><br><span class="line"><span class="comment">    k-1         n-2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    æ–°ç´¢å¼• (x) ---&gt; åŸå§‹ç´¢å¼• (y)</span></span><br><span class="line"><span class="comment">    y=(x+k+1)%n  eg. (n-2+k+1)%n=(n+k-1)%n=k-1</span></span><br><span class="line"><span class="comment">    è®¾åœ¨ n-1 ä¸ªäººä¸­æœ€åå‰©ä¸‹çš„äººæ˜¯ f(n-1,m) æŒ‰ç…§ä¸Šé¢çš„å…¬å¼è½¬æ¢æˆåŸå§‹ç´¢å¼•å°±æ˜¯</span></span><br><span class="line"><span class="comment">    f(n,m)=(f(n-1,m)+k+1)%n</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//æ•°å­¦è§£æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lastRemaining</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">    <span class="type">int</span> last=<span class="number">0</span>;<span class="comment">//ä¸€ä¸ªäººçš„æ—¶å€™å­˜æ´»è€… index f(1,m)=0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123; <span class="comment">//æšä¸¾äººæ•°</span></span><br><span class="line">        last=(last+m)%i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒäº† LeetCode çš„ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/u/yuanninesuns/">å¤§ä½¬é¢˜è§£</a>ï¼Œè®²çš„æŒºå¥½çš„</p>
<p><strong>é€’å½’è§£æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€’å½’çš„æŒºå¥½ç†è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lastRemaining</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> (lastRemaining(n-<span class="number">1</span>,m)+m)%n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1014-æœ€ä½³è§‚å…‰ç»„åˆ"><a href="#1014-æœ€ä½³è§‚å…‰ç»„åˆ" class="headerlink" title="1014. æœ€ä½³è§‚å…‰ç»„åˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/best-sightseeing-pair/">1014. æœ€ä½³è§‚å…‰ç»„åˆ</a></h2><p>ç»™å®šæ­£æ•´æ•°æ•°ç»„ Aï¼ŒA[i] è¡¨ç¤ºç¬¬ i ä¸ªè§‚å…‰æ™¯ç‚¹çš„è¯„åˆ†ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ™¯ç‚¹ i å’Œ j ä¹‹é—´çš„è·ç¦»ä¸º j - iã€‚</p>
<p>ä¸€å¯¹æ™¯ç‚¹ï¼ˆi &lt; jï¼‰ç»„æˆçš„è§‚å…‰ç»„åˆçš„å¾—åˆ†ä¸ºï¼ˆA[i] + A[j] + i - jï¼‰ï¼šæ™¯ç‚¹çš„è¯„åˆ†ä¹‹å’Œå‡å»å®ƒä»¬ä¸¤è€…ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p>è¿”å›ä¸€å¯¹è§‚å…‰æ™¯ç‚¹èƒ½å–å¾—çš„æœ€é«˜åˆ†ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">8</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">6</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">11</span></span><br><span class="line">è§£é‡Šï¼ši = <span class="number">0</span>, j = <span class="number">2</span>, A[i] + A[j] + i - j = <span class="number">8</span> + <span class="number">5</span> + <span class="number">0</span> - <span class="number">2</span> = <span class="number">11</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>2 &lt;= A.length &lt;= 50000</code></li>
<li><code>1 &lt;= A[i] &lt;= 1000</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æš´åŠ›è§£æ³•ï¼Œ<code>O(N^2)</code>ï¼Œè¿™é¢˜æ•°æ® 5wï¼Œè‚¯å®šä¼š T</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//A[i] + A[j] + i - j (i&lt;j)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxScoreSightseeingPair</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;A.length;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;A.length;j++) &#123;</span><br><span class="line">            res=Math.max(A[i]+A[j]+i-j,res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// A[i]+A[j] - (j-i) i&lt;j</span></span><br><span class="line"><span class="comment">// A[i]+i + (A[j]-j)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxScoreSightseeingPair</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res=-<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> maxPre=A[<span class="number">0</span>]+<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;A.length;j++) &#123;           </span><br><span class="line">        res=Math.max(maxPre+A[j]-j,res);</span><br><span class="line">        maxPre=Math.max(maxPre,A[j]+j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠå¼å­åˆå¹¶ä¸€ä¸‹ <code>(A[i]+i)+(A[j]-j)</code> ï¼Œç„¶åå‘ç°å…¶å®ä¸Šé¢çš„æš´åŠ›è§£æ³•ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç»“æœæœ€å¤§å®é™…ä¸Šå°±æ˜¯è¦ä¸¤éƒ¨åˆ†éƒ½æœ€å¤§ï¼Œç„¶åå†…å±‚å¾ªç¯é‡Œé¢ï¼Œ<code>A[j]-j</code> æ˜¯ä¸ªå˜é‡ï¼Œè€Œ<code>A[i]+i</code>ä¸å˜çš„ï¼Œä»£è¡¨<code>j</code>ä½ç½®ä¹‹å‰ï¼Œæ‰€æœ‰çš„<code>A[i]+i</code> ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦æœ€å¤§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡æ¥ä¿å­˜è¿™ä¸ªæœ€å¤§å€¼ï¼Œç„¶åéå†çš„è¿‡ç¨‹ä¸­ä¸æ–­çš„æ›´æ–°å®ƒå°± ok äº†</p>
<h2 id="983-æœ€ä½ç¥¨ä»·"><a href="#983-æœ€ä½ç¥¨ä»·" class="headerlink" title="983. æœ€ä½ç¥¨ä»·"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-cost-for-tickets/">983. æœ€ä½ç¥¨ä»·</a></h2><p>åœ¨ä¸€ä¸ªç«è½¦æ—…è¡Œå¾ˆå—æ¬¢è¿çš„å›½åº¦ï¼Œä½ æå‰ä¸€å¹´è®¡åˆ’äº†ä¸€äº›ç«è½¦æ—…è¡Œã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸€å¹´é‡Œï¼Œä½ è¦æ—…è¡Œçš„æ—¥å­å°†ä»¥ä¸€ä¸ªåä¸º <code>days</code> çš„æ•°ç»„ç»™å‡ºã€‚æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªä» <code>1</code> åˆ° <code>365</code> çš„æ•´æ•°ã€‚</p>
<p>ç«è½¦ç¥¨æœ‰ä¸‰ç§ä¸åŒçš„é”€å”®æ–¹å¼ï¼š</p>
<ul>
<li>ä¸€å¼ ä¸ºæœŸä¸€å¤©çš„é€šè¡Œè¯å”®ä»·ä¸º <code>costs[0]</code> ç¾å…ƒï¼›</li>
<li>ä¸€å¼ ä¸ºæœŸä¸ƒå¤©çš„é€šè¡Œè¯å”®ä»·ä¸º <code>costs[1]</code> ç¾å…ƒï¼›</li>
<li>ä¸€å¼ ä¸ºæœŸä¸‰åå¤©çš„é€šè¡Œè¯å”®ä»·ä¸º <code>costs[2]</code> ç¾å…ƒã€‚</li>
</ul>
<p>é€šè¡Œè¯å…è®¸æ•°å¤©æ— é™åˆ¶çš„æ—…è¡Œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¬¬ 2 å¤©è·å¾—ä¸€å¼ ä¸ºæœŸ 7 å¤©çš„é€šè¡Œè¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿ç€æ—…è¡Œ 7 å¤©ï¼šç¬¬ 2 å¤©ã€ç¬¬ 3 å¤©ã€ç¬¬ 4 å¤©ã€ç¬¬ 5 å¤©ã€ç¬¬ 6 å¤©ã€ç¬¬ 7 å¤©å’Œç¬¬ 8 å¤©ã€‚</p>
<p>è¿”å›ä½ æƒ³è¦å®Œæˆåœ¨ç»™å®šçš„åˆ—è¡¨ <code>days</code> ä¸­åˆ—å‡ºçš„æ¯ä¸€å¤©çš„æ—…è¡Œæ‰€éœ€è¦çš„æœ€ä½æ¶ˆè´¹ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdays = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">20</span>], costs = [<span class="number">2</span>,<span class="number">7</span>,<span class="number">15</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">11</span></span><br><span class="line">è§£é‡Šï¼š </span><br><span class="line">ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ç§è´­ä¹°é€šè¡Œè¯çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ å®Œæˆä½ çš„æ—…è¡Œè®¡åˆ’ï¼š</span><br><span class="line">åœ¨ç¬¬ <span class="number">1</span> å¤©ï¼Œä½ èŠ±äº† costs[<span class="number">0</span>] = $<span class="number">2</span> ä¹°äº†ä¸€å¼ ä¸ºæœŸ <span class="number">1</span> å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ <span class="number">1</span> å¤©ç”Ÿæ•ˆã€‚</span><br><span class="line">åœ¨ç¬¬ <span class="number">3</span> å¤©ï¼Œä½ èŠ±äº† costs[<span class="number">1</span>] = $<span class="number">7</span> ä¹°äº†ä¸€å¼ ä¸ºæœŸ <span class="number">7</span> å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ <span class="number">3</span>, <span class="number">4</span>, ..., <span class="number">9</span> å¤©ç”Ÿæ•ˆã€‚</span><br><span class="line">åœ¨ç¬¬ <span class="number">20</span> å¤©ï¼Œä½ èŠ±äº† costs[<span class="number">0</span>] = $<span class="number">2</span> ä¹°äº†ä¸€å¼ ä¸ºæœŸ <span class="number">1</span> å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ <span class="number">20</span> å¤©ç”Ÿæ•ˆã€‚</span><br><span class="line">ä½ æ€»å…±èŠ±äº† $<span class="number">11</span>ï¼Œå¹¶å®Œæˆäº†ä½ è®¡åˆ’çš„æ¯ä¸€å¤©æ—…è¡Œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdays = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">30</span>,<span class="number">31</span>], costs = [<span class="number">2</span>,<span class="number">7</span>,<span class="number">15</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">17</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ç§è´­ä¹°é€šè¡Œè¯çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ å®Œæˆä½ çš„æ—…è¡Œè®¡åˆ’ï¼š </span><br><span class="line">åœ¨ç¬¬ <span class="number">1</span> å¤©ï¼Œä½ èŠ±äº† costs[<span class="number">2</span>] = $<span class="number">15</span> ä¹°äº†ä¸€å¼ ä¸ºæœŸ <span class="number">30</span> å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ <span class="number">1</span>, <span class="number">2</span>, ..., <span class="number">30</span> å¤©ç”Ÿæ•ˆã€‚</span><br><span class="line">åœ¨ç¬¬ <span class="number">31</span> å¤©ï¼Œä½ èŠ±äº† costs[<span class="number">0</span>] = $<span class="number">2</span> ä¹°äº†ä¸€å¼ ä¸ºæœŸ <span class="number">1</span> å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ <span class="number">31</span> å¤©ç”Ÿæ•ˆã€‚ </span><br><span class="line">ä½ æ€»å…±èŠ±äº† $<span class="number">17</span>ï¼Œå¹¶å®Œæˆäº†ä½ è®¡åˆ’çš„æ¯ä¸€å¤©æ—…è¡Œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>1 &lt;= days.length &lt;= 365</code></li>
<li><code>1 &lt;= days[i] &lt;= 365</code></li>
<li><code>days</code> æŒ‰é¡ºåºä¸¥æ ¼é€’å¢</li>
<li><code>costs.length == 3</code></li>
<li><code>1 &lt;= costs[i] &lt;= 1000</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™é¢˜çš„é€’æ¨å…³ç³»å…¶å®å¾ˆå®¹æ˜“å°±æƒ³åˆ°ï¼š<code>dp[i]=Min(dp[i-dt[k]]+costs[k],dp[i])</code>ï¼Œå¯æ˜¯èœé¸¡çš„æˆ‘è¿˜æ˜¯æäº†åŠå¤©æ‰ AC</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mincostTickets</span><span class="params">(<span class="type">int</span>[] days, <span class="type">int</span>[] costs)</span> &#123;</span><br><span class="line">    <span class="type">int</span> n=days.length;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[days[n-<span class="number">1</span>]+<span class="number">1</span>];</span><br><span class="line">    <span class="type">boolean</span>[] visit=<span class="keyword">new</span> <span class="title class_">boolean</span>[days[n-<span class="number">1</span>]+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i:days) &#123;</span><br><span class="line">        visit[i]=<span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays.fill(dp,<span class="number">0x3f3f3f3f</span>);</span><br><span class="line">    <span class="type">int</span> [] dt = &#123;<span class="number">1</span>,<span class="number">7</span>,<span class="number">30</span>&#125;;</span><br><span class="line">    dp[days[<span class="number">0</span>]-<span class="number">1</span>]=<span class="number">0</span>;<span class="comment">//åˆå§‹çŠ¶æ€</span></span><br><span class="line">    <span class="comment">//æšä¸¾æ‰€æœ‰çš„ day</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> d=days[<span class="number">0</span>];d&lt;=days[n-<span class="number">1</span>];d++) &#123;</span><br><span class="line">        <span class="comment">//ä¸€å¼€å§‹æ²¡æƒ³åˆ°è¿™é‡Œï¼Œdubug çš„æ—¶å€™æ‰çœ‹å‡ºæ¥ï¼Œä¸åœ¨æ—…æ¸¸è®¡åˆ’ä¸­çš„åº”è¯¥ç›´æ¥å»¶ç»­å‰é¢çš„</span></span><br><span class="line">        <span class="keyword">if</span> (!visit[d]) &#123; </span><br><span class="line">            dp[d]=dp[d-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¸‰ç§ç¥¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++) &#123;</span><br><span class="line">            dp[d]=Math.min((d-dt[k]&gt;=days[<span class="number">0</span>]-<span class="number">1</span>?dp[d-dt[k]]:<span class="number">0</span>)+costs[k],dp[d]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[days[n-<span class="number">1</span>]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹å†™äº†äºŒç»´çš„ï¼Œç„¶åå‘ç°ä¸€ç»´çš„çŠ¶æ€å¹¶æ²¡æœ‰ç”¨ï¼Œæ”¹æˆä¸€ç»´ä¹‹ååˆ dubug äº†åŠå¤©ï¼Œä¸»è¦å°±åœ¨é‚£ä¸ªéæ—…è¡Œè®¡åˆ’ä¸­çš„<code>d</code>æ²¡å¤„ç†å¥½ï¼Œè¿™é¢˜çš„çŠ¶æ€å®šä¹‰ä¸æ˜¯ç‰¹åˆ«æ¸…æ™°ï¼Œç„¶åææ··äº†ï¼ŒæŠŠéæ—…è¡Œè®¡åˆ’å†…çš„ä¹Ÿç®—è¿›å»äº†</p>
<h2 id="837-æ–°-21-ç‚¹"><a href="#837-æ–°-21-ç‚¹" class="headerlink" title="837. æ–° 21 ç‚¹"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/new-21-game/">837. æ–° 21 ç‚¹</a></h2><p>çˆ±ä¸½ä¸å‚ä¸ä¸€ä¸ªå¤§è‡´åŸºäºçº¸ç‰Œæ¸¸æˆ â€œ21 ç‚¹â€ è§„åˆ™çš„æ¸¸æˆï¼Œæè¿°å¦‚ä¸‹ï¼š</p>
<p>çˆ±ä¸½ä¸ä»¥ <code>0</code> åˆ†å¼€å§‹ï¼Œå¹¶åœ¨å¥¹çš„å¾—åˆ†å°‘äº <code>K</code> åˆ†æ—¶æŠ½å–æ•°å­—ã€‚ æŠ½å–æ—¶ï¼Œå¥¹ä» <code>[1, W]</code> çš„èŒƒå›´ä¸­éšæœºè·å¾—ä¸€ä¸ªæ•´æ•°ä½œä¸ºåˆ†æ•°è¿›è¡Œç´¯è®¡ï¼Œå…¶ä¸­ <code>W</code> æ˜¯æ•´æ•°ã€‚ æ¯æ¬¡æŠ½å–éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå…¶ç»“æœå…·æœ‰ç›¸åŒçš„æ¦‚ç‡ã€‚</p>
<p>å½“çˆ±ä¸½ä¸è·å¾—ä¸å°‘äº <code>K</code> åˆ†æ—¶ï¼Œå¥¹å°±åœæ­¢æŠ½å–æ•°å­—ã€‚ çˆ±ä¸½ä¸çš„åˆ†æ•°ä¸è¶…è¿‡ <code>N</code> çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p>
<p><strong>ç¤ºä¾‹ 1</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = <span class="number">10</span>, K = <span class="number">1</span>, W = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1.00000</span></span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹</strong> <strong>2</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = <span class="number">6</span>, K = <span class="number">1</span>, W = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0.60000</span></span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br><span class="line">åœ¨ W = <span class="number">10</span> çš„ <span class="number">6</span> ç§å¯èƒ½ä¸‹ï¼Œå¥¹çš„å¾—åˆ†ä¸è¶…è¿‡ N = <span class="number">6</span> åˆ†ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹</strong> 3</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = <span class="number">21</span>, K = <span class="number">17</span>, W = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0.73278</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>0 &lt;= K &lt;= N &lt;= 10000</code></li>
<li><code>1 &lt;= W &lt;= 10000</code></li>
<li>å¦‚æœç­”æ¡ˆä¸æ­£ç¡®ç­”æ¡ˆçš„è¯¯å·®ä¸è¶…è¿‡ <code>10^-5</code>ï¼Œåˆ™è¯¥ç­”æ¡ˆå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆé€šè¿‡ã€‚</li>
<li>æ­¤é—®é¢˜çš„åˆ¤æ–­é™åˆ¶æ—¶é—´å·²ç»å‡å°‘ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¢˜ç›®æ„æ€éƒ½å¾—ç†è§£å¥½ä¹…ï¼Œé¢è¯•åº”è¯¥ä¸ä¼šè€ƒï¼Œå‚è€ƒè¯„è®ºåŒºå¤§ä½¬é¢˜è§£å†™çš„ä¸€ä¸ªç±»ä¼¼èƒŒåŒ…çš„åšæ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">new21Game</span><span class="params">(<span class="type">int</span> N, <span class="type">int</span> K, <span class="type">int</span> W)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(K==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//éšæœºæŠ½ç‰Œå’Œä¸º i çš„æ¦‚ç‡ï¼ŒèƒŒåŒ…é—®é¢˜</span></span><br><span class="line">    <span class="type">double</span>[] dp=<span class="keyword">new</span> <span class="title class_">double</span>[N+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">1.0</span>/W;</span><br><span class="line">    <span class="comment">// i&lt;=K</span></span><br><span class="line">    <span class="comment">//dp[i] = 1/W(dp[i-1]+dp[i-2]+...+dp[i-W]);</span></span><br><span class="line">    <span class="comment">//dp[i-1] = 1/W(dp[i-2]+dp[i-3]+...+dp[i-W-1])</span></span><br><span class="line">    <span class="comment">//==&gt; dp[i]=(1 + 1/W)*dp[i-1]-(1/W)*dp[i-W-1]</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=K;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i-W-<span class="number">1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            dp[i]=(<span class="number">1</span>+<span class="number">1.0</span>/W)*dp[i-<span class="number">1</span>]-<span class="number">1.0</span>/W*dp[i-W-<span class="number">1</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp[i]=(<span class="number">1</span>+<span class="number">1.0</span>/W)*dp[i-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// i&gt;K ä» i-W ~ i åŒºé—´é€‰å°äº K çš„éƒ¨åˆ†</span></span><br><span class="line">    <span class="comment">//å’Œå‰‘æŒ‡ offer çš„éª°å­å“ªä¸€é¢˜æœ‰ç‚¹åƒ</span></span><br><span class="line">    <span class="comment">//dp[i] = 1/W(dp[K-1]+dp[K-2]+...+dp[i-W]) or dp[i]=1/W(dp[i-W]+dp[i-W+1]+..+dp[K-1])</span></span><br><span class="line">    <span class="comment">//dp[i-1] = 1/W(dp[k-1]+dp[K-2]+...+dp[i-W-1]) or dp[i+1] = 1/W(dp[i-W+1]+dp[i-W+2]...+dp[K-1])</span></span><br><span class="line">    <span class="comment">//==&gt; dp[i] = dp[i-1]-1/W*dp[i-W-1] or dp[i]=1/W*dp[i-W]+dp[i+1] ä¸¤ä¸ªæ˜¯ç­‰ä»·çš„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=K+<span class="number">1</span>;i&lt;=N;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i-W-<span class="number">1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>]-<span class="number">1.0</span>/W*dp[i-W-<span class="number">1</span>];  </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dp[i]=dp[i-<span class="number">1</span>]; <span class="comment">//1/W</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=K;i&lt;=N;i++) &#123;</span><br><span class="line">        res+=dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹ä¸€æ¬¡ç¢°åˆ°å°±ä¸ä¸€å®šä¼šåšäº†ï¼Œç†è§£çš„ä¸æ˜¯å¾ˆé€å½»ï¼Œä¸è¿‡å¯¹èƒŒåŒ…å…¬å¼çš„æ¨å¯¼å€’æ˜¯ç†è§£å¤šäº†ä¸€ç‚¹</p>
<h2 id="329-çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„"><a href="#329-çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„" class="headerlink" title="329. çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-increasing-path-in-a-matrix/">329. çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°çŸ©é˜µï¼Œæ‰¾å‡ºæœ€é•¿é€’å¢è·¯å¾„çš„é•¿åº¦ã€‚</p>
<p>å¯¹äºæ¯ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥å¾€ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³å››ä¸ªæ–¹å‘ç§»åŠ¨ã€‚ ä½ ä¸èƒ½åœ¨å¯¹è§’çº¿æ–¹å‘ä¸Šç§»åŠ¨æˆ–ç§»åŠ¨åˆ°è¾¹ç•Œå¤–ï¼ˆå³ä¸å…è®¸ç¯ç»•ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = </span><br><span class="line">[</span><br><span class="line">  [<span class="number">9</span>,<span class="number">9</span>,<span class="number">4</span>],</span><br><span class="line">  [<span class="number">6</span>,<span class="number">6</span>,<span class="number">8</span>],</span><br><span class="line">  [<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line">] </span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span> </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢è·¯å¾„ä¸ºÂ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">9</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = </span><br><span class="line">[</span><br><span class="line">  [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],</span><br><span class="line">  [<span class="number">3</span>,<span class="number">2</span>,<span class="number">6</span>],</span><br><span class="line">  [<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">] </span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span> </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢è·¯å¾„æ˜¯Â [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]ã€‚æ³¨æ„ä¸å…è®¸åœ¨å¯¹è§’çº¿æ–¹å‘ä¸Šç§»åŠ¨ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è®°å¿†åŒ–é€’å½’ï¼Œè¿™é¢˜å¦‚æœé€’æ¨çš„è¯éœ€è¦ä¿è¯å­é—®é¢˜éƒ½å·²ç»è¢«è®¡ç®—è¿‡ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œæ’åºé¢„å¤„ç†ï¼Œç¡®ä¿å¤§çš„å…ˆæ±‚å‡ºæ¥ï¼Œç„¶åå†è¿›è¡Œè½¬ç§»ï¼Œå‚è€ƒä¸Šé¢ <a href="#5331-%E8%B7%B3%E8%B7%83%E6%B8%B8%E6%88%8F-V">5331-è·³è·ƒæ¸¸æˆ-V</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> [][] dir =&#123;&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">Integer [][] cache = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®°å¿†åŒ–é€’å½’ï¼Œæ•°ç»„é€’æ¨çš„æ–¹å¼çŠ¶æ€è½¬ç§»æ–¹å‘ä¸æ˜ç¡®ï¼Œéœ€è¦æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestIncreasingPath</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (matrix == <span class="literal">null</span> || matrix.length &lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> matrix.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> matrix[<span class="number">0</span>].length;</span><br><span class="line">    cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[m][n];</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++)&#123;</span><br><span class="line">            res = Math.max(res, dfs(matrix, i, j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[][] matrix, <span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cache[x][y] != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> cache[x][y];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; dir.length; i++)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">nx</span> <span class="operator">=</span> x + dir[i][<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">ny</span> <span class="operator">=</span> y + dir[i][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (valid(matrix, nx, ny) &amp;&amp; matrix[nx][ny] &gt; matrix[x][y])&#123;</span><br><span class="line">            res = Math.max(res, dfs(matrix, nx, ny)+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[x][y] = res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">valid</span><span class="params">(<span class="type">int</span>[][] matrix, <span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &gt;= <span class="number">0</span> &amp;&amp; x &lt; matrix.length &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt; matrix[<span class="number">0</span>].length; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å­—ç¬¦ä¸²ç±»å‹çš„åŠ¨æ€è§„åˆ’"><a href="#å­—ç¬¦ä¸²ç±»å‹çš„åŠ¨æ€è§„åˆ’" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹çš„åŠ¨æ€è§„åˆ’"></a><em>å­—ç¬¦ä¸²ç±»å‹çš„åŠ¨æ€è§„åˆ’</em></h2><h2 id="1143-æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#1143-æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="1143. æœ€é•¿å…¬å…±å­åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-common-subsequence/">1143. æœ€é•¿å…¬å…±å­åºåˆ—</a></h2><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚</p>
<p>ä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚<br>ä¾‹å¦‚ï¼Œâ€aceâ€ æ˜¯ â€œabcdeâ€ çš„å­åºåˆ—ï¼Œä½† â€œaecâ€ ä¸æ˜¯ â€œabcdeâ€ çš„å­åºåˆ—ã€‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ã€Œå…¬å…±å­åºåˆ—ã€æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚ è‹¥è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰å…¬å…±å­åºåˆ—ï¼Œåˆ™è¿”å› 0 </p>
<blockquote>
<p>æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜æ˜¯åœ¨ä¸€ç»„åºåˆ—ï¼ˆé€šå¸¸ 2 ä¸ªï¼‰ä¸­æ‰¾åˆ°æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆæ³¨æ„ï¼šä¸åŒäºå­ä¸²ï¼ŒLCS ä¸éœ€è¦æ˜¯è¿ç»­çš„å­ä¸²ï¼‰ã€‚è¯¥é—®é¢˜æ˜¯å…¸å‹çš„è®¡ç®—æœºç§‘å­¦é—®é¢˜ï¼Œæ˜¯æ–‡ä»¶å·®å¼‚æ¯”è¾ƒç¨‹åºçš„åŸºç¡€ï¼Œåœ¨ç”Ÿç‰©ä¿¡æ¯å­¦ä¸­ä¹Ÿæœ‰æ‰€åº”ç”¨</p>
</blockquote>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štext1 = <span class="string">&quot;abcde&quot;</span>, text2 = <span class="string">&quot;ace&quot;</span> </span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span>  </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ <span class="string">&quot;ace&quot;</span>ï¼Œå®ƒçš„é•¿åº¦ä¸º <span class="number">3</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štext1 = <span class="string">&quot;abc&quot;</span>, text2 = <span class="string">&quot;abc&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ <span class="string">&quot;abc&quot;</span>ï¼Œå®ƒçš„é•¿åº¦ä¸º <span class="number">3</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štext1 = <span class="string">&quot;abc&quot;</span>, text2 = <span class="string">&quot;def&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰å…¬å…±å­åºåˆ—ï¼Œè¿”å› <span class="number">0</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>2019.10.19 åŠ›æ‰£ç»ˆäºæœ‰è¿™é¢˜äº†ï¼Œé‡æ–°æ¥åšä¸€éï¼Œè¿™é¢˜ä¹Ÿå°±æ˜¯ç»å¸¸è¯´çš„ LCSï¼Œdp çš„ç»å…¸é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestCommonSubsequence</span><span class="params">(String A, String B)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[A.length()+<span class="number">1</span>][B.length()+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=A.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=B.length();j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A.charAt(i-<span class="number">1</span>)==B.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=Math.max(dp[i-<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[A.length()][B.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®çœ‹è§è¿™ç§ä»€ä¹ˆæœ€é•¿çš„å¤šåŠå’Œ dp æœ‰å…³ç³»ï¼Œè¿™é¢˜åªè¦æ˜ç™½å‡ ä¸ªè¦ç‚¹å°±å¯ä»¥æ¨å‡º dp æ–¹ç¨‹</p>
<ul>
<li><p><code>dp[i][j]</code> ä»£è¡¨ A åºåˆ—å‰<code>i</code>ä¸ªå­—ç¬¦ï¼ˆè®°ä¸º<code>Ai</code>ï¼‰ï¼Œ å’Œ B åºåˆ—å‰<code>j</code>ä¸ªå­—ç¬¦ï¼ˆè®°ä¸º<code>Bj</code>ï¼‰ çš„ LCS</p>
</li>
<li><p>ä¸¤å±‚ for å¾ªç¯éå†ä¸¤ä¸ªåºåˆ—ï¼Œå½“<code>A[i]==B[j]</code>çš„æ—¶å€™ï¼ŒLCS é•¿åº¦å°±ä¼šå¢åŠ  1ï¼Œè¿›è€Œå¾—åˆ° dp æ–¹ç¨‹</p>
<p><code>dp[i][j]=dp[i-1][j-1]+1</code>   dp[i-1] [j-1] ä»£è¡¨çš„å°±æ˜¯ä¸åŒ…å«<code>Ai/Bj</code>çš„<code>Ai-1</code>å’Œ<code>Bj-1</code> çš„ LCS</p>
</li>
<li><p><code>A[i]!=B[j]</code>çš„æ—¶å€™å°±æœ‰ä¸¤ç§æƒ…å†µäº†ï¼Œé¦–å…ˆ<code>A[i]</code>å’Œ<code>B[j]</code>å·²ç»<strong>ä¸å¯èƒ½åŒæ—¶å‡ºç°åœ¨æœ€ç»ˆçš„ LCS é‡Œé¢</strong>äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘å¦å¤–çš„ä¸¤ç§æƒ…å†µ<code>dp[i][j-1]</code>å’Œ<code>dp[i-1][j]</code>å–ä¸ªæœ€å¤§å€¼</p>
</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„å°ç»†èŠ‚ï¼Œè¿™é‡Œå¾ªç¯éƒ½æ˜¯ä» 1 å¼€å§‹çš„ï¼Œè¿™æ ·å°±ä¸ç”¨å¤„ç†åˆå§‹å€¼ï¼Œå¦‚æœä» 0 å¼€å§‹çš„è¯ï¼Œå¤„ç†åˆå§‹æƒ…å†µï¼ˆiï¼Œj=0 çš„æƒ…å†µï¼‰ä¼šéº»çƒ¦ä¸€ç‚¹</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>2019.10.19 é‡å†™äº†ä¸€ç§è®°å¿†åŒ–é€’å½’çš„æ–¹æ³•ï¼Œæ²¡æœ‰ dp å¿«ï¼Œä½†æ˜¯æ€è·¯å…¶å®æ˜¯ç±»ä¼¼çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer[][] cache=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestCommonSubsequence</span><span class="params">(String text1, String text2)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(text2==<span class="literal">null</span> || text1==<span class="literal">null</span> || text1.length()&lt;=<span class="number">0</span> ||text2.length()&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> len1=text1.length();</span><br><span class="line">    <span class="type">int</span> len2=text2.length();</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[len1][len2];</span><br><span class="line">    <span class="keyword">return</span> lcs(text1,len1-<span class="number">1</span>,text2,len2-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//lcs å®šä¹‰ï¼šæ±‚ text1[0,a] å’Œ text2[0,b] çš„æœ€é•¿å…¬å…±å­åºåˆ—</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lcs</span><span class="params">(String text1, <span class="type">int</span> a,String text2,<span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(a==-<span class="number">1</span> || b==-<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cache[a][b]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[a][b];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (text1.charAt(a)==text2.charAt(b)) &#123;</span><br><span class="line">        cache[a][b]=lcs(text1,a-<span class="number">1</span>,text2,b-<span class="number">1</span>)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> cache[a][b];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cache[a][b]=Math.max(lcs(text1,a-<span class="number">1</span>,text2,b),lcs(text1,a,text2,b-<span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> cache[a][b];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AtCoder-LCS"><a href="#AtCoder-LCS" class="headerlink" title="AtCoder-LCS"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/dp/tasks/dp_f">AtCoder-LCS</a></h2><p>é¢˜ç›®å°±ä¸ copy äº†ï¼Œè¿™é‡Œå°±æ˜¯æ±‚å‡º lcs å…·ä½“çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ±‚é•¿åº¦</p>
<p>æˆ‘è¿™é‡Œæ˜¯å‚è€ƒäº† leetcode ä¸Šä¸€ä¸ªå¤§ä½¬çš„ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/circle/article/CwZVuV/">æ–‡ç« </a> åˆ©ç”¨ back æ•°ç»„ï¼Œä»åå‘å‰é€’æ¨ï¼Œä½†æ˜¯å®é™…ä¸Šæœ‰ç‚¹å¤šä½™ï¼Œç›´æ¥æ ¹æ® dp æ•°ç»„ä¹Ÿå¯ä»¥æ¨å›å»ï¼Œä½†æ˜¯è¿™æ ·å†™æ¯”è¾ƒé€šç”¨ï¼Œé€»è¾‘æ¯”è¾ƒæ¸…æ¥šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="keyword">while</span>(sc.hasNext())&#123;</span><br><span class="line">        String A=sc.next();</span><br><span class="line">        String B=sc.next();</span><br><span class="line">        System.out.println(longestCommonSubsequence(A,B));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">longestCommonSubsequence</span><span class="params">(String A, String B)</span> &#123;</span><br><span class="line">    <span class="type">int</span> lenA=A.length();</span><br><span class="line">    <span class="type">int</span> lenB=B.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[lenA+<span class="number">1</span>][lenB+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span>[][] back=<span class="keyword">new</span> <span class="title class_">int</span>[lenA+<span class="number">1</span>][lenB+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=lenA;i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=lenB;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A.charAt(i-<span class="number">1</span>)==B.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">                back[i][j]=<span class="number">1</span>; <span class="comment">//å·¦ä¸Š</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dp[i-<span class="number">1</span>][j]&gt;dp[i][j-<span class="number">1</span>])&#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j];</span><br><span class="line">                back[i][j]=<span class="number">2</span>; <span class="comment">//ä¸Š</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=dp[i][j-<span class="number">1</span>];</span><br><span class="line">                back[i][j]=<span class="number">0</span>; <span class="comment">//å·¦</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> i=lenA,j=lenB;</span><br><span class="line">    StringBuilder res=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">while</span>(i&gt;<span class="number">0</span> &amp;&amp; j&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (back[i][j]==<span class="number">1</span>) &#123;</span><br><span class="line">            i--;j--;</span><br><span class="line">            res.append(A.charAt(i));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(back[i][j]==<span class="number">2</span>)&#123;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.reverse().toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>äº†è§£å³å¯ã€‚</p>
<h2 id="718-æœ€é•¿é‡å¤å­æ•°ç»„"><a href="#718-æœ€é•¿é‡å¤å­æ•°ç»„" class="headerlink" title="718. æœ€é•¿é‡å¤å­æ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/">718. æœ€é•¿é‡å¤å­æ•°ç»„</a></h2><p>ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„ <code>A</code> å’Œ <code>B</code> ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">A: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">B: [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">é•¿åº¦æœ€é•¿çš„å…¬å…±å­æ•°ç»„æ˜¯ [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ol>
<li>1 &lt;= len(A), len(B) &lt;= 1000</li>
<li>0 &lt;= A[i], B[i] &lt; 100</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ç®€å•çš„é€’æ¨ï¼Œæ³¨æ„åˆ«å†™æˆä¸Šé¢çš„ lcs äº†ï¼Œè¿™é‡Œçš„<code>dp[i][j]</code> ä»£è¡¨çš„å…¶å®æ˜¯<strong>å…¬å…±å­ä¸²</strong>ä»¥<code>A[i]</code>å’Œ<code>B[i]</code> ç»“å°¾çš„æœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ï¼Œå¦‚æœ<code>A[i]</code>å’Œ<code>B[i]</code>ä¸ç›¸ç­‰é‚£å°±æ˜¯ 0</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findLength</span><span class="params">(<span class="type">int</span>[] A, <span class="type">int</span>[] B)</span> &#123;</span><br><span class="line">    <span class="type">int</span> lenA=A.length;</span><br><span class="line">    <span class="type">int</span> lenB=B.length;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[lenA+<span class="number">1</span>][lenB+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=lenA;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=lenB;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i-<span class="number">1</span>]==B[j-<span class="number">1</span>])&#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">                res=Math.max(dp[i][j],res);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<blockquote>
<p>æœ¬æ¥æ˜¯æƒ³ç»ƒç»ƒäºŒåˆ†ï¼Œåœ¨äºŒåˆ†çš„ tag é‡Œé¢çœ‹è§çš„è¿™é¢˜ï¼Œç»“æœå‘ç°è¿™é¢˜ dp ä¼¼ä¹æ›´å®¹æ˜“ï¼Œçœ‹äº†å®˜æ–¹çš„äºŒåˆ†çš„è§£æ³•ï¼Œå…¶å®å°±æ˜¯äºŒåˆ†å…¬å…±å­ä¸²çš„é•¿åº¦ï¼Œç„¶åæ£€æŸ¥ï¼Œæ£€æŸ¥è¿™ä¸€æ­¥æœ‰ä¸€äº›æ“ä½œï¼Œä¸æ˜¯å¾ˆç†è§£ï¼Œä»¥åæœ‰æœºä¼šå†æ¥è¡¥å……ã€‚<br>_å·²è¡¥å……_ï¼Œè§ <a href="http://imlgw.top/2020/07/01/rabinkarp-suan-fa/#718-%E6%9C%80%E9%95%BF%E9%87%8D%E5%A4%8D%E5%AD%90%E6%95%B0%E7%BB%84">Rabin-Karp ä¸“é¢˜</a></p>
</blockquote>
<h2 id="72-ç¼–è¾‘è·ç¦»"><a href="#72-ç¼–è¾‘è·ç¦»" class="headerlink" title="72. ç¼–è¾‘è·ç¦»"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/edit-distance/">72. ç¼–è¾‘è·ç¦»</a></h2><p>ç»™å®šä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œè®¡ç®—å‡ºå°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•° ã€‚</p>
<p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</p>
<ul>
<li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li>
<li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li>
<li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li>
</ul>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šword1 = <span class="string">&quot;horse&quot;</span>, word2 = <span class="string">&quot;ros&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">horse -&gt; rorse ï¼ˆå°† <span class="string">&#x27;h&#x27;</span> æ›¿æ¢ä¸º <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">rorse -&gt; rose ï¼ˆåˆ é™¤ <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">rose -&gt; ros ï¼ˆåˆ é™¤ <span class="string">&#x27;e&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šword1 = <span class="string">&quot;intention&quot;</span>, word2 = <span class="string">&quot;execution&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">intention -&gt; inention ï¼ˆåˆ é™¤ <span class="string">&#x27;t&#x27;</span>)</span><br><span class="line">inention -&gt; enention ï¼ˆå°† <span class="string">&#x27;i&#x27;</span> æ›¿æ¢ä¸º <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">enention -&gt; exention ï¼ˆå°† <span class="string">&#x27;n&#x27;</span> æ›¿æ¢ä¸º <span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">exention -&gt; exection ï¼ˆå°† <span class="string">&#x27;n&#x27;</span> æ›¿æ¢ä¸º <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">exection -&gt; execution ï¼ˆæ’å…¥ <span class="string">&#x27;u&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å¾ˆç»å…¸çš„åŠ¨æ€è§„åˆ’çš„é—®é¢˜ï¼Œåšä¹‹å‰çœ‹äº†åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œç„¶åå¾ˆå¿«å†™å‡ºäº†é€’å½’çš„è§£æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer[][] cache=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDistance</span><span class="params">(String word1, String word2)</span> &#123;</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[word1.length()][word2.length()];</span><br><span class="line">    <span class="keyword">return</span> minDistance(word1,word1.length()-<span class="number">1</span>,word2,word2.length()-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€’å½’çš„å®šä¹‰ï¼šword1[0,idx1] å’Œ word2[0,idx2] çš„æœ€çŸ­ç¼–è¾‘è·ç¦»</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDistance</span><span class="params">(String word1,<span class="type">int</span> idx1,String word2,<span class="type">int</span> idx2)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (idx1&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> idx2+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (idx2&lt;<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> idx1+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cache[idx1][idx2]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[idx1][idx2];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (word1.charAt(idx1) == word2.charAt(idx2)) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[idx1][idx2]=minDistance(word1,idx1-<span class="number">1</span>,word2,idx2-<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cache[idx1][idx2]=<span class="number">1</span>+Math.min(minDistance(word1,idx1-<span class="number">1</span>,word2,idx2),Math.min(minDistance(word1,idx1,word2,idx2-<span class="number">1</span>),minDistance(word1,idx1-<span class="number">1</span>,word2,idx2-<span class="number">1</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¸å¿ƒçš„é€’æ¨å…¬å¼å°±æ˜¯ </p>
<p><code>minDis(i,j)=minDis(i-1,j-1)  word1[i]==word2[j]</code></p>
<p><code>minDis(i,j)=min(minDis(i-1,j),minDis(i,j-1),minDis(i-1,j-1))+1  word1[i]!=word2[j]</code></p>
<p>ç¬¬ä¸€ä¸ªå…¬å¼å¥½è¯´ï¼Œç›¸ç­‰æ—¶å€™å°±åˆ«åŠ¨ï¼Œå»¶ç»­ä¹‹å‰çš„çŠ¶æ€ï¼Œå…³é”®æ˜¯ç¬¬äºŒä¸ªï¼Œä¸ç›¸ç­‰çš„æ—¶å€™ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ±‚å¯¹åº”çš„ä¸‰ç§æ“ä½œå¢ï¼Œåˆ ï¼Œæ”¹çš„æœ€å°å€¼ï¼Œä½†æ˜¯è¿™é‡Œï¼Œç¬¬äºŒç§åˆ çš„æ“ä½œï¼Œè¿™é‡Œè¦æƒ³æ¸…æ¥šï¼Œå…¶å® word1 åˆ é™¤ä¸€ä¸ªå…¶å®å°±ç­‰ä»·äº word2 å¢åŠ ä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯<code>minDis(i,j-1)</code>ï¼Œè™½ç„¶é¢˜ç›®è¯´çš„æ˜¯ä» word1 è½¬æ¢ä¸º word2ï¼Œä½†æ˜¯å…¶å®ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹å…¶å®æ˜¯å¯é€†çš„</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ ‡å‡†çš„åŠ¨æ€è§„åˆ’å†™æ³•ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸Šé¢çš„è®°å¿†åŒ–é€’å½’å¥½å†™ï¼ŒåŠ¨æ€è§„åˆ’è¦è€ƒè™‘çš„è¾¹ç•Œæ¯”é€’å½’è¦å¤š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDistance2</span><span class="params">(String word1, String word2)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (word1.length()&lt;=<span class="number">0</span> || word2.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> word2.length()==<span class="number">0</span>?word1.length():word2.length();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//dp[i][j]: word1 å‰ i ä¸ªå’Œ word2 å‰ j ä¸ªçš„æœ€çŸ­ç¼–è¾‘è·ç¦»</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[word1.length()+<span class="number">1</span>][word2.length()+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=word2.length();i++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][i]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=word1.length();i++) &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=word1.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=word2.length();j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (word1.charAt(i-<span class="number">1</span>)==word2.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=<span class="number">1</span>+Math.min(dp[i-<span class="number">1</span>][j],Math.min(dp[i][j-<span class="number">1</span>],dp[i-<span class="number">1</span>][j-<span class="number">1</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[word1.length()][word2.length()];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="647-å›æ–‡å­ä¸²"><a href="#647-å›æ–‡å­ä¸²" class="headerlink" title="647. å›æ–‡å­ä¸²"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/palindromic-substrings/">647. å›æ–‡å­ä¸²</a></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­ä¸²ã€‚</p>
<p>å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è®¡ä¸ºæ˜¯ä¸åŒçš„å­ä¸²ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;abc&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²ï¼š<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>.</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;aaa&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è¯´æ˜ï¼š<span class="number">6</span> ä¸ªå›æ–‡å­ä¸²ï¼š<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;aa&quot;</span>, <span class="string">&quot;aa&quot;</span>, <span class="string">&quot;aaa&quot;</span>.</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>è¾“å…¥çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¼šè¶…è¿‡ 1000ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’çš„è§£æ³•ï¼Œå…¶å®æˆ‘æ˜¯æ²¡æƒ³åˆ°çš„ï¼Œ<code>dp[i][j]</code>ä»£è¡¨çš„æ˜¯<code>s[i,j]</code> æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSubstrings</span><span class="params">(String s)</span> &#123; </span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    <span class="comment">//aaaba</span></span><br><span class="line">    <span class="comment">//dp[i][j] i~j æ˜¯ä¸æ˜¯å›æ–‡</span></span><br><span class="line">    <span class="type">boolean</span> [][] dp=<span class="keyword">new</span> <span class="title class_">boolean</span>[n][n];</span><br><span class="line">    <span class="type">int</span> res=n; <span class="comment">//ä¸‹é¢çš„å¾ªç¯æ²¡æœ‰ç»Ÿè®¡å•ä¸ªå­—ç¬¦çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=n-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++) &#123; <span class="comment">//ç»Ÿä¸€å†™æ³•ï¼Œè¿™é‡Œæ”¹æˆ j=i å°±å¯ä»¥ç»Ÿè®¡åˆ°å•ä¸ªå­—ç¬¦çš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) == s.charAt(j) &amp;&amp; (j-i&lt;=<span class="number">2</span> || dp[i+<span class="number">1</span>][j-<span class="number">1</span>])) &#123;</span><br><span class="line">                dp[i][j]=<span class="literal">true</span>;</span><br><span class="line">                res++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å¾ˆç†Ÿæ‚‰çš„è§£æ³•ï¼Œæ²¡é”™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-palindromic-substring/">æœ€é•¿å›æ–‡å­ä¸²ä¸­</a> çš„è§£æ³•ï¼Œæ¯”ä¸Šé¢çš„åŠ¨æ€è§„åˆ’ä¼šå¿«å¾ˆå¤šï¼Œä¹Ÿæ¯”è¾ƒè‡ªç„¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸­å¿ƒæ‰©å±•æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countSubstrings</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        count+=spread(s,i,i+<span class="number">1</span>)+spread(s,i,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">spread</span><span class="params">(String s,<span class="type">int</span> i,<span class="type">int</span> j)</span>&#123;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&gt;=<span class="number">0</span> &amp;&amp; j&lt;s.length())&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i)==s.charAt(j)) &#123;</span><br><span class="line">            i--;j++;</span><br><span class="line">            res++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="32-æœ€é•¿æœ‰æ•ˆæ‹¬å·"><a href="#32-æœ€é•¿æœ‰æ•ˆæ‹¬å·" class="headerlink" title="32. æœ€é•¿æœ‰æ•ˆæ‹¬å·"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-valid-parentheses/">32. æœ€é•¿æœ‰æ•ˆæ‹¬å·</a></h2><p>ç»™å®šä¸€ä¸ªåªåŒ…å« â€˜(â€˜ å’Œ â€˜)â€™ çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿çš„åŒ…å«æœ‰æ•ˆæ‹¬å·çš„å­ä¸²çš„é•¿åº¦ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;(()&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º <span class="string">&quot;()&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;)()())&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º <span class="string">&quot;()()&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ ˆ+dp çš„æ€è·¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestValidParentheses</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Stack&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()]; <span class="comment">//ä»¥ i ä½ç½®æ‹¬å·ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·</span></span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i)==<span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(i); <span class="comment">//dp[i]=0</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!stack.isEmpty())&#123;</span><br><span class="line">                <span class="type">int</span> left=stack.pop();</span><br><span class="line">                dp[i]= left==<span class="number">0</span>?i-left+<span class="number">1</span>:dp[left-<span class="number">1</span>]+i-left+<span class="number">1</span>;</span><br><span class="line">                res=Math.max(res,dp[i]);</span><br><span class="line">            &#125;<span class="comment">//else dp[i]=0  </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯è¿™ç§è§£æ³•ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œæ ˆä¸­å­˜ç´¢å¼•ï¼Œ<code>dp[i]</code> ä»£è¡¨ä»¥<code>i</code>ä½ç½®æ‹¬å·ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·ï¼Œå½“é‡åˆ°å³æ‹¬å·çš„æ—¶å€™å°†æ ˆé¡¶çš„å·¦æ‹¬å·çš„ç´¢å¼•<code>left</code>å¼¹å‡ºæ¥ï¼Œä¸¤è€…å½¢æˆçš„æ‹¬å·é•¿åº¦å†åŠ ä¸Šå·¦æ‹¬å·ç´¢å¼•å‰ä¸€ä¸ªå…ƒç´ <code>dp[left-1]</code>å°±æ˜¯å½“å‰ä½ç½®çš„<code>dp[i]</code></p>
<p><strong>Update</strong></p>
<p>å›å¤´åšç¬¬äºŒéåœ°æ—¶å€™ç«Ÿç„¶å†™äº†ä¸ªä¸ä¸€æ ·çš„ dp æ€è·¯ hahaha~ï¼Œè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œé‡åˆ°å³æ‹¬å·ä¸æ˜¯ç›´æ¥ç”¨<code>i-left+1</code> ç®—é•¿åº¦ï¼Œè€Œæ˜¯ç›´æ¥æ ¹æ®å‰ä¸€ä¸ªå­—ç¬¦<code>dp[i-1]</code> è¿›è¡Œè½¬åŒ–ï¼Œå…¶å®æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ˜¯ç´¯åŠ çš„ï¼Œå‰é¢çš„æ˜¯ä¸€æ¬¡å°±å…¨ç®—å‡ºæ¥äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//update: 2020.4.13</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestValidParentheses</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i)==<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!stack.isEmpty())&#123;</span><br><span class="line">                <span class="type">int</span> left=stack.pop();</span><br><span class="line">                <span class="comment">//dp[i]=(left&gt;1?dp[left-1]+dp[i-1]:dp[i-1])+2;</span></span><br><span class="line">                dp[i]=dp[i-<span class="number">1</span>]+(left&gt;<span class="number">1</span>?dp[left-<span class="number">1</span>]:<span class="number">0</span>)+<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res=Math.max(res,dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>çº¯ dp è§£æ³•ï¼Œä¸Šé¢çš„è§£æ³•è™½ç„¶ä¹Ÿç”¨åˆ°äº†ä¸€ç‚¹åŠ¨æ€è§„åˆ’ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿçº¯ç²¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestValidParentheses</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i)==<span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i-<span class="number">1</span>)==<span class="string">&#x27;(&#x27;</span>) &#123; <span class="comment">//å‰ä¸€ä¸ªæ˜¯å·¦æ‹¬å·</span></span><br><span class="line">                dp[i]=i-<span class="number">2</span>&gt;=<span class="number">0</span>?dp[i-<span class="number">2</span>]+<span class="number">2</span>:<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123; <span class="comment">//å‰ä¸€ä¸ªæ˜¯å³æ‹¬å· ()(())</span></span><br><span class="line">                <span class="keyword">if</span> (i-dp[i-<span class="number">1</span>]-<span class="number">1</span>&gt;=<span class="number">0</span> &amp;&amp; s.charAt(i-dp[i-<span class="number">1</span>]-<span class="number">1</span>)==<span class="string">&#x27;(&#x27;</span>) &#123;<span class="comment">//å‰ä¸€ä¸ªå³æ‹¬å·çš„åˆæ³•åºåˆ—çš„å‰ä¸€ä¸ªæ˜¯&#x27;(&#x27;</span></span><br><span class="line">                    <span class="comment">//å‰ä¸€ä¸ªçš„å‰ä¸€ä¸ªçš„ dp[i-dp[i-1]-2]+dp[i-1]+2</span></span><br><span class="line">                    dp[i]=(i-dp[i-<span class="number">1</span>]-<span class="number">2</span>&gt;=<span class="number">0</span>?dp[i-dp[i-<span class="number">1</span>]-<span class="number">2</span>]:<span class="number">0</span>)+dp[i-<span class="number">1</span>]+<span class="number">2</span>; </span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//å‰ä¸€ä¸ªå³æ‹¬å·çš„åˆæ³•åºåˆ—çš„å‰ä¸€ä¸ªæ˜¯&#x27;)&#x27;, æ²¡æ•‘äº†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res=Math.max(res,dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šéƒ½åœ¨ä»£ç æ³¨é‡Šä¸­ï¼Œ<del>æ„Ÿè§‰æ²¡é‚£ä¹ˆå®¹æ˜“ç›´æ¥æƒ³åˆ°ï¼Œæ¯•ç«Ÿ hard é¢˜</del></p>
<p><strong>Update: 2020.7.4</strong></p>
<p>ä»Šå¤©çš„æ‰“å¡é¢˜ï¼Œä¹‹å‰çš„åšæ³•åªè®°å¾—æ ˆ+dp çš„åšæ³•ï¼Œdp çš„æ–¹æ³•å¿˜äº†ï¼Œç°åœºå†™äº†ä¸‹çº¯ dp çš„æ–¹æ³•ï¼Œå‘ç°å…¶å®çº¯ dp çš„å¥½åƒæ›´ç®€å•å•Šï¼ŒçŠ¶æ€å®šä¹‰å‡ºæ¥åï¼Œè½¬ç§»æ–¹ç¨‹å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼ˆæ˜¯æˆ‘å˜å¼ºäº†ä¹ˆğŸ¤£ï¼‰</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å’Œå‰é¢çš„å†™æ³•ä¸ä¸€æ ·ï¼Œæ„Ÿè§‰æˆ‘çš„æ›´å¥½ç†è§£</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">longestValidParentheses</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(s)) <span class="comment">//ä»¥ s[i] ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·</span></span><br><span class="line">    <span class="comment">//dp[0] = 0</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(s); i++&#123;</span><br><span class="line">        <span class="keyword">if</span> s[i] == <span class="string">&#x27;)&#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> i - dp[i<span class="number">-1</span>] - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; s[i - dp[i<span class="number">-1</span>] - <span class="number">1</span>] == <span class="string">&#x27;(&#x27;</span>&#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">1</span>] + <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span>(i - dp[i<span class="number">-1</span>] - <span class="number">2</span> &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    dp[i] += dp[i - dp[i<span class="number">-1</span>] - <span class="number">2</span>]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res = Max(res, dp[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Max</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b&#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…¶å®è¿˜æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§åˆ©ç”¨çº¯åˆ©ç”¨æ ˆçš„ï¼Œè¿˜æœ‰ä¸€ç§å¾ˆç¥å¥‡çš„æ–¹æ³•ï¼Œæ²¡ä»€ä¹ˆé€šç”¨æ€§ï¼Œå¾ˆéš¾ç›´æ¥æƒ³å‡ºæ¥ï¼Œå°±ä¸åšè®°å½•äº†ï¼Œçº¯æ ˆçš„è§£æ³•åé¢å†æ¥è¡¥å……</p>
</blockquote>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p><del>çº¯åˆ©ç”¨æ ˆçš„è§£æ³•ä»¥åå†æ¥è¡¥å……</del> ç®—äº†ï¼Œç›´æ¥å†™äº†å§</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestValidParentheses</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;Integer&gt; stack=<span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">    stack.push(-<span class="number">1</span>); <span class="comment">//ä¸´ç•Œç‚¹</span></span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.charAt(i)==<span class="string">&#x27;(&#x27;</span>)&#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">            <span class="keyword">if</span>(stack.isEmpty())&#123; </span><br><span class="line">                <span class="comment">//æ ˆä¸ºç©ºï¼Œè¯´æ˜å½“å‰çš„&#x27;)&#x27;è‚¯å®šæ˜¯ä¸åˆæ³•çš„</span></span><br><span class="line">                <span class="comment">//å…¶å®ç›¸å½“äºä¸€ä¸ªåˆ†ç•Œç‚¹ï¼Œè¿™ä¸ªä½ç½®ä¹‹å‰çš„å­—ç¬¦ä¸å¯èƒ½å†æ„æˆåˆæ³•çš„åºåˆ—äº†</span></span><br><span class="line">                <span class="comment">//åé¢çš„æ ˆç©ºçš„æ—¶å€™å°±ä¸èƒ½å†æ ¹æ®-1 æ¥ç®—é•¿åº¦äº†ï¼Œéœ€è¦ä¸€ä¸ªæ–°çš„ä¸´ç•Œç‚¹</span></span><br><span class="line">                stack.push(i);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                res=Math.max(res,i-stack.peek());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…³é”®çš„åœ°æ–¹å°±åœ¨äºå°†<strong>éæ³•çš„å³æ‹¬å·</strong>å…¥æ ˆï¼Œä½œä¸ºä¸€ä¸ªåˆ†ç•Œç‚¹ä¾¿äºåé¢è®¡ç®—ï¼Œåˆå§‹çš„-1 ä¹Ÿå¾ˆå…³é”®</p>
<p><strong>è§£æ³•å››</strong></p>
<p>UPDATE: 2020.7.4ï¼ŒæŠŠä¹‹å‰æ‰€è°“çš„â€œç¥å¥‡â€çš„æ–¹æ³•ä¹Ÿè®°å½•ä¸‹ï¼Œå…¶å®ä¹Ÿæ²¡å•¥ç¥å¥‡çš„ï¼Œçœ‹ä¸€ä¸‹å°±æ‡‚äº†ï¼Œè¿™ç§æ–¹æ³•è¿˜æ˜¯å¾ˆä¼˜ç§€çš„ï¼Œç©ºé—´å¤æ‚åº¦ä¸º<code>O(1)</code></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®æ—¶ç»Ÿè®¡å·¦å³æ‹¬å·çš„ä¸ªæ•°ï¼Œå½“åŒ¹é…çš„æ—¶å€™ç»Ÿè®¡é•¿åº¦ï¼Œè®°å¾—å·¦å³éƒ½è¦æ‰«ä¸€é</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">longestValidParentheses</span><span class="params">(s <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">            left++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> right &gt; left &#123;</span><br><span class="line">            right, left = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> right == left &#123;</span><br><span class="line">            res = Max(res, left*<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    right, left = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="built_in">len</span>(s) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> s[i] == <span class="string">&#x27;(&#x27;</span> &#123;</span><br><span class="line">            left++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> right &lt; left &#123;</span><br><span class="line">            right, left = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> right == left &#123;</span><br><span class="line">            res = Max(res, left*<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Max</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é¢è¯•é¢˜-17-13-æ¢å¤ç©ºæ ¼"><a href="#é¢è¯•é¢˜-17-13-æ¢å¤ç©ºæ ¼" class="headerlink" title="é¢è¯•é¢˜ 17.13. æ¢å¤ç©ºæ ¼"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/re-space-lcci/">é¢è¯•é¢˜ 17.13. æ¢å¤ç©ºæ ¼</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>å“¦ï¼Œä¸ï¼ä½ ä¸å°å¿ƒæŠŠä¸€ä¸ªé•¿ç¯‡æ–‡ç« ä¸­çš„ç©ºæ ¼ã€æ ‡ç‚¹éƒ½åˆ æ‰äº†ï¼Œå¹¶ä¸”å¤§å†™ä¹Ÿå¼„æˆäº†å°å†™ã€‚åƒå¥å­<code>&quot;I reset the computer. It still didnâ€™t boot!&quot;</code>å·²ç»å˜æˆäº†<code>&quot;iresetthecomputeritstilldidntboot&quot;</code>ã€‚åœ¨å¤„ç†æ ‡ç‚¹ç¬¦å·å’Œå¤§å°å†™ä¹‹å‰ï¼Œä½ å¾—å…ˆæŠŠå®ƒæ–­æˆè¯è¯­ã€‚å½“ç„¶äº†ï¼Œä½ æœ‰ä¸€æœ¬åšåšçš„è¯å…¸<code>dictionary</code>ï¼Œä¸è¿‡ï¼Œæœ‰äº›è¯æ²¡åœ¨è¯å…¸é‡Œã€‚å‡è®¾æ–‡ç« ç”¨<code>sentence</code>è¡¨ç¤ºï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•ï¼ŒæŠŠæ–‡ç« æ–­å¼€ï¼Œè¦æ±‚æœªè¯†åˆ«çš„å­—ç¬¦æœ€å°‘ï¼Œè¿”å›æœªè¯†åˆ«çš„å­—ç¬¦æ•°ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> æœ¬é¢˜ç›¸å¯¹åŸé¢˜ç¨ä½œæ”¹åŠ¨ï¼Œåªéœ€è¿”å›æœªè¯†åˆ«çš„å­—ç¬¦æ•°</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">dictionary = [<span class="string">&quot;looked&quot;</span>,<span class="string">&quot;just&quot;</span>,<span class="string">&quot;like&quot;</span>,<span class="string">&quot;her&quot;</span>,<span class="string">&quot;brother&quot;</span>]</span><br><span class="line">sentence = <span class="string">&quot;jesslookedjustliketimherbrother&quot;</span></span><br><span class="line">è¾“å‡ºï¼š <span class="number">7</span></span><br><span class="line">è§£é‡Šï¼š æ–­å¥åä¸º<span class="string">&quot;jess looked just like tim her brother&quot;</span>ï¼Œå…± <span class="number">7</span> ä¸ªæœªè¯†åˆ«å­—ç¬¦ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>0 &lt;= len(sentence) &lt;= 1000</code></li>
<li>  <code>dictionary</code>ä¸­æ€»å­—ç¬¦æ•°ä¸è¶…è¿‡ 150000ã€‚</li>
<li>  ä½ å¯ä»¥è®¤ä¸º<code>dictionary</code>å’Œ<code>sentence</code>ä¸­åªåŒ…å«å°å†™å­—æ¯ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŒæ ·çš„è§£æ³•ï¼Œç”¨ Java å†™å°±æ˜¯ 922msï¼Œæˆ‘è§‰å¾—ä¸»è¦å°±æ˜¯ substring æ‹–æ…¢äº†é€Ÿåº¦ï¼ŒJava é‡Œé¢ substring æ˜¯ O(N) çš„æ“ä½œï¼Œè€Œ golang ä¸­å–åˆ‡ç‰‡å€¼ä»…ä»…åªæ˜¯ä¿®æ”¹å‡ ä¸ªåˆ‡ç‰‡çš„ç†Ÿæ‚‰ç½¢äº†ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1) çš„ï¼Œæ‰€ä»¥ä¼šå¾ˆå¿«ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥è¿‘ä¼¼çš„çœ‹ä½œ O(N^2)</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­£å‘ dpï¼Œ60ms</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">respace</span><span class="params">(dictionary []<span class="type">string</span>, sentence <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> dict = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">bool</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(dictionary); i++ &#123;</span><br><span class="line">        dict[dictionary[i]] = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(sentence)</span><br><span class="line">    <span class="comment">//å‰ i ä¸ªå­—ç¬¦çš„æœ€å°‘æœªè¯†åˆ«å­—ç¬¦</span></span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        dp[i] = dp[i<span class="number">-1</span>] + <span class="number">1</span> <span class="comment">//åˆå§‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; i; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> dict[sentence[j:i]] &#123;</span><br><span class="line">                dp[i] = Min(dp[j], dp[i])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŸ¥è¯¢äº†ç½‘ä¸Šçš„ä¸€äº›èµ„æ–™ï¼Œå‘ç° Java çš„ substring å…¶å®åœ¨ 1.7 ä¹‹å‰æ—¶é—´å¤æ‚åº¦æ˜¯ O(1) çš„ï¼Œåé¢ä¸ºäº†é¿å…å†…å­˜æ³„æ¼å°±æ”¹æˆ O(N) äº† <a target="_blank" rel="noopener" href="https://www.iteye.com/blog/lvdccyb-1947937">å‚è€ƒ</a></p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è®°å¿†åŒ–é€’å½’ï¼Œå…¶å®ä¸€å¼€å§‹å°±è¢«é¢˜ç›®çš„ tag ç»™è¿·æƒ‘äº†ï¼Œæˆ‘ä¸€çœ‹è®°å¿†åŒ–ï¼Œå°±ç›´æ¥å¾€è®°å¿†åŒ–çš„æ–¹å‘å»å†™äº†ï¼ŒåŠ ä¸Šå‰å¤©åˆšå†™äº† å•è¯æ‹†åˆ† 2 çš„è®°å¿†åŒ–ï¼Œå”‰ï¼Œçœ‹æ¥ä»¥åä¸èƒ½ç›´æ¥çœ‹ tag äº†ï¼Œä¸€å¼€å§‹å†™äº†ä¸ªè´¼åƒåœ¾çš„ dfsï¼Œå°±æ˜¯ä¸‹é¢æ³¨é‡Šçš„éƒ¨åˆ†ï¼Œæ—¶é—´å¤æ‚åº¦çˆ†ç‚¸ï¼Œä¸¤å±‚ for å¾ªç¯</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®°å¿†åŒ– dfs tle äº† å¯èƒ½æ€è·¯æœ‰ç‚¹é—®é¢˜</span></span><br><span class="line"><span class="comment">//ç¡®å®æ˜¯æ€è·¯å‡ºäº†é—®é¢˜ï¼Œä¸‹é¢è¡¥å……äº†æ­£ç¡®çš„è®°å¿†åŒ–å†™æ³• 248ms</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">respace</span><span class="params">(dictionary []<span class="type">string</span>, sentence <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> dict = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">bool</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(dictionary); i++ &#123;</span><br><span class="line">        dict[dictionary[i]] = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cache = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">    <span class="keyword">return</span> dfs(sentence, dict, cache)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// func dfs(s string, dict map[string]bool, cache map[string]int) int &#123;</span></span><br><span class="line"><span class="comment">//     if _, ok := cache[s]; ok &#123;</span></span><br><span class="line"><span class="comment">//         return cache[s]</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     var res = len(s)</span></span><br><span class="line"><span class="comment">//     for i := 0; i &lt;= len(s); i++ &#123;</span></span><br><span class="line"><span class="comment">//         temp := len(s)</span></span><br><span class="line"><span class="comment">//         for j := i + 1; j &lt;= len(s); j++ &#123;</span></span><br><span class="line"><span class="comment">//             if dict[s[i:j]] &#123;</span></span><br><span class="line"><span class="comment">//                 temp = Min(temp, dfs(s[j:], dict, cache))</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//         res = Min(res, temp+i)</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//     cache[s] = res</span></span><br><span class="line"><span class="comment">//     return res</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(s <span class="type">string</span>, dict <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">bool</span>, cache <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> _, ok := cache[s]; ok &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[s]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="built_in">len</span>(s)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="built_in">len</span>(s); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> dict[s[:i]] &#123;</span><br><span class="line">            res = Min(res, dfs(s[i:], dict, cache))</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res = Min(res, dfs(s[i:], dict, cache) + i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cache[s] = res</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸‰</strong></p>
<p>ä¸Šé¢çš„è§£æ³•ä»æŸç§è§’åº¦ä¸Šæ¥è¯´éƒ½è¿˜æ˜¯æ˜¯å±äºæš´åŠ›è§£æ³•ï¼Œå³ä½¿æ˜¯ golang çš„ O(N^2) çš„æ–¹æ³•ï¼Œå“ˆå¸Œè¡¨çš„å¸¸æ•°ä¹Ÿæ˜¯å¾ˆå¤§çš„ï¼Œè€Œä¸”å› ä¸ºæ˜¯å­˜çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²æœ¬èº« Hash çš„æ—¶é—´ä¹Ÿæ˜¯ä¸èƒ½å¿½ç•¥çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¼•å…¥<strong>å‰ç¼€æ ‘</strong>ï¼Œä¸äº†è§£ç›¸å…³çŸ¥è¯†çš„å¯ä»¥çœ‹æˆ‘ <a href="http://imlgw.top/2019/12/17/zi-dian-shu/">ä¹‹å‰çš„æ–‡ç« </a></p>
<p>è¿™é‡Œæˆ‘ç”¨ golang ä¹Ÿå†™äº†ä¸€ç‰ˆï¼Œä½†æ˜¯æå‡ä¸æ˜æ˜¾ï¼Œæ‰€ä»¥ç”¨ Java é‡å†™äº†ä¸€ç‰ˆï¼Œæ—¶é—´å¤æ‚åº¦æœ‰äº†è´¨çš„é£è·ƒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Trie+dp 14ms, å¾ˆå¼º</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">respace</span><span class="params">(String[] dictionary, String s)</span> &#123;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    <span class="keyword">for</span> (String word : dictionary ) &#123;</span><br><span class="line">        root.insert(word);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;=n ; i++) &#123;</span><br><span class="line">        dp[i] = dp[i-<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i-<span class="number">1</span>; j &gt;=<span class="number">0</span> ; j--) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(j)-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="comment">//å¾ˆå¤§çš„ä¼˜åŒ–ç‚¹ï¼Œc ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä»¥ c ä¸ºåç¼€çš„å…¶ä»–å­—ç¬¦è‚¯å®šä¹Ÿä¸ä¼šå­˜åœ¨ï¼Œç›´æ¥ break</span></span><br><span class="line">            <span class="keyword">if</span>(cur.next[c] == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(cur.next[c].isWord)&#123;</span><br><span class="line">                dp[i] = Math.min(dp[i], dp[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(dp[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cur = cur.next[c];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œ Trie ä¸ç”¨å†™æœç´¢ï¼Œç›´æ¥æ‰‹åŠ¨çš„æœç´¢ï¼Œè¿™æ ·å¯ä»¥åšä¸€äº›å‰ªæ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    Node[] next = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">26</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="type">boolean</span> isWord;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åå‘æ’å…¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(String s)</span>&#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> s.length()-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i)-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(cur.next[c] == <span class="literal">null</span>)&#123;</span><br><span class="line">                cur.next[c] = <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            cur = cur.next[c];</span><br><span class="line">        &#125;</span><br><span class="line">        cur.isWord = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•å››</strong></p>
<p>æ²¡é”™ï¼Œè¿™é¢˜è§£æ³•å¾ˆå¤šï¼Œä¹Ÿéƒ½å¾ˆå€¼å¾—å­¦ä¹ ï¼Œè§£æ³•å››å…¶å®å°±æ˜¯ä¹‹å‰å­¦è¿‡çš„å­—ç¬¦ä¸²å“ˆå¸Œçš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªè§£æ³•å³è½¬â€”&gt;<a href="http://imlgw.top/2020/07/01/rabinkarp-suan-fa/#%E9%9D%A2%E8%AF%95%E9%A2%98-17-13-%E6%81%A2%E5%A4%8D%E7%A9%BA%E6%A0%BC">Rabin-Karp ç®—æ³•</a></p>
<h2 id="174-åœ°ä¸‹åŸæ¸¸æˆ"><a href="#174-åœ°ä¸‹åŸæ¸¸æˆ" class="headerlink" title="174. åœ°ä¸‹åŸæ¸¸æˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/dungeon-game/">174. åœ°ä¸‹åŸæ¸¸æˆ</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>ä¸€äº›æ¶é­”æŠ“ä½äº†å…¬ä¸»ï¼ˆ<strong>P</strong>ï¼‰å¹¶å°†å¥¹å…³åœ¨äº†åœ°ä¸‹åŸçš„å³ä¸‹è§’ã€‚åœ°ä¸‹åŸæ˜¯ç”±Â M x N ä¸ªæˆ¿é—´ç»„æˆçš„äºŒç»´ç½‘æ ¼ã€‚æˆ‘ä»¬è‹±å‹‡çš„éª‘å£«ï¼ˆ<strong>K</strong>ï¼‰æœ€åˆè¢«å®‰ç½®åœ¨å·¦ä¸Šè§’çš„æˆ¿é—´é‡Œï¼Œä»–å¿…é¡»ç©¿è¿‡åœ°ä¸‹åŸå¹¶é€šè¿‡å¯¹æŠ—æ¶é­”æ¥æ‹¯æ•‘å…¬ä¸»ã€‚</p>
<p>éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°ä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚å¦‚æœä»–çš„å¥åº·ç‚¹æ•°åœ¨æŸä¸€æ—¶åˆ»é™è‡³ 0 æˆ–ä»¥ä¸‹ï¼Œä»–ä¼šç«‹å³æ­»äº¡ã€‚</p>
<p>æœ‰äº›æˆ¿é—´ç”±æ¶é­”å®ˆå«ï¼Œå› æ­¤éª‘å£«åœ¨è¿›å…¥è¿™äº›æˆ¿é—´æ—¶ä¼šå¤±å»å¥åº·ç‚¹æ•°ï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†æŸå¤±å¥åº·ç‚¹æ•°ï¼‰ï¼›å…¶ä»–æˆ¿é—´è¦ä¹ˆæ˜¯ç©ºçš„ï¼ˆæˆ¿é—´é‡Œçš„å€¼ä¸º 0ï¼‰ï¼Œè¦ä¹ˆåŒ…å«å¢åŠ éª‘å£«å¥åº·ç‚¹æ•°çš„é­”æ³•çƒï¼ˆè‹¥æˆ¿é—´é‡Œçš„å€¼ä¸ºæ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºéª‘å£«å°†å¢åŠ å¥åº·ç‚¹æ•°ï¼‰ã€‚</p>
<p>ä¸ºäº†å°½å¿«åˆ°è¾¾å…¬ä¸»ï¼Œéª‘å£«å†³å®šæ¯æ¬¡åªå‘å³æˆ–å‘ä¸‹ç§»åŠ¨ä¸€æ­¥ã€‚</p>
<p><strong>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ç¡®ä¿éª‘å£«èƒ½å¤Ÿæ‹¯æ•‘åˆ°å…¬ä¸»æ‰€éœ€çš„æœ€ä½åˆå§‹å¥åº·ç‚¹æ•°ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼Œè€ƒè™‘åˆ°å¦‚ä¸‹å¸ƒå±€çš„åœ°ä¸‹åŸï¼Œå¦‚æœéª‘å£«éµå¾ªæœ€ä½³è·¯å¾„ <code>å³ -&gt; å³ -&gt; ä¸‹ -&gt; ä¸‹</code>ï¼Œåˆ™éª‘å£«çš„åˆå§‹å¥åº·ç‚¹æ•°è‡³å°‘ä¸º <strong>7</strong>ã€‚</p>
<table class="dungeon" style="display: table;">

<tbody style="display: table-row-group;">

<tr style="display: table-row;">

<td style="display: table-cell;">-2 (K)</td>

<td style="display: table-cell;">-3</td>

<td style="display: table-cell;">3</td>

</tr>

<tr style="display: table-row;">

<td style="display: table-cell;">-5</td>

<td style="display: table-cell;">-10</td>

<td style="display: table-cell;">1</td>

</tr>

<tr style="display: table-row;">

<td style="display: table-cell;">10</td>

<td style="display: table-cell;">30</td>

<td style="display: table-cell;">-5 (P)</td>

</tr>

</tbody>

</table>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><p>  éª‘å£«çš„å¥åº·ç‚¹æ•°æ²¡æœ‰ä¸Šé™ã€‚</p>
</li>
<li><p>  ä»»ä½•æˆ¿é—´éƒ½å¯èƒ½å¯¹éª‘å£«çš„å¥åº·ç‚¹æ•°é€ æˆå¨èƒï¼Œä¹Ÿå¯èƒ½å¢åŠ éª‘å£«çš„å¥åº·ç‚¹æ•°ï¼ŒåŒ…æ‹¬éª‘å£«è¿›å…¥çš„å·¦ä¸Šè§’æˆ¿é—´ä»¥åŠå…¬ä¸»è¢«ç›‘ç¦çš„å³ä¸‹è§’æˆ¿é—´ã€‚</p>
</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä»¥åæ¯æ—¥ä¸€é¢˜æ²¡å†™å‡ºæ¥ä¹‹å‰ç»å£ä¸çœ‹ç¾¤äº†ï¼Œçœ‹äº†ä¸€çœ¼ç¾¤ï¼Œçœ‹è§ç¾¤å‹è®¨è®ºäº†è¿™é¢˜ï¼Œè¯´äº†äºŒåˆ†å’Œ dpï¼Œç„¶åæˆ‘å°±ç›´æ¥å‘äºŒåˆ†çš„æ–¹å‘å»æƒ³äº†ï¼Œå¦‚æœç‹¬ç«‹çš„æƒ³çš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥å¾—å‡ºäºŒåˆ†çš„è§£æ³•çš„ï¼Œæ¯•ç«Ÿé¢˜ç›®çš„æè¿°å¾ˆæ˜æ˜¾å°±æ˜¯äºŒåˆ†ç­”æ¡ˆï¼Œ<strong>æœ€ä½çš„å¥åº·è¡€é‡</strong>ï¼Œå¤§äºè¿™ä¸ªè¡€é‡çš„è‚¯å®šå¯ä»¥æ•‘å‡ºæ¥ï¼Œå°äºè¿™ä¸ªè¡€é‡çš„è‚¯å®šæ•‘ä¸å‡ºæ¥ï¼Œæ‰€ä»¥ check å°±æ˜¯åˆ¤æ–­åœ¨æŸä¸ªè¡€é‡ä¸‹ï¼Œèƒ½å¦æ‹¯æ•‘åˆ°å…¬ä¸»ï¼ˆDPï¼‰</p>
<p>æ—¶é—´å¤æ‚åº¦ O(N^2logN)ï¼ˆå…¶å®æˆ‘è®¤ä¸ºä¹Ÿå¯ä»¥å½“ä½œ N^2 æ¯•ç«Ÿä¸Šä¸‹ç•Œéƒ½ç¡®å®šäº†ï¼ŒlogN ä¹Ÿå°± 30 å·¦å³ï¼‰ï¼Œè¿™ç§è§£æ³•ä¹ŸæŒºä¸é”™çš„ï¼Œèåˆäº†äºŒåˆ†å’Œ dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculateMinimumHP</span><span class="params">(<span class="type">int</span>[][] dungeon)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt;= right)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + (right-left)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(check(dungeon, mid))&#123;</span><br><span class="line">            res = mid;</span><br><span class="line">            right = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(<span class="type">int</span>[][] dungeon, <span class="type">int</span> live)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> dungeon.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> dungeon[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> Integer.MIN_VALUE;</span><br><span class="line">    <span class="comment">//live çš„è¡€é‡ä»å·¦ä¸Šåˆ° dungeon[i][j] çš„å‰©ä½™æœ€å¤šè¡€é‡</span></span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//åœ°ç‰¢å¤–å›´åŠ ä¸Š INF çš„å›´å¢™ï¼Œç®€åŒ–é€»è¾‘</span></span><br><span class="line">    Arrays.fill(dp[<span class="number">0</span>], INF);</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>] = live;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = INF;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dp[i-<span class="number">1</span>][j] &lt;= <span class="number">0</span> &amp;&amp; dp[i][j-<span class="number">1</span>] &lt;=<span class="number">0</span> )&#123;</span><br><span class="line">                dp[i][j] = INF; <span class="comment">//æ— æ³•åˆ°è¾¾è¿™é‡Œ</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j] = dungeon[i-<span class="number">1</span>][j-<span class="number">1</span>] + Math.max(dp[i][j-<span class="number">1</span>], dp[i-<span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n] &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è¿™é¢˜ä¹Ÿæœ‰çº¯ dp çš„åšæ³•ï¼Œå¾ˆå¯æƒœï¼Œæˆ‘å‹æ ¹æ²¡å¾€ä¸Šé¢æƒ³ï¼Œæˆ‘åªæƒ³ç€äºŒåˆ† dpï¼Œå†™å®Œäº† AC ä¹‹åå°±å»çœ‹è¯„è®ºåŒºäº†ï¼Œç»“æœå‘ç°å¤§å®¶éƒ½æ˜¯ç›´æ¥ dp çš„ã€‚ç„¶åè¿˜çœ‹åˆ°äº†ä¸€ä¸ªå…³é”®è¯ï¼šé€†å‘ dpï¼Œç„¶åèµ¶ç´§å…³äº†è¯„è®ºåŒºå›æ¥å†™äº†ä¸‹é¢çš„ dp è§£æ³•</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    -2  -3  3</span></span><br><span class="line"><span class="comment">    -5 -10  1</span></span><br><span class="line"><span class="comment">    10  30 -5 1</span></span><br><span class="line"><span class="comment">            </span></span><br><span class="line"><span class="comment">    7   5   2</span></span><br><span class="line"><span class="comment">    6  11   5</span></span><br><span class="line"><span class="comment">    1   1   6</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculateMinimumHP</span><span class="params">(<span class="type">int</span>[][] dungeon)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> dungeon.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> dungeon[<span class="number">0</span>].length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">    <span class="comment">//ä» dungeon[i-1][j-1] åˆ°å³ä¸‹è§’è‡³å°‘è¦å¤šå°‘è¡€é‡</span></span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    Arrays.fill(dp[m], INF);<span class="comment">//æœ«è¡Œ</span></span><br><span class="line">    dp[m][n-<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">//åˆå§‹è¡€é‡</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        dp[i][n] = INF; <span class="comment">//é¦–åˆ—å’Œå°¾åˆ—</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> n-<span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            dp[i][j] = Math.max(Math.min(dp[i+<span class="number">1</span>][j], dp[i][j+<span class="number">1</span>]) - dungeon[i][j], <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é¢˜ä¸ºå•¥ä¸èƒ½æ­£å‘ dp å‘¢ï¼Œè®¾<code>dp[i][j]</code>ä¸ºä»å·¦ä¸Šè§’åˆ° i,j æ‰€éœ€è¦çš„æœ€ä½è¡€é‡ï¼Ÿå…¶å®è¿™ä¸ªå¾ˆæ˜æ˜¾å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ²¡åŠæ³•è½¬ç§»ï¼Œ<code>dp[i][j]</code>å’Œ<code>dp[i-1][j]</code>æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œéƒ½ä¸ä¸€å®šæ˜¯åŒä¸€æ¡è·¯å¾„</p>
<h2 id="97-äº¤é”™å­—ç¬¦ä¸²"><a href="#97-äº¤é”™å­—ç¬¦ä¸²" class="headerlink" title="97. äº¤é”™å­—ç¬¦ä¸²"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/interleaving-string/">97. äº¤é”™å­—ç¬¦ä¸²</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸²Â s1, s2, s3, éªŒè¯Â s3Â æ˜¯å¦æ˜¯ç”±Â s1Â å’ŒÂ s2 äº¤é”™ç»„æˆçš„ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs1 = <span class="string">&quot;aabcc&quot;</span>, s2 = <span class="string">&quot;dbbca&quot;</span>, s3 = <span class="string">&quot;aadbbcbcac&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹Â 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs1 = <span class="string">&quot;aabcc&quot;</span>, s2 = <span class="string">&quot;dbbca&quot;</span>, s3 = <span class="string">&quot;aadbbbaccc&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong><br><img src="https://s1.ax1x.com/2020/07/18/Ugzon0.png" alt="Ugzon0.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isInterleave</span><span class="params">(String s1, String s2, String s3)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ns1</span> <span class="operator">=</span> s1.length(), ns2 = s2.length(), ns3 = s3.length();</span><br><span class="line">    <span class="keyword">if</span>(ns1+ns2!=ns3) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span>[][] dp = <span class="keyword">new</span> <span class="title class_">boolean</span>[ns1+<span class="number">1</span>][ns2+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= ns1 &amp;&amp; s1.charAt(i-<span class="number">1</span>)==s3.charAt(i-<span class="number">1</span>); i++)&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= ns2 &amp;&amp; s2.charAt(i-<span class="number">1</span>)==s3.charAt(i-<span class="number">1</span>); i++)&#123;</span><br><span class="line">        dp[<span class="number">0</span>][i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= ns1; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= ns2; j++)&#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">sc</span> <span class="operator">=</span> s3.charAt(i+j-<span class="number">1</span>);</span><br><span class="line">            dp[i][j] = (sc == s1.charAt(i-<span class="number">1</span>) &amp;&amp; dp[i-<span class="number">1</span>][j]) </span><br><span class="line">                || sc == s2.charAt(j-<span class="number">1</span>) &amp;&amp; dp[i][j-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[ns1][ns2];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="857-æœ€å°çš„çª—å£å­åºåˆ—ï¼ˆLintCodeï¼‰"><a href="#857-æœ€å°çš„çª—å£å­åºåˆ—ï¼ˆLintCodeï¼‰" class="headerlink" title="857. æœ€å°çš„çª—å£å­åºåˆ—ï¼ˆLintCodeï¼‰"></a><a target="_blank" rel="noopener" href="https://www.lintcode.com/problem/minimum-window-subsequence/description">857. æœ€å°çš„çª—å£å­åºåˆ—ï¼ˆLintCodeï¼‰</a></h2><p>ç»™å®šå­—ç¬¦ä¸² S å’Œ Tï¼Œåœ¨å­—ç¬¦ä¸² S ä¸­æ‰¾åˆ°æœ€å°ï¼ˆè¿ç»­çš„ï¼‰å­å­—ç¬¦ä¸² Wï¼ˆçª—å£ï¼‰ï¼Œä½¿å¾— T æ˜¯ W çš„å­åºåˆ—ã€‚<br>å¦‚æœ S ä¸­æ²¡æœ‰åŒ…å« T ä¸­çš„æ‰€æœ‰å­—ç¬¦çš„çª—å£ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²â€â€ã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„æœ€å°é•¿åº¦çª—å£ï¼Œåˆ™è¿”å›ä¸€ä¸ªèµ·ç‚¹ç¼–å·æœ€å°çš„ã€‚</p>
<ol>
<li>è¾“å…¥ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ã€‚</li>
<li>S çš„é•¿åº¦èŒƒå›´åœ¨ [1, 20000]ã€‚</li>
<li>T çš„é•¿åº¦èŒƒå›´åœ¨ [1, 100]ã€‚</li>
</ol>
<p><strong>æ ·ä¾‹ 1:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šS=<span class="string">&quot;jmeqksfrsdcmsiwvaovztaqenprpvnbstl&quot;</span>ï¼ŒT=<span class="string">&quot;u&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;&quot;</span></span><br><span class="line">è§£é‡Šï¼š æ— æ³•åŒ¹é…</span><br></pre></td></tr></table></figure>
<p><strong>æ ·ä¾‹ 2:</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šS = <span class="string">&quot;abcdebdde&quot;</span>ï¼Œ T = <span class="string">&quot;bde&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;bcde&quot;</span></span><br><span class="line">è§£é‡Šï¼š<span class="string">&quot;bcde&quot;</span>æ˜¯ç­”æ¡ˆï¼Œ<span class="string">&quot;deb&quot;</span>ä¸æ˜¯ä¸€ä¸ªè¾ƒå°çš„çª—å£ï¼Œå› ä¸ºçª—å£ä¸­çš„ T å…ƒç´ å¿…é¡»æŒ‰é¡ºåºå‘ç”Ÿã€‚</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>LeetCode ä¸Šæ˜¯ä¼šå‘˜é¢˜ï¼Œæ‰€ä»¥åœ¨ LintCode ä¸Šå†™çš„ï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯æ»‘çª—ï¼Œæƒ³äº†åŠå¤©ï¼Œä¹Ÿåªæœ‰æš´åŠ›çš„æ€è·¯ï¼Œçœ‹äº†ä¸‹è®¨è®ºåŒºï¼Œå‘ç°å¤§å®¶éƒ½æ˜¯ dp åšçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">minWindow</span><span class="params">(String S, String T)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> S.length(), n = T.length();</span><br><span class="line">    <span class="comment">//S å‰ i ä¸ªå­—ç¬¦åŒ…å« T å‰ j ä¸ªå­—ç¬¦çš„æœ€å°çª—å£å­åºåˆ—èµ·å§‹ä½ç½®</span></span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[m+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= m; i++)&#123;</span><br><span class="line">        <span class="comment">//è™½ç„¶ T ä¸²ä¸ºç©ºï¼Œä½†æ˜¯æ³¨æ„è¿™é‡Œä¸æ˜¯ 0ï¼Œå› ä¸ºéœ€è¦æœ€çŸ­ï¼Œæ‰€ä»¥èµ·ç‚¹è¶Šé åè¶ŠçŸ­</span></span><br><span class="line">        <span class="comment">//æœ€åçš„é•¿åº¦å°±æ˜¯é€šè¿‡ i-dp[i][j] æ¥è®¡ç®—çš„</span></span><br><span class="line">        Arrays.fill(dp[i], -<span class="number">1</span>);</span><br><span class="line">        dp[i][<span class="number">0</span>] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> -<span class="number">1</span>, end = m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="comment">//æ³¨æ„ T çš„é•¿åº¦å°äº S çš„é•¿åº¦ï¼ˆä¸è€ƒè™‘ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯ä¼šå¤šéå†å¾ˆå¤šæ¬¡ï¼‰</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= Math.min(n, i); j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (S.charAt(i-<span class="number">1</span>) == T.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//dbd</span></span><br><span class="line">                <span class="comment">//  b   dbd å’Œ db åŒ…å« b çš„æœ€å°çª—å£èµ·å§‹ä½ç½®ä¸€æ ·</span></span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dp[i][n]!=-<span class="number">1</span> &amp;&amp; i-dp[i][n] &lt; end-start+<span class="number">1</span>) &#123;</span><br><span class="line">            start = dp[i][n];</span><br><span class="line">            end = i-<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> start==-<span class="number">1</span> ? <span class="string">&quot;&quot;</span> : S.substring(start,end+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é¢˜å’Œæ»‘åŠ¨çª—å£ä¸“é¢˜ä¸­çš„ <a href="http://imlgw.top/2019/07/20/leetcode-hua-dong-chuang-kou/#76-%E6%9C%80%E5%B0%8F%E8%A6%86%E7%9B%96%E5%AD%90%E4%B8%B2">æœ€å°è¦†ç›–å­ä¸²</a><br>ç®—æ˜¯ä¸€é“å§Šå¦¹é¢˜ï¼Œä½†æ˜¯è§£æ³•ç¡®å®Œå…¨ä¸ä¸€æ ·ï¼Œå½“ç„¶è¿™é¢˜ä¹Ÿå¯ä»¥æ»‘çª—ä½†æ˜¯å¹¶ä¸æ˜¯å¾ˆé€šç”¨ï¼ˆä¸»è¦æ˜¯æˆ‘æ²¡çœ‹æ‡‚ï¼‰è²Œä¼¼ä¼šæ¯” dp è¦å¥½</p>
<blockquote>
<p>åŒåºåˆ—å‹ DPï¼Œåé¢æœ‰æ—¶é—´ä¼šæŠŠç±»ä¼¼çš„é¢˜å•ç‹¬æŠ½å–å‡ºæ¥</p>
</blockquote>
<h2 id="1553-åƒæ‰-N-ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°"><a href="#1553-åƒæ‰-N-ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°" class="headerlink" title="1553. åƒæ‰ N ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-number-of-days-to-eat-n-oranges/">1553. åƒæ‰ N ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>å¨æˆ¿é‡Œæ€»å…±æœ‰ <code>n</code>Â ä¸ªæ©˜å­ï¼Œä½ å†³å®šæ¯ä¸€å¤©é€‰æ‹©å¦‚ä¸‹æ–¹å¼ä¹‹ä¸€åƒè¿™äº›æ©˜å­ï¼š</p>
<ul>
<li>  åƒæ‰ä¸€ä¸ªæ©˜å­ã€‚</li>
<li>  å¦‚æœå‰©ä½™æ©˜å­æ•° <code>n</code>Â èƒ½è¢« 2 æ•´é™¤ï¼Œé‚£ä¹ˆä½ å¯ä»¥åƒæ‰ <code>n/2</code> ä¸ªæ©˜å­ã€‚</li>
<li>  å¦‚æœå‰©ä½™æ©˜å­æ•°Â <code>n</code>Â èƒ½è¢« 3 æ•´é™¤ï¼Œé‚£ä¹ˆä½ å¯ä»¥åƒæ‰ <code>2*(n/3)</code> ä¸ªæ©˜å­ã€‚</li>
</ul>
<p>æ¯å¤©ä½ åªèƒ½ä»ä»¥ä¸Š 3 ç§æ–¹æ¡ˆä¸­é€‰æ‹©ä¸€ç§æ–¹æ¡ˆã€‚</p>
<p>è¯·ä½ è¿”å›åƒæ‰æ‰€æœ‰ <code>n</code>Â ä¸ªæ©˜å­çš„æœ€å°‘å¤©æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">10</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">4</span></span><br><span class="line">è§£é‡Šï¼šä½ æ€»å…±æœ‰ <span class="number">10</span> ä¸ªæ©˜å­ã€‚</span><br><span class="line">ç¬¬ <span class="number">1</span> å¤©ï¼šåƒ <span class="number">1</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">10</span> - <span class="number">1</span> = <span class="number">9</span>ã€‚</span><br><span class="line">ç¬¬ <span class="number">2</span> å¤©ï¼šåƒ <span class="number">6</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">9</span> - <span class="number">2</span>*(<span class="number">9</span>/<span class="number">3</span>) = <span class="number">9</span> - <span class="number">6</span> = <span class="number">3</span>ã€‚ï¼ˆ<span class="number">9</span> å¯ä»¥è¢« <span class="number">3</span> æ•´é™¤ï¼‰</span><br><span class="line">ç¬¬ <span class="number">3</span> å¤©ï¼šåƒ <span class="number">2</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">3</span> - <span class="number">2</span>*(<span class="number">3</span>/<span class="number">3</span>) = <span class="number">3</span> - <span class="number">2</span> = <span class="number">1</span>ã€‚</span><br><span class="line">ç¬¬ <span class="number">4</span> å¤©ï¼šåƒæ‰æœ€å <span class="number">1</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">1</span> - <span class="number">1</span> = <span class="number">0</span>ã€‚</span><br><span class="line">ä½ éœ€è¦è‡³å°‘ <span class="number">4</span> å¤©åƒæ‰ <span class="number">10</span> ä¸ªæ©˜å­ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">6</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è§£é‡Šï¼šä½ æ€»å…±æœ‰ <span class="number">6</span> ä¸ªæ©˜å­ã€‚</span><br><span class="line">ç¬¬ <span class="number">1</span> å¤©ï¼šåƒ <span class="number">3</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">6</span> - <span class="number">6</span>/<span class="number">2</span> = <span class="number">6</span> - <span class="number">3</span> = <span class="number">3</span>ã€‚ï¼ˆ<span class="number">6</span> å¯ä»¥è¢« <span class="number">2</span> æ•´é™¤ï¼‰</span><br><span class="line">ç¬¬ <span class="number">2</span> å¤©ï¼šåƒ <span class="number">2</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">3</span> - <span class="number">2</span>*(<span class="number">3</span>/<span class="number">3</span>) = <span class="number">3</span> - <span class="number">2</span> = <span class="number">1</span>ã€‚ï¼ˆ<span class="number">3</span> å¯ä»¥è¢« <span class="number">3</span> æ•´é™¤ï¼‰</span><br><span class="line">ç¬¬ <span class="number">3</span> å¤©ï¼šåƒæ‰å‰©ä½™ <span class="number">1</span> ä¸ªæ©˜å­ï¼Œå‰©ä½™æ©˜å­æ•° <span class="number">1</span> - <span class="number">1</span> = <span class="number">0</span>ã€‚</span><br><span class="line">ä½ è‡³å°‘éœ€è¦ <span class="number">3</span> å¤©åƒæ‰ <span class="number">6</span> ä¸ªæ©˜å­ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">56</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= n &lt;= 2*10^9</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¢˜ç›®å¾ˆç®€å•ï¼Œæš´åŠ›çš„æ–¹æ³•éå¸¸å®¹æ˜“æƒ³åˆ°ï¼Œä½†æ˜¯é—®é¢˜æ˜¯è¿™é¢˜çš„æ•°æ®èŒƒå›´æ¯”è¾ƒå¤§<code>2*1e9</code>ï¼Œç›´æ¥æš´æœè‚¯å®šä¼š Tï¼Œæ‰€ä»¥éœ€è¦ä¼˜åŒ–ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†<code>minDays(n-1)</code>ä¼˜åŒ–æ‰ï¼Œå°†è¿™ç§åªåƒä¸€ä¸ªçš„æƒ…å†µå’Œå…¶ä»–æƒ…å†µå’Œå¹¶ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨ n=5ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ±‚<code>Min(minDays(2)+1, minDays(1)+2)</code>ï¼Œ5 æ²¡æ³•è¢« 2 æˆ–è€… 3 æ•´é™¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† 5 åƒæ‰å‡ ä¸ªï¼Œå˜æˆå¯ä»¥è¢« 2 å’Œ 3 æ•´é™¤çš„ï¼Œåƒæ‰çš„ä¸ªæ•°å°±æ˜¯ n%2 å’Œ n%3ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿™ä¹‹å‰é¢å¤–éœ€è¦çš„å¤©æ•°</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dp = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">int</span>]<span class="type">int</span>)</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minDays</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">if</span> n == <span class="number">1</span> || n == <span class="number">0</span> &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> n</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">if</span> v, ok := dp[n]; ok &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> v</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â res := <span class="number">1</span>+Min(minDays(n/<span class="number">2</span>)+n%<span class="number">2</span>, minDays(n/<span class="number">3</span>)+n%<span class="number">3</span>)</span><br><span class="line"> Â  Â dp[n] = res</span><br><span class="line"> Â  Â <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line">â€‹</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Min</span> <span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">if</span> a &lt; b &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> a</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="NC549-å˜å‘"><a href="#NC549-å˜å‘" class="headerlink" title="NC549. å˜å‘"></a><a target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/85efab854e60499daa524ca943b72d35">NC549. å˜å‘</a></h2><p>ç‰›ç‰›å‡†å¤‡åœ¨ä¸€ä¸ª 3 è¡Œ n åˆ—çš„è·‘é“ä¸Šè·‘æ­¥ã€‚ä¸€å¼€å§‹ç‰›ç‰›å¯ä»¥è‡ªå·±é€‰æ‹©ä½äº (1,1) è¿˜æ˜¯ (2,1) è¿˜æ˜¯ (3,1)ã€‚</p>
<p>è·‘é“çš„æ¯ä¸€æ ¼éƒ½æœ‰ä¸€äº›é‡‘å¸ï¼Œå½“ç‰›ç‰›è·‘åˆ°ä¸€ä¸ªæ ¼å­ï¼Œä»–ä¼šè·å¾—è¿™ä¸ªæ ¼å­çš„æ‰€æœ‰é‡‘å¸ã€‚</p>
<p>å½“ç‰›ç‰›ä½äºç¬¬ i è¡Œç¬¬ j åˆ—æ—¶ï¼Œä»–å¯ä»¥çš„ä¸‹ä¸€æ­¥æœ€å¤šå¯èƒ½æœ‰ä¸‰ç§é€‰æ‹©ï¼š</p>
<ol>
<li>ä¸èŠ±è´¹é‡‘å¸è·‘åˆ°ç¬¬ i è¡Œç¬¬ j+1 åˆ—</li>
<li>èŠ±è´¹<code>m[j]</code>çš„é‡‘å¸è·‘åˆ°ç¬¬ i-1 è¡Œç¬¬ j+1 åˆ—ï¼ˆå¦‚æœ i=1 åˆ™ä¸å¯ä»¥è¿™ä¹ˆè·‘ï¼‰ã€‚</li>
<li>èŠ±è´¹<code>m[j]</code>çš„é‡‘å¸è·‘åˆ°ç¬¬ i+1 è¡Œç¬¬ j+1 åˆ—ï¼ˆå¦‚æœ i=3 åˆ™ä¸å¯ä»¥è¿™ä¹ˆè·‘ï¼‰ã€‚<br>ï¼ˆç‰›ç‰›æ˜¯ä¸€ä¸ªå¯Œè±ªï¼Œæœ¬èº«å¸¦äº†å¾ˆå¤šçš„é‡‘å¸ï¼Œæ‰€ä»¥ä½ ä¸ç”¨æ‹…å¿ƒä»–é’±ä¸å¤Ÿç”¨ï¼‰<br>ç°åœ¨å‘Šè¯‰ä½ æ‰€æœ‰æ ¼å­çš„é‡‘å¸æ•°é‡å’Œæ¯ä¸€åˆ—çš„é‡‘å¸èŠ±è´¹ï¼Œç‰›ç‰›æƒ³çŸ¥é“ä»–è·‘åˆ°ç¬¬ n åˆ—æœ€å¤šå¯ä»¥èµšå¾—å¤šå°‘é‡‘å¸ï¼ˆèµšå¾—é‡‘å¸=è·å¾—é‡‘å¸-æ¶ˆè€—é‡‘å¸ï¼‰</li>
</ol>
<p><strong>ç¤ºä¾‹ 1</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">3</span>,[<span class="number">1</span>,<span class="number">9</span>,<span class="number">3</span>],[<span class="number">6</span>,<span class="number">4</span>,<span class="number">6</span>],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>],[<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">16</span></span><br><span class="line">è¯´æ˜ï¼šä¸€å¼€å§‹ç‰›ç‰›é€‰æ‹©ä½äºç¬¬ <span class="number">2</span> è¡Œç¬¬ <span class="number">1</span> åˆ—ï¼Œæ‹¿åˆ° <span class="number">6</span> ä¸ªé‡‘å¸ã€‚ç„¶åç‰›ç‰›èŠ± <span class="number">3</span> é‡‘å¸åˆ°ç¬¬ <span class="number">1</span> è¡Œçš„ <span class="number">2</span> åˆ—æ‹¿åˆ° <span class="number">9</span> ä¸ªé‡‘å¸ï¼Œæœ€åç‰›ç‰›èŠ±è´¹ <span class="number">2</span> é‡‘å¸åˆ°ç¬¬ <span class="number">2</span> è¡Œç¬¬ <span class="number">3</span> åˆ—ã€‚æ€»å…±è·å¾— <span class="number">21</span> é‡‘å¸ï¼Œæ¶ˆè€— <span class="number">5</span> é‡‘å¸ã€‚èµšå¾— <span class="number">16</span> é‡‘å¸ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>å¤‡æ³¨ï¼š</strong></p>
<ul>
<li><p>2 &lt;= n &lt;= 1e5</p>
</li>
<li><p>ç¬¬ 1 ä¸ªå‚æ•° n ä»£è¡¨è·‘é“çš„åˆ—æ•°<br>ç¬¬ 2ï¼Œ3ï¼Œ4 ä¸ªå‚æ•° vector<int> a1,a2,a3 å„æœ‰ n ä¸ªå…ƒç´ ï¼Œä»£è¡¨ç¬¬ 1ï¼Œ2ï¼Œ3 è¡Œæ¯ä¸€åˆ—çš„é‡‘å¸ä¸ªæ•°<br>ç¬¬ 5 ä¸ªå‚æ•° vector<int> m æœ‰ n ä¸ªå…ƒç´ ä»£è¡¨æ¯ä¸€åˆ—è¿›è¡Œæ¢è¡Œçš„æ—¶å€™éœ€è¦çš„é‡‘å¸èŠ±è´¹</p>
</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>é¢˜ç›®æ„æ€ææ¸…æ¥šå°±è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¾ˆç›´ç™½çš„ dp</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">solve</span> <span class="params">(<span class="type">int</span> n, <span class="type">int</span>[] a1, <span class="type">int</span>[] a2, <span class="type">int</span>[] a3, <span class="type">int</span>[] m)</span> &#123;</span><br><span class="line">    <span class="comment">// write code here</span></span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][n];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = a1[<span class="number">0</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = a2[<span class="number">0</span>];</span><br><span class="line">    dp[<span class="number">2</span>][<span class="number">0</span>] = a3[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = a1[j] + Math.max(dp[<span class="number">0</span>][j-<span class="number">1</span>], dp[<span class="number">1</span>][j-<span class="number">1</span>]-m[j-<span class="number">1</span>]);</span><br><span class="line">        dp[<span class="number">1</span>][j] = a2[j] + Math.max(dp[<span class="number">1</span>][j-<span class="number">1</span>], Math.max(dp[<span class="number">0</span>][j-<span class="number">1</span>]-m[j-<span class="number">1</span>], dp[<span class="number">2</span>][j-<span class="number">1</span>]-m[j-<span class="number">1</span>]));</span><br><span class="line">        dp[<span class="number">2</span>][j] = a3[j] + Math.max(dp[<span class="number">2</span>][j-<span class="number">1</span>], dp[<span class="number">1</span>][j-<span class="number">1</span>]-m[j-<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.max(dp[<span class="number">0</span>][n-<span class="number">1</span>],Math.max(dp[<span class="number">1</span>][n-<span class="number">1</span>], dp[<span class="number">2</span>][n-<span class="number">1</span>]));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="NC554-ç®€å•å˜å‘"><a href="#NC554-ç®€å•å˜å‘" class="headerlink" title="NC554 ç®€å•å˜å‘"></a><a target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/11f7c6cb54524c3693119e4088533305">NC554 ç®€å•å˜å‘</a></h2><p>ç‰›ç‰›å‡†å¤‡åœ¨ä¸€ä¸ª 3 è¡Œ n åˆ—çš„è·‘é“ä¸Šè·‘æ­¥ã€‚ä¸€å¼€å§‹ç‰›ç‰›ä½äº (1,1)ã€‚</p>
<p>å½“ç‰›ç‰›ä½äºç¬¬ i è¡Œç¬¬ j åˆ—æ—¶ï¼Œä»–å¯ä»¥çš„ä¸‹ä¸€æ­¥æœ€å¤šå¯èƒ½æœ‰ä¸‰ç§é€‰æ‹©ï¼š</p>
<ol>
<li>è·‘åˆ°ç¬¬ i è¡Œç¬¬ j+1 åˆ—</li>
<li>è·‘åˆ°ç¬¬ i-1 è¡Œç¬¬ j+1 åˆ—ï¼ˆå¦‚æœ i=1 åˆ™ä¸å¯ä»¥è¿™ä¹ˆè·‘ï¼‰ã€‚</li>
<li>è·‘åˆ°ç¬¬ i+1 è¡Œç¬¬ j+1 åˆ—ï¼ˆå¦‚æœ i=3 åˆ™ä¸å¯ä»¥è¿™ä¹ˆè·‘ï¼‰ã€‚</li>
</ol>
<p>è·‘é“ä¸Šæœ‰ä¸€äº›æ ¼å­è®¾ç½®äº†è·¯éšœï¼ˆä¸€ä¸ªæ ¼å­å¯èƒ½æœ‰å¤šä¸ªè·¯éšœï¼‰ï¼Œç‰›ç‰›ä¸èƒ½è·‘åˆ°è·¯éšœä¸Šã€‚ç°åœ¨ç‰›ç‰›æƒ³çŸ¥é“ï¼Œä» (1,1) åˆ° (3,n) æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p>
<p>ä¸ºäº†é˜²æ­¢ç­”æ¡ˆè¿‡å¤§ï¼Œç­”æ¡ˆå¯¹ 1e9+7 å–æ¨¡ã€‚</p>
<p>æ¯”è¾ƒç®€å•å°±ä¸è´´ case äº†</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æ³¨æ„æº¢å‡ºå°±è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">solve</span> <span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span>[] x, <span class="type">int</span>[] y)</span> &#123;</span><br><span class="line">    <span class="type">long</span>[][] dp = <span class="keyword">new</span> <span class="title class_">long</span>[<span class="number">3</span>][n+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="type">boolean</span>[][] v = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">3</span>][n];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        v[x[i]-<span class="number">1</span>][y[i]-<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">        dp[<span class="number">0</span>][j] = v[<span class="number">0</span>][j] ? <span class="number">0</span> : (dp[<span class="number">0</span>][j-<span class="number">1</span>] + dp[<span class="number">1</span>][j-<span class="number">1</span>])%MOD;</span><br><span class="line">        dp[<span class="number">1</span>][j] = v[<span class="number">1</span>][j] ? <span class="number">0</span> : (dp[<span class="number">1</span>][j-<span class="number">1</span>] + dp[<span class="number">0</span>][j-<span class="number">1</span>]+dp[<span class="number">2</span>][j-<span class="number">1</span>])%MOD;</span><br><span class="line">        dp[<span class="number">2</span>][j] = v[<span class="number">2</span>][j] ? <span class="number">0</span> : (dp[<span class="number">2</span>][j-<span class="number">1</span>] + dp[<span class="number">1</span>][j-<span class="number">1</span>])%MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  (<span class="type">int</span>)(dp[<span class="number">2</span>][n-<span class="number">1</span>]%MOD);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="787-K-ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­"><a href="#787-K-ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­" class="headerlink" title="787. K ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/cheapest-flights-within-k-stops/">787. K ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>æœ‰ <code>n</code> ä¸ªåŸå¸‚é€šè¿‡ <code>m</code> ä¸ªèˆªç­è¿æ¥ã€‚æ¯ä¸ªèˆªç­éƒ½ä»åŸå¸‚ <code>u</code> å¼€å§‹ï¼Œä»¥ä»·æ ¼ <code>w</code> æŠµè¾¾ <code>v</code>ã€‚</p>
<p>ç°åœ¨ç»™å®šæ‰€æœ‰çš„åŸå¸‚å’Œèˆªç­ï¼Œä»¥åŠå‡ºå‘åŸå¸‚ <code>src</code> å’Œç›®çš„åœ° <code>dst</code>ï¼Œä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°ä» <code>src</code> åˆ° <code>dst</code> æœ€å¤šç»è¿‡ <code>k</code>Â ç«™ä¸­è½¬çš„æœ€ä¾¿å®œçš„ä»·æ ¼ã€‚ å¦‚æœæ²¡æœ‰è¿™æ ·çš„è·¯çº¿ï¼Œåˆ™è¾“å‡º <code>-1</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">n = <span class="number">3</span>, edges = [[<span class="number">0</span>,<span class="number">1</span>,<span class="number">100</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">100</span>],[<span class="number">0</span>,<span class="number">2</span>,<span class="number">500</span>]]</span><br><span class="line">src = <span class="number">0</span>, dst = <span class="number">2</span>, k = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">200</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">åŸå¸‚èˆªç­å›¾å¦‚ä¸‹</span><br><span class="line"></span><br><span class="line">ä»åŸå¸‚ <span class="number">0</span> åˆ°åŸå¸‚ <span class="number">2</span> åœ¨ <span class="number">1</span> ç«™ä¸­è½¬ä»¥å†…çš„æœ€ä¾¿å®œä»·æ ¼æ˜¯ <span class="number">200</span>ï¼Œå¦‚å›¾ä¸­çº¢è‰²æ‰€ç¤ºã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">n = <span class="number">3</span>, edges = [[<span class="number">0</span>,<span class="number">1</span>,<span class="number">100</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">100</span>],[<span class="number">0</span>,<span class="number">2</span>,<span class="number">500</span>]]</span><br><span class="line">src = <span class="number">0</span>, dst = <span class="number">2</span>, k = <span class="number">0</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">500</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">åŸå¸‚èˆªç­å›¾å¦‚ä¸‹</span><br><span class="line"></span><br><span class="line">ä»åŸå¸‚ <span class="number">0</span> åˆ°åŸå¸‚ <span class="number">2</span> åœ¨ <span class="number">0</span> ç«™ä¸­è½¬ä»¥å†…çš„æœ€ä¾¿å®œä»·æ ¼æ˜¯ <span class="number">500</span>ï¼Œå¦‚å›¾ä¸­è“è‰²æ‰€ç¤ºã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>n</code> èŒƒå›´æ˜¯ <code>[1, 100]</code>ï¼ŒåŸå¸‚æ ‡ç­¾ä» <code>0</code> åˆ° <code>n</code> <code>- 1</code>.</li>
<li>  èˆªç­æ•°é‡èŒƒå›´æ˜¯ <code>[0, n * (n - 1) / 2]</code>.</li>
<li>  æ¯ä¸ªèˆªç­çš„æ ¼å¼ <code>(src,</code> <code>dst``, price)</code>.</li>
<li>  æ¯ä¸ªèˆªç­çš„ä»·æ ¼èŒƒå›´æ˜¯ <code>[1, 10000]</code>.</li>
<li>  <code>k</code> èŒƒå›´æ˜¯ <code>[0, n - 1]</code>.</li>
<li>  èˆªç­æ²¡æœ‰é‡å¤ï¼Œä¸”ä¸å­˜åœ¨ç¯è·¯</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>èŒƒå›´å¾ˆå°åªæœ‰ 100ï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ Floydï¼Œä½†æ˜¯æœ‰ K çš„é™åˆ¶ä¸å¥½å¤„ç†</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findCheapestPrice</span><span class="params">(n <span class="type">int</span>, flights [][]<span class="type">int</span>, src <span class="type">int</span>, dst <span class="type">int</span>, K <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="comment">//dp[i][k]ï¼šä» src åˆ° i èŠ‚ç‚¹ä¸­è½¬ k æ¬¡æœ€çŸ­è·ç¦»</span></span><br><span class="line"> Â  Â <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a&lt;b &#123;<span class="keyword">return</span> a&#125;;<span class="keyword">return</span> b&#125;</span><br><span class="line"> Â  Â <span class="keyword">var</span> INF = <span class="number">0x3f3f3f3f</span></span><br><span class="line"> Â  Â <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, n)</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="comment">//K+2 æ˜¯ä¸ºäº†æ–¹ä¾¿åˆå§‹åŒ–ï¼Œä¸ç”¨å•ç‹¬å¤„ç† K==0 çš„æƒ…å†µ</span></span><br><span class="line"> Â  Â  Â  Â dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, K+<span class="number">2</span>)</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">for</span> j := <span class="number">0</span>; j &lt;= K+<span class="number">1</span>; j++ &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][j] = INF Â  </span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> k := <span class="number">0</span>; k &lt;= K+<span class="number">1</span>; k++ &#123;</span><br><span class="line"> Â  Â  Â  Â dp[src][k] = <span class="number">0</span></span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> k := <span class="number">1</span>; k &lt;= K+<span class="number">1</span>; k++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">for</span> _,flt := <span class="keyword">range</span> flights &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="comment">//src åˆ° flt[1] é€šè¿‡ flt[0] ä¸­è½¬</span></span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[flt[<span class="number">1</span>]][k] = Min(dp[flt[<span class="number">1</span>]][k], dp[flt[<span class="number">0</span>]][k<span class="number">-1</span>]+flt[<span class="number">2</span>])</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">if</span> dp[dst][K+<span class="number">1</span>] == INF &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> dp[dst][K+<span class="number">1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é¢˜ä¹Ÿå¯ä»¥<code>Dijkstra</code>ä½†æ˜¯æˆ‘ä¸ä¼š</p>
</blockquote>
<h2 id="NC557-å¥½å¤šç‰›ç‰›"><a href="#NC557-å¥½å¤šç‰›ç‰›" class="headerlink" title="NC557. å¥½å¤šç‰›ç‰›"></a><a target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/edced5e80f3e46efa9c965e7f634c58c">NC557. å¥½å¤šç‰›ç‰›</a></h2><p>ç»™å‡ºä¸€ä¸ªå­—ç¬¦ä¸² Sï¼Œç‰›ç‰›æƒ³çŸ¥é“è¿™ä¸ªå­—ç¬¦ä¸²æœ‰å¤šå°‘ä¸ªå­åºåˆ—ç­‰äºâ€niuniuâ€å­åºåˆ—å¯ä»¥é€šè¿‡åœ¨åŸä¸²ä¸Šåˆ é™¤ä»»æ„ä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬ 0 ä¸ªå­—ç¬¦å’Œå…¨éƒ¨å­—ç¬¦ï¼‰å¾—åˆ°ã€‚ä¸ºäº†é˜²æ­¢ç­”æ¡ˆè¿‡å¤§ï¼Œç­”æ¡ˆå¯¹ 1e9+7 å–æ¨¡</p>
<p><strong>ç¤ºä¾‹ 1</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;niuniniu&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">3</span></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">åˆ é™¤ç¬¬ <span class="number">4</span>ï¼Œ<span class="number">5</span> ä¸ªå­—ç¬¦å¯ä»¥å¾—åˆ°<span class="string">&quot;niuniu&quot;</span></span><br><span class="line">åˆ é™¤ç¬¬ <span class="number">5</span>ï¼Œ<span class="number">6</span> ä¸ªå­—ç¬¦å¯ä»¥å¾—åˆ°<span class="string">&quot;niuniu&quot;</span></span><br><span class="line">åˆ é™¤ç¬¬ <span class="number">6</span>ï¼Œ<span class="number">7</span> ä¸ªå­—ç¬¦å¯ä»¥å¾—åˆ°<span class="string">&quot;niuniu&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>å¤‡æ³¨ï¼š</strong><br>10 &lt;= len(s) &lt;= 1e5</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>èœå•Šï¼Œæ²¡æƒ³å‡ºæ¥ï¼ŒçœŸçš„èœ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//UPDATE: 2020.9.27ï¼Œä¹‹å‰çš„è§£æ³•è¿‡äº† OJï¼Œä½†æ˜¯å…¶å®æ˜¯æœ‰é—®é¢˜çš„</span></span><br><span class="line"><span class="comment">//äºŒç»´ DPï¼ˆä¸æ–¹ä¾¿ä¼˜åŒ–æˆä¸€ç»´çš„ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">solve1</span> <span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// write code here </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> <span class="string">&quot;niuniu&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> p.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨ s[0,j] ä¸­æœ‰å¤šå°‘ä¸ª p[0,j]</span></span><br><span class="line">    <span class="type">long</span>[][] dp = <span class="keyword">new</span> <span class="title class_">long</span>[<span class="number">7</span>][n+<span class="number">1</span>];</span><br><span class="line">    Arrays.fill(dp[<span class="number">0</span>], <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(j-<span class="number">1</span>) == p.charAt(i-<span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="comment">//dp[i][j] = (dp[i-1][j] + dp[i][j-1]) % MOD;</span></span><br><span class="line">                <span class="comment">//ä¸Šé¢çš„æ˜¯é”™çš„ï¼Œä¹‹æ‰€ä»¥æ­£ç¡®æ˜¯å› ä¸ºé¢˜ç›®çš„ niuniu æ²¡æœ‰è¿ç»­çš„ç›¸åŒå­—ç¬¦</span></span><br><span class="line">                <span class="comment">//è€ƒè™‘å¦‚ä¸‹ case:  p = &quot;aa&quot; , s = &quot;abaa&quot; wa = 6, ac = 3</span></span><br><span class="line">                dp[i][j] = (dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + dp[i][j-<span class="number">1</span>]) % MOD;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = dp[i][j-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šè¿™ä¸ªè§£æ³•æœ€å¥½æŠŠå†…å¤–å¾ªç¯äº¤æ¢ä¸‹ï¼Œè¿™æ ·æ›´å¥½é™ç»´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//äºŒç»´ DPï¼Œäº¤æ¢å†…å¤–å¾ªç¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">solve2</span> <span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// write code here </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> <span class="string">&quot;niuniu&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> p.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨ s[0,i] ä¸­æœ‰å¤šå°‘ä¸ª p[0,j]</span></span><br><span class="line">    <span class="type">long</span>[][] dp = <span class="keyword">new</span> <span class="title class_">long</span>[n+<span class="number">1</span>][m+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= m; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i-<span class="number">1</span>) == p.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j] = (dp[i-<span class="number">1</span>][j-<span class="number">1</span>] + dp[i-<span class="number">1</span>][j]) % MOD;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dp[n][m];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æŒ‰ç…§ä¸Šé¢äº¤æ¢å†…å¤–å¾ªç¯åçš„è§£æ³•å†é™ç»´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//UPDATE: 2020.9.27ï¼Œä¹‹å‰çš„è§£æ³•è¿‡äº† OJï¼Œä½†æ˜¯å…¶å®æ˜¯æœ‰é—®é¢˜çš„</span></span><br><span class="line"><span class="comment">//æŒ‰ä¸Šé¢çš„æ¥é™ç»´èˆ’æœå¤šäº†</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">solve3</span> <span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">p</span> <span class="operator">=</span> <span class="string">&quot;niuniu&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> p.length();</span><br><span class="line">    <span class="type">int</span> <span class="variable">MOD</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="comment">//dp[j] ä»£è¡¨ s[0,i] ä¸­æœ‰å¤šå°‘ä¸ª p[0,i]</span></span><br><span class="line">    <span class="type">long</span>[] dp = <span class="keyword">new</span> <span class="title class_">long</span>[m+<span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="comment">//for (int j = 1; j &lt;= m; j++)&#123;</span></span><br><span class="line">        <span class="comment">//å†…å±‚åº”è¯¥åè¿‡æ¥é€’æ¨ï¼Œä¿è¯ dp[j] å’Œ dp[j-1] æ˜¯ä¸Šä¸€æ¬¡çš„</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> m; j &gt;= <span class="number">1</span>; j--)&#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i-<span class="number">1</span>) == p.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[j] = (dp[j] + dp[j-<span class="number">1</span>]) % MOD;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dp[m];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="926-å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢"><a href="#926-å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢" class="headerlink" title="926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/flip-string-to-monotone-increasing/">926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>å¦‚æœä¸€ä¸ªç”±Â <code>&#39;0&#39;</code> å’Œ <code>&#39;1&#39;</code>Â ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥ä¸€äº› <code>&#39;0&#39;</code>ï¼ˆå¯èƒ½æ²¡æœ‰ <code>&#39;0&#39;</code>ï¼‰åé¢è·Ÿç€ä¸€äº› <code>&#39;1&#39;</code>ï¼ˆä¹Ÿå¯èƒ½æ²¡æœ‰ <code>&#39;1&#39;</code>ï¼‰çš„å½¢å¼ç»„æˆçš„ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²æ˜¯_å•è°ƒé€’å¢_çš„ã€‚</p>
<p>æˆ‘ä»¬ç»™å‡ºä¸€ä¸ªç”±å­—ç¬¦ <code>&#39;0&#39;</code> å’Œ <code>&#39;1&#39;</code>Â ç»„æˆçš„å­—ç¬¦ä¸²Â <code>S</code>ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•Â <code>&#39;0&#39;</code> ç¿»è½¬ä¸ºÂ <code>&#39;1&#39;</code>Â æˆ–è€…å°†Â <code>&#39;1&#39;</code>Â ç¿»è½¬ä¸ºÂ <code>&#39;0&#39;</code>ã€‚</p>
<p>è¿”å›ä½¿ <code>S</code> å•è°ƒé€’å¢çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;00110&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬ç¿»è½¬æœ€åä¸€ä½å¾—åˆ° <span class="number">00111.</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;010110&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬ç¿»è½¬å¾—åˆ° <span class="number">011111</span>ï¼Œæˆ–è€…æ˜¯ <span class="number">000111</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;00011000&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬ç¿»è½¬å¾—åˆ° <span class="number">00000000</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li> <code>1 &lt;= S.length &lt;= 20000</code></li>
<li> <code>S</code> ä¸­åªåŒ…å«å­—ç¬¦Â <code>&#39;0&#39;</code>Â å’ŒÂ <code>&#39;1&#39;</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’çš„è§£æ³•</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minFlipsMonoIncr</span><span class="params">(S <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">var</span> n = <span class="built_in">len</span>(S)</span><br><span class="line"> Â  Â <span class="comment">//dp[i][0]: [0~i] s[i]==0 éœ€è¦æœ€å°é¢ç¿»è½¬æ¬¡æ•°</span></span><br><span class="line"> Â  Â <span class="comment">//dp[i][1]: [0~i] s[i]==1 éœ€è¦æœ€å°é¢ç¿»è½¬æ¬¡æ•°</span></span><br><span class="line"> Â  Â <span class="keyword">var</span> dp = <span class="built_in">make</span>([][<span class="number">2</span>]<span class="type">int</span>, n)</span><br><span class="line"> Â  Â <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a &lt; b &#123;<span class="keyword">return</span> a&#125;; <span class="keyword">return</span> b&#125;</span><br><span class="line"> Â  Â <span class="keyword">var</span> preSum = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123; </span><br><span class="line"> Â  Â  Â  Â preSum[i] = preSum[i<span class="number">-1</span>] + <span class="type">int</span>(S[i<span class="number">-1</span>]<span class="number">-48</span>)</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">if</span> S[<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span> &#123;</span><br><span class="line"> Â  Â  Â  Â dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"> Â   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line"> Â  Â  Â  Â dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">if</span> S[i] == <span class="string">&#x27;1&#x27;</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">1</span>] = Min(dp[i<span class="number">-1</span>][<span class="number">1</span>], dp[i<span class="number">-1</span>][<span class="number">0</span>])</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">0</span>] = preSum[i+<span class="number">1</span>] <span class="comment">//åŒ…å« i</span></span><br><span class="line"> Â  Â  Â   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">0</span>] = preSum[i] <span class="comment">//ä¸åŒ…å« i</span></span><br><span class="line"> Â  Â  Â  Â  Â  Â dp[i][<span class="number">1</span>] = Min(dp[i<span class="number">-1</span>][<span class="number">0</span>], dp[i<span class="number">-1</span>][<span class="number">1</span>]) + <span class="number">1</span></span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> Min(dp[n<span class="number">-1</span>][<span class="number">1</span>], dp[n<span class="number">-1</span>][<span class="number">0</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å¯»æ‰¾åˆ†å‰²ç‚¹ï¼Œä½¿å¾—åˆ†å‰²ç‚¹å·¦è¾¹çš„ 1 å’Œå³è¾¹çš„ 0 ç›¸åŠ çš„å’Œæœ€å°‘</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Trickï¼Œå¯»æ‰¾åˆ†å‰²ç‚¹ï¼Œä½¿å¾—åˆ†å‰²ç‚¹å·¦è¾¹çš„ 1 å’Œå³è¾¹çš„ 0 ç›¸åŠ çš„å’Œæœ€å°‘</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minFlipsMonoIncr</span><span class="params">(S <span class="type">string</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> count0 = <span class="number">0</span> <span class="comment">//åˆ†å‰²ç‚¹å³è¾¹çš„ 0</span></span><br><span class="line">    <span class="keyword">var</span> count1 = <span class="number">0</span> <span class="comment">//åˆ†å‰²ç‚¹å·¦è¾¹çš„ 1</span></span><br><span class="line">    <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a &lt; b &#123;<span class="keyword">return</span> a&#125;; <span class="keyword">return</span> b&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(S); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> S[i] == <span class="string">&#x27;0&#x27;</span> &#123;</span><br><span class="line">            count0++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> res = count0</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(S); i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> S[i] == <span class="string">&#x27;1&#x27;</span> &#123;</span><br><span class="line">            count1++</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            count0--</span><br><span class="line">        &#125;</span><br><span class="line">        res = Min(res, count1+count0)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="LCP-19-ç§‹å¶æ”¶è—é›†"><a href="#LCP-19-ç§‹å¶æ”¶è—é›†" class="headerlink" title="LCP 19. ç§‹å¶æ”¶è—é›†"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/UlBDOe/">LCP 19. ç§‹å¶æ”¶è—é›†</a></h2><p>å°æ‰£å‡ºå»ç§‹æ¸¸ï¼Œé€”ä¸­æ”¶é›†äº†ä¸€äº›çº¢å¶å’Œé»„å¶ï¼Œä»–åˆ©ç”¨è¿™äº›å¶å­åˆæ­¥æ•´ç†äº†ä¸€ä»½ç§‹å¶æ”¶è—é›† leavesï¼Œ å­—ç¬¦ä¸² leaves ä»…åŒ…å«å°å†™å­—ç¬¦ r å’Œ yï¼Œ å…¶ä¸­å­—ç¬¦ r è¡¨ç¤ºä¸€ç‰‡çº¢å¶ï¼Œå­—ç¬¦ y è¡¨ç¤ºä¸€ç‰‡é»„å¶ã€‚<br>å‡ºäºç¾è§‚æ•´é½çš„è€ƒè™‘ï¼Œå°æ‰£æƒ³è¦å°†æ”¶è—é›†ä¸­æ ‘å¶çš„æ’åˆ—è°ƒæ•´æˆã€Œçº¢ã€é»„ã€çº¢ã€ä¸‰éƒ¨åˆ†ã€‚æ¯éƒ¨åˆ†æ ‘å¶æ•°é‡å¯ä»¥ä¸ç›¸ç­‰ï¼Œä½†å‡éœ€å¤§äºç­‰äº 1ã€‚æ¯æ¬¡è°ƒæ•´æ“ä½œï¼Œå°æ‰£å¯ä»¥å°†ä¸€ç‰‡çº¢å¶æ›¿æ¢æˆé»„å¶æˆ–è€…å°†ä¸€ç‰‡é»„å¶æ›¿æ¢æˆçº¢å¶ã€‚è¯·é—®å°æ‰£æœ€å°‘éœ€è¦å¤šå°‘æ¬¡è°ƒæ•´æ“ä½œæ‰èƒ½å°†ç§‹å¶æ”¶è—é›†è°ƒæ•´å®Œæ¯•ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šleaves = <span class="string">&quot;rrryyyrryyyrr&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šè°ƒæ•´ä¸¤æ¬¡ï¼Œå°†ä¸­é—´çš„ä¸¤ç‰‡çº¢å¶æ›¿æ¢æˆé»„å¶ï¼Œå¾—åˆ° <span class="string">&quot;rrryyyyyyyyrr&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šleaves = <span class="string">&quot;ryr&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šå·²ç¬¦åˆè¦æ±‚ï¼Œä¸éœ€è¦é¢å¤–æ“ä½œ</span><br><span class="line">æç¤ºï¼š</span><br><span class="line"><span class="number">3</span> &lt;= leaves.length &lt;= <span class="number">10</span>^<span class="number">5</span></span><br><span class="line">leaves ä¸­åªåŒ…å«å­—ç¬¦ <span class="string">&#x27;r&#x27;</span> å’Œå­—ç¬¦ <span class="string">&#x27;y&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>å’Œä¸Šä¸€é¢˜ <a href="#926-%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BF%BB%E8%BD%AC%E5%88%B0%E5%8D%95%E8%B0%83%E9%80%92%E5%A2%9E">926. å°†å­—ç¬¦ä¸²ç¿»è½¬åˆ°å•è°ƒé€’å¢</a>ä¸€æ ·ï¼Œä¸è¿‡å¾ˆæ˜æ˜¾è¿™é‡Œæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯å‰é¢çš„ r ç»“å°¾ï¼Œä¸€ä¸ªæ˜¯ä¸­é—´çš„ y ç»“å°¾ï¼Œä¸€ä¸ªæ˜¯æœ«å°¾çš„ r ç»“å°¾ï¼Œæœ€åæ±‚å‡ºä»¥æœ€åçš„ r ç»“å°¾çš„æœ€çŸ­æ¬¡æ•°å°± ok äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumOperations</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="comment">//0ï¼Œ1ï¼Œ2 åˆ†åˆ«ä»£è¡¨ å‰é¢çš„ r ä¸­é—´çš„ y ç»“å°¾çš„ r</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = s.charAt(<span class="number">0</span>) == <span class="string">&#x27;r&#x27;</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">1</span>] = dp[<span class="number">0</span>][<span class="number">2</span>] = dp[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="comment">//ç®€å•çš„é€’æ¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i) == <span class="string">&#x27;r&#x27;</span>) &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.min(dp[i-<span class="number">1</span>][<span class="number">1</span>]+<span class="number">1</span>, dp[i-<span class="number">1</span>][<span class="number">0</span>]+<span class="number">1</span>);</span><br><span class="line">            dp[i][<span class="number">2</span>] = Math.min(dp[i-<span class="number">1</span>][<span class="number">2</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = dp[i-<span class="number">1</span>][<span class="number">0</span>]+<span class="number">1</span>;</span><br><span class="line">            dp[i][<span class="number">1</span>] = Math.min(dp[i-<span class="number">1</span>][<span class="number">0</span>], dp[i-<span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">            dp[i][<span class="number">2</span>] = Math.min(dp[i-<span class="number">1</span>][<span class="number">2</span>]+<span class="number">1</span>, dp[i-<span class="number">1</span>][<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç©ºé—´è¿˜å¯ä»¥ä¼˜åŒ–ï¼Œä»£ç ä¹Ÿè¿˜å¯ä»¥æ›´ç®€æ´ï¼Œä¸è¿‡æˆ‘æ‡’å¾—æ”¹äº†</p>
</blockquote>
<h2 id="845-æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰"><a href="#845-æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰" class="headerlink" title="845. æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-mountain-in-array/">845. æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>æˆ‘ä»¬æŠŠæ•°ç»„ A ä¸­ç¬¦åˆä¸‹åˆ—å±æ€§çš„ä»»æ„è¿ç»­å­æ•°ç»„ B ç§°ä¸º â€œ_å±±è„‰â€_ï¼š</p>
<ul>
<li>  <code>B.length &gt;= 3</code></li>
<li>  å­˜åœ¨ <code>0 &lt; iÂ &lt; B.length - 1</code> ä½¿å¾— <code>B[0] &lt; B[1] &lt; ... B[i-1] &lt; B[i] &gt; B[i+1] &gt; ... &gt; B[B.length - 1]</code></li>
</ul>
<p>ï¼ˆæ³¨æ„ï¼šB å¯ä»¥æ˜¯ A çš„ä»»æ„å­æ•°ç»„ï¼ŒåŒ…æ‹¬æ•´ä¸ªæ•°ç»„ Aã€‚ï¼‰</p>
<p>ç»™å‡ºä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>A</code>ï¼Œè¿”å›æœ€é•¿ <em>â€œå±±è„‰â€</em>Â çš„é•¿åº¦ã€‚</p>
<p>å¦‚æœä¸å«æœ‰ â€œ_å±±è„‰â€Â _åˆ™è¿”å› <code>0</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿çš„ â€œå±±è„‰â€ æ˜¯ [<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>]ï¼Œé•¿åº¦ä¸º <span class="number">5</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šä¸å« â€œå±±è„‰â€ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li> <code>0 &lt;= A.length &lt;= 10000</code></li>
<li> <code>0 &lt;= A[i] &lt;= 10000</code></li>
</ol>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šæœ€é•¿çš„å±±è„‰æ˜¯ [<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">2</span>]ï¼Œé•¿åº¦ä¸º <span class="number">5</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šä¸å«å±±è„‰</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>éå†çš„è¿‡ç¨‹ä¸­è®°å½•ä¸Šå‡å’Œä¸‹é™çš„é•¿åº¦ï¼Œç„¶åæ³¨æ„é‡ç½®çš„æ—¶æœºï¼Œå½“ä¸”ä»…å½“ up å’Œ down éƒ½å¤§äº 0 çš„æ—¶å€™ä¸ºåˆæ³•ï¼Œç»Ÿè®¡ä¸€ä¸ªæœ€å¤§å€¼å°±å¯ä»¥äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestMountain</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">up</span> <span class="operator">=</span> <span class="number">0</span>, down = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//[2,1,4,7,3,2,5]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">        <span class="comment">//å‰é¢æ˜¯ä¸‹é™ï¼Œè¿™é‡Œå¼€å§‹å¢åŠ æˆ–è€…å’Œå‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œéœ€è¦é‡ç½®</span></span><br><span class="line">        <span class="keyword">if</span> ((down &gt; <span class="number">0</span> &amp;&amp; A[i] &gt; A[i-<span class="number">1</span>]) || A[i] == A[i-<span class="number">1</span>]) &#123;</span><br><span class="line">            up = down = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        up += A[i] &gt; A[i-<span class="number">1</span>] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        down += A[i] &lt; A[i-<span class="number">1</span>] ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (up &gt; <span class="number">0</span> &amp;&amp; down &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            res = Math.max(res, up+down+<span class="number">1</span>);   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒºé—´-DP"><a href="#åŒºé—´-DP" class="headerlink" title="åŒºé—´ DP"></a><em>åŒºé—´ DP</em></h2><p>åé¢æœ‰æ—¶é—´ä¼šå•ç‹¬å°†è¿™äº›é¢˜ç›®åˆ†ç±»æ•´ç†æˆæ–‡ç« ï¼Œç›®å‰æš‚æ—¶å…ˆè¿™æ ·</p>
<h2 id="312-æˆ³æ°”çƒ"><a href="#312-æˆ³æ°”çƒ" class="headerlink" title="312. æˆ³æ°”çƒ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/burst-balloons/">312. æˆ³æ°”çƒ</a></h2><p>æœ‰ n ä¸ªæ°”çƒï¼Œç¼–å·ä¸º 0 åˆ° n-1ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„ nums ä¸­ã€‚</p>
<p>ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚æ¯å½“ä½ æˆ³ç ´ä¸€ä¸ªæ°”çƒ i æ—¶ï¼Œä½ å¯ä»¥è·å¾— <code>nums[left] * nums[i] * nums[right]</code> ä¸ªç¡¬å¸ã€‚ è¿™é‡Œçš„ <code>left</code> å’Œ <code>right</code> ä»£è¡¨å’Œ i ç›¸é‚»çš„ä¸¤ä¸ªæ°”çƒçš„åºå·ã€‚æ³¨æ„å½“ä½ æˆ³ç ´äº†æ°”çƒ i åï¼Œæ°”çƒ left å’Œæ°”çƒ right å°±å˜æˆäº†ç›¸é‚»çš„æ°”çƒã€‚</p>
<p>æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡ã€‚</p>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>ä½ å¯ä»¥å‡è®¾ nums[-1] = nums[n] = 1ï¼Œä½†æ³¨æ„å®ƒä»¬ä¸æ˜¯çœŸå®å­˜åœ¨çš„æ‰€ä»¥å¹¶ä¸èƒ½è¢«æˆ³ç ´ã€‚</li>
<li>0 â‰¤ n â‰¤ 500, 0 â‰¤ nums[i] â‰¤ 100</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">167</span> </span><br><span class="line">è§£é‡Šï¼šnums = [<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>] --&gt; [<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>] --&gt;   [<span class="number">3</span>,<span class="number">8</span>]   --&gt;  [<span class="number">8</span>]  --&gt; []</span><br><span class="line">     coins =  <span class="number">3</span>*<span class="number">1</span>*<span class="number">5</span>      +  <span class="number">3</span>*<span class="number">5</span>*<span class="number">8</span>    +  <span class="number">1</span>*<span class="number">3</span>*<span class="number">8</span>      + <span class="number">1</span>*<span class="number">8</span>*<span class="number">1</span>   = <span class="number">167</span></span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>æš´åŠ›å›æº¯ï¼Œå…¶å®å°±æ˜¯å°è¯•æ‰€æœ‰çš„ç»„åˆï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦<code>O(N!)</code> ï¼Œæ•°æ®è¶…è¿‡åå‡ å°±ä¸è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxCoinsTLE</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    LinkedList&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> n:nums) list.add(n);</span><br><span class="line">    dfs(list,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(LinkedList&lt;Integer&gt; list,<span class="type">int</span> sum)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (list.size()==<span class="number">0</span>) &#123;</span><br><span class="line">        max=Math.max(sum,max);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;list.size();i++) &#123;</span><br><span class="line">        <span class="type">int</span> temp=list.get(i);</span><br><span class="line">        <span class="comment">//è¿™ä¸ªå€¼è¦å…ˆç®—</span></span><br><span class="line">        <span class="type">int</span> cur=(i-<span class="number">1</span>&lt;<span class="number">0</span>?<span class="number">1</span>:list.get(i-<span class="number">1</span>))*(i+<span class="number">1</span>&gt;=list.size()?<span class="number">1</span>:list.get(i+<span class="number">1</span>))*temp;</span><br><span class="line">        list.remove(i);</span><br><span class="line">        dfs(list,sum+cur);</span><br><span class="line">        list.add(i,temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>åŒºé—´å‹åŠ¨æ€è§„åˆ’ï¼Œä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å¬è¯´è¿™ä¸ªåè¯ï¼Œä½†æ˜¯ä¹‹å‰å…¶å®å·²ç»åšäº†ä¸å°‘çš„åŒºé—´å‹çš„ dp äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxCoins</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] A=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length+<span class="number">2</span>];</span><br><span class="line">    A[<span class="number">0</span>]=<span class="number">1</span>;A[A.length-<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++) &#123;</span><br><span class="line">        A[i+<span class="number">1</span>]=nums[i]; <span class="comment">//copy ä¸€ä¸ªæ–°æ•°ç»„</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŒºé—´ DP</span></span><br><span class="line">    <span class="type">int</span> n=A.length;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][n]; <span class="comment">//dp[i][j] ä»£è¡¨çš„æ˜¯ä¸åŒ…å«è¾¹ç•Œ i,j çš„æœ€å¤§å¾—åˆ†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len=<span class="number">2</span>;len&lt;=n;len++) &#123; <span class="comment">//æšä¸¾åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n-len;i++) &#123; <span class="comment">//æšä¸¾èµ·ç‚¹</span></span><br><span class="line">            <span class="type">int</span> j=i+len-<span class="number">1</span>; <span class="comment">//åŒºé—´ç»ˆç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k=i+<span class="number">1</span>;k&lt;j;k++) &#123; <span class="comment">//æšä¸¾åˆ†å‰²ç‚¹</span></span><br><span class="line">                dp[i][j]=Math.max(dp[i][j],dp[i][k]+dp[k][j]+A[k]*A[i]*A[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¸ºäº†å¤„ç†è¾¹ç•Œå°†æ•°ç»„å¤´å°¾æ’å…¥äº† 1ï¼Œcopy äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä¸‹é¢çš„åŒºé—´å‹ dp ä¹Ÿæ˜¯åœ¨çœ‹äº†é¢˜è§£ï¼Œç„¶åå¯¹ç€æ¿å­å†™çš„ï¼Œå½“ç„¶è¿™é¢˜çš„å…³é”®ä¸æ˜¯è¿™é‡Œï¼Œå…³é”®æ˜¯å¦‚ä½•è§„åˆ’ï¼Œè¿™é‡Œæ¬è¿ <a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/burst-balloons/solution/dong-tai-gui-hua-qiu-jie-by-feng-ji-wei-wang/">é¢˜è§£åŒºå¤§ä½¬</a> çš„è§£é‡Š</p>
<p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹æŒ‰ç…§ä¸Šé¢çš„é‚£ä¸ªé€’å½’çš„æ€è·¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹èƒ½å†™å—ï¼Ÿå¦‚æœæŒ‰ç…§ä¸Šé¢çš„é€’å½’çš„æ€è·¯ï¼Œæˆ‘ä»¬å®šä¹‰ dp[i][j] è¡¨ç¤ºå¯¹äº i-j çš„æ°”çƒçš„æœ€å¤§çš„æ”¶ç›Šï¼Œé‚£çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯</p>
<p><code>dp[i][j]=max(coins[k]* coins[k-1] * coins[k+1]+dp[i][k-1]+dp[k+1][j]) kâˆˆ[i,j]</code>,</p>
<p>å°±æŒ‰ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ï¼Œ[3,1,5,8], æ¥å†™ä¸€ä¸‹è¿‡ç¨‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ‰çˆ† <span class="number">3</span> å‰©ä¸‹ [] å’Œ [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">æ‰çˆ† <span class="number">1</span> å‰©ä¸‹ [<span class="number">3</span>] å’Œ [<span class="number">5</span>,<span class="number">8</span>]</span><br><span class="line">æ‰çˆ† <span class="number">5</span> å‰©ä¸‹ [<span class="number">3</span>,<span class="number">1</span>] å’Œ [<span class="number">8</span>]</span><br><span class="line">æ‰çˆ† <span class="number">8</span> å‰©ä¸‹ [<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>] å’Œ []</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨è¿™äº›é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§å€¼è¿”å›ï¼Œè¿™å…¶ä¸­å¯¹äºæ‰çˆ† 1 å’Œ 8 çš„æœ€å¤§çš„æ”¶ç›Šè¿™æ ·å®šä¹‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºä¸¤è€…éƒ½åœ¨è¾¹ç•Œï¼Œä½†æ˜¯å¯¹äºæ‰çˆ† 1 å’Œ 5 å°±æœ‰é—®é¢˜äº†ï¼Œå°±æ‹¿å…ˆæ‰çˆ† 1 æ¥è¯´ï¼Œæ‰çˆ† 1ï¼Œå‰©ä¸‹çš„æœ€å¤§çš„æ”¶ç›Šå˜ä¸ºäº† [3] å’Œ [5,8] è¿™ä¸¤ä¸ªåŒºé—´çš„æœ€å¤§çš„æ”¶ç›Šçš„å’Œï¼Œè¿™ä¸ªè‚¯å®šä¸å¯¹ï¼Œå› ä¸ºå‰©ä¸‹çš„ [3,5,8] åŒºé—´çš„æœ€å¤§çš„æ”¶ç›Šçš„å’Œä¸ä¼šæ˜¯ [3] çš„æœ€å¤§æ”¶ç›Šå’Œä¸ [5,8] çš„æœ€å¤§æ”¶ç›Šå’Œçš„æ€»å’Œæ„æˆçš„ï¼Œæ‰€ä»¥è¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ä¸å¯¹çš„</p>
<p>é‚£åº”è¯¥æ€ä¹ˆå®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹å‘¢ï¼Œè¿™ä¹Ÿå°±æ˜¯è¿™é“é¢˜å·§å¦™çš„åœ°æ–¹ï¼Œå®ƒä½¿ç”¨é€†å‘æ€ç»´ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ç”±æŸä¸ªæ°”çƒå…ˆçˆ†å¾—å‡ºæ¥çš„ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬è®©æŒ‡å®šçš„æ°”çƒæœ€åçˆ†ï¼Œè¿™æ ·çš„è¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º</p>
<p><code>dp[i][j]=max(coins[k]*coins[i-1]*coins[j+1]+dp[i][k-1]+dp[k+1][j]) kâˆˆ[i,j]</code> </p>
<p>å†æ¥çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œå°±å¯¹äº†ï¼Œä¹Ÿå°±æ˜¯å¯¹äº [i,j] çš„æ°”çƒï¼Œæˆ‘ä»¬è®©æŸä¸ªä½ç½®çš„æ°”çƒæœ€åå†çˆ†ï¼Œæ±‚å‡ºå®ƒå·¦åŒºé—´çš„æœ€å¤§çš„æ”¶ç›Šå’Œå³åŒºé—´çš„æœ€å¤§çš„æ”¶ç›Šï¼ŒåŠ ä¸Šè¿™ä¸ªæ°”çƒæœ€åçˆ†æ‰æ‰€è·å¾—çš„æ”¶ç›Šï¼Œä¸€ ä¸€æ¯”è¾ƒï¼Œè¿”å›ä¸€ä¸ªæœ€å¤§å€¼å°±å¥½äº†ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œè¦æŒ‰åŒºé—´çš„é•¿åº¦æ¥è¿›è¡ŒçŠ¶æ€çš„è½¬ç§»ï¼Œä¹Ÿå°±æ˜¯å…ˆæ±‚é•¿åº¦ä¸º 1 çš„ï¼Œç„¶å 2 çš„ä¾æ¬¡ç±»æ¨ï¼Œå› ä¸ºè¿™é‡ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¶‰åŠåˆ°äº†å½“å‰ä½ç½®çš„åé¢çš„åŒºé—´çš„æœ€å¤§çš„æ”¶ç›Šï¼Œä½†æ˜¯åé¢çš„åŒºé—´çš„é•¿åº¦æ˜¯å°äºå½“å‰åŒºé—´çš„é•¿åº¦çš„ï¼Œæ•…åº”è¯¥æŒ‰é•¿åº¦æ¥è¿›è¡ŒçŠ¶æ€çš„è½¬ç§»ï¼Œè¿™ä¹Ÿæ˜¯å…¸å‹çš„åŒºé—´å‹åŠ¨æ€è§„åˆ’çš„å¥—è·¯</p>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>åœ¨è§£æ³•äºŒçš„åŸºç¡€ä¸Šç®€åŒ–äº†ä»£ç ï¼Œ<code>dp[i][j]</code>ä»£è¡¨<code>i</code>å’Œ<code>j</code>ä¹‹é—´ï¼ŒåŒ…å«<code>i</code>å’Œ<code>j</code>ä½ç½®ï¼Œæˆ³çˆ†æ‰€æœ‰æ°”çƒçš„æœ€å¤§å¾—åˆ†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxCoins</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums==<span class="literal">null</span> || nums.length&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=nums.length;</span><br><span class="line">    <span class="comment">//dp[i][j] ä»£è¡¨çš„æ˜¯åŒ…å«è¾¹ç•Œ i,j çš„æœ€å¤§å¾—åˆ†</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][n]; </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len=<span class="number">1</span>;len&lt;=n;len++) &#123; <span class="comment">//æšä¸¾åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n-len;i++) &#123; <span class="comment">//æšä¸¾èµ·ç‚¹</span></span><br><span class="line">            <span class="type">int</span> j=i+len-<span class="number">1</span>; <span class="comment">//åŒºé—´ç»ˆç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k=i;k&lt;=j;k++) &#123; <span class="comment">//æšä¸¾åˆ†å‰²ç‚¹</span></span><br><span class="line">                dp[i][j]=Math.max(dp[i][j],(k-<span class="number">1</span>&gt;=<span class="number">0</span>?dp[i][k-<span class="number">1</span>]:<span class="number">0</span>)+(k+<span class="number">1</span>&lt;n?dp[k+<span class="number">1</span>][j]:<span class="number">0</span>)+nums[k]*(i-<span class="number">1</span>&gt;=<span class="number">0</span>?nums[i-<span class="number">1</span>]:<span class="number">1</span>)*(j+<span class="number">1</span>&lt;n?nums[j+<span class="number">1</span>]:<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>UPDATE:2020.7.19</strong><br>æ‰“å¡é¢˜ï¼Œé‡æ–°å†™ä¸€éï¼Œç¨å¾®å¥½ä¸€ç‚¹çš„å†™æ³•ï¼Œä¸Šé¢ä¸€å †ä¸‰ç›®ä¸å¤ªå¥½</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxCoins</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt;= <span class="number">0</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    nums = <span class="built_in">append</span>(nums, <span class="number">1</span>)</span><br><span class="line">    nums = <span class="built_in">append</span>([]<span class="type">int</span>&#123;<span class="number">1</span>&#125;, nums...)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, n)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++&#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> tlen := <span class="number">1</span>; tlen &lt;= n<span class="number">-2</span>; tlen++&#123; <span class="comment">//æšä¸¾åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span> left := <span class="number">1</span>; left+tlen<span class="number">-1</span> &lt; n<span class="number">-1</span>; left++&#123; <span class="comment">//æšä¸¾å·¦ç«¯ç‚¹</span></span><br><span class="line">            right := left+tlen<span class="number">-1</span> <span class="comment">//å³ç«¯ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> k := left; k &lt;= right; k++&#123; <span class="comment">//æšä¸¾åˆ†å‰²ç‚¹</span></span><br><span class="line">                dp[left][right] = Max(dp[left][right], dp[left][k<span class="number">-1</span>]+dp[k+<span class="number">1</span>][right]+nums[k]*nums[left<span class="number">-1</span>]*nums[right+<span class="number">1</span>])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">1</span>][n<span class="number">-2</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Max</span><span class="params">(a, b <span class="type">int</span>)</span></span><span class="type">int</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> a &gt; b&#123;</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="877-çŸ³å­æ¸¸æˆ"><a href="#877-çŸ³å­æ¸¸æˆ" class="headerlink" title="877. çŸ³å­æ¸¸æˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/stone-game/">877. çŸ³å­æ¸¸æˆ</a></h2><p>äºšå†å…‹æ–¯å’Œæç”¨å‡ å †çŸ³å­åœ¨åšæ¸¸æˆã€‚å¶æ•°å †çŸ³å­<strong>æ’æˆä¸€è¡Œ</strong>ï¼Œæ¯å †éƒ½æœ‰æ­£æ•´æ•°é¢—çŸ³å­ <code>piles[i]</code> ã€‚</p>
<p>æ¸¸æˆä»¥è°æ‰‹ä¸­çš„çŸ³å­æœ€å¤šæ¥å†³å‡ºèƒœè´Ÿã€‚çŸ³å­çš„æ€»æ•°æ˜¯å¥‡æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰å¹³å±€ã€‚</p>
<p>äºšå†å…‹æ–¯å’Œæè½®æµè¿›è¡Œï¼Œäºšå†å…‹æ–¯å…ˆå¼€å§‹ã€‚ æ¯å›åˆï¼Œç©å®¶ä»è¡Œçš„å¼€å§‹æˆ–ç»“æŸå¤„å–èµ°æ•´å †çŸ³å¤´ã€‚ è¿™ç§æƒ…å†µä¸€ç›´æŒç»­åˆ°æ²¡æœ‰æ›´å¤šçš„çŸ³å­å †ä¸ºæ­¢ï¼Œæ­¤æ—¶æ‰‹ä¸­çŸ³å­æœ€å¤šçš„ç©å®¶è·èƒœã€‚</p>
<p>å‡è®¾äºšå†å…‹æ–¯å’Œæéƒ½å‘æŒ¥å‡ºæœ€ä½³æ°´å¹³ï¼Œå½“äºšå†å…‹æ–¯èµ¢å¾—æ¯”èµ›æ—¶è¿”å› <code>true</code> ï¼Œå½“æèµ¢å¾—æ¯”èµ›æ—¶è¿”å› <code>false</code> ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">äºšå†å…‹æ–¯å…ˆå¼€å§‹ï¼Œåªèƒ½æ‹¿å‰ <span class="number">5</span> é¢—æˆ–å <span class="number">5</span> é¢—çŸ³å­ ã€‚</span><br><span class="line">å‡è®¾ä»–å–äº†å‰ <span class="number">5</span> é¢—ï¼Œè¿™ä¸€è¡Œå°±å˜æˆäº† [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>] ã€‚</span><br><span class="line">å¦‚æœææ‹¿èµ°å‰ <span class="number">3</span> é¢—ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„æ˜¯ [<span class="number">4</span>,<span class="number">5</span>]ï¼Œäºšå†å…‹æ–¯æ‹¿èµ°å <span class="number">5</span> é¢—èµ¢å¾— <span class="number">10</span> åˆ†ã€‚</span><br><span class="line">å¦‚æœææ‹¿èµ°å <span class="number">5</span> é¢—ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„æ˜¯ [<span class="number">3</span>,<span class="number">4</span>]ï¼Œäºšå†å…‹æ–¯æ‹¿èµ°å <span class="number">4</span> é¢—èµ¢å¾— <span class="number">9</span> åˆ†ã€‚</span><br><span class="line">è¿™è¡¨æ˜ï¼Œå–å‰ <span class="number">5</span> é¢—çŸ³å­å¯¹äºšå†å…‹æ–¯æ¥è¯´æ˜¯ä¸€ä¸ªèƒœåˆ©çš„ä¸¾åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› <span class="literal">true</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li><code>2 &lt;= piles.length &lt;= 500</code></li>
<li><code>piles.length</code> æ˜¯å¶æ•°ã€‚</li>
<li><code>1 &lt;= piles[i] &lt;= 500</code></li>
<li><code>sum(piles)</code> æ˜¯å¥‡æ•°ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åšå¼ˆå‹ dpï¼Œå…ˆé‡‡ç”¨åŒºé—´ dp çš„è§£æ³•è¯•è¯•ï¼ˆåŒºé—´ dp æ˜¯çœŸçš„å¦™å•Šï¼ï¼ï¼)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šç”¨çš„åŒºé—´ DP</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">stoneGame</span><span class="params">(<span class="type">int</span>[] piles)</span> &#123;</span><br><span class="line">    <span class="comment">//[5,3,4,5]</span></span><br><span class="line">    <span class="type">int</span> N=piles.length;</span><br><span class="line">    <span class="comment">//(i~j) å…ˆæ‰‹ (0), åæ‰‹ (1) çš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line">    <span class="type">int</span>[][][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][N][<span class="number">2</span>];</span><br><span class="line">    <span class="comment">//base init len=1 çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        dp[i][i][<span class="number">0</span>]=piles[i];</span><br><span class="line">        dp[i][i][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len=<span class="number">2</span>;len&lt;=N;len++) &#123; <span class="comment">//æšä¸¾åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> left=<span class="number">0</span>;left&lt;=N-len;left++) &#123; <span class="comment">//æšä¸¾æ‰€æœ‰åŒºé—´</span></span><br><span class="line">            <span class="comment">//left+len-1&lt;N</span></span><br><span class="line">            <span class="type">int</span> right=left+len-<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//å…ˆæ‰‹æ‹¿ left æˆ–è€… right çš„æœ€å¤§æ”¶ç›Š</span></span><br><span class="line">            <span class="comment">//æˆ‘å…ˆæ‰‹æ‹¿äº† left æˆ–è€… right ä¹‹åï¼Œå‰©ä¸‹ [left+1,right] æˆ– [left,right-1] åŒºé—´</span></span><br><span class="line">            <span class="comment">//æˆ‘åœ¨å‰©ä¸‹çš„åŒºé—´ä¸­ç»§ç»­é€‰å…¶å®å°±æˆä¸ºäº†åæ‰‹ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ ä¸Šå‰©ä¸‹åŒºé—´çš„åæ‰‹æœ€å¤§å€¼</span></span><br><span class="line">            <span class="type">int</span> firLeft=piles[left]+dp[left+<span class="number">1</span>][right][<span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> firRight=piles[right]+dp[left][right-<span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(firLeft&gt;firRight)&#123;</span><br><span class="line">                dp[left][right][<span class="number">0</span>]=firLeft;</span><br><span class="line">                <span class="comment">//å…ˆæ‰‹é€‰ left é‚£ä¹ˆå°±ç›¸å½“äºè®©å¦ä¸€ä¸ªäººï¼ˆåæ‰‹ï¼‰ä» [left+1,right] ä¸­å…ˆæ‰‹å–æœ€å¤§å€¼</span></span><br><span class="line">                dp[left][right][<span class="number">1</span>]=dp[left+<span class="number">1</span>][right][<span class="number">0</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[left][right][<span class="number">0</span>]=firRight;</span><br><span class="line">                <span class="comment">//åŒä¸Š</span></span><br><span class="line">                dp[left][right][<span class="number">1</span>]=dp[left][right-<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][N-<span class="number">1</span>][<span class="number">0</span>]-dp[<span class="number">0</span>][N-<span class="number">1</span>][<span class="number">1</span>]&gt;<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ•°å­¦æ¨ç†çš„æ–¹æ³•ï¼Œå…·ä½“çš„è¯æ˜ç»™ä¸å‡ºæ¥ï¼Œä½†æ˜¯å¾ˆå®¹æ˜“ç†è§£å®ƒçš„æ­£ç¡®æ€§</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ•°å­¦</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">stoneGame</span><span class="params">(<span class="type">int</span>[] piles)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆé¢˜ç›®æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æ¡ä»¶ï¼ˆè¿™ä¸¤ä¸ªæ¡ä»¶æˆ‘è§£æ³•ä¸€æ²¡ç”¨åˆ°ï¼‰<code>piles.length</code> æ˜¯å¶æ•°ï¼Œ<code>sum(piles)</code> æ˜¯å¥‡æ•°ï¼Œè¿™å…¶å®è¯´æ˜äº†ä¸ä¼šæœ‰å¹³å±€ï¼Œå› ä¸ºæ˜¯å¶æ•°ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„æŸ±å­ç”¨å¥‡å¶æ¥åˆ’åˆ†ï¼Œé‚£ä¹ˆå¥‡æ•°æŸ±å­å’Œå¶æ•°<strong>çŸ³å¤´å †çš„æ•°é‡</strong>ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”<strong>ä¸¤è€…æ€»çš„çŸ³å¤´æ•°ä¸€å®šæœ‰ä¸€ä¸ªæ•°é‡çš„å·®å¼‚</strong>ï¼Œä¸å¯èƒ½ç›¸ç­‰ï¼Œæˆ‘å…ˆæ‰‹æ‹¿çš„è¯æˆ‘å°±å¯ä»¥åªè€ƒè™‘æ‹¿è¾ƒå¤§çš„é‚£ä¸€ç±»çŸ³å¤´å †ï¼Œé‚£æˆ‘èƒ½ä¿è¯æˆ‘æ‹¿åˆ°çš„ä¸€å®šæ˜¯å¥‡æ•°æˆ–å¶æ•°çš„å †å—ï¼Ÿå…¶å®éšä¾¿ä¸¾ä¸€ä¸ªä¾‹å­å°±çŸ¥é“äº†ï¼Œæ¯”å¦‚ 4 å †çŸ³å¤´ï¼Œå…ˆæ‰‹çš„äººæ€»æ˜¯èƒ½æ§åˆ¶è‡ªå·±ä¸€å®šæ‹¿åˆ° 1ï¼Œ3 æˆ–è€… 2ï¼Œ4 æ‰€ä»¥å…ˆæ‰‹çš„ä¸€å®šæ˜¯å¯ä»¥èµ¢å¾—ï¼Œæ¨å¹¿åˆ° N å †çŸ³å¤´ä¹ŸåŒæ ·é€‚ç”¨</p>
<h2 id="1039-å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†"><a href="#1039-å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†" class="headerlink" title="1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-score-triangulation-of-polygon/">1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</a></h2><p>ç»™å®š Nï¼Œæƒ³è±¡ä¸€ä¸ªå‡¸ N è¾¹å¤šè¾¹å½¢ï¼Œå…¶é¡¶ç‚¹æŒ‰é¡ºæ—¶é’ˆé¡ºåºä¾æ¬¡æ ‡è®°ä¸º <code>A[0], A[i], ..., A[N-1]</code>ã€‚</p>
<p>å‡è®¾æ‚¨å°†å¤šè¾¹å½¢å‰–åˆ†ä¸º N-2 ä¸ªä¸‰è§’å½¢ã€‚å¯¹äºæ¯ä¸ªä¸‰è§’å½¢ï¼Œè¯¥ä¸‰è§’å½¢çš„å€¼æ˜¯é¡¶ç‚¹æ ‡è®°çš„ä¹˜ç§¯ï¼Œä¸‰è§’å‰–åˆ†çš„åˆ†æ•°æ˜¯è¿›è¡Œä¸‰è§’å‰–åˆ†åæ‰€æœ‰ N-2 ä¸ªä¸‰è§’å½¢çš„å€¼ä¹‹å’Œã€‚</p>
<p>è¿”å›å¤šè¾¹å½¢è¿›è¡Œä¸‰è§’å‰–åˆ†åå¯ä»¥å¾—åˆ°çš„æœ€ä½åˆ†ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šå¤šè¾¹å½¢å·²ç»ä¸‰è§’åŒ–ï¼Œå”¯ä¸€ä¸‰è§’å½¢çš„åˆ†æ•°ä¸º <span class="number">6</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>å®ä¾‹ 2ï¼š</strong></p>
<p><img src="https://s1.ax1x.com/2020/04/21/J8IK8U.png" alt="J8IK8U.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">3</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">144</span></span><br><span class="line">è§£é‡Šï¼šæœ‰ä¸¤ç§ä¸‰è§’å‰–åˆ†ï¼Œå¯èƒ½å¾—åˆ†åˆ†åˆ«ä¸ºï¼š<span class="number">3</span>*<span class="number">7</span>*<span class="number">5</span> + <span class="number">4</span>*<span class="number">5</span>*<span class="number">7</span> = <span class="number">245</span>ï¼Œæˆ– <span class="number">3</span>*<span class="number">4</span>*<span class="number">5</span> + <span class="number">3</span>*<span class="number">4</span>*<span class="number">7</span> = <span class="number">144</span>ã€‚æœ€ä½åˆ†æ•°ä¸º <span class="number">144</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŒºé—´ DP å¥—è·¯ï¼Œæšä¸¾æ‰€æœ‰çš„åŒºé—´å’ŒåŒºé—´å†…çš„ç‚¹ï¼Œ<code>åŒºé—´å†…çš„ç‚¹</code>å’Œ<code>åŒºé—´å·¦å³ç«¯ç‚¹</code>å°†æ•´ä¸ªåŒºé—´åˆåˆ’åˆ†ä¸ºä¸¤ä¸ª<code>å·²çŸ¥çš„å­åŒºé—´</code>ï¼Œå…¸å‹çš„åŒºé—´ dp</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¯å½¢çš„ç»“æ„</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minScoreTriangulation</span><span class="params">(<span class="type">int</span>[] A)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(A==<span class="literal">null</span> || A.length&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> N=A.length;</span><br><span class="line">    <span class="comment">//ä» 0 ~ N-1 å½¢æˆä¸€ä¸ªç¯</span></span><br><span class="line">    <span class="comment">//    1-3 </span></span><br><span class="line">    <span class="comment">//   /    \</span></span><br><span class="line">    <span class="comment">//  5      1</span></span><br><span class="line">    <span class="comment">//   \    /</span></span><br><span class="line">    <span class="comment">//    1â€”4</span></span><br><span class="line">    <span class="comment">// dp[left][right] ä»£è¡¨ left~right åŒºé—´å½¢æˆçš„ç¯çš„æœ€å°å¾—åˆ†å€¼</span></span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len=<span class="number">3</span>;len&lt;=N;len++) &#123; <span class="comment">//æšä¸¾é•¿åº¦ï¼Œä» 3 å¼€å§‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> left=<span class="number">0</span>;left&lt;=N-len;left++) &#123; <span class="comment">//æšä¸¾å·¦ç«¯ç‚¹</span></span><br><span class="line">            <span class="comment">//left+len-1&lt;N</span></span><br><span class="line">            <span class="type">int</span> right=left+len-<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//init åˆå§‹åŒ–åŒºé—´å€¼</span></span><br><span class="line">            dp[left][right]=Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i=left+<span class="number">1</span>;i&lt;right;i++) &#123; <span class="comment">//æšä¸¾åŒºé—´å†…çš„æ‰€æœ‰çš„ç‚¹ï¼ˆä¸åŒ…æ‹¬ç«¯ç‚¹ï¼‰), å°†ç¯åˆ†å‰²æˆå·¦å³ä¸¤éƒ¨åˆ†</span></span><br><span class="line">                dp[left][right]=Math.min(dp[left][right],dp[left][i]+dp[i][right]+A[i]*A[left]*A[right]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][N-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="516-æœ€é•¿å›æ–‡å­åºåˆ—"><a href="#516-æœ€é•¿å›æ–‡å­åºåˆ—" class="headerlink" title="516. æœ€é•¿å›æ–‡å­åºåˆ—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/longest-palindromic-subsequence/">516. æœ€é•¿å›æ–‡å­åºåˆ—</a></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ã€‚å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;bbbab&quot;</span></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">4</span></span><br><span class="line">ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º <span class="string">&quot;bbbb&quot;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;cbbd&quot;</span></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br><span class="line">ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º <span class="string">&quot;bb&quot;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>åŠ¨æ€è§„åˆ’ï¼Œ<code>dp[i][j]</code> ä»£è¡¨ i~j çš„æœ€é•¿å›æ–‡ä¸²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestPalindromeSubseq</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][n]; <span class="comment">//dp[i][j] ä»£è¡¨ i~j çš„æœ€é•¿å›æ–‡å­ä¸²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        dp[i][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//bbbab</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=n-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++) &#123; </span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i)==s.charAt(j)) &#123;</span><br><span class="line">                dp[i][j]=dp[i+<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=Math.max(dp[i+<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ ¸å¿ƒçš„ dp å…¬å¼ï¼š</p>
<ol>
<li><code>s[i]==p[j]</code>ï¼Œ<code>dp[i][j]=dp[i+1][j-1]+2</code> </li>
<li><code>s[i]!=p[j]</code> ï¼Œ<code>dp[i][j]=max(dp[i+1][j],dp[i][j-1])</code></li>
</ol>
<p>æ˜¯ä¸æ˜¯æœ‰çš„çœ¼ç†Ÿï¼Ÿæ²¡é”™ï¼Œå’Œ LCS çš„ dp æ€è·¯å¾ˆç›¸ä¼¼</p>
<p>è¿™é‡Œå…¶å®è¿˜æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯ä¸¤æ¬¡å¾ªç¯çš„æ–¹å‘ï¼Œæˆ‘ä»¬è¦ä¿è¯æ¯æ¬¡è®¡ç®— dp å€¼çš„æ—¶å€™å³å€¼éƒ½æ˜¯å·²ç»è®¡ç®—è¿‡çš„ï¼Œæ‰€ä»¥éœ€è¦è°ƒæ•´å¾ªç¯çš„æ‰§è¡Œæ–¹å‘è®© <code>i</code>ä»å³å¾€å·¦ï¼Œè®©<code>j</code>ä»<code>i</code>å‘å³ï¼Œè¿™æ · i+1 å’Œ j-1 çš„ dp å°±éƒ½æ˜¯è®¡ç®—è¿‡çš„äº†</p>
<p><strong>UPDATE</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//update: 2020.4.19</span></span><br><span class="line"><span class="comment">//åŒºé—´ dp å†™æ³•ï¼Œæ›´åŠ å¥—è·¯åŒ–ï¼Œå…¶å®æ€è·¯æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestPalindromeSubseq</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> N=s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line">    <span class="comment">//base len=1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        dp[i][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=N;len++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=N-len;i++)&#123;</span><br><span class="line">            <span class="comment">//j=i+len-1&lt;N</span></span><br><span class="line">            <span class="type">int</span> j=i+len-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(i)==s.charAt(j))&#123;</span><br><span class="line">                dp[i][j]=dp[i+<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=Math.max(dp[i+<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][N-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å¯¹æ¯”ä¸€ä¸‹é€’å½’è§£æ³•æ˜¯çœŸçš„ç®€æ´ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šè¾¹ç•Œè€ƒè™‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€’å½’è§£æ³•ï¼Œè‡ªåº•å‘ä¸Š</span></span><br><span class="line"><span class="keyword">private</span> Integer[][] cache=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestPalindromeSubseq</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    cache=<span class="keyword">new</span> <span class="title class_">Integer</span>[n][n];</span><br><span class="line">    <span class="keyword">return</span> helper(s,<span class="number">0</span>,n-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">helper</span><span class="params">(String s,<span class="type">int</span> left,<span class="type">int</span> right)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left&gt;right) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (left==right) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cache[left][right]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[left][right];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (s.charAt(left) == s.charAt(right)) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[left][right]=helper(s,left+<span class="number">1</span>,right-<span class="number">1</span>)+<span class="number">2</span>; <span class="comment">//ç”±å¤–å‘å†…ç¼©è¿›</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[left][right]=Math.max(helper(s,left+<span class="number">1</span>,right),helper(s,left,right-<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•ä¸‰</strong></p>
<p>å°†é—®é¢˜è½¬æ¢ä¸º LCS çš„é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//LCS çš„è§£æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestPalindromeSubseq</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>][n+<span class="number">1</span>]; <span class="comment">//dp[i][j] ä»£è¡¨ s[0,i]~rs[0,j] çš„æœ€é•¿å­åºåˆ—</span></span><br><span class="line">    String rs=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(s).reverse().toString();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.length();i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;=rs.length();j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i-<span class="number">1</span>)==rs.charAt(j-<span class="number">1</span>)) &#123;</span><br><span class="line">                dp[i][j]=dp[i-<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j]=Math.max(dp[i-<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€é•¿çš„å›æ–‡åºåˆ—å…¶å®å°±æ˜¯æ±‚è¿™ä¸ªå­—ç¬¦ä¸²å’Œå®ƒç¿»è½¬åçš„å­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼å¾ˆå¦™çš„è§£æ³•</p>
<h2 id="1312-è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°"><a href="#1312-è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°" class="headerlink" title="1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-insertion-steps-to-make-a-string-palindrome/">1312. è®©å­—ç¬¦ä¸²æˆä¸ºå›æ–‡ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°</a></h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ¯ä¸€æ¬¡æ“ä½œä½ éƒ½å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»æ„ä½ç½®æ’å…¥ä»»æ„å­—ç¬¦ã€‚</p>
<p>è¯·ä½ è¿”å›è®© s æˆä¸ºå›æ–‡ä¸²çš„ <strong>æœ€å°‘æ“ä½œæ¬¡æ•°</strong> ã€‚</p>
<p>ã€Œå›æ–‡ä¸²ã€æ˜¯æ­£è¯»å’Œåè¯»éƒ½ç›¸åŒçš„å­—ç¬¦ä¸²ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;zzazz&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šå­—ç¬¦ä¸² <span class="string">&quot;zzazz&quot;</span> å·²ç»æ˜¯å›æ–‡ä¸²äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦åšä»»ä½•æ’å…¥æ“ä½œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;mbadm&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šå­—ç¬¦ä¸²å¯å˜ä¸º <span class="string">&quot;mbdadbm&quot;</span> æˆ–è€… <span class="string">&quot;mdbabdm&quot;</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;leetcode&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">5</span></span><br><span class="line">è§£é‡Šï¼šæ’å…¥ <span class="number">5</span> ä¸ªå­—ç¬¦åå­—ç¬¦ä¸²å˜ä¸º <span class="string">&quot;leetcodocteel&quot;</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;g&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = <span class="string">&quot;no&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>1 &lt;= s.length &lt;= 500</li>
<li>s ä¸­æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å°å†™å­—æ¯ã€‚ </li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>170 å‘¨èµ›çš„å‹è½´é¢˜ï¼Œå…¶å®å’Œå‰é¢çš„ <a href="#516-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97">516. æœ€é•¿å›æ–‡å­åºåˆ—</a>æ˜¯ä¸€æ ·çš„ã€‚æ²¡å•¥å¥½è¯´çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minInsertions</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n=s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=n-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) == s.charAt(j)) &#123;</span><br><span class="line">                dp[i][j]=dp[i+<span class="number">1</span>][j-<span class="number">1</span>];   </span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//ä¸ç›¸ç­‰å°±å¯ä»¥åœ¨å¤´éƒ¨æ’å…¥ s[j] æˆ–è€…å°¾éƒ¨æ’å…¥ s[i]</span></span><br><span class="line">                <span class="comment">//å¤´éƒ¨æ’å…¥ s[j] åˆ™å­åŒºé—´å°±æ˜¯ dp[i][j-1]</span></span><br><span class="line">                <span class="comment">//å°¾éƒ¨æ’å…¥ s[i] åˆ™å­åŒºé—´å°±æ˜¯ dp[i+1][j]</span></span><br><span class="line">                dp[i][j]=<span class="number">1</span>+Math.min(dp[i+<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>UPDATEï¼š2020.5.18ï¼ŒåŒºé—´ dp çš„å†™æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minInsertions</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[s.length()][s.length()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> len=<span class="number">2</span>;len&lt;=s.length();len++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> left=<span class="number">0</span>;left+len-<span class="number">1</span>&lt;s.length();left++)&#123;</span><br><span class="line">            <span class="type">int</span> right=left+len-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(s.charAt(left)==s.charAt(right))&#123;</span><br><span class="line">                dp[left][right]=dp[left+<span class="number">1</span>][right-<span class="number">1</span>];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[left][right]=Math.min(dp[left][right-<span class="number">1</span>],dp[left+<span class="number">1</span>][right])+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][s.length()-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é¢˜ä¹Ÿå¯ä»¥ç”¨ LCS çš„è§£æ³•è§£ï¼Œ<code>n-lcs[n][n]</code>å°±æ˜¯æœ€å°‘çš„æ’å…¥æ¬¡æ•° </p>
<h2 id="664-å¥‡æ€ªçš„æ‰“å°æœº"><a href="#664-å¥‡æ€ªçš„æ‰“å°æœº" class="headerlink" title="664. å¥‡æ€ªçš„æ‰“å°æœº"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/strange-printer/">664. å¥‡æ€ªçš„æ‰“å°æœº</a></h2><p>æœ‰å°å¥‡æ€ªçš„æ‰“å°æœºæœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹æ®Šè¦æ±‚ï¼š</p>
<p>æ‰“å°æœºæ¯æ¬¡åªèƒ½æ‰“å°åŒä¸€ä¸ªå­—ç¬¦åºåˆ—ã€‚<br>æ¯æ¬¡å¯ä»¥åœ¨ä»»æ„èµ·å§‹å’Œç»“æŸä½ç½®æ‰“å°æ–°å­—ç¬¦ï¼Œå¹¶ä¸”ä¼šè¦†ç›–æ‰åŸæ¥å·²æœ‰çš„å­—ç¬¦ã€‚<br>ç»™å®šä¸€ä¸ªåªåŒ…å«å°å†™è‹±æ–‡å­—æ¯çš„å­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªæ‰“å°æœºæ‰“å°å®ƒéœ€è¦çš„æœ€å°‘æ¬¡æ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;aaabbb&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šé¦–å…ˆæ‰“å° <span class="string">&quot;aaa&quot;</span> ç„¶åæ‰“å° <span class="string">&quot;bbb&quot;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="string">&quot;aba&quot;</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br><span class="line">è§£é‡Šï¼šé¦–å…ˆæ‰“å° <span class="string">&quot;aaa&quot;</span> ç„¶ååœ¨ç¬¬äºŒä¸ªä½ç½®æ‰“å° <span class="string">&quot;b&quot;</span> è¦†ç›–æ‰åŸæ¥çš„å­—ç¬¦ <span class="string">&#x27;a&#x27;</span>ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong> è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ 100ã€‚</p>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å‰ä¸€å¤©çœ‹äº†å¤§è‡´çš„æ€è·¯ï¼Œéš”äº†ä¸€å¤©ç‹¬ç«‹çš„å†™äº†ä¸€ä¸‹ï¼Œå°†å‰å¤©æ€è·¯çš„å¾ˆå¤šç»†èŠ‚éƒ½æƒ³æ˜ç™½äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strangePrinter</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(s==<span class="literal">null</span> || s.length()&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> N=s.length();</span><br><span class="line">    <span class="type">int</span>[][] dp=<span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</span><br><span class="line">        dp[i][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//aa        1</span></span><br><span class="line">    <span class="comment">//aab       2</span></span><br><span class="line">    <span class="comment">//aaba      2</span></span><br><span class="line">    <span class="comment">//aabab     3</span></span><br><span class="line">    <span class="comment">//aababa    4</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> len=<span class="number">2</span>;len&lt;=N;len++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> left=<span class="number">0</span>;left+len-<span class="number">1</span>&lt;N;left++) &#123; <span class="comment">//å·¦ç«¯ç‚¹</span></span><br><span class="line">            <span class="type">int</span> right=left+len-<span class="number">1</span>; <span class="comment">//å³ç«¯ç‚¹</span></span><br><span class="line">            <span class="comment">//å’Œå‰ä¸€ä¸ªåŒºé—´ [left,right-1] çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸ç­‰ï¼Œå¯ä»¥ç›´æ¥é¡ºå¸¦æ‰“å°å‡ºæ¥</span></span><br><span class="line">            <span class="keyword">if</span>(s.charAt(right)==s.charAt(left))&#123; </span><br><span class="line">                <span class="comment">//è‡³å°‘æ˜¯ dp[left][right-1]</span></span><br><span class="line">                dp[left][right]=dp[left][right-<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æœ€å¤šæ˜¯å‰ä¸€ä¸ªåŒºé—´+1ï¼ˆç›´æ¥æ‰“å° right ä½ç½®çš„å­—ç¬¦ï¼‰</span></span><br><span class="line">            dp[left][right]=dp[left][right-<span class="number">1</span>]+<span class="number">1</span>; </span><br><span class="line">            <span class="comment">//æšä¸¾ [left,right) ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œå¦‚æœæœ‰å’Œ right ç›¸ç­‰çš„å°±è€ƒè™‘ä»è¿™ä¸ªä½ç½®åˆ†å‰²æ•´ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="comment">//æ¯”å¦‚ abc b è¿™ä¸ªæœ€åçš„ b å°±å¯ä»¥è¿åŒå‰é¢çš„ bc ä¸€èµ·é¡ºå¸¦æ‰“å°å‡ºæ¥</span></span><br><span class="line">            <span class="comment">//æ‰€ä»¥å½“å‰åŒºé—´çš„å€¼å°±æ˜¯å¯ä»¥æ˜¯ dp[a][a]+dp[b][c], æˆ‘ä»¬ä»æ‰€æœ‰çš„è¿™ç§æƒ…å†µä¸­å–æœ€å°å€¼å°± ok äº†</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i=left;i&lt;right;i++) &#123; </span><br><span class="line">                <span class="keyword">if</span>(s.charAt(right)==s.charAt(i))&#123;</span><br><span class="line">                    dp[left][right]=Math.min(dp[left][i-<span class="number">1</span>]+dp[i][right-<span class="number">1</span>],dp[left][right]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][N-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>dp[left][right]</code>ä»£è¡¨ left åˆ° right çš„æœ€å°‘æ‰“å°æ¬¡æ•°ï¼Œç„¶åæˆ‘ä»¬è¦ç†è§£ä¸€ç‚¹ï¼š<code>dp[left][right]</code> å…¶å®åªå¯èƒ½æœ‰ä¸¤ä¸ªå–å€¼ï¼Œ<code>dp[left][right-1]</code>æˆ–è€…<code>dp[left][right-1]+1</code>ï¼Œæˆ‘ä»¬æ±‚æœ€å°æ‰“å°æ¬¡æ•°å…¶å®å°±æ˜¯å¸Œæœ›å¢åŠ ä¸€ä¸ªå­—ç¬¦åæ‰“å°æ¬¡æ•°ä¸å˜</p>
<blockquote>
<p><strong>eg:</strong>  abc b è¿™ä¸ªæœ€åçš„ b å°±å¯ä»¥è¿åŒå‰é¢çš„ bc ä¸€èµ·é¡ºå¸¦æ‰“å°å‡ºæ¥ï¼Œæ‰“å°æ¬¡æ•°ä¸å˜</p>
</blockquote>
<p>æšä¸¾æ‰€æœ‰çš„åŒºé—´<code>[left,right]</code>ï¼Œç„¶åæšä¸¾åŒºé—´<code>[left,right-1]</code>å†…çš„å­—ç¬¦ï¼Œå¦‚æœåŒºé—´<code>[left,right-1]</code>å†…çš„æŸä¸ªå­—ç¬¦<code>i</code>å’Œ<code>right</code>ç›¸ç­‰ï¼Œé‚£ä¹ˆ<code>right</code>å°±å¯ä»¥è·Ÿéš<code>[i,right-1]</code>ä¸€èµ·é¡ºå¸¦æ‰“å°å‡ºæ¥ï¼Œè¿™æ ·è¯¥åŒºé—´çš„ dp å€¼ä¸º</p>
<p><code>dp[left][right]=dp[left][i-1]+dp[i][right-1]</code><br>è¿™æ ·å°±æœ‰å¯èƒ½è®©æ‰“å°æ¬¡æ•°ä¸å˜ï¼Œæˆ‘ä»¬æ±‚ä¸€ä¸‹æ‰€æœ‰æƒ…å†µçš„æœ€å°å€¼å°±å¯ä»¥äº†</p>
<blockquote>
<p>è¿™é¢˜çš„ä»£ç è¿˜å¯ä»¥æ›´ç®€æ´ï¼Œä¸è¿‡æˆ‘æ‡’å¾—æ”¹äº†ï¼Œæ„Ÿè§‰ä¸Šé¢çš„ä»£ç å·²ç»å¾ˆæ¸…æ™°äº†</p>
<p>ps:  è¿™å‡ å¤©åšäº†ä¸å°‘æœ‰ç‚¹éš¾åº¦çš„ DP é¢˜ï¼Œå‘ç°ç¡®å®è‡ªå·±å¯¹è¾¹ç•Œçš„å¤„ç†ï¼Œé€’æ¨å…¬å¼çš„ç†è§£æœ‰äº†ä¸€ç‚¹æå‡ï¼ŒåŠ æ²¹ğŸ’ª</p>
</blockquote>
<h2 id="1547-åˆ‡æ£å­çš„æœ€å°æˆæœ¬"><a href="#1547-åˆ‡æ£å­çš„æœ€å°æˆæœ¬" class="headerlink" title="1547. åˆ‡æ£å­çš„æœ€å°æˆæœ¬"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/minimum-cost-to-cut-a-stick/">1547. åˆ‡æ£å­çš„æœ€å°æˆæœ¬</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>æœ‰ä¸€æ ¹é•¿åº¦ä¸º <code>n</code> ä¸ªå•ä½çš„æœ¨æ£ï¼Œæ£ä¸Šä» <code>0</code> åˆ° <code>n</code> æ ‡è®°äº†è‹¥å¹²ä½ç½®ã€‚ä¾‹å¦‚ï¼Œé•¿åº¦ä¸º <strong>6</strong> çš„æ£å­å¯ä»¥æ ‡è®°å¦‚ä¸‹ï¼š</p>
<p><img src="https://upload.cc/i1/2020/08/20/5m7x61.png" alt="UTOOLS1597929649437.png"></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>cuts</code> ï¼Œå…¶ä¸­ <code>cuts[i]</code> è¡¨ç¤ºä½ éœ€è¦å°†æ£å­åˆ‡å¼€çš„ä½ç½®ã€‚</p>
<p>ä½ å¯ä»¥æŒ‰é¡ºåºå®Œæˆåˆ‡å‰²ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹åˆ‡å‰²çš„é¡ºåºã€‚</p>
<p>æ¯æ¬¡åˆ‡å‰²çš„æˆæœ¬éƒ½æ˜¯å½“å‰è¦åˆ‡å‰²çš„æ£å­çš„é•¿åº¦ï¼Œåˆ‡æ£å­çš„æ€»æˆæœ¬æ˜¯å†æ¬¡åˆ‡å‰²æˆæœ¬çš„æ€»å’Œã€‚å¯¹æ£å­è¿›è¡Œåˆ‡å‰²å°†ä¼šæŠŠä¸€æ ¹æœ¨æ£åˆ†æˆä¸¤æ ¹è¾ƒå°çš„æœ¨æ£ï¼ˆè¿™ä¸¤æ ¹æœ¨æ£çš„é•¿åº¦å’Œå°±æ˜¯åˆ‡å‰²å‰æœ¨æ£çš„é•¿åº¦ï¼‰ã€‚è¯·å‚é˜…ç¬¬ä¸€ä¸ªç¤ºä¾‹ä»¥è·å¾—æ›´ç›´è§‚çš„è§£é‡Šã€‚</p>
<p>è¿”å›åˆ‡æ£å­çš„ <strong>æœ€å°æ€»æˆæœ¬</strong> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://upload.cc/i1/2020/08/20/QGugd1.png" alt="UTOOLS1597929677739.png"></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">7</span>, cuts = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">16</span></span><br><span class="line">è§£é‡Šï¼šæŒ‰ [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>] çš„é¡ºåºåˆ‡å‰²çš„æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ¬¡åˆ‡å‰²é•¿åº¦ä¸º <span class="number">7</span> çš„æ£å­ï¼Œæˆæœ¬ä¸º <span class="number">7</span> ã€‚ç¬¬äºŒæ¬¡åˆ‡å‰²é•¿åº¦ä¸º <span class="number">6</span> çš„æ£å­ï¼ˆå³ç¬¬ä¸€æ¬¡åˆ‡å‰²å¾—åˆ°çš„ç¬¬äºŒæ ¹æ£å­ï¼‰ï¼Œç¬¬ä¸‰æ¬¡åˆ‡å‰²ä¸ºé•¿åº¦ <span class="number">4</span> çš„æ£å­ï¼Œæœ€ååˆ‡å‰²é•¿åº¦ä¸º <span class="number">3</span> çš„æ£å­ã€‚æ€»æˆæœ¬ä¸º <span class="number">7</span> + <span class="number">6</span> + <span class="number">4</span> + <span class="number">3</span> = <span class="number">20</span> ã€‚</span><br><span class="line">è€Œå°†åˆ‡å‰²é¡ºåºé‡æ–°æ’åˆ—ä¸º [<span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>] åï¼Œæ€»æˆæœ¬ = <span class="number">16</span>ï¼ˆå¦‚ç¤ºä¾‹å›¾ä¸­ <span class="number">7</span> + <span class="number">4</span> + <span class="number">3</span> + <span class="number">2</span> = <span class="number">16</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">9</span>, cuts = [<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">22</span></span><br><span class="line">è§£é‡Šï¼šå¦‚æœæŒ‰ç»™å®šçš„é¡ºåºåˆ‡å‰²ï¼Œåˆ™æ€»æˆæœ¬ä¸º <span class="number">25</span> ã€‚æ€»æˆæœ¬ &lt;= <span class="number">25</span> çš„åˆ‡å‰²é¡ºåºå¾ˆå¤šï¼Œä¾‹å¦‚ï¼Œ[<span class="number">4</span>ï¼Œ<span class="number">6</span>ï¼Œ<span class="number">5</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">1</span>] çš„æ€»æˆæœ¬ = <span class="number">22</span>ï¼Œæ˜¯æ‰€æœ‰å¯èƒ½æ–¹æ¡ˆä¸­æˆæœ¬æœ€å°çš„ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>2 &lt;= n &lt;= 10^6</code></li>
<li>  <code>1 &lt;= cuts.length &lt;= min(n - 1, 100)</code></li>
<li>  <code>1 &lt;= cuts[i] &lt;= n - 1</code></li>
<li>  <code>cuts</code> æ•°ç»„ä¸­çš„æ‰€æœ‰æ•´æ•°éƒ½ <strong>äº’ä¸ç›¸åŒ</strong></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>201th å‘¨èµ›çš„ t4ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºç®€å•çš„ï¼Œä»Šå¤©è¡¥çš„æ—¶å€™èŠ±äº† 10 åˆ†é’Ÿææ¸…æ¥šæ€è·¯ï¼Œä¸€éçœ‹è§†é¢‘ä¸€è¾¹å†™ï¼Œæœ€åä¸å‡ºæ„å¤–çš„çš„ T äº†~ğŸ˜‚ä¸€å¼€å§‹æ²¡æƒ³æ¸…æ¥šç»†èŠ‚ï¼Œæƒ³åˆ°äº†ä»¥åŒºé—´å¼€å§‹å’Œç»“å°¾åš dpï¼Œç„¶åå°±ç›´æ¥å¼€äº†ä¸ª n*n çš„æ•°ç»„ï¼Œè™½ç„¶æ˜¯å¯¹çš„ï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°± t äº†ï¼Œè¿™é‡Œå®é™…ä¸Šåªéœ€è¦å¼€ä¸€ä¸ª len(cuts)^2 çš„ç©ºé—´å°±è¡Œäº†</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minCost</span><span class="params">(n <span class="type">int</span>, cut []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    sort.Ints(cut)</span><br><span class="line">    <span class="comment">//åœ¨å‰ååŠ ä¸Š 0 å’Œ n</span></span><br><span class="line">    cut = <span class="built_in">append</span>(cut, n)</span><br><span class="line">    cut = <span class="built_in">append</span>([]<span class="type">int</span>&#123;<span class="number">0</span>&#125;, cut...)</span><br><span class="line">    <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a,b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a&lt;b &#123;<span class="keyword">return</span> a&#125;;<span class="keyword">return</span> b&#125;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">len</span>(cut)</span><br><span class="line">    <span class="comment">//dp[i][j] åˆ‡å‰² i,j çš„æˆæœ¬</span></span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, m)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m; i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, m)</span><br><span class="line">        <span class="keyword">if</span> i &lt; m<span class="number">-1</span> &#123;</span><br><span class="line">            dp[i][i+<span class="number">1</span>] = <span class="number">0</span>   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> tlen := <span class="number">2</span>; tlen &lt;= m; tlen++ &#123;</span><br><span class="line">        <span class="keyword">for</span> left := <span class="number">0</span>; left+tlen &lt; m; left++ &#123;</span><br><span class="line">            right := left+tlen <span class="comment">//æ³¨æ„è¿™é‡Œä¸åŠ  1</span></span><br><span class="line">            dp[left][right] = math.MaxInt32</span><br><span class="line">            <span class="keyword">for</span> k := left+<span class="number">1</span>; k &lt; right; k++ &#123;</span><br><span class="line">                dp[left][right] = Min(dp[left][right], dp[left][k]+dp[k][right]+cut[right]-cut[left])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][m<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹ tle çš„<strong>é”™è¯¯</strong>ä»£ç </p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minCost</span><span class="params">(n <span class="type">int</span>, cut []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    sort.Ints(cut)</span><br><span class="line">    <span class="comment">//0,1,3,4,5,6</span></span><br><span class="line">    cut = <span class="built_in">append</span>(cut, n)</span><br><span class="line">    cut = <span class="built_in">append</span>([]<span class="type">int</span>&#123;<span class="number">0</span>&#125;, cut...)</span><br><span class="line">    <span class="keyword">var</span> Min = <span class="function"><span class="keyword">func</span><span class="params">(a,b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a&lt;b &#123;<span class="keyword">return</span> a&#125;;<span class="keyword">return</span> b&#125;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="built_in">len</span>(cut)</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>) <span class="comment">//è¿™é‡Œå°± t äº†</span></span><br><span class="line">        <span class="comment">// for j := 0; j &lt;= n; j++ &#123;</span></span><br><span class="line">        <span class="comment">//     dp[i][j] = math.MaxInt32</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; m<span class="number">-1</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := i+<span class="number">1</span>; j &lt; m; j++ &#123;</span><br><span class="line">            dp[cut[i]][cut[j]] = <span class="number">0x3f3f3f3f</span></span><br><span class="line">        &#125;</span><br><span class="line">        dp[cut[i]][cut[i+<span class="number">1</span>]] = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> tlen := <span class="number">2</span>; tlen &lt;= m; tlen++ &#123;</span><br><span class="line">        <span class="keyword">for</span> left := <span class="number">0</span>; left+tlen<span class="number">-1</span> &lt; m; left++ &#123;</span><br><span class="line">            right := left+tlen<span class="number">-1</span></span><br><span class="line">            <span class="keyword">for</span> k := left+<span class="number">1</span>; k &lt; right; k++ &#123;</span><br><span class="line">                dp[cut[left]][cut[right]] = Min(dp[cut[left]][cut[right]], dp[cut[left]][cut[k]] + dp[cut[k]][cut[right]] + cut[right]-cut[left])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ•°ä½-DP"><a href="#æ•°ä½-DP" class="headerlink" title="æ•°ä½ DP"></a><em>æ•°ä½ DP</em></h2><h2 id="233-æ•°å­—-1-çš„ä¸ªæ•°"><a href="#233-æ•°å­—-1-çš„ä¸ªæ•°" class="headerlink" title="233. æ•°å­— 1 çš„ä¸ªæ•°"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/number-of-digit-one/">233. æ•°å­— 1 çš„ä¸ªæ•°</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè®¡ç®—æ‰€æœ‰å°äºç­‰äº n çš„éè´Ÿæ•´æ•°ä¸­æ•°å­— 1 å‡ºç°çš„ä¸ªæ•°ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">13</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span> </span><br><span class="line">è§£é‡Šï¼šæ•°å­— <span class="number">1</span> å‡ºç°åœ¨ä»¥ä¸‹æ•°å­—ä¸­ï¼š<span class="number">1</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span> ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>è¿™ä¸ªé¢˜å…¶å®å›°æ‰°äº†æˆ‘å¾ˆé•¿æ—¶é—´ï¼Œä¹‹å‰çœ‹äº†å¥½å‡ æ¬¡éƒ½æ”¾å¼ƒäº†ï¼Œæ„Ÿè§‰æœ‰äº›æ‰¾è§„å¾‹çš„æ•°å­¦è§£æ³•å¤ªéš¾æƒ³åˆ°äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥é‡‡ç”¨<strong>æ•°ä½ DP</strong>ï¼Œç›¸å¯¹äºå…¶ä»–çš„è§£æ³•ï¼Œè¿™ç§è§£æ³•ä¼šæ›´åŠ å¥—è·¯æ¨¡æ¿åŒ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//dp[pos][sumOne] ä»£è¡¨æšä¸¾åˆ° pos ä½ç½®ï¼Œå‰é¢ 1 å‡ºç°çš„ä¸ªæ•°ä¸º sumOne çš„æ—¶å€™ï¼Œpos åˆ°æœ€ä½ä½å‡ºç°çš„æ•°å­— 1 çš„ä¸ªæ•°</span></span><br><span class="line"><span class="type">int</span> [][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countDigitOne</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] num=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">64</span>]; <span class="comment">//64 ä½è‚¯å®šå¤Ÿäº†</span></span><br><span class="line">    <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">        num[len++]=n%<span class="number">10</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">int</span>[len+<span class="number">1</span>][len+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//ä»é«˜ä½å‘ä½ä½æšä¸¾</span></span><br><span class="line">    <span class="keyword">return</span> dfs(num,len-<span class="number">1</span>,<span class="number">0</span>,<span class="literal">true</span>,<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[] num,<span class="type">int</span> pos,<span class="type">int</span> sumOne,<span class="type">boolean</span> leadZero,<span class="type">boolean</span> limit)</span>&#123;</span><br><span class="line">    <span class="comment">//æšä¸¾å®Œæ‰€æœ‰çš„æ•°ä½ï¼Œç›´æ¥è¿”å› sumOneï¼ˆè¿™ä¸ªæ•°æœ‰å¤šå°‘ä¸ª 1)</span></span><br><span class="line">    <span class="keyword">if</span>(pos==-<span class="number">1</span>) <span class="keyword">return</span> sumOne;</span><br><span class="line">    <span class="comment">//çŠ¶æ€é‡å ï¼ŒçŠ¶æ€è¦å®Œå…¨ä¸€è‡´</span></span><br><span class="line">    <span class="keyword">if</span>(!leadZero &amp;&amp; !limit &amp;&amp; dp[pos][sumOne]!=<span class="number">0</span>) <span class="keyword">return</span> dp[pos][sumOne];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up=limit?num[pos]:<span class="number">9</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=up;i++) &#123;</span><br><span class="line">        res+=dfs(num,pos-<span class="number">1</span>,sumOne+(i==<span class="number">1</span>?<span class="number">1</span>:<span class="number">0</span>),leadZero&amp;&amp;i==<span class="number">0</span>,i==up&amp;&amp;limit);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!leadZero &amp;&amp; !limit) dp[pos][sumOne]=res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼˜åŒ–ä¸‹ä»£ç ï¼Œå‰å¯¼ 0 å¯¹çŠ¶æ€å­˜å–æ²¡æœ‰å½±å“ï¼Œè¿™é‡Œè€ƒè™‘çš„æ˜¯æ•°å­—çš„ç»„æˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç®€åŒ–ä¸‹ä»£ç ï¼Œå‰å¯¼ 0 å…¶å®æ²¡æœ‰å½±å“</span></span><br><span class="line"><span class="comment">//dp[pos][sumOne] ä»£è¡¨ä»é«˜ä½æšä¸¾åˆ° pos ä½ç½®ï¼Œå‰é¢ 1 çš„ä¸ªæ•° sumOne æ—¶</span></span><br><span class="line"><span class="type">int</span> [][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countDigitOne</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] num=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">64</span>]; <span class="comment">//64 ä½è‚¯å®šå¤Ÿäº†</span></span><br><span class="line">    <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">        num[len++]=n%<span class="number">10</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">int</span>[len+<span class="number">1</span>][len+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//ä»é«˜ä½å‘ä½ä½æšä¸¾</span></span><br><span class="line">    <span class="keyword">return</span> dfs(num,len-<span class="number">1</span>,<span class="number">0</span>,<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[] num,<span class="type">int</span> pos,<span class="type">int</span> sumOne,<span class="type">boolean</span> limit)</span>&#123;</span><br><span class="line">    <span class="comment">//æšä¸¾å®Œæ‰€æœ‰çš„æ•°ä½ï¼Œç›´æ¥è¿”å› sumOne</span></span><br><span class="line">    <span class="keyword">if</span>(pos==-<span class="number">1</span>) <span class="keyword">return</span> sumOne;</span><br><span class="line">    <span class="comment">//çŠ¶æ€é‡å ï¼ŒçŠ¶æ€è¦å®Œå…¨ä¸€è‡´</span></span><br><span class="line">    <span class="keyword">if</span>(!limit &amp;&amp; dp[pos][sumOne]!=<span class="number">0</span>) <span class="keyword">return</span> dp[pos][sumOne];</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> up=limit?num[pos]:<span class="number">9</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=up;i++) &#123;</span><br><span class="line">        res+=dfs(num,pos-<span class="number">1</span>,sumOne+(i==<span class="number">1</span>?<span class="number">1</span>:<span class="number">0</span>),i==up&amp;&amp;limit);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!limit) dp[pos][sumOne]=res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Update: 2020.6.24</strong></p>
<p>ç”¨ go é‡å†™äº†ä¸‹ï¼ŒåŒæ—¶å‘ç°ä¹‹å‰å¯¹è¿™ä¸ªçŠ¶æ€çš„ç†è§£æ˜¯é”™çš„ã€‚</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countDigitOne</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> nums []<span class="type">int</span></span><br><span class="line">    <span class="keyword">for</span> n &gt; <span class="number">0</span> &#123;</span><br><span class="line">        nums = <span class="built_in">append</span>(nums, n%<span class="number">10</span>)</span><br><span class="line">        n /= <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    dp := <span class="built_in">make</span>([][]<span class="type">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(dp); i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, <span class="built_in">len</span>(nums))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(<span class="built_in">len</span>(nums)<span class="number">-1</span>, <span class="number">0</span>, <span class="literal">true</span>, nums, dp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dfs</span><span class="params">(pos <span class="type">int</span>, cnt <span class="type">int</span>, limit <span class="type">bool</span>, nums []<span class="type">int</span>, dp [][]<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> pos == <span class="number">-1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cnt</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !limit &amp;&amp; dp[pos][cnt] != <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dp[pos][cnt]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> up = <span class="number">9</span></span><br><span class="line">    <span class="keyword">if</span> limit &#123;</span><br><span class="line">        up = nums[pos]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt;= up; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">1</span> &#123;</span><br><span class="line">            res += dfs(pos<span class="number">-1</span>, cnt+<span class="number">1</span>, i == up &amp;&amp; limit, nums, dp)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res += dfs(pos<span class="number">-1</span>, cnt, i == up &amp;&amp; limit, nums, dp)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !limit &#123;</span><br><span class="line">        dp[pos][cnt] = res</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>cnt</code>æŒ‡çš„å…¶å®æ˜¯<code>[æœ€é«˜ä½ ~ pos ä½]</code>çš„ 1 å‡ºç°çš„ä¸ªæ•°ï¼Œå½“ pos ä¸º-1 çš„æ—¶å€™å…¶å®å°±æ˜¯åˆ°è¾¾äº†æŸä¸€ä¸ªå…·ä½“çš„æ•°å­—ï¼Œæ¯”å¦‚<code>1231</code>è¿™ä¸ªæ—¶å€™å°±ä¼šè¿”å›<code>cnt=2</code>ï¼Œä¸æ­¤åŒæ—¶ï¼Œcnt ä¹Ÿæ˜¯çŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚<code>n=1200 , pos=1 , cnt=1</code>è¡¨ç¤ºæšä¸¾åˆ°äº†ç¬¬ 1 ä½å‡ºç°äº† 1 ä¸ª 1ï¼Œå°±è¯´æ˜é«˜ä¸¤ä½<code>1</code>å‡ºç°äº† 1 æ¬¡ï¼Œä¹Ÿå°±æ˜¯<code>10</code>æˆ–è€…<code>01</code>ï¼Œè¿™ä¸ªæ—¶å€™å½“æˆ‘ä»¬å…ˆæ±‚å‡ºäº†<code>01xx(0100 ~ 0199)</code>ä¸­çš„ 1 çš„ä¸ªæ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œå½“å‰æˆ‘ä»¬ä¸‹æ¬¡å†é‡åˆ°è¿™ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯<code>10xx</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å°†å‰é¢<code>01xx</code>çš„ dp å€¼è¿”å›ï¼Œå› ä¸º<code>01xx</code>å’Œ<code>10xx</code>åŒ…å«çš„ 1 çš„æ•°é‡è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼Œæ— éœ€é‡å¤è®¡ç®—</p>
<blockquote>
<p><strong>æ•°ä½ DP **çš„æ¦‚å¿µå’Œæ¨¡æ¿å…¶å®æˆ‘ä¹Ÿæ˜¯ä¸‹åˆåœ¨ç½‘ä¸ŠæŸ¥çš„ï¼Œç„¶åæ‰¾åˆ°äº†ä¸¤ä¸ªå†™çš„æ¯”è¾ƒå¥½çš„æ–‡ç«  <a target="_blank" rel="noopener" href="https://blog.csdn.net/wust_zzwh/article/details/52100392">æ•°ä½ dp æ€»ç»“ ä¹‹ ä»å…¥é—¨åˆ°æ¨¡æ¿</a>ï¼Œ<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/blog/virus2017/shuweidp">æ•°å­—ç»„æˆçš„å¥¥å¦™â€”â€”æ•°ä½ dp</a> ä»¥åé‡åˆ°ç±»ä¼¼çš„é¢˜åˆå¤šäº†ä¸€ç§è§£æ³•ï¼ˆæ•°å­¦çš„è§£æ³•è‡³ä»Šä»æ²¡å­¦ä¼šğŸ¤£ï¼‰åªæœ‰è¿™ä¸€é¢˜æƒ³ææ‡‚</strong>æ•°ä½ DP **è¿˜æ˜¯ä¸å¤ªå¤Ÿï¼Œè¿™é¢˜è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè¿˜æ˜¯è¦å¤šåšé¢˜ï¼Œå¤šæ€»ç»“æ‰èƒ½æ…¢æ…¢ä½“ä¼šï¼Œlc ä¸Šå¥½åƒæ•°ä½ dp å¥½åƒå¹¶ä¸å¤šï¼Œè¿‡ä¸¤å¤©éƒ½åšä¸€ä¸‹è¯•è¯•</p>
</blockquote>
<h2 id="1420-ç”Ÿæˆæ•°ç»„"><a href="#1420-ç”Ÿæˆæ•°ç»„" class="headerlink" title="1420. ç”Ÿæˆæ•°ç»„"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/build-array-where-you-can-find-the-maximum-exactly-k-comparisons/">1420. ç”Ÿæˆæ•°ç»„</a></h2><p>ç»™ä½ ä¸‰ä¸ªæ•´æ•° <code>n</code>ã€<code>m</code> å’Œ <code>k</code> ã€‚ä¸‹å›¾æè¿°çš„ç®—æ³•ç”¨äºæ‰¾å‡ºæ­£æ•´æ•°æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ ã€‚</p>
<p><img src="https://s1.ax1x.com/2020/04/23/JdU4w8.png" alt="JdU4w8.png"></p>
<p>è¯·ä½ ç”Ÿæˆä¸€ä¸ªå…·æœ‰ä¸‹è¿°å±æ€§çš„æ•°ç»„ arr ï¼š</p>
<ul>
<li>arr ä¸­æœ‰ n ä¸ªæ•´æ•°ã€‚</li>
<li>1 &lt;= arr[i] &lt;= m å…¶ä¸­ (0 &lt;= i &lt; n) ã€‚</li>
<li>å°†ä¸Šé¢æåˆ°çš„ç®—æ³•åº”ç”¨äº arr ï¼Œsearch_cost çš„å€¼ç­‰äº k ã€‚</li>
</ul>
<p>è¿”å›ä¸Šè¿°æ¡ä»¶ä¸‹ç”Ÿæˆæ•°ç»„ arr çš„ æ–¹æ³•æ•° ï¼Œç”±äºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥ å¿…é¡» å¯¹ 10^9 + 7 å–ä½™ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">2</span>, m = <span class="number">3</span>, k = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šå¯èƒ½çš„æ•°ç»„åˆ†åˆ«ä¸º [<span class="number">1</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">1</span>], [<span class="number">3</span>, <span class="number">2</span>] [<span class="number">3</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">5</span>, m = <span class="number">2</span>, k = <span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">0</span></span><br><span class="line">è§£é‡Šï¼šæ²¡æœ‰æ•°ç»„å¯ä»¥æ»¡è¶³ä¸Šè¿°æ¡ä»¶</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">9</span>, m = <span class="number">1</span>, k = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">1</span></span><br><span class="line">è§£é‡Šï¼šå¯èƒ½çš„æ•°ç»„åªæœ‰ [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">50</span>, m = <span class="number">100</span>, k = <span class="number">25</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">34549172</span></span><br><span class="line">è§£é‡Šï¼šä¸è¦å¿˜äº†å¯¹ <span class="number">1000000007</span> å–ä½™</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">37</span>, m = <span class="number">17</span>, k = <span class="number">7</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">418930126</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>1 &lt;= n &lt;= 50</li>
<li>1 &lt;= m &lt;= 100</li>
<li>0 &lt;= k &lt;= n </li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>185 å‘¨èµ› T4ï¼Œç±»ä¼¼äºæ•°ä½ DPï¼Œè®°å¿†åŒ–é€’å½’çš„æ–¹å¼å¾ˆå¥½ç†è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">Integer [][][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numOfArrays</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Integer</span>[n+<span class="number">1</span>][m+<span class="number">1</span>][k+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(n,<span class="number">0</span>,m,k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> preMax,<span class="type">int</span> m,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span> &amp;&amp; pos==<span class="number">0</span>) <span class="keyword">return</span> dp[pos][preMax][k]=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//k=0 ä½†æ˜¯ pos ä¸ä¸º 0 å¹¶æ²¡æœ‰ç»“æŸï¼Œè¿˜å¯ä»¥ç»§ç»­æ‰¾æ¯” preMax å°çš„å…ƒç´ </span></span><br><span class="line">    <span class="comment">//if(pos==0 || k==0) return 0; </span></span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span> || k&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[pos][preMax][k]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[pos][preMax][k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;preMax)&#123; <span class="comment">//å¤§äº preMax, ä»£ä»·-1, æ›´æ–°æœ€å¤§å€¼</span></span><br><span class="line">            res=(res+dfs(pos-<span class="number">1</span>,i,m,k-<span class="number">1</span>))%mod;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">//å°äº preMax, ä»£ä»·ä¸å˜ï¼Œæœ€å¤§å€¼ä¸å˜</span></span><br><span class="line">            res=(res+dfs(pos-<span class="number">1</span>,preMax,m,k))%mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[pos][preMax][k]=(<span class="type">int</span>)(res%mod);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹æ²¡æ³¨æ„ç»™ dp æ•°ç»„èµ‹åˆå§‹å€¼ï¼Œç›´æ¥æŒ‰ç…§ 0 åˆ¤æ–­çš„ï¼Œç»“æœ T äº†åŠå¤©ï¼Œæˆ‘éƒ½æ‡µäº†äº†ï¼Œåæ¥æ‰æ„è¯†åˆ°ï¼Œå¾ˆå¤šçŠ¶æ€çš„ç»“æœå°±æ˜¯ 0ï¼Œä½ ç›´æ¥æŒ‰ç…§ 0 åˆ¤æ–­ï¼Œå¾ˆå¤šç›¸åŒçš„ dp å€¼ä¸º 0 çš„çŠ¶æ€éƒ½æ²¡æœ‰è¢«å–å‡ºæ¥ç”¨</p>
<p><strong>ä¼˜åŒ–</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> mod=(<span class="type">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">Long [][][] dp=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numOfArrays</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Long</span>[n+<span class="number">1</span>][m+<span class="number">1</span>][k+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)dfs(n,<span class="number">0</span>,m,k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">long</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> pos,<span class="type">int</span> preMax,<span class="type">int</span> m,<span class="type">int</span> k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span> &amp;&amp; pos==<span class="number">0</span>) <span class="keyword">return</span> dp[pos][preMax][k]=<span class="number">1L</span>;</span><br><span class="line">    <span class="comment">//k=0 ä½†æ˜¯ pos ä¸ä¸º 0 å¹¶æ²¡æœ‰ç»“æŸï¼Œè¿˜å¯ä»¥ç»§ç»­æ‰¾æ¯” preMax å°çš„å…ƒç´ </span></span><br><span class="line">    <span class="comment">//if(pos==0 || k==0) return 0; </span></span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span> || k&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[pos][preMax][k]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[pos][preMax][k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//å°äºç­‰äº preMax çš„éƒ¨åˆ†å¯ä»¥é€šè¿‡ dfs(pos-1,preMax,m,k) ç®—å‡ºæ¥ï¼Œå‡å°‘é€’å½’æ¬¡æ•°</span></span><br><span class="line">    res=(res+(preMax*dfs(pos-<span class="number">1</span>,preMax,m,k))%mod)%mod;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=preMax+<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        res=(res+dfs(pos-<span class="number">1</span>,i,m,k-<span class="number">1</span>))%mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[pos][preMax][k]=res%mod;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>é€’æ¨çš„æ–¹å¼ï¼Œå…¶å®æ€æƒ³æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰å¹¶ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“ç›´æ¥æƒ³å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">numOfArrays</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> mod=<span class="number">1000_000_007</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span>[][][] dp=<span class="keyword">new</span> <span class="title class_">long</span>[n+<span class="number">1</span>][m+<span class="number">1</span>][k+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        dp[<span class="number">1</span>][i][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> cost=<span class="number">1</span>;cost&lt;=k;cost++)&#123;</span><br><span class="line">                <span class="comment">//æ–°å¢åŠ çš„å…ƒç´ å°äºç­‰äº j ä¹Ÿå°±æ˜¯åŸæ•°ç»„çš„æœ€å¤§å€¼ï¼Œå¯¹åº”ä¸Šé¢é€’å½’çš„ i&lt;=preMax</span></span><br><span class="line">                <span class="comment">//æ‰€ä»¥æ–°å¢åŠ çš„å…ƒç´ åœ¨æ–°æ•°ç»„çš„æœ«å°¾æœ‰ 1~j ç§é€‰æ‹©</span></span><br><span class="line">                dp[i][j][cost]=(j*dp[i-<span class="number">1</span>][j][cost])%mod;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> nm=<span class="number">1</span>;nm&lt;j;nm++)&#123;</span><br><span class="line">                    <span class="comment">//æ–°å¢åŠ çš„å…ƒç´ å¤§äºåŸæ•°ç»„çš„æœ€å¤§å€¼ j, å¯¹åº”ä¸Šé¢é€’å½’çš„ i&gt;preMax</span></span><br><span class="line">                    dp[i][j][cost]=(dp[i][j][cost]+dp[i-<span class="number">1</span>][nm][cost-<span class="number">1</span>])%mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        res+=dp[n][i][k];</span><br><span class="line">        res%=mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)(res%mod);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="902-æœ€å¤§ä¸º-N-çš„æ•°å­—ç»„åˆ"><a href="#902-æœ€å¤§ä¸º-N-çš„æ•°å­—ç»„åˆ" class="headerlink" title="902. æœ€å¤§ä¸º N çš„æ•°å­—ç»„åˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/numbers-at-most-n-given-digit-set/">902. æœ€å¤§ä¸º N çš„æ•°å­—ç»„åˆ</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>æˆ‘ä»¬æœ‰ä¸€ç»„<strong>æ’åºçš„</strong>æ•°å­— <code>D</code>ï¼Œå®ƒæ˜¯Â  <code>&#123;&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;&#125;</code>Â çš„éç©ºå­é›†ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œ<code>&#39;0&#39;</code> ä¸åŒ…æ‹¬åœ¨å†…ã€‚ï¼‰</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨è¿™äº›æ•°å­—è¿›è¡Œç»„åˆå†™æ•°å­—ï¼Œæƒ³ç”¨å¤šå°‘æ¬¡å°±ç”¨å¤šå°‘æ¬¡ã€‚ä¾‹å¦‚Â <code>D = &#123;&#39;1&#39;,&#39;3&#39;,&#39;5&#39;&#125;</code>ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºåƒÂ <code>&#39;13&#39;, &#39;551&#39;, &#39;1351315&#39;</code>Â è¿™æ ·çš„æ•°å­—ã€‚</p>
<p>è¿”å›å¯ä»¥ç”¨ <code>D</code> ä¸­çš„æ•°å­—å†™å‡ºçš„å°äºæˆ–ç­‰äº <code>N</code> çš„æ­£æ•´æ•°çš„æ•°ç›®ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šD = [&quot;1&quot;,&quot;3&quot;,&quot;5&quot;,&quot;7&quot;], N = 100</span><br><span class="line">è¾“å‡ºï¼š20</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">å¯å†™å‡ºçš„ 20 ä¸ªæ•°å­—æ˜¯ï¼š</span><br><span class="line">1, 3, 5, 7, 11, 13, 15, 17, 31, 33, 35, 37, 51, 53, 55, 57, 71, 73, 75, 77.</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šD = [&quot;1&quot;,&quot;4&quot;,&quot;9&quot;], N = 1000000000</span><br><span class="line">è¾“å‡ºï¼š29523</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æˆ‘ä»¬å¯ä»¥å†™ 3 ä¸ªä¸€ä½æ•°å­—ï¼Œ9 ä¸ªä¸¤ä½æ•°å­—ï¼Œ27 ä¸ªä¸‰ä½æ•°å­—ï¼Œ</span><br><span class="line">81 ä¸ªå››ä½æ•°å­—ï¼Œ243 ä¸ªäº”ä½æ•°å­—ï¼Œ729 ä¸ªå…­ä½æ•°å­—ï¼Œ</span><br><span class="line">2187 ä¸ªä¸ƒä½æ•°å­—ï¼Œ6561 ä¸ªå…«ä½æ•°å­—å’Œ 19683 ä¸ªä¹ä½æ•°å­—ã€‚</span><br><span class="line">æ€»å…±ï¼Œå¯ä»¥ä½¿ç”¨ D ä¸­çš„æ•°å­—å†™å‡º 29523 ä¸ªæ•´æ•°ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li> <code>D</code> æ˜¯æŒ‰æ’åºé¡ºåºçš„æ•°å­— <code>&#39;1&#39;-&#39;9&#39;</code> çš„å­é›†ã€‚</li>
<li> <code>1 &lt;= N &lt;= 10^9</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>lc ä¸Šå†™çš„ç¬¬ 3 é“æ•°ä½ DPï¼Œå¥—æ¨¡æ¿ï¼Œç†è§£çš„è¿˜ä¸å¤Ÿæ·±åˆ»ï¼Œç­‰ä»¥ååšå¤šäº†å†å•ç‹¬å¼€ä¸“é¢˜è®²è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">boolean</span>[] dict;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] nums;</span><br><span class="line"></span><br><span class="line">Integer[] dp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">atMostNGivenDigitSet</span><span class="params">(String[] D, <span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    nums = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">64</span>];</span><br><span class="line">    <span class="keyword">while</span> (N &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        nums[++pos] = N % <span class="number">10</span>;</span><br><span class="line">        N /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dict = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">10</span>];</span><br><span class="line">    dp = <span class="keyword">new</span> <span class="title class_">Integer</span>[pos + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; D.length; i++) &#123;</span><br><span class="line">        dict[Integer.valueOf(D[i])] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(pos, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä» pos~0 æœ‰å¤šå°‘ä¸ªåˆæ³•çš„æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> pos, <span class="type">boolean</span> leadZero, <span class="type">boolean</span> limit)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (pos == -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//æšä¸¾å®Œæ‰€æœ‰çš„æ•°ä½ï¼Œæ²¡æœ‰å‰å¯¼ 0 è¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªåˆæ³•çš„æ•°</span></span><br><span class="line">        <span class="keyword">return</span> leadZero ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!leadZero &amp;&amp; !limit &amp;&amp; (dp[pos] != <span class="literal">null</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> dp[pos];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">up</span> <span class="operator">=</span> limit ? nums[pos] : <span class="number">9</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= up; i++) &#123;</span><br><span class="line">        <span class="comment">//å‰é¢å…¨æ˜¯ 0 || å½“å‰ä½åœ¨ dict ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> ((leadZero &amp;&amp; (i == <span class="number">0</span>)) || dict[i]) &#123;</span><br><span class="line">            res += dfs(pos - <span class="number">1</span>, leadZero &amp;&amp; (i == <span class="number">0</span>), limit &amp;&amp; (i == up));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!leadZero &amp;&amp; !limit) &#123;</span><br><span class="line">        dp[pos] = res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="çŠ¶å‹-DP"><a href="#çŠ¶å‹-DP" class="headerlink" title="çŠ¶å‹ DP"></a><em>çŠ¶å‹ DP</em></h2><h2 id="464-æˆ‘èƒ½èµ¢å—"><a href="#464-æˆ‘èƒ½èµ¢å—" class="headerlink" title="464. æˆ‘èƒ½èµ¢å—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/can-i-win/">464. æˆ‘èƒ½èµ¢å—</a></h2><p>åœ¨ â€œ100 gameâ€ è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä¸¤åç©å®¶è½®æµé€‰æ‹©ä» 1 åˆ° 10 çš„ä»»æ„æ•´æ•°ï¼Œç´¯è®¡æ•´æ•°å’Œï¼Œå…ˆä½¿å¾—ç´¯è®¡æ•´æ•°å’Œè¾¾åˆ° 100 çš„ç©å®¶ï¼Œå³ä¸ºèƒœè€…ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°†æ¸¸æˆè§„åˆ™æ”¹ä¸º â€œç©å®¶ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°â€ å‘¢ï¼Ÿ</p>
<p>ä¾‹å¦‚ï¼Œä¸¤ä¸ªç©å®¶å¯ä»¥è½®æµä»å…¬å…±æ•´æ•°æ± ä¸­æŠ½å–ä» 1 åˆ° 15 çš„æ•´æ•°ï¼ˆä¸æ”¾å›ï¼‰ï¼Œç›´åˆ°ç´¯è®¡æ•´æ•°å’Œ &gt;= 100ã€‚</p>
<p>ç»™å®šä¸€ä¸ªæ•´æ•° <code>maxChoosableInteger</code> ï¼ˆæ•´æ•°æ± ä¸­å¯é€‰æ‹©çš„æœ€å¤§æ•°ï¼‰å’Œå¦ä¸€ä¸ªæ•´æ•° <code>desiredTotal</code>ï¼ˆç´¯è®¡å’Œï¼‰ï¼Œåˆ¤æ–­å…ˆå‡ºæ‰‹çš„ç©å®¶æ˜¯å¦èƒ½ç¨³èµ¢ï¼ˆå‡è®¾ä¸¤ä½ç©å®¶æ¸¸æˆæ—¶éƒ½è¡¨ç°æœ€ä½³ï¼‰ï¼Ÿ</p>
<p>ä½ å¯ä»¥å‡è®¾ <code>maxChoosableInteger</code> ä¸ä¼šå¤§äº 20ï¼Œ <code>desiredTotal</code> ä¸ä¼šå¤§äº 300ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š</span><br><span class="line">maxChoosableInteger = <span class="number">10</span></span><br><span class="line">desiredTotal = <span class="number">11</span></span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æ— è®ºç¬¬ä¸€ä¸ªç©å®¶é€‰æ‹©å“ªä¸ªæ•´æ•°ï¼Œä»–éƒ½ä¼šå¤±è´¥ã€‚</span><br><span class="line">ç¬¬ä¸€ä¸ªç©å®¶å¯ä»¥é€‰æ‹©ä» <span class="number">1</span> åˆ° <span class="number">10</span> çš„æ•´æ•°ã€‚</span><br><span class="line">å¦‚æœç¬¬ä¸€ä¸ªç©å®¶é€‰æ‹© <span class="number">1</span>ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªç©å®¶åªèƒ½é€‰æ‹©ä» <span class="number">2</span> åˆ° <span class="number">10</span> çš„æ•´æ•°ã€‚</span><br><span class="line">ç¬¬äºŒä¸ªç©å®¶å¯ä»¥é€šè¿‡é€‰æ‹©æ•´æ•° <span class="number">10</span>ï¼ˆé‚£ä¹ˆç´¯ç§¯å’Œä¸º <span class="number">11</span> &gt;= desiredTotalï¼‰ï¼Œä»è€Œå–å¾—èƒœåˆ©ã€‚</span><br><span class="line">åŒæ ·åœ°ï¼Œç¬¬ä¸€ä¸ªç©å®¶é€‰æ‹©ä»»æ„å…¶ä»–æ•´æ•°ï¼Œç¬¬äºŒä¸ªç©å®¶éƒ½ä¼šèµ¢ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä» <a target="_blank" rel="noopener" href="https://leetcode-cn.com/circle/article/NfHhXD/">åŠ›æ‰£ä¸Šçš„ DP é—®é¢˜åˆ†ç±»æ±‡æ€»</a> è¿‡æ¥çš„ï¼Œæ‰€ä»¥é¦–å…ˆçŸ¥é“è¿™ä¸ªæ˜¯çŠ¶å‹ DPï¼Œä½†æ˜¯èœé¸¡çš„æˆ‘å¹¶ä¸çŸ¥é“çŠ¶å‹ DP æ˜¯å•¥ğŸ¤£ï¼Œæ‰€ä»¥å…ˆå†™äº†ä¸ªæš´åŠ›çš„æœç´¢ï¼Œç„¶åä¸å‡ºæ„æ–™çš„ t äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//TLE case 20 210 41/45</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canIWin</span><span class="params">(<span class="type">int</span> maxChoosableInteger, <span class="type">int</span> desiredTotal)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(desiredTotal&lt;=maxChoosableInteger) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>((<span class="number">1</span>+maxChoosableInteger)*(maxChoosableInteger)/<span class="number">2</span>&lt;desiredTotal) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">boolean</span>[] visit=<span class="keyword">new</span> <span class="title class_">boolean</span>[maxChoosableInteger+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(maxChoosableInteger,desiredTotal,visit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> max,<span class="type">int</span> total,<span class="type">boolean</span>[] visit)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(total&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//å‰äººå·²ç»æ‹¿å®Œäº†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=max;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!visit[i])&#123;</span><br><span class="line">            visit[i]=<span class="literal">true</span>;</span><br><span class="line">            <span class="type">boolean</span> temp=dfs(max,total-i,visit);</span><br><span class="line">            visit[i]=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(!temp)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™ä¸ªå†™æ³•çš„è¿”å›æ—¶æœºï¼Œæœ‰äº›è¯­å¥æ˜¯ä¸èƒ½åˆå¹¶çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·å°±æ˜¯é”™çš„ï¼ˆåˆ«é—®æˆ‘ä¸ºå•¥çŸ¥é“çš„ğŸ¤£ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> max,<span class="type">int</span> total,<span class="type">boolean</span>[] visit)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(total&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=max;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!visit[i])&#123;</span><br><span class="line">            visit[i]=<span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(!dfs(max,total-i,visit))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            visit[i]=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åƒä¸Šé¢è¿™æ ·å†™ä¹ä¸€çœ‹å¥½åƒæ²¡é—®é¢˜ï¼Œå¯¹æ¯”ä¸€ä¸‹ä¸¤ç§å†™æ³•ï¼Œå…¶å®å°±æ˜¯å›æº¯<code>visit</code>çš„æ—¶æœºä¸åŒï¼Œç¬¬ä¸€ä¸ªæ˜¯å¦ä¸€ä¸ªäºº<code>dfs</code> ä¸ç®¡æˆåŠŸä¸å¦éƒ½ä¼šå›æº¯çŠ¶æ€ï¼Œè€Œç¬¬äºŒç§æ˜¯å¦ä¸€ä¸ªäºº<code>dfs</code> æˆåŠŸåæ‰ä¼šå›æº¯çŠ¶æ€ï¼Œå¤±è´¥åå°±ä¸ä¼šå›æº¯çŠ¶æ€äº†ï¼Œä½†æ˜¯åœ¨è¿™é¢˜ä¸­ä¸ç®¡å¦ä¸€ä¸ªäººå¤±è´¥ä¸å¦éƒ½éœ€è¦å›æº¯çŠ¶æ€ï¼Œé¦–å…ˆå¦ä¸€ä¸ªäººæˆåŠŸåæˆ‘è‚¯å®šæ˜¯è¦å›æº¯ï¼Œå¦ä¸€ä¸ªäººæˆåŠŸæ„å‘³ç€æˆ‘å¤±è´¥äº†ï¼Œæˆ‘è¿˜è¦ç»§ç»­å°è¯•æ‰¾å¿…èƒœçš„é€‰å–æ–¹æ³•ï¼Œä½†æ˜¯å¦ä¸€ä¸ªäººå¤±è´¥åè¿˜æ˜¯éœ€è¦å›æº¯çŠ¶æ€ï¼Œä»”ç»†æƒ³æƒ³ï¼Œä¸‹ä¸€å±‚ dfsï¼ˆå¦ä¸€ä¸ªäººï¼‰å¤±è´¥æ˜¯å› ä¸ºä¸‹ä¸‹ä¸€å±‚ dfsï¼ˆæˆ‘ï¼‰æˆåŠŸäº†ï¼Œæˆ‘åœ¨é‚£ä¸€æ¬¡æˆåŠŸåå¹¶æ²¡æœ‰å›æº¯<code>visit</code>ï¼Œè¿™æ ·ä¸‹ä¸€å±‚ï¼ˆå¦ä¸€ä¸ªäººï¼‰å°±ç”¨ä¸äº†è¢«ä¸‹ä¸‹å±‚å ç”¨çš„æ•°å­—ï¼Œå°±æ— æ³•æšä¸¾æ‰€æœ‰æƒ…å†µï¼Œè‡ªç„¶å°±é”™äº†</p>
<blockquote>
<p>å„ä½å¤§ä½¬è§è°…ï¼Œè¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œä¸Šé¢çš„éƒ½æ˜¯æˆ‘èƒ¡è¨€ä¹±è¯­ï¼Œå¤§ä½¬ä»¬è·³è¿‡å°±è¡Œäº†</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>æ ¹æ®æ˜¨å¤©å†™çš„ä¸€ä¸ªæ•°ä½ DPï¼ŒåŠ ä¸Šè‡ªå·±çš„ yyï¼Œå†™äº†ä¸ªçŠ¶å‹ DP å‡ºæ¥äº†ğŸ¤£ï¼Œä¸Šé¢çš„è§£æ³•æ˜æ˜¾ä¼šæœ‰å¾ˆå¤šçš„é‡å¤è§£ï¼Œè€Œç¡®å®šæ˜¯å¦é‡å¤çš„å…³é”®å…¶å®å°±æ˜¯æ•°å­—çš„é€‰å–æƒ…å†µï¼Œä¸Šé¢æˆ‘ä»¬æ˜¯ç”¨çš„ä¸€ä¸ª<code>visit</code>æ•°ç»„æ¥è®°å½•è¿™é€‰å–çš„æƒ…å†µï¼Œè¦ç›´æ¥é€šè¿‡è¿™ä¸ª<code>visit</code>æ¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦ç›¸åŒæ˜¯å¾ˆè€—æ—¶è€—åŠ›çš„ï¼Œæ‰€ä»¥å°±å¼•å…¥äº†çŠ¶æ€å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒè¿›åˆ¶çš„ç¬¬<code>i</code>ä½çš„ 0 æˆ–è€… 1 æ¥è¡¨ç¤º<code>i</code>è¿™ä¸ªæ•°å­—çš„é€‰å–ä¸å¦ï¼Œè¿™æ ·æ‰€æœ‰æ•°å­—çš„é€‰å–çŠ¶æ€å°±å¯ä»¥ç”¨ä¸€ä¸ªæ•°æ¥å¾ˆæ–¹ä¾¿çš„è¡¨ç¤ºï¼Œé¢˜ç›®è¯´äº†ä¸è¶…è¿‡ 20 ä½ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯ä»¥ç”¨ä¸€ä¸ª<code>int</code>æ¥è¡¨ç¤ºçŠ¶æ€<code>state</code>ï¼Œé€šè¿‡<code>state</code>æ¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦ä¸€è‡´ï¼Œè¿›è€Œè¿›è¡Œè®°å¿†åŒ–çš„å­˜å–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Boolean[] dp=<span class="literal">null</span>; <span class="comment">//ç”¨ Boolean æ¯”è¾ƒæ–¹ä¾¿åˆ¤æ–­æ˜¯å¦è®°å¿†åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canIWin</span><span class="params">(<span class="type">int</span> maxChoosableInteger, <span class="type">int</span> desiredTotal)</span> &#123;</span><br><span class="line">    <span class="comment">//å°äºæœ€å¤§å€¼å…ˆæ‰‹å¯ä»¥ç›´æ¥æ‹¿</span></span><br><span class="line">    <span class="keyword">if</span>(desiredTotal&lt;=maxChoosableInteger) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//å‰ N é¡¹å’Œè¿˜ä¸å¤Ÿ desiredTotal</span></span><br><span class="line">    <span class="keyword">if</span>((<span class="number">1</span>+maxChoosableInteger)*(maxChoosableInteger)/<span class="number">2</span>&lt;desiredTotal) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//20 ä½äºŒè¿›åˆ¶ 1&lt;&lt;21</span></span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">Boolean</span>[<span class="number">1</span>&lt;&lt;<span class="number">21</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(maxChoosableInteger,desiredTotal,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> max,<span class="type">int</span> total,<span class="type">int</span> state)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(total&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//å‰äººå·²ç»æ‹¿å®Œäº†</span></span><br><span class="line">    <span class="keyword">if</span>(dp[state]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[state];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=max;i&gt;=<span class="number">1</span>;i--) &#123;</span><br><span class="line">        <span class="comment">//å‚æ•°ä¼ é€’çš„ï¼Œå°±ä¸ç”¨å›æº¯äº†ï¼Œä»£ç å˜çš„ç®€æ´å¤šäº†</span></span><br><span class="line">        <span class="keyword">if</span>((state&gt;&gt;i&amp;<span class="number">1</span>)==<span class="number">0</span> &amp;&amp; !dfs(max,total-i,state|(<span class="number">1</span>&lt;&lt;i)))&#123;</span><br><span class="line">            <span class="keyword">return</span> dp[state]=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[state]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®ä¸€å¼€å§‹å¼€äº†ä¸ªäºŒç»´çš„ <code>new Boolean[desiredTotal] [1&lt;&lt;21]</code>ï¼Œç„¶åå°±ç›´æ¥ MLE äº†ğŸ˜… å¤ªèœäº† hahahaï¼Œç„¶åçœ‹äº†ä¸‹ï¼Œå‘ç°<code>state</code>ä¸€æ ·çš„è¯ï¼Œ<code>total</code>è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼ˆåè¿‡æ¥å°±ä¸ä¸€å®šäº†ï¼‰ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ç»´çš„å°±å¯ä»¥äº†</p>
<p>å…¶å®ä¹Ÿå¯ä»¥ç”¨<code>int[]</code>åšçŠ¶å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//int åšçŠ¶å‹ï¼Œä¼¼ä¹æ€§èƒ½æ²¡æœ‰æå‡</span></span><br><span class="line"><span class="type">int</span>[] dp=<span class="literal">null</span>; <span class="comment">//0: æœªåˆå§‹åŒ– 1:true 2:false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canIWin</span><span class="params">(<span class="type">int</span> maxChoosableInteger, <span class="type">int</span> desiredTotal)</span> &#123;</span><br><span class="line">    <span class="comment">//å°äºæœ€å¤§å€¼å…ˆæ‰‹å¯ä»¥ç›´æ¥æ‹¿</span></span><br><span class="line">    <span class="keyword">if</span>(desiredTotal&lt;=maxChoosableInteger) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//å‰ N é¡¹å’Œè¿˜ä¸å¤Ÿ desiredTotal</span></span><br><span class="line">    <span class="keyword">if</span>((<span class="number">1</span>+maxChoosableInteger)*(maxChoosableInteger)/<span class="number">2</span>&lt;desiredTotal) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//20 ä½äºŒè¿›åˆ¶ 1&lt;&lt;21</span></span><br><span class="line">    dp=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1</span>&lt;&lt;<span class="number">21</span>];</span><br><span class="line">    <span class="keyword">return</span> dfs(maxChoosableInteger,desiredTotal,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> max,<span class="type">int</span> total,<span class="type">int</span> state)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dp[state]!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> dp[state]==<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=max;i&gt;=<span class="number">1</span>;i--) &#123;</span><br><span class="line">        <span class="comment">//å‚æ•°ä¼ é€’çš„ï¼Œå°±ä¸ç”¨å›æº¯äº†ï¼Œä»£ç å˜çš„ç®€æ´å¤šäº†</span></span><br><span class="line">        <span class="keyword">if</span>((state&gt;&gt;i&amp;<span class="number">1</span>)==<span class="number">0</span> &amp;&amp; (i&gt;=total || !dfs(max,total-i,state|(<span class="number">1</span>&lt;&lt;i))))&#123;</span><br><span class="line">            dp[state]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[state]=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åšå¼ˆ-DP"><a href="#åšå¼ˆ-DP" class="headerlink" title="åšå¼ˆ DP"></a><em>åšå¼ˆ DP</em></h2><h2 id="292-Nim-æ¸¸æˆ"><a href="#292-Nim-æ¸¸æˆ" class="headerlink" title="292. Nim æ¸¸æˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/nim-game/">292. Nim æ¸¸æˆ</a></h2><p>ä½ å’Œä½ çš„æœ‹å‹ï¼Œä¸¤ä¸ªäººä¸€èµ·ç© Nim æ¸¸æˆï¼šæ¡Œå­ä¸Šæœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯æ¬¡ä½ ä»¬è½®æµæ‹¿æ‰ 1 - 3 å—çŸ³å¤´ã€‚ æ‹¿æ‰æœ€åä¸€å—çŸ³å¤´çš„äººå°±æ˜¯è·èƒœè€…ã€‚ä½ ä½œä¸ºå…ˆæ‰‹ã€‚</p>
<p>ä½ ä»¬æ˜¯èªæ˜äººï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯æœ€ä¼˜è§£ã€‚ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥åˆ¤æ–­ä½ æ˜¯å¦å¯ä»¥åœ¨ç»™å®šçŸ³å¤´æ•°é‡çš„æƒ…å†µä¸‹èµ¢å¾—æ¸¸æˆã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">4</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span> </span><br><span class="line">è§£é‡Šï¼šå¦‚æœå †ä¸­æœ‰ <span class="number">4</span> å—çŸ³å¤´ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ä¼šèµ¢å¾—æ¯”èµ›ï¼›</span><br><span class="line">     å› ä¸ºæ— è®ºä½ æ‹¿èµ° <span class="number">1</span> å—ã€<span class="number">2</span> å— è¿˜æ˜¯ <span class="number">3</span> å—çŸ³å¤´ï¼Œæœ€åä¸€å—çŸ³å¤´æ€»æ˜¯ä¼šè¢«ä½ çš„æœ‹å‹æ‹¿èµ°ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•ä¸€</strong></p>
<p>åšå¼ˆå‹åŠ¨æ€è§„åˆ’å…¥é—¨é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canWinNim</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">boolean</span>[] dp=<span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line">    dp[<span class="number">2</span>]=<span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//t t t f t t t f .....</span></span><br><span class="line">    <span class="comment">//æ¯ä¸ªçŠ¶æ€å–å†³äºå‰ 3 ä¸ªçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">3</span>;i&lt;n;i++) &#123;</span><br><span class="line">        <span class="comment">//åˆ†åˆ«æ‹¿ 1,2,3 ä¸ªçœ‹å¯¹é¢èƒ½ä¸èƒ½èµ¢</span></span><br><span class="line">        dp[i]=!dp[i-<span class="number">1</span>] || !dp[i-<span class="number">2</span>] || !dp[i-<span class="number">3</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªè§£æ³•åœ¨æ•°æ®è¿‡å¤§çš„æ—¶å€™è¿˜æ˜¯ä¼š TLE</p>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>è§„å¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canWinNim</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> n%<span class="number">4</span>!=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1025-é™¤æ•°åšå¼ˆ"><a href="#1025-é™¤æ•°åšå¼ˆ" class="headerlink" title="1025. é™¤æ•°åšå¼ˆ"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/divisor-game/">1025. é™¤æ•°åšå¼ˆ</a></h2><p>Difficulty: <strong>ç®€å•</strong></p>
<p>çˆ±ä¸½ä¸å’Œé²å‹ƒä¸€èµ·ç©æ¸¸æˆï¼Œä»–ä»¬è½®æµè¡ŒåŠ¨ã€‚çˆ±ä¸½ä¸å…ˆæ‰‹å¼€å±€ã€‚</p>
<p>æœ€åˆï¼Œé»‘æ¿ä¸Šæœ‰ä¸€ä¸ªæ•°å­—Â <code>N</code>Â ã€‚åœ¨æ¯ä¸ªç©å®¶çš„å›åˆï¼Œç©å®¶éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>  é€‰å‡ºä»»ä¸€Â <code>x</code>ï¼Œæ»¡è¶³Â <code>0 &lt; x &lt; N</code> ä¸”Â <code>N % x == 0</code>Â ã€‚</li>
<li>  ç”¨ <code>N - x</code>Â æ›¿æ¢é»‘æ¿ä¸Šçš„æ•°å­— <code>N</code> ã€‚</li>
</ul>
<p>å¦‚æœç©å®¶æ— æ³•æ‰§è¡Œè¿™äº›æ“ä½œï¼Œå°±ä¼šè¾“æ‰æ¸¸æˆã€‚</p>
<p>åªæœ‰åœ¨çˆ±ä¸½ä¸åœ¨æ¸¸æˆä¸­å–å¾—èƒœåˆ©æ—¶æ‰è¿”å›Â <code>True</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚å‡è®¾ä¸¤ä¸ªç©å®¶éƒ½ä»¥æœ€ä½³çŠ¶æ€å‚ä¸æ¸¸æˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šçˆ±ä¸½ä¸é€‰æ‹© <span class="number">1</span>ï¼Œé²å‹ƒæ— æ³•è¿›è¡Œæ“ä½œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š<span class="number">3</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šçˆ±ä¸½ä¸é€‰æ‹© <span class="number">1</span>ï¼Œé²å‹ƒä¹Ÿé€‰æ‹© <span class="number">1</span>ï¼Œç„¶åçˆ±ä¸½ä¸æ— æ³•è¿›è¡Œæ“ä½œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ol>
<li> <code>1 &lt;= N &lt;= 1000</code></li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>åšå¼ˆ DPï¼Œå’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œå°è¯•æ‰€æœ‰æƒ…å†µ</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">divisorGame</span><span class="params">(N <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="comment">//N=i æ—¶ï¼Œå…ˆæ‰‹çš„äººèƒ½å¦èµ¢</span></span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">bool</span>, N+<span class="number">1</span>)</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">2</span>; i &lt;= N; i++ &#123;</span><br><span class="line">        <span class="comment">//å°è¯•æ‰€æœ‰å¯è¡Œçš„é€‰æ‹©</span></span><br><span class="line">        <span class="comment">//ä» i ä¸­å…ˆæ‰‹æ‹¿ jï¼Œçœ‹å¯¹æ–¹åœ¨ i-j ä¸­å…ˆæ‰‹èƒ½ä¸èƒ½èµ¢</span></span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; i; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> i%j == <span class="number">0</span> &amp;&amp; !dp[i-j] &#123;</span><br><span class="line">                dp[i] = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[N]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è§£æ³•äºŒ</strong></p>
<p>å¾ˆæ˜æ˜¾ï¼Œè¿™é¢˜ä¹Ÿæœ‰ä¸€ä¸ªæ•°å­¦çš„è§£æ³•ğŸ˜‚ï¼Œåˆ©ç”¨å¥‡æ•°å’Œå¶æ•°çš„æ€§è´¨ï¼ŒN ä¸ºå¶æ•°çš„æ—¶å€™ï¼Œå…ˆæ‰‹çš„äººæ˜¯å¿…èµ¢çš„</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è§„å¾‹ï¼Œå¶æ•°å¿…èµ¢ï¼Œå¥‡æ•°å¿…è¾“</span></span><br><span class="line"><span class="comment">//æœ€ååœ¨ N=2 çš„æ—¶å€™ç»“æŸæ¯”èµ›ï¼Œæ‰€ä»¥è°å…ˆåˆ° 2 è°å°±èµ¢</span></span><br><span class="line"><span class="comment">//å¥‡æ•°çš„å› å­åªæœ‰å¥‡æ•°ï¼Œå¥‡æ•°-å¥‡æ•° = å¶æ•°ï¼Œå½“æˆ‘æ‹¿åˆ°å¶æ•°æ—¶å€™å¯ä»¥ç›´æ¥æ‹¿èµ° 1ï¼Œå˜ä¸ºå¥‡æ•°ï¼Œå¦‚æ­¤å¾€æ¥</span></span><br><span class="line"><span class="comment">//æœ€ç»ˆæˆ‘å¿…å®šèƒ½å…ˆåˆ° 2</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">divisorGame</span><span class="params">(N <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> N%<span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1140-çŸ³å­æ¸¸æˆ-II"><a href="#1140-çŸ³å­æ¸¸æˆ-II" class="headerlink" title="1140. çŸ³å­æ¸¸æˆ II"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/stone-game-ii/">1140. çŸ³å­æ¸¸æˆ II</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>äºšå†å…‹æ–¯å’Œæç»§ç»­ä»–ä»¬çš„çŸ³å­æ¸¸æˆã€‚è®¸å¤šå †çŸ³å­Â <strong>æ’æˆä¸€è¡Œ</strong>ï¼Œæ¯å †éƒ½æœ‰æ­£æ•´æ•°é¢—çŸ³å­Â <code>piles[i]</code>ã€‚æ¸¸æˆä»¥è°æ‰‹ä¸­çš„çŸ³å­æœ€å¤šæ¥å†³å‡ºèƒœè´Ÿã€‚</p>
<p>äºšå†å…‹æ–¯å’Œæè½®æµè¿›è¡Œï¼Œäºšå†å…‹æ–¯å…ˆå¼€å§‹ã€‚æœ€åˆï¼Œ<code>M = 1</code>ã€‚</p>
<p>åœ¨æ¯ä¸ªç©å®¶çš„å›åˆä¸­ï¼Œè¯¥ç©å®¶å¯ä»¥æ‹¿èµ°å‰©ä¸‹çš„Â <strong>å‰</strong>Â <code>X</code>Â å †çš„æ‰€æœ‰çŸ³å­ï¼Œå…¶ä¸­Â <code>1 &lt;= X &lt;= 2M</code>ã€‚ç„¶åï¼Œä»¤Â <code>M = max(M, X)</code>ã€‚</p>
<p>æ¸¸æˆä¸€ç›´æŒç»­åˆ°æ‰€æœ‰çŸ³å­éƒ½è¢«æ‹¿èµ°ã€‚</p>
<p>å‡è®¾äºšå†å…‹æ–¯å’Œæéƒ½å‘æŒ¥å‡ºæœ€ä½³æ°´å¹³ï¼Œè¿”å›äºšå†å…‹æ–¯å¯ä»¥å¾—åˆ°çš„æœ€å¤§æ•°é‡çš„çŸ³å¤´ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špiles = [2,7,9,4,4]</span><br><span class="line">è¾“å‡ºï¼š10</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">å¦‚æœäºšå†å…‹æ–¯åœ¨å¼€å§‹æ—¶æ‹¿èµ°ä¸€å †çŸ³å­ï¼Œææ‹¿èµ°ä¸¤å †ï¼Œæ¥ç€äºšå†å…‹æ–¯ä¹Ÿæ‹¿èµ°ä¸¤å †ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäºšå†å…‹æ–¯å¯ä»¥æ‹¿åˆ° 2 + 4 + 4 = 10 é¢—çŸ³å­ã€‚ </span><br><span class="line">å¦‚æœäºšå†å…‹æ–¯åœ¨å¼€å§‹æ—¶æ‹¿èµ°ä¸¤å †çŸ³å­ï¼Œé‚£ä¹ˆæå°±å¯ä»¥æ‹¿èµ°å‰©ä¸‹å…¨éƒ¨ä¸‰å †çŸ³å­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäºšå†å…‹æ–¯å¯ä»¥æ‹¿åˆ° 2 + 7 = 9 é¢—çŸ³å­ã€‚</span><br><span class="line">æ‰€ä»¥æˆ‘ä»¬è¿”å›æ›´å¤§çš„ 10ã€‚ </span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= piles.length &lt;= 100</code></li>
<li>  <code>1 &lt;= piles[i]Â &lt;= 10 ^ 4</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>çå†™çš„è®°å¿†åŒ–ï¼Œæ‡’å¾—æ”¹ dp äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">Integer[][] cache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">stoneGameII</span><span class="params">(<span class="type">int</span>[] piles)</span> &#123;</span><br><span class="line">    n = piles.length;</span><br><span class="line">    <span class="comment">//è¿™é‡Œç”¨åç¼€å’Œä¼šç®€å•ä¸€ç‚¹ï¼Œæ‡’å¾—æ”¹äº†</span></span><br><span class="line">    <span class="type">int</span>[] preSum = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[n+<span class="number">1</span>][n+<span class="number">1</span>];</span><br><span class="line">    preSum[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;=n; i++)&#123;</span><br><span class="line">        preSum[i] = preSum[i-<span class="number">1</span>] + piles[i-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(preSum, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[] preSum, <span class="type">int</span> start, <span class="type">int</span> M)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cache[start][M]!=<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> cache[start][M];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>; start + len - <span class="number">1</span> &lt; n &amp;&amp; len &lt;= <span class="number">2</span>*M; len++)&#123;</span><br><span class="line">        <span class="comment">//start=0 len=2 (0,1)</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> preSum[n] - preSum[start] - dfs(preSum, start + len, Math.max(M, len));</span><br><span class="line">        res = Math.max(res, temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[start][M] = res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1406-çŸ³å­æ¸¸æˆ-III"><a href="#1406-çŸ³å­æ¸¸æˆ-III" class="headerlink" title="1406. çŸ³å­æ¸¸æˆ III"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/stone-game-iii/">1406. çŸ³å­æ¸¸æˆ III</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>Alice å’Œ Bob ç”¨å‡ å †çŸ³å­åœ¨åšæ¸¸æˆã€‚å‡ å †çŸ³å­æ’æˆä¸€è¡Œï¼Œæ¯å †çŸ³å­éƒ½å¯¹åº”ä¸€ä¸ªå¾—åˆ†ï¼Œç”±æ•°ç»„ <code>stoneValue</code> ç»™å‡ºã€‚</p>
<p>Alice å’Œ Bob è½®æµå–çŸ³å­ï¼Œ<strong>Alice</strong> æ€»æ˜¯å…ˆå¼€å§‹ã€‚åœ¨æ¯ä¸ªç©å®¶çš„å›åˆä¸­ï¼Œè¯¥ç©å®¶å¯ä»¥æ‹¿èµ°å‰©ä¸‹çŸ³å­ä¸­çš„çš„å‰ <strong>1ã€2 æˆ– 3 å †çŸ³å­</strong> ã€‚æ¯”èµ›ä¸€ç›´æŒç»­åˆ°æ‰€æœ‰çŸ³å¤´éƒ½è¢«æ‹¿èµ°ã€‚</p>
<p>æ¯ä¸ªç©å®¶çš„æœ€ç»ˆå¾—åˆ†ä¸ºä»–æ‰€æ‹¿åˆ°çš„æ¯å †çŸ³å­çš„å¯¹åº”å¾—åˆ†ä¹‹å’Œã€‚æ¯ä¸ªç©å®¶çš„åˆå§‹åˆ†æ•°éƒ½æ˜¯ <strong>0</strong> ã€‚æ¯”èµ›çš„ç›®æ ‡æ˜¯å†³å‡ºæœ€é«˜åˆ†ï¼Œå¾—åˆ†æœ€é«˜çš„é€‰æ‰‹å°†ä¼šèµ¢å¾—æ¯”èµ›ï¼Œæ¯”èµ›ä¹Ÿå¯èƒ½ä¼šå‡ºç°å¹³å±€ã€‚</p>
<p>å‡è®¾ Alice å’Œ Bob éƒ½é‡‡å– <strong>æœ€ä¼˜ç­–ç•¥</strong> ã€‚å¦‚æœ Alice èµ¢äº†å°±è¿”å› <em>â€œAliceâ€</em> <em>ï¼Œ_Bob èµ¢äº†å°±è¿”å› _â€Bobâ€ï¼Œ_å¹³å±€ï¼ˆåˆ†æ•°ç›¸åŒï¼‰è¿”å› _â€Tieâ€</em> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼švalues = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;Bob&quot;</span></span><br><span class="line">è§£é‡Šï¼šAlice æ€»æ˜¯ä¼šè¾“ï¼Œå¥¹çš„æœ€ä½³é€‰æ‹©æ˜¯æ‹¿èµ°å‰ä¸‰å †ï¼Œå¾—åˆ†å˜æˆ <span class="number">6</span> ã€‚ä½†æ˜¯ Bob çš„å¾—åˆ†ä¸º <span class="number">7</span>ï¼ŒBob è·èƒœã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼švalues = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">-9</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;Alice&quot;</span></span><br><span class="line">è§£é‡Šï¼šAlice è¦æƒ³è·èƒœå°±å¿…é¡»åœ¨ç¬¬ä¸€ä¸ªå›åˆæ‹¿èµ°å‰ä¸‰å †çŸ³å­ï¼Œç»™ Bob ç•™ä¸‹è´Ÿåˆ†ã€‚</span><br><span class="line">å¦‚æœ Alice åªæ‹¿èµ°ç¬¬ä¸€å †ï¼Œé‚£ä¹ˆå¥¹çš„å¾—åˆ†ä¸º <span class="number">1</span>ï¼Œæ¥ä¸‹æ¥ Bob æ‹¿èµ°ç¬¬äºŒã€ä¸‰å †ï¼Œå¾—åˆ†ä¸º <span class="number">5</span> ã€‚ä¹‹å Alice åªèƒ½æ‹¿åˆ°åˆ†æ•° <span class="number">-9</span> çš„çŸ³å­å †ï¼Œè¾“æ‰æ¯”èµ›ã€‚</span><br><span class="line">å¦‚æœ Alice æ‹¿èµ°å‰ä¸¤å †ï¼Œé‚£ä¹ˆå¥¹çš„å¾—åˆ†ä¸º <span class="number">3</span>ï¼Œæ¥ä¸‹æ¥ Bob æ‹¿èµ°ç¬¬ä¸‰å †ï¼Œå¾—åˆ†ä¸º <span class="number">3</span> ã€‚ä¹‹å Alice åªèƒ½æ‹¿åˆ°åˆ†æ•° <span class="number">-9</span> çš„çŸ³å­å †ï¼ŒåŒæ ·ä¼šè¾“æ‰æ¯”èµ›ã€‚</span><br><span class="line">æ³¨æ„ï¼Œä»–ä»¬éƒ½åº”è¯¥é‡‡å– æœ€ä¼˜ç­–ç•¥ ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œ Alice å°†é€‰æ‹©èƒ½å¤Ÿä½¿å¥¹è·èƒœçš„æ–¹æ¡ˆã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼švalues = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;Tie&quot;</span></span><br><span class="line">è§£é‡Šï¼šAlice æ— æ³•èµ¢å¾—æ¯”èµ›ã€‚å¦‚æœå¥¹å†³å®šé€‰æ‹©å‰ä¸‰å †ï¼Œå¥¹å¯ä»¥ä»¥å¹³å±€ç»“æŸæ¯”èµ›ï¼Œå¦åˆ™å¥¹å°±ä¼šè¾“ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼švalues = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;Alice&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼švalues = [<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="string">&quot;Tie&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= values.length &lt;= 50000</code></li>
<li>  <code>-1000Â &lt;= values[i] &lt;= 1000</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>æŸæ¬¡åŒå‘¨èµ›çš„ T4ï¼Œæ²¡å‚åŠ ï¼Œæ„Ÿè§‰è¿™é¢˜è¿˜æ˜¯æŒºç®€å•çš„ï¼Œæ¯” 2 è¿˜è¦ç®€å•ï¼Œä¸‹é¢çš„åšæ³•ç›´æ¥å¥—ç”¨ 2 çš„åšæ³•ï¼Œæ”¹æˆäº†åç¼€å’Œæ•°ç»„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åç¼€æ•°ç»„</span></span><br><span class="line"><span class="type">int</span>[] sufSum = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">Integer[] dp = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">stoneGameIII</span><span class="params">(<span class="type">int</span>[] stoneValue)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> stoneValue.length;</span><br><span class="line">    sufSum = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">    dp = <span class="keyword">new</span> <span class="title class_">Integer</span>[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">        sufSum[i] = sufSum[i+<span class="number">1</span>] + stoneValue[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">alice</span> <span class="operator">=</span> dfs(stoneValue, <span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">bob</span> <span class="operator">=</span> sufSum[<span class="number">0</span>]-alice;</span><br><span class="line">    <span class="keyword">if</span> (alice == bob) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Tie&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> alice &gt; bob ? <span class="string">&quot;Alice&quot;</span> : <span class="string">&quot;Bob&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[] sv, <span class="type">int</span> start)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt; sv.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dp[start]!=<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> dp[start];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> sufSum[start];</span><br><span class="line">    <span class="keyword">return</span> dp[start] = Math.max(sum-dfs(sv, start+<span class="number">1</span>), Math.max(sum-dfs(sv, start+<span class="number">2</span>), sum-dfs(sv, start+<span class="number">3</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é¢˜è¿˜æœ‰æ›´å¥½çš„åšæ³•ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œåé¢æœ‰æ—¶é—´å†å†™</p>
<h2 id="1510-çŸ³å­æ¸¸æˆ-IV"><a href="#1510-çŸ³å­æ¸¸æˆ-IV" class="headerlink" title="1510. çŸ³å­æ¸¸æˆ IV"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/stone-game-iv/">1510. çŸ³å­æ¸¸æˆ IV</a></h2><p>Difficulty: <strong>å›°éš¾</strong></p>
<p>Alice å’Œ Bob ä¸¤ä¸ªäººè½®æµç©ä¸€ä¸ªæ¸¸æˆï¼ŒAlice å…ˆæ‰‹ã€‚</p>
<p>ä¸€å¼€å§‹ï¼Œæœ‰ <code>n</code>Â ä¸ªçŸ³å­å †åœ¨ä¸€èµ·ã€‚æ¯ä¸ªäººè½®æµæ“ä½œï¼Œæ­£åœ¨æ“ä½œçš„ç©å®¶å¯ä»¥ä»çŸ³å­å †é‡Œæ‹¿èµ° <strong>ä»»æ„</strong>Â éé›¶ <strong>å¹³æ–¹æ•°</strong>Â ä¸ªçŸ³å­ã€‚</p>
<p>å¦‚æœçŸ³å­å †é‡Œæ²¡æœ‰çŸ³å­äº†ï¼Œåˆ™æ— æ³•æ“ä½œçš„ç©å®¶è¾“æ‰æ¸¸æˆã€‚</p>
<p>ç»™ä½ æ­£æ•´æ•°Â <code>n</code>Â ï¼Œä¸”å·²çŸ¥ä¸¤ä¸ªäººéƒ½é‡‡å–æœ€ä¼˜ç­–ç•¥ã€‚å¦‚æœ Alice ä¼šèµ¢å¾—æ¯”èµ›ï¼Œé‚£ä¹ˆè¿”å›Â <code>True</code>Â ï¼Œå¦åˆ™è¿”å›Â <code>False</code>Â ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">1</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šAlice æ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­å¹¶èµ¢å¾—èƒœåˆ©ï¼Œå› ä¸º Bob æ— æ³•è¿›è¡Œä»»ä½•æ“ä½œã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šAlice åªèƒ½æ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­ï¼Œç„¶å Bob æ‹¿èµ°æœ€åä¸€ä¸ªçŸ³å­å¹¶èµ¢å¾—èƒœåˆ©ï¼ˆ<span class="number">2</span> -&gt; <span class="number">1</span> -&gt; <span class="number">0</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">4</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">true</span></span><br><span class="line">è§£é‡Šï¼šn å·²ç»æ˜¯ä¸€ä¸ªå¹³æ–¹æ•°ï¼ŒAlice å¯ä»¥ä¸€æ¬¡å…¨æ‹¿æ‰ <span class="number">4</span> ä¸ªçŸ³å­å¹¶èµ¢å¾—èƒœåˆ©ï¼ˆ<span class="number">4</span> -&gt; <span class="number">0</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">7</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šå½“ Bob é‡‡å–æœ€ä¼˜ç­–ç•¥æ—¶ï¼ŒAlice æ— æ³•èµ¢å¾—æ¯”èµ›ã€‚</span><br><span class="line">å¦‚æœ Alice ä¸€å¼€å§‹æ‹¿èµ° <span class="number">4</span> ä¸ªçŸ³å­ï¼Œ Bob ä¼šæ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­ï¼Œç„¶å Alice åªèƒ½æ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­ï¼ŒBob æ‹¿èµ°æœ€åä¸€ä¸ªçŸ³å­å¹¶èµ¢å¾—èƒœåˆ©ï¼ˆ<span class="number">7</span> -&gt; <span class="number">3</span> -&gt; <span class="number">2</span> -&gt; <span class="number">1</span> -&gt; <span class="number">0</span>ï¼‰ã€‚</span><br><span class="line">å¦‚æœ Alice ä¸€å¼€å§‹æ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­ï¼Œ Bob ä¼šæ‹¿èµ° <span class="number">4</span> ä¸ªçŸ³å­ï¼Œç„¶å Alice åªèƒ½æ‹¿èµ° <span class="number">1</span> ä¸ªçŸ³å­ï¼ŒBob æ‹¿èµ°æœ€åä¸€ä¸ªçŸ³å­å¹¶èµ¢å¾—èƒœåˆ©ï¼ˆ<span class="number">7</span> -&gt; <span class="number">6</span> -&gt; <span class="number">2</span> -&gt; <span class="number">1</span> -&gt; <span class="number">0</span>ï¼‰ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = <span class="number">17</span></span><br><span class="line">è¾“å‡ºï¼š<span class="literal">false</span></span><br><span class="line">è§£é‡Šï¼šå¦‚æœ Bob é‡‡å–æœ€ä¼˜ç­–ç•¥ï¼ŒAlice æ— æ³•èµ¢å¾—èƒœåˆ©ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  <code>1 &lt;= n &lt;= 10^5</code></li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>å‰å‡ æ¬¡åŒå‘¨èµ›çš„ T4ï¼Œå¤ªæ°´äº†ï¼Œå¤§æ°´é¢˜ï¼Œé¡¶å¤šç®— mid</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">winnerSquareGame</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"> Â  Â <span class="keyword">var</span> dp = <span class="built_in">make</span>([]<span class="type">bool</span>, <span class="number">100001</span>)</span><br><span class="line"> Â  Â dp[<span class="number">0</span>] = <span class="literal">false</span></span><br><span class="line"> Â  Â <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line"> Â  Â  Â  Â <span class="keyword">for</span> j := <span class="number">1</span>; j*j &lt;= i; j++ &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â <span class="keyword">if</span> !dp[i-j*j] &#123;</span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â dp[i] = <span class="literal">true</span></span><br><span class="line"> Â  Â  Â  Â  Â  Â  Â  Â <span class="keyword">break</span></span><br><span class="line"> Â  Â  Â  Â  Â   &#125;</span><br><span class="line"> Â  Â  Â   &#125;</span><br><span class="line"> Â   &#125;</span><br><span class="line"> Â  Â <span class="keyword">return</span> dp[n]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>ç©äº†ä¸€æ‰‹èŠ±å“¨çš„è®°å¿†åŒ–æ‰‹æ³•ğŸ˜‚</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®°å¿†åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">winnerSquareGame</span><span class="params">(n <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> T, F = <span class="literal">true</span>, <span class="literal">false</span></span><br><span class="line">    <span class="keyword">var</span> dfs <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>)</span></span> <span class="type">bool</span></span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([]*<span class="type">bool</span>, <span class="number">100001</span>)</span><br><span class="line">    <span class="comment">//å…ˆæ‰‹æ‹¿ x^2 ä¸ªçŸ³å¤´</span></span><br><span class="line">    dfs = <span class="function"><span class="keyword">func</span> <span class="params">(n <span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> dp[n] != <span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> *dp[n]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> F</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">1</span>; i*i &lt;= n; i++&#123;</span><br><span class="line">            <span class="keyword">if</span> !dfs(n-i*i) &#123;</span><br><span class="line">                dp[n] = &amp;T</span><br><span class="line">                <span class="keyword">return</span> T</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[n] = &amp;F</span><br><span class="line">        <span class="keyword">return</span> F</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dfs(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="486-é¢„æµ‹èµ¢å®¶"><a href="#486-é¢„æµ‹èµ¢å®¶" class="headerlink" title="486. é¢„æµ‹èµ¢å®¶"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/predict-the-winner/">486. é¢„æµ‹èµ¢å®¶</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™å®šä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„éè´Ÿæ•´æ•°æ•°ç»„ã€‚ ç©å®¶ 1 ä»æ•°ç»„ä»»æ„ä¸€ç«¯æ‹¿å–ä¸€ä¸ªåˆ†æ•°ï¼Œéšåç©å®¶ 2 ç»§ç»­ä»å‰©ä½™æ•°ç»„ä»»æ„ä¸€ç«¯æ‹¿å–åˆ†æ•°ï¼Œç„¶åç©å®¶ 1 æ‹¿ï¼Œâ€¦â€¦ ã€‚æ¯æ¬¡ä¸€ä¸ªç©å®¶åªèƒ½æ‹¿å–ä¸€ä¸ªåˆ†æ•°ï¼Œåˆ†æ•°è¢«æ‹¿å–ä¹‹åä¸å†å¯å–ã€‚ç›´åˆ°æ²¡æœ‰å‰©ä½™åˆ†æ•°å¯å–æ—¶æ¸¸æˆç»“æŸã€‚æœ€ç»ˆè·å¾—åˆ†æ•°æ€»å’Œæœ€å¤šçš„ç©å®¶è·èƒœã€‚</p>
<p>ç»™å®šä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„æ•°ç»„ï¼Œé¢„æµ‹ç©å®¶ 1 æ˜¯å¦ä¼šæˆä¸ºèµ¢å®¶ã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªç©å®¶çš„ç©æ³•éƒ½ä¼šä½¿ä»–çš„åˆ†æ•°æœ€å¤§åŒ–ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">è¾“å‡ºï¼šFalse</span><br><span class="line">è§£é‡Šï¼šä¸€å¼€å§‹ï¼Œç©å®¶ <span class="number">1</span> å¯ä»¥ä» <span class="number">1</span> å’Œ <span class="number">2</span> ä¸­è¿›è¡Œé€‰æ‹©ã€‚</span><br><span class="line">å¦‚æœä»–é€‰æ‹© <span class="number">2</span>ï¼ˆæˆ–è€… <span class="number">1</span> ï¼‰ï¼Œé‚£ä¹ˆç©å®¶ <span class="number">2</span> å¯ä»¥ä» <span class="number">1</span>ï¼ˆæˆ–è€… <span class="number">2</span> ï¼‰å’Œ <span class="number">5</span> ä¸­è¿›è¡Œé€‰æ‹©ã€‚å¦‚æœç©å®¶ <span class="number">2</span> é€‰æ‹©äº† <span class="number">5</span> ï¼Œé‚£ä¹ˆç©å®¶ <span class="number">1</span> åˆ™åªå‰©ä¸‹ <span class="number">1</span>ï¼ˆæˆ–è€… <span class="number">2</span> ï¼‰å¯é€‰ã€‚</span><br><span class="line">æ‰€ä»¥ï¼Œç©å®¶ <span class="number">1</span> çš„æœ€ç»ˆåˆ†æ•°ä¸º <span class="number">1</span> + <span class="number">2</span> = <span class="number">3</span>ï¼Œè€Œç©å®¶ <span class="number">2</span> ä¸º <span class="number">5</span> ã€‚</span><br><span class="line">å› æ­¤ï¼Œç©å®¶ <span class="number">1</span> æ°¸è¿œä¸ä¼šæˆä¸ºèµ¢å®¶ï¼Œè¿”å› False ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[<span class="number">1</span>, <span class="number">5</span>, <span class="number">233</span>, <span class="number">7</span>]</span><br><span class="line">è¾“å‡ºï¼šTrue</span><br><span class="line">è§£é‡Šï¼šç©å®¶ <span class="number">1</span> ä¸€å¼€å§‹é€‰æ‹© <span class="number">1</span> ã€‚ç„¶åç©å®¶ <span class="number">2</span> å¿…é¡»ä» <span class="number">5</span> å’Œ <span class="number">7</span> ä¸­è¿›è¡Œé€‰æ‹©ã€‚æ— è®ºç©å®¶ <span class="number">2</span> é€‰æ‹©äº†å“ªä¸ªï¼Œç©å®¶ <span class="number">1</span> éƒ½å¯ä»¥é€‰æ‹© <span class="number">233</span> ã€‚</span><br><span class="line">     æœ€ç»ˆï¼Œç©å®¶ <span class="number">1</span>ï¼ˆ<span class="number">234</span> åˆ†ï¼‰æ¯”ç©å®¶ <span class="number">2</span>ï¼ˆ<span class="number">12</span> åˆ†ï¼‰è·å¾—æ›´å¤šçš„åˆ†æ•°ï¼Œæ‰€ä»¥è¿”å› Trueï¼Œè¡¨ç¤ºç©å®¶ <span class="number">1</span> å¯ä»¥æˆä¸ºèµ¢å®¶ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  1 &lt;= ç»™å®šçš„æ•°ç»„é•¿åº¦Â &lt;= 20.</li>
<li>  æ•°ç»„é‡Œæ‰€æœ‰åˆ†æ•°éƒ½ä¸ºéè´Ÿæ•°ä¸”ä¸ä¼šå¤§äº 10000000 ã€‚</li>
<li>  å¦‚æœæœ€ç»ˆä¸¤ä¸ªç©å®¶çš„åˆ†æ•°ç›¸ç­‰ï¼Œé‚£ä¹ˆç©å®¶ 1 ä»ä¸ºèµ¢å®¶ã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>è®°å¿†åŒ–ï¼Œè¿™ç§åšå¼ˆçš„é¢˜ç›®è®°å¿†åŒ–å†™èµ·æ¥ä¼šæ¯”è¾ƒè‡ªç„¶</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PredictTheWinner</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> Max = <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a &gt; b &#123;<span class="keyword">return</span> a&#125;;<span class="keyword">return</span> b&#125;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">var</span> preSum = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        preSum[i] = preSum[i<span class="number">-1</span>] + nums[i<span class="number">-1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®°å¿†åŒ–</span></span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, n)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; n; j++ &#123;</span><br><span class="line">            dp[i][j] = <span class="number">-1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> dfs <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>, j <span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line">    dfs = <span class="function"><span class="keyword">func</span><span class="params">(i <span class="type">int</span>, j <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> dp[i][j] != <span class="number">-1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> dp[i][j]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i == j &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[i]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åŒºé—´å’Œ</span></span><br><span class="line">        sum := preSum[j+<span class="number">1</span>] - preSum[i]</span><br><span class="line">        dp[i][j] = Max(sum-dfs(i+<span class="number">1</span>, j), sum-dfs(i, j<span class="number">-1</span>))</span><br><span class="line">        <span class="keyword">return</span> dp[i][j]</span><br><span class="line">    &#125;</span><br><span class="line">    A := dfs(<span class="number">0</span>, n<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> A &gt;= preSum[n]-A</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>åŒºé—´ DP çš„å†™æ³•å½“ç„¶ä¹Ÿå¯ä»¥ï¼Œæ€è·¯ä¸€æ ·</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PredictTheWinner</span><span class="params">(nums []<span class="type">int</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">var</span> dp = <span class="built_in">make</span>([][]<span class="type">int</span>, n)</span><br><span class="line">    <span class="keyword">var</span> Max = <span class="function"><span class="keyword">func</span><span class="params">(a,b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;<span class="keyword">if</span> a&gt;b &#123;<span class="keyword">return</span> a&#125;;<span class="keyword">return</span> b&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        dp[i] = <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line">        dp[i][i] = nums[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> preSum = <span class="built_in">make</span>([]<span class="type">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        preSum[i] = preSum[i<span class="number">-1</span>] + nums[i<span class="number">-1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> tlen := <span class="number">2</span>; tlen &lt;= n; tlen++ &#123;</span><br><span class="line">        <span class="keyword">for</span> left := <span class="number">0</span>; left+tlen<span class="number">-1</span> &lt; n; left++ &#123;</span><br><span class="line">            right := left+tlen<span class="number">-1</span></span><br><span class="line">            sum := preSum[right+<span class="number">1</span>]-preSum[left]</span><br><span class="line">            dp[left][right] = Max(sum-dp[left][right<span class="number">-1</span>], sum-dp[left+<span class="number">1</span>][right])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][n<span class="number">-1</span>] &gt;= preSum[n]-dp[<span class="number">0</span>][n<span class="number">-1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a><em>å›¾è®º</em></h2><p>æš‚æ—¶å…ˆæ”¾åœ¨è¿™é‡Œï¼Œç­‰åé¢å­¦äº† dijï¼Œspfa é‚£äº›åä¸€èµ·å•ç‹¬æ€»ç»“ä¸€ä¸‹</p>
<h2 id="743-ç½‘ç»œå»¶è¿Ÿæ—¶é—´"><a href="#743-ç½‘ç»œå»¶è¿Ÿæ—¶é—´" class="headerlink" title="743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/network-delay-time/">743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´</a></h2><p>æœ‰ <code>N</code> ä¸ªç½‘ç»œèŠ‚ç‚¹ï¼Œæ ‡è®°ä¸º <code>1</code> åˆ° <code>N</code>ã€‚</p>
<p>ç»™å®šä¸€ä¸ªåˆ—è¡¨ <code>times</code>ï¼Œè¡¨ç¤ºä¿¡å·ç»è¿‡<strong>æœ‰å‘</strong>è¾¹çš„ä¼ é€’æ—¶é—´ã€‚ <code>times[i] = (u, v, w)</code>ï¼Œå…¶ä¸­ <code>u</code> æ˜¯æºèŠ‚ç‚¹ï¼Œ<code>v</code> æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œ <code>w</code> æ˜¯ä¸€ä¸ªä¿¡å·ä»æºèŠ‚ç‚¹ä¼ é€’åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æ—¶é—´ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»æŸä¸ªèŠ‚ç‚¹ <code>K</code> å‘å‡ºä¸€ä¸ªä¿¡å·ã€‚éœ€è¦å¤šä¹…æ‰èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¶åˆ°ä¿¡å·ï¼Ÿå¦‚æœä¸èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°ä¿¡å·ï¼Œè¿”å› <code>-1</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://s1.ax1x.com/2020/06/08/tfoiPf.png" alt="tfoiPf.png"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼štimes = [[<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>]], N = <span class="number">4</span>, K = <span class="number">2</span></span><br><span class="line">è¾“å‡ºï¼š<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li><code>N</code> çš„èŒƒå›´åœ¨ <code>[1, 100]</code> ä¹‹é—´ã€‚</li>
<li><code>K</code> çš„èŒƒå›´åœ¨ <code>[1, N]</code> ä¹‹é—´ã€‚</li>
<li><code>times</code> çš„é•¿åº¦åœ¨ <code>[1, 6000]</code> ä¹‹é—´ã€‚</li>
<li>æ‰€æœ‰çš„è¾¹ <code>times[i] = (u, v, w)</code> éƒ½æœ‰ <code>1 &lt;= u, v &lt;= N</code> ä¸” <code>0 &lt;= w &lt;= 100</code>ã€‚</li>
</ol>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>ä¸´æ—¶èµ·æ„å­¦äº†ä¸‹ Floydï¼Œç„¶ååœ¨ lc ä¸Šæœäº†ä¸€ä¸‹æ‰¾åˆ°äº†è¿™ä¸€é¢˜ï¼Œæ€è·¯ä¹Ÿå¾ˆç›´æ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Floyd</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">networkDelayTime</span><span class="params">(<span class="type">int</span>[][] times, <span class="type">int</span> N, <span class="type">int</span> K)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] dis=<span class="keyword">new</span> <span class="title class_">int</span>[N][N];</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++) Arrays.fill(dis[i],INF);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++) dis[i][i]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span>[] t:times) dis[t[<span class="number">0</span>]-<span class="number">1</span>][t[<span class="number">1</span>]-<span class="number">1</span>]=t[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;N;k++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;N;j++)&#123;</span><br><span class="line">                dis[i][j]=Math.min(dis[i][j],dis[i][k]+dis[k][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">    K-=<span class="number">1</span>; <span class="comment">//ä» 0 å¼€å§‹ï¼ä» 1 å¼€å§‹çš„éƒ½æ˜¯é‚ªæ•™</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dis[K][i]==INF) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        res=Math.max(dis[K][i],res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤§æ¦‚è¯´ä¸€ä¸‹ï¼Œå…¶å® Floyd å°±æ˜¯åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ<code>dp[k][i][j]</code>ä»£è¡¨ä»<code>i~j</code>å…è®¸ç»è¿‡å‰<code>k</code>ä¸ªèŠ‚ç‚¹ä¸­è½¬æ—¶çš„æœ€çŸ­è·¯å¾„ï¼Œé‚£ä¹ˆå…¶å®å¾ˆå®¹æ˜“æ¨å¯¼å‡ºï¼Œ<code>dp[k][i][j]=min(dp[k-1][i][k]+dp[k-1][k][j],dp[k][i][j])</code>å…¶å®ä¹Ÿå°±æ˜¯å°è¯•ä»¥æ¯ä¸ªç‚¹ä¸ºä¸­è½¬ç‚¹ï¼Œçœ‹èƒ½å¦ç¼©çŸ­ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå’ŒåŒºé—´ DP æœ‰ç‚¹åƒï¼Œå…³äº<code>k</code>ä¸ºä»€ä¹ˆè¦æ”¾å¤–é¢å…¶å®ä»”ç»†æƒ³ä¸€ä¸‹å°±çŸ¥é“äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯åœ¨æ±‚<code>dp[k][i][j]</code>çš„æ—¶å€™éœ€è¦ä¿è¯<code>dp[k-1][i][j]</code>ä»¥åŠ<code>dp[k-1][i][k]</code> å’Œ<code>dp[k-1][k][j]</code>éƒ½æ˜¯å·²ç»è®¡ç®—å®Œæ¯•çš„ï¼Œæƒ³ä¸€æƒ³ï¼Œå¦‚æœ k æ”¾åœ¨é‡Œé¢èƒ½ä¿è¯ä¹ˆï¼Ÿå¾ˆæ˜æ˜¾ä¸è¡Œï¼Œå¯ä»¥ç±»æ¯”ä¸Šé¢çš„ <a href="#576-%E5%87%BA%E7%95%8C%E7%9A%84%E8%B7%AF%E5%BE%84%E6%95%B0">576. å‡ºç•Œçš„è·¯å¾„æ•°</a>ï¼Œä¸€æ ·çš„é“ç†ã€‚ç„¶åæˆ‘ä»¬å†è§‚å¯Ÿæ•´ä¸ªé€’æ¨æ–¹ç¨‹ï¼Œå‘ç°<code>dp[k]</code>åªä¾èµ–äº<code>dp[k-1]</code>æ‰€ä»¥å°±å¯ä»¥ç›´æ¥æ»šåŠ¨æ•°ç»„ä¼˜åŒ–æ‰ k ç»´åº¦çš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„è§£æ³•</p>
<h2 id="1584-è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨"><a href="#1584-è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨" class="headerlink" title="1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/min-cost-to-connect-all-points/">1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨</a></h2><p>Difficulty: <strong>ä¸­ç­‰</strong></p>
<p>ç»™ä½ ä¸€ä¸ª<code>points</code>Â æ•°ç»„ï¼Œè¡¨ç¤º 2D å¹³é¢ä¸Šçš„ä¸€äº›ç‚¹ï¼Œå…¶ä¸­Â points[i] = [x<sub style="display: inline;">i</sub>, y<sub style="display: inline;">i</sub>]Â ã€‚</p>
<p>è¿æ¥ç‚¹Â [x<sub style="display: inline;">i</sub>, y<sub style="display: inline;">i</sub>] å’Œç‚¹Â [x<sub style="display: inline;">j</sub>, y<sub style="display: inline;">j</sub>]`Â çš„è´¹ç”¨ä¸ºå®ƒä»¬ä¹‹é—´çš„ <strong>æ›¼å“ˆé¡¿è·ç¦»</strong>Â ï¼šx<sub style="display: inline;">i</sub> - x<sub style="display: inline;">j</sub>| + |y<sub style="display: inline;">i</sub> - y<sub style="display: inline;">j</sub>|Â ï¼Œå…¶ä¸­Â |val|Â è¡¨ç¤ºÂ valÂ çš„ç»å¯¹å€¼ã€‚</p>
<p>è¯·ä½ è¿”å›å°†æ‰€æœ‰ç‚¹è¿æ¥çš„æœ€å°æ€»è´¹ç”¨ã€‚åªæœ‰ä»»æ„ä¸¤ç‚¹ä¹‹é—´ <strong>æœ‰ä¸”ä»…æœ‰</strong>Â ä¸€æ¡ç®€å•è·¯å¾„æ—¶ï¼Œæ‰è®¤ä¸ºæ‰€æœ‰ç‚¹éƒ½å·²è¿æ¥ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong><br><img src="https://s1.ax1x.com/2020/09/14/wDmhAf.png" alt="wDmhAf.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špoints = [[0,0],[2,2],[3,10],[5,2],[7,0]]</span><br><span class="line">è¾“å‡ºï¼š20</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºè¿æ¥æ‰€æœ‰ç‚¹å¾—åˆ°æœ€å°æ€»è´¹ç”¨ï¼Œæ€»è´¹ç”¨ä¸º 20 ã€‚</span><br><span class="line">æ³¨æ„åˆ°ä»»æ„ä¸¤ä¸ªç‚¹ä¹‹é—´åªæœ‰å”¯ä¸€ä¸€æ¡è·¯å¾„äº’ç›¸åˆ°è¾¾ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špoints = [[3,12],[-2,5],[-4,1]]</span><br><span class="line">è¾“å‡ºï¼š18</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špoints = [[0,0],[1,1],[1,0],[-1,1]]</span><br><span class="line">è¾“å‡ºï¼š4</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špoints = [[-1000000,-1000000],[1000000,1000000]]</span><br><span class="line">è¾“å‡ºï¼š4000000</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ 5ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼špoints = [[0,0]]</span><br><span class="line">è¾“å‡ºï¼š0</span><br></pre></td></tr></table></figure>

<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li>  1 &lt;= points.length &lt;= 1000</li>
<li>  -10<sup>6</sup>Â &lt;= x<sub style="display: inline;">i</sub>, y<sub style="display: inline;">i</sub> &lt;= 10<sup>6</sup></li>
<li>  æ‰€æœ‰ç‚¹Â (x<sub style="display: inline;">i</sub>, y<sub style="display: inline;">i</sub>)Â ä¸¤ä¸¤ä¸åŒã€‚</li>
</ul>
<p><strong>è§£æ³•ä¸€</strong></p>
<p>Prim O(V^2) æœ€å°ç”Ÿæˆæ ‘ï¼Œ206th å‘¨èµ› t3ï¼Œè£¸çš„ mstï¼Œä½†æ˜¯å½©ç¬”çš„æˆ‘å¹¶ä¸ä¼šï¼Œäº‹åè¡¥äº†ä¸€æ³¢ <a target="_blank" rel="noopener" href="https://oi-wiki.org/graph/mst/#prim">OI Wiki</a>ï¼Œï¼ˆè¿™ä¸ªæ˜¯åŸå§‹çš„æš´åŠ› Primï¼Œåº”å¯¹è¿™ä¸ªé¢˜å¤Ÿäº†ï¼‰  </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Prim O(V^2) ä»»å–ä¸€ä¸ªèŠ‚ä½œä¸ºèµ·ç‚¹ï¼Œdis[i] è®°å½• mst ç‚¹é›†åˆ°ç‚¹ i çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line"><span class="comment">//æ¯æ¬¡å–å‡º mst ç‚¹é›†å¤– dis[i] æœ€å°çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¦» mst ç‚¹é›†æœ€è¿‘çš„ç‚¹ï¼Œå¹¶æ ‡è®°ä¸º mst èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//ç„¶ååˆ©ç”¨è¯¥ç‚¹æ›´æ–°å…¶ä»–çš„ mst ç‚¹é›†å¤–çš„ç‚¹çš„ dis è·ç¦»ï¼Œç›´åˆ°å°†æ‰€æœ‰çš„ç‚¹éƒ½åŠ è¿›å»ï¼Œé€‚åˆç¨ å¯†å›¾ï¼ˆè¾¹æ•°è¿œå¤§äºç‚¹æ•°ï¼‰</span></span><br><span class="line"><span class="comment">//å¯ä»¥ä½¿ç”¨ä¸€äº›æ•°æ®ç»“æ„æ¥ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Œæš‚æ—¶ä¸æ·±ç©¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minCostConnectPoints</span><span class="params">(<span class="type">int</span>[][] points)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">INF</span> <span class="operator">=</span> <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> points.length;</span><br><span class="line">    <span class="comment">//dis è¡¨ç¤º mst ç‚¹é›†åˆ°è¯¥ç‚¹çš„æœ€å°è·ç¦»</span></span><br><span class="line">    <span class="type">int</span>[] dis = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    Arrays.fill(dis, INF);</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="type">boolean</span>[] vis = <span class="keyword">new</span> <span class="title class_">boolean</span>[n];</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">minCost</span> <span class="operator">=</span> INF;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">//æœ€å°çš„æ–°èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis[j] &amp;&amp; dis[j] &lt; minCost) &#123;</span><br><span class="line">                minCost = dis[j];</span><br><span class="line">                k = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vis[k] = <span class="literal">true</span>;</span><br><span class="line">        res += minCost;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="comment">//æ›´æ–°æ‰€æœ‰ mst ç‚¹é›†å¤–çš„ç‚¹çš„ dis</span></span><br><span class="line">            <span class="keyword">if</span> (vis[j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mhd</span> <span class="operator">=</span> Math.abs(points[k][<span class="number">0</span>]-points[j][<span class="number">0</span>])+Math.abs(points[k][<span class="number">1</span>]-points[j][<span class="number">1</span>]);</span><br><span class="line">            dis[j] = Math.min(dis[j], mhd);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé¢˜æ˜æ˜¾æ˜¯ç¨ å¯†å›¾ï¼Œç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„ï¼ŒPrim ç”¨é‚»æ¥çŸ©é˜µæ—¶æœºå¤æ‚åº¦å°±æ˜¯ O(V^2)ï¼ŒV ä¸ºç‚¹æ•°</p>
<blockquote>
<p>æ•°æ®ç»“æ„ä¸­å¯¹äºç¨€ç–å›¾çš„å®šä¹‰ä¸ºï¼šæœ‰å¾ˆå°‘æ¡è¾¹æˆ–å¼§ï¼ˆè¾¹çš„æ¡æ•°|E|è¿œå°äº|V|Â²ï¼‰çš„å›¾ç§°ä¸ºç¨€ç–å›¾ï¼ˆsparse graphï¼‰ï¼Œåä¹‹è¾¹çš„æ¡æ•°|E|æ¥è¿‘|V|Â²ï¼Œç§°ä¸ºç¨ å¯†å›¾ï¼ˆdense graphï¼‰ã€‚</p>
</blockquote>
<p><strong>è§£æ³•äºŒ</strong></p>
<p>Kruskal + å¹¶æŸ¥é›†ï¼Œæ¯”è¾ƒé€‚åˆç¨€ç–å›¾ï¼Œè¿™é‡Œæ—¶æœºå¤æ‚åº¦æ˜¯ O(ElogE)ï¼ŒE ä¸ºè¾¹æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Kruskal+UnionFind</span></span><br><span class="line"><span class="comment">//ä»¥è¾¹ä¸ºä¸­å¿ƒï¼Œé¦–å…ˆæ„é€ å‡ºæ‰€æœ‰çš„è¾¹ï¼Œç„¶åæ’åºï¼Œä»æœ€çŸ­çš„è¾¹å¼€å§‹ï¼Œåˆå¹¶è¯¥è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="comment">//åˆå¹¶ n-1 æ¬¡åå°±å¾—åˆ° mstï¼ˆn ä¸ºèŠ‚ç‚¹æ•°ï¼‰ï¼Œé€‚åˆç¨€ç–å›¾</span></span><br><span class="line"><span class="type">int</span>[] parent;</span><br><span class="line"><span class="type">int</span>[] rank;</span><br><span class="line"><span class="comment">//è·¯å¾„å‹ç¼©</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parent[a] == a) &#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parent[a] = find(parent[a]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pa</span> <span class="operator">=</span> find(a);</span><br><span class="line">    <span class="type">int</span> <span class="variable">pb</span> <span class="operator">=</span> find(b);</span><br><span class="line">    <span class="keyword">if</span> (pa == pb) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éšä¾¿åˆå¹¶ 553ms</span></span><br><span class="line">    <span class="comment">//parent[pa] = pb;</span></span><br><span class="line">    <span class="comment">//æŒ‰ç§©åˆå¹¶ 564ms ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (rank[pa] &gt; rank[pb]) &#123;</span><br><span class="line">        parent[pb] = pa;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (rank[pb] &gt; rank[pa]) &#123;</span><br><span class="line">        parent[pa] = pb;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        parent[pa] = pb;</span><br><span class="line">        rank[pb]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minCostConnectPoints</span><span class="params">(<span class="type">int</span>[][] points)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> points.length;</span><br><span class="line">    parent = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    rank = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="comment">//n-1 + n-2 + n-3 +...+ 1 = (n-1) + (n-1)*(n-2)/2 = n(n-1)/2</span></span><br><span class="line">    <span class="comment">//5 : 4+3+2+1 = 4*</span></span><br><span class="line">    <span class="comment">//0,1: ç«¯ç‚¹ï¼Œ2: è¾¹æƒå€¼</span></span><br><span class="line">    <span class="type">int</span>[][] edge = <span class="keyword">new</span> <span class="title class_">int</span>[n*(n-<span class="number">1</span>)/<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i+<span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">dis</span> <span class="operator">=</span> Math.abs(points[i][<span class="number">0</span>]-points[j][<span class="number">0</span>])+Math.abs(points[i][<span class="number">1</span>]-points[j][<span class="number">1</span>]);</span><br><span class="line">            edge[idx++] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j, dis&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        parent[i] = i;</span><br><span class="line">        rank[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŒ‰ç…§è¾¹çš„æƒå€¼æ’åº</span></span><br><span class="line">    Arrays.sort(edge, (e1, e2)-&gt;e1[<span class="number">2</span>]-e2[<span class="number">2</span>]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; edge.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (union(edge[i][<span class="number">0</span>], edge[i][<span class="number">1</span>])) &#123;</span><br><span class="line">            res += edge[i][<span class="number">2</span>];</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count == n-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
