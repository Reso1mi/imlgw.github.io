<!DOCTYPE html>
<html lang=zh-CN>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:description" content="Tadow çš„åšå®¢">
    <meta property="og:type" content="website">
    <meta name="description" content="Tadow çš„åšå®¢">
    <meta name="keyword"  content="Tadow, Resolmi, imlgw, åŠå²›é“ç›’, ç®—æ³•, Java, Golang">
    <link rel="shortcut icon" href="https://fav.farm/ğŸ’­">

    <title>
        
        JSR303-å‚æ•°æ£€éªŒ - Tadow ç¢ç¢å¿µ
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_28hi1hpxx24.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Tadow ç¢ç¢å¿µ" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Keep It Simple, Stupid </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="https://static.imlgw.top/blog/20220821160037.png" />
        </div>
        <div class="name">
            <i>Tadow</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <!-- <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li> -->
            <li >
                <a href="/categories">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            
            <li >
                <a href="/selfhosted">
                    <i class="iconfont icon-guidang1"></i>
                    <span>è‡ªå»º</span>
                </a>
            </li>

            <li >
                <a href="/collect/">
                    <i class="iconfont icon-shoucang1"></i>
                    <span>æ”¶è—</span>
                </a>
            </li>

            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSR303"><span class="toc-text">JSR303</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E6%89%8B"><span class="toc-text">ä¸Šæ‰‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">å¼•å…¥ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSR-%E6%8F%90%E4%BE%9B%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-text">JSR æä¾›çš„æ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hibernate-%E6%8F%90%E4%BE%9B%E7%9A%84"><span class="toc-text">Hibernate æä¾›çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3"><span class="toc-text">è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E4%B8%8A%E5%8A%A0%E6%B3%A8%E8%A7%A3"><span class="toc-text">å­—æ®µä¸ŠåŠ æ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="toc-text">è‡ªå®šä¹‰å¼‚å¸¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C"><span class="toc-text">åˆ†ç»„æ ¡éªŒ</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-bg" id="search-bg"></div>
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Keep It Simple, Stupid </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        JSR303-å‚æ•°æ£€éªŒ
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2019-05-13 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#å‚æ•°æ ¡éªŒ" title="å‚æ•°æ ¡éªŒ">å‚æ•°æ ¡éªŒ</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#JSR" title="JSR">JSR</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h2 id="JSR303"><a href="#JSR303" class="headerlink" title="JSR303"></a>JSR303</h2><p>ç›®å‰æœ€æ–°çš„è§„èŒƒå·²ç»æ˜¯ JSR380 äº†ï¼Œä¹Ÿå°±æ˜¯ Bean Validation 2.0.</p>
<p><img src="http://static.imlgw.top///20190513/qa5DNu5Nsq26.png?imageslim" alt="mark"></p>
<p>å‚æ•°æ ¡éªŒæ˜¯ä¸€ä¸ªæˆç†Ÿçš„ç½‘ç«™å¿…é¡»çš„åŠŸèƒ½ï¼Œç„¶è€Œæœ‰çš„æ—¶å€™ä¸ºäº†æ ¡éªŒå‚æ•°ä¹Ÿè¦è´¹å¥½å¤§çš„åŠ²ï¼Œå…ä¸äº†å†™å¾ˆå¤š if-elseï¼Œä¸€ç‚¹ä¹Ÿä¸ä¼˜é›…ã€‚</p>
<h2 id="ä¸Šæ‰‹"><a href="#ä¸Šæ‰‹" class="headerlink" title="ä¸Šæ‰‹"></a>ä¸Šæ‰‹</h2><h3 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> &lt;!--SpringBootWeb è¿™ä¸ªåŒ…é‡Œé¢è‡ªå¸¦äº† hibernate çš„æ ¡éªŒåŒ…--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JSR-æä¾›çš„æ³¨è§£"><a href="#JSR-æä¾›çš„æ³¨è§£" class="headerlink" title="JSR æä¾›çš„æ³¨è§£"></a>JSR æä¾›çš„æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Null</span>   è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <span class="literal">null</span>    </span><br><span class="line"><span class="meta">@NotNull</span>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º <span class="literal">null</span>    </span><br><span class="line"><span class="meta">@AssertTrue</span>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <span class="literal">true</span>    </span><br><span class="line"><span class="meta">@AssertFalse</span>    è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <span class="literal">false</span>    </span><br><span class="line"><span class="meta">@Min(value)</span>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼    </span><br><span class="line"><span class="meta">@Max(value)</span>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼    </span><br><span class="line"><span class="meta">@DecimalMin(value)</span>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼    </span><br><span class="line"><span class="meta">@DecimalMax(value)</span>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼    </span><br><span class="line"><span class="meta">@Size(max=, min=)</span>   è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…    </span><br><span class="line"><span class="meta">@Digits</span> (integer, fraction)     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…    </span><br><span class="line"><span class="meta">@Past</span>   è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ    </span><br><span class="line"><span class="meta">@Future</span>     è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ    </span><br><span class="line"><span class="meta">@Pattern(regex=,flag=)</span>  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure>

<h3 id="Hibernate-æä¾›çš„"><a href="#Hibernate-æä¾›çš„" class="headerlink" title="Hibernate æä¾›çš„"></a>Hibernate æä¾›çš„</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@NotBlank(message =)   éªŒè¯å­—ç¬¦ä¸²é nullï¼Œä¸”é•¿åº¦å¿…é¡»å¤§äº 0    </span><br><span class="line">@Email  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€    </span><br><span class="line">@Length(min=,max=)  è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…    </span><br><span class="line">@NotEmpty   è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º    </span><br><span class="line">@Range(min=,max=,message=)  è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£"><a href="#è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£"></a>è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£</h3><p><strong>@IsMobile æ³¨è§£</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.imlgw.spike.validator;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Constraint;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Payload;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> imlgw.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/5/13 17:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(</span></span><br><span class="line"><span class="meta">        validatedBy = &#123;IsMobileValidator.class&#125; //æŒ‡å®šçœŸæ­£æ ¡éªŒçš„ç±»</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> IsMobile &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;å·ç æ ¼å¼é”™è¯¯&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>IsMobileValidator ç±»</strong></p>
<blockquote>
<p>è‡ªå®šä¹‰çš„æ ¡éªŒå™¨è¦å®ç° ConstraintValidator æ¥å£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.imlgw.spike.validator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> top.imlgw.spike.utils.ValidatorUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidator;</span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidatorContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> imlgw.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/5/13 18:12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IsMobileValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;IsMobile, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> required=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">(IsMobile constraintAnnotation)</span> &#123;</span><br><span class="line">        required=constraintAnnotation.required();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s, ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(required)&#123;</span><br><span class="line">            <span class="keyword">return</span>  ValidatorUtil.isMobile(s);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(StringUtils.isEmpty(s))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span>  ValidatorUtil.isMobile(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å­—æ®µä¸ŠåŠ æ³¨è§£"><a href="#å­—æ®µä¸ŠåŠ æ³¨è§£" class="headerlink" title="å­—æ®µä¸ŠåŠ æ³¨è§£"></a>å­—æ®µä¸ŠåŠ æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.imlgw.spike.entity;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> imlgw.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/5/11 15:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;id ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@Length(min = 6,message = &quot;å¯†ç é•¿åº¦è‡³å°‘ 6 ä½&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id, String name, Integer age, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">        <span class="built_in">this</span>.id=id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Valid åŠ  BindingResult</strong></p>
<p><img src="http://static.imlgw.top///20190513/ILDAz6Bdj3cz.png?imageslim" alt="mark"></p>
<p>åœ¨ Controlle å±‚å¾…æ ¡éªŒçš„çš„å‚æ•°ä¸ŠåŠ ä¸Š<code>@Valid</code>æ³¨è§£ï¼Œç„¶ååœ¨åé¢ç´§è·Ÿä¸€ä¸ª <code>BindingResult</code>ï¼Œæ ¡éªŒçš„ç»“æœä¼šå°è£…åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢ï¼ŒBindingResult çš„ä½œç”¨æ˜¯å½“å‚æ•°ä¸åˆæ³•æ—¶èƒ½å¤Ÿæ•æ‰åˆ°é”™è¯¯ï¼Œä¸ä¼šç›´æ¥æŠ›å¼‚å¸¸ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ã€‚</p>
<p><strong>@Valid åŠ å…¨å±€å¼‚å¸¸æ•è·</strong></p>
<p>ä¸Šé¢çš„æ–¹æ³•å¦‚æœä¸åŠ åé¢çš„ BindingResult åœ¨æ ¡éªŒå¤±è´¥åå°±ä¼šæŠ›ä¸€ä¸ª BindException</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: <span class="number">1</span> errors</span><br><span class="line">Field error in object <span class="string">&#x27;user&#x27;</span> on field <span class="string">&#x27;id&#x27;</span>: rejected value [<span class="literal">null</span>]; codes [NotNull.user.id,NotNull.id,NotNull.<span class="type">long</span>,NotNull]; arguments .......</span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨<code>@ControllerAdvice+@ExceptionHandler</code>æ¥å®šä¹‰ä¸€ä¸ªå…¨å±€çš„å¼‚å¸¸å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼Œ<code>@ExceptionHandle</code>ï¼Œé’ˆå¯¹çš„ä»…ä»…æ˜¯å•ä¸ª controllerï¼ŒåŠ ä¸Š<code>@ControllerAdvice</code>å°±å¯ä»¥å¯¹æ‰€æœ‰çš„ Controller å±‚å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œè¿™é‡Œçš„å…¨å±€ä»…ä»…æŒ‡çš„æ˜¯ controller å±‚ã€‚</p>
<h3 id="è‡ªå®šä¹‰å¼‚å¸¸"><a href="#è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸"></a>è‡ªå®šä¹‰å¼‚å¸¸</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> top.imlgw.spike.exception;</span><br><span class="line"><span class="keyword">import</span> top.imlgw.spike.result.CodeMsg;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€é€šç”¨å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> imlgw.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/5/14 20:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> CodeMsg cm;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GlobalException</span><span class="params">(CodeMsg cm)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(cm.toString());</span><br><span class="line">        <span class="built_in">this</span>.cm = cm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CodeMsg <span class="title function_">getCm</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å…¨å±€å¼‚å¸¸å¤„ç†å™¨"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†å™¨"></a>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Controller å±‚å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> imlgw.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/5/13 18:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">//ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œéœ€è¦ json çš„è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(value = Exception.class)</span> <span class="comment">//å¤„ç† controller å±‚æ‰€æœ‰å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">exceptionHandle</span><span class="params">(HttpServletRequest request, Exception e)</span> &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> GlobalException) &#123;</span><br><span class="line">            <span class="comment">//å…¨å±€å¼‚å¸¸</span></span><br><span class="line">            <span class="type">GlobalException</span> <span class="variable">ex</span> <span class="operator">=</span> (GlobalException) e;</span><br><span class="line">            <span class="keyword">return</span> Result.error(ex.getCm());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> BindException) &#123;</span><br><span class="line">            <span class="comment">//@Validated æ£€éªŒå™¨çš„å¼‚å¸¸</span></span><br><span class="line">            <span class="type">BindException</span> <span class="variable">ex</span> <span class="operator">=</span> (BindException) e;</span><br><span class="line">            List&lt;ObjectError&gt; errors = ex.getAllErrors();</span><br><span class="line">            <span class="type">ObjectError</span> <span class="variable">error</span> <span class="operator">=</span> errors.get(<span class="number">0</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> error.getDefaultMessage();</span><br><span class="line">            <span class="keyword">return</span> Result.error(CodeMsg.BIND_ERROR.fillArgs(msg));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(CodeMsg.SERVER_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯• Demo çœ‹å…ˆå¤„ç†é‚£ä¸ª</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = GlobalException.class)</span> <span class="comment">//å¤„ç† controller å±‚æ‰€æœ‰å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">GLe</span><span class="params">(HttpServletRequest request, Exception e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¼˜å…ˆå¤„ç†äº†è¿™ä¸ª GlobalException&quot;</span>);</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="comment">//å…¨å±€å¼‚å¸¸</span></span><br><span class="line">        <span class="type">GlobalException</span> <span class="variable">ex</span> <span class="operator">=</span> (GlobalException) e;</span><br><span class="line">        <span class="keyword">return</span> Result.error(ex.getCm());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¹Ÿåšäº†ä¸ªå°æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘å®šä¹‰äº†ä¸¤ä¸ª@ExceptionHandleï¼Œä¸€ä¸ªæ˜¯å¦ä¸€ä¸ªçš„å­ç±»ï¼Œçœ‹ä¼šå…ˆå¤„ç†é‚£ä¸ªï¼Œæµ‹è¯•åå‘ç°ä¼šå…ˆå¤„ç†å°å¼‚å¸¸ï¼Œé‚£ä¸ªæœ€å¤§çš„å¼‚å¸¸å…¶å®ç›¸å½“äºâ€™â€™å…œåº•â€™â€™çš„ã€‚å…¶å®åé¢æˆ‘ä¸ºäº†è·Ÿç²¾ç»†çš„å¤„ç†ï¼Œå°†ç»‘å®šå¼‚å¸¸å’Œè‡ªå®šä¹‰çš„å¼‚å¸¸åˆ†å¼€å¤„ç†äº†ã€‚</p>
<blockquote>
<p>@ControllerAdvice :</p>
<p>It is typically used to define {@link ExceptionHandler <strong>@ExceptionHandler</strong>},</p>
<p>{@link InitBinder <strong>@InitBinder</strong>}, and {@link ModelAttribute <strong>@ModelAttribute</strong>}</p>
<p>methods that <strong>apply to all</strong> {@link RequestMapping <strong>@RequestMapping</strong>} methods.</p>
<p>@author Rossen Stoyanchev</p>
<p>@since 3.2</p>
</blockquote>
<h3 id="åˆ†ç»„æ ¡éªŒ"><a href="#åˆ†ç»„æ ¡éªŒ" class="headerlink" title="åˆ†ç»„æ ¡éªŒ"></a>åˆ†ç»„æ ¡éªŒ</h3><p>åªéœ€è¦åœ¨ vo é‡ŒåŠ ä¸Šå¯¹åº”åˆ†ç»„çš„æ¥å£ç„¶ååœ¨æ³¨è§£ä¸ŠåŠ ä¸Šå°±å¯ä»¥äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginVo</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@IsMobile(groups = Test1.class)</span> <span class="comment">//åªæœ‰åœ¨ Test1 åˆ†ç»„ä¸‹æ‰ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Length(min=6 ,groups = Test2.class,message = &quot;å¯†ç é•¿åº¦è¿‡çŸ­&quot;)</span> <span class="comment">//åªæœ‰åœ¨ Test2 åˆ†ç»„ä¸‹æ‰ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMobile</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMobile</span><span class="params">(String mobile)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;LoginVo [mobile=&quot;</span> + mobile + <span class="string">&quot;, password=&quot;</span> + password + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Test1</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Test2</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ—¶æ³¨æ„ç”¨<code>@Validated</code>ï¼Œè¿™ä¸ªå…¶å®æ˜¯ Spring å¯¹ Hibernate çš„äºŒæ¬¡å°è£…ï¼Œå¢åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/jsr303-2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJSR</span><span class="params">(<span class="meta">@Validated(&#123;LoginVo.Test2.class&#125;)</span> LoginVo vo)</span>&#123;</span><br><span class="line">	  <span class="comment">//........	</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åœ¨è¿™ä¸ª Controller é‡Œ post å¯†ç å°±æ²¡æœ‰é•¿åº¦çš„é™åˆ¶äº†ã€‚</p>
<blockquote>
<p>å…¶å®è¿˜æœ‰ä¸€äº›æ ¡éªŒçš„æ–¹æ³•ï¼ŒåŸºäºæ–¹æ³•æ ¡éªŒï¼ŒåŸºäºå°‘é‡å‚æ•°çš„æ ¡éªŒï¼Œä»¥åç”¨åˆ°å†æ¥è®°å½•</p>
</blockquote>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">èµèµ</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="">
        <p> æ„Ÿè°¢é¼“åŠ± </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
        <div id="lv-container"></div>
        <div class="giscus"></div>
    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/imlgw">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://imlgw.top">Tadow</a></span>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">é„‚ICPå¤‡18011208å·</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




<script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json"},"display":{"superSample":2,"width":160,"height":320,"position":"right","hOffset":0,"vOffset":-70},"mobile":{"show":false,"scale":0.2},"log":false});</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://giscus.app/client.js"
  data-repo="imlgw/imlgw.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkxMzMyMDY4NDg="
  data-category="Announcements"
  data-category-id="DIC_kwDOB_CTQM4CQ7v8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="light"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>



</html>
